(function(){var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r=n(function(t,n){/* Riot v3.7.4, @license MIT */
(function(e,t){t(n)})(e,function(e){"use strict";var t=[];var n={};var r="yield";var i="__global_mixin";var a="riot-";var o=["ref","data-ref"];var s="data-is";var u="if";var l="each";var c="no-reorder";var f="show";var d="hide";var h="key";var p="__riot-events__";var v="string";var m="object";var g="undefined";var y="function";var b="http://www.w3.org/1999/xlink";var x="http://www.w3.org/2000/svg";var w=/^xlink:(\w+)/;var _=typeof window===g?undefined:window;var k=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var C=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var T=/^on/;var S=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var E={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"};var A=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var P=(_&&_.document||{}).documentMode|0;function O(e,t){return[].slice.call((t||document).querySelectorAll(e))}function M(e,t){return(t||document).querySelector(e)}function N(){return document.createDocumentFragment()}function R(){return document.createTextNode("")}function D(e){var t=e.ownerSVGElement;return!!t||t===null}function B(e){return e==="svg"?document.createElementNS(x,e):document.createElement(e)}function L(e,t,n){if(n){var r=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+x+'">'+t+"</svg>","application/xml").documentElement,true);e.appendChild(r)}else{e.innerHTML=t}}function I(e,t){e.style.display=t?"":"none";e.hidden=t?false:true}function F(e,t){e.removeAttribute(t)}function j(e){return Object.keys(e).reduce(function(t,n){return t+" "+n+": "+e[n]+";"},"")}function z(e,t){return e.getAttribute(t)}function H(e,t,n){var r=w.exec(t);if(r&&r[1]){e.setAttributeNS(b,r[1],n)}else{e.setAttribute(t,n)}}function U(e,t,n){e.insertBefore(t,n.parentNode&&n)}function W(e,t){if(!e){return}var n;while(n=S.exec(e)){t(n[1].toLowerCase(),n[2]||n[3]||n[4])}}function V(e,t,n){if(e){var r=t(e,n);var i;if(r===false){return}e=e.firstChild;while(e){i=e.nextSibling;V(e,t,r);e=i}}}var q=Object.freeze({$$:O,$:M,createFrag:N,createDOMPlaceholder:R,isSvg:D,mkEl:B,setInnerHTML:L,toggleVisibility:I,remAttr:F,styleObjectToString:j,getAttr:z,setAttr:H,safeInsert:U,walkAttrs:W,walkNodes:V});var K;var Y;var $={};var G=[];var X=false;if(_){K=function(){var e=B("style");var t=M("style[type=riot]");H(e,"type","text/css");if(t){if(t.id){e.id=t.id}t.parentNode.replaceChild(e,t)}else{document.head.appendChild(e)}return e}();Y=K.styleSheet}var Z={styleNode:K,add:function e(t,n){if(n){$[n]=t}else{G.push(t)}X=true},inject:function e(){if(!_||!X){return}X=false;var t=Object.keys($).map(function(e){return $[e]}).concat(G).join("\n");if(Y){Y.cssText=t}else{K.innerHTML=t}}};var J=function(){var e="[{(,;:?=|&!^~>%*/";var t=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"];var n=t.reduce(function(e,t){return e+t.slice(-1)},"");var r=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/;var i=/[$\w]/;function a(e,t){while(--t>=0&&/\s/.test(e[t])){}return t}function o(o,s){var u=/.*/g;var l=u.lastIndex=s++;var c=u.exec(o)[0].match(r);if(c){var f=l+c[0].length;l=a(o,l);var d=o[l];if(l<0||~e.indexOf(d)){return f}if(d==="."){if(o[l-1]==="."){s=f}}else if(d==="+"||d==="-"){if(o[--l]!==d||(l=a(o,l))<0||!i.test(o[l])){s=f}}else if(~n.indexOf(d)){var h=l+1;while(--l>=0&&i.test(o[l])){}if(~t.indexOf(o.slice(l+1,h))){s=f}}}return s}return o}();var Q=function(e){var t="g",n=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,r=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,i=r.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\"+"x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=r.source+"|"+/(\/)(?![*\/])/.source,u={"(":RegExp("([()])|"+s,t),"[":RegExp("([[\\]])|"+s,t),"{":RegExp("([{}])|"+s,t)},l="{ }";var c=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,t),l,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var f=e,d,h=[],p;function v(e){return e}function m(e,n){if(!n){n=h}return new RegExp(e.source.replace(/{/g,n[2]).replace(/}/g,n[3]),e.global?t:"")}function g(e){if(e===l){return c}var n=e.split(" ");if(n.length!==2||a.test(e)){throw new Error('Unsupported brackets "'+e+'"')}n=n.concat(e.replace(o,"\\").split(" "));n[4]=m(n[1].length>1?/{[\S\s]*?}/:c[4],n);n[5]=m(e.length>3?/\\({|})/g:c[5],n);n[6]=m(c[6],n);n[7]=RegExp("\\\\("+n[3]+")|([[({])|("+n[3]+")|"+s,t);n[8]=e;return n}function y(e){return e instanceof RegExp?d(e):h[e]}y.split=function e(t,n,r){if(!r){r=h}var i=[],a,o,s,l,c=r[6];var f=[];var d="";var p,v;o=s=c.lastIndex=0;while(a=c.exec(t)){v=c.lastIndex;l=a.index;if(o){if(a[2]){var m=a[2];var g=u[m];var y=1;g.lastIndex=v;while(a=g.exec(t)){if(a[1]){if(a[1]===m){++y}else if(!--y){break}}else{g.lastIndex=x(a.index,g.lastIndex,a[2])}}c.lastIndex=y?t.length:g.lastIndex;continue}if(!a[3]){c.lastIndex=x(l,v,a[4]);continue}}if(!a[1]){b(t.slice(s,l));s=c.lastIndex;c=r[6+(o^=1)];c.lastIndex=s}}if(t&&s<t.length){b(t.slice(s))}i.qblocks=f;return i;function b(e){if(d){e=d+e;d=""}if(n||o){i.push(e&&e.replace(r[5],"$1"))}else{i.push(e)}}function x(e,r,i){if(i){r=J(t,e)}if(n&&r>e+2){p="‚Åó"+f.length+"~";f.push(t.slice(e,r));d+=t.slice(s,e)+p;s=r}return r}};y.hasExpr=function e(t){return h[4].test(t)};y.loopKeys=function e(t){var n=t.match(h[9]);return n?{key:n[1],pos:n[2],val:h[0]+n[3].trim()+h[1]}:{val:t.trim()}};y.array=function e(t){return t?g(t):h};function b(e){if((e||(e=l))!==h[8]){h=g(e);d=e===l?v:m;h[9]=d(c[9])}f=e}function x(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:b,get:function(){return f},enumerable:true});p=e;b(t)}Object.defineProperty(y,"settings",{set:x,get:function(){return p}});y.settings=typeof riot!=="undefined"&&riot.settings||{};y.set=b;y.skipRegex=J;y.R_STRINGS=r;y.R_MLCOMMS=n;y.S_QBLOCKS=i;y.S_QBLOCK2=s;return y}();var ee=function(){var e={};function t(t,i){if(!t){return t}return(e[t]||(e[t]=r(t))).call(i,n.bind({data:i,tmpl:t}))}t.hasExpr=Q.hasExpr;t.loopKeys=Q.loopKeys;t.clearCache=function(){e={}};t.errorHandler=null;function n(e,n){e.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id};if(t.errorHandler){t.errorHandler(e)}else if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e.message);console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl);console.log(this.data)}}function r(e){var t=o(e);if(t.slice(0,11)!=="try{return "){t="return "+t}return new Function("E",t+";")}var i=/\u2057/g;var a=/\u2057(\d+)~/g;function o(e){var t=Q.split(e.replace(i,'"'),1);var n=t.qblocks;var r;if(t.length>2||t[0]){var o,s,u=[];for(o=s=0;o<t.length;++o){r=t[o];if(r&&(r=o&1?l(r,1,n):'"'+r.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')){u[s++]=r}}r=s<2?u[0]:"["+u.join(",")+'].join("")'}else{r=l(t[1],0,n)}if(n.length){r=r.replace(a,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})}return r}var s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/;var u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function l(e,t,n){e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var r=[],i=0,a;while(e&&(a=e.match(s))&&!a.index){var o,l,c=/,|([[{(])|$/g;e=RegExp.rightContext;o=a[2]?n[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(l=(a=c.exec(e))[1]){f(l,c)}l=e.slice(0,a.index);e=RegExp.rightContext;r[i++]=h(l,1,o)}e=!i?h(e,t):i>1?"["+r.join(",")+'].join(" ").trim()':r[0]}return e;function f(t,n){var r,i=1,a=u[t];a.lastIndex=n.lastIndex;while(r=a.exec(e)){if(r[0]===t){++i}else if(!--i){break}}n.lastIndex=i?e.length:a.lastIndex}}var c='"in this?this:'+(typeof window!=="object"?"global":"window")+").",f=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function h(e,t,n){var r;e=e.replace(f,function(e,t,n,i,a){if(n){i=r?0:i+e.length;if(n!=="this"&&n!=="global"&&n!=="window"){e=t+'("'+n+c+n;if(i){r=(a=a[i])==="."||a==="("||a==="["}}else if(i){r=!d.test(a.slice(i))}}return e});if(r){e="try{return "+e+"}catch(e){E(e,this)}"}if(n){e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""'}else if(t){e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}t.version=Q.version="v3.0.8";return t}();var te=function(e){e=e||{};var t={},n=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(n,r){if(typeof r=="function"){(t[n]=t[n]||[]).push(r)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(n,r){if(n=="*"&&!r){t={}}else{if(r){var i=t[n];for(var a=0,o;o=i&&i[a];++a){if(o==r){i.splice(a--,1)}}}else{delete t[n]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)},enumerable:false,writable:false,configurable:false},trigger:{value:function(r){var i=arguments;var a=arguments.length-1,o=new Array(a),s,u,l;for(l=0;l<a;l++){o[l]=i[l+1]}s=n.call(t[r]||[],0);for(l=0;u=s[l];++l){u.apply(e,o)}if(t["*"]&&r!="*"){e.trigger.apply(e,["*",r].concat(o))}return e},enumerable:false,writable:false,configurable:false}});return e};function ne(e){return A.test(e)}function re(e){return typeof e===y}function ie(e){return e&&typeof e===m}function ae(e){return typeof e===g}function oe(e){return typeof e===v}function se(e){return ue(e)||e===""}function ue(e){return ae(e)||e===null}function le(e){return Array.isArray(e)||e instanceof Array}function ce(e,t){var n=ye(e,t);return ae(e[t])||n&&n.writable}var fe=Object.freeze({isBoolAttr:ne,isFunction:re,isObject:ie,isUndefined:ae,isString:oe,isBlank:se,isNil:ue,isArray:le,isWritable:ce});function de(e,t){var n=e?e.length:0;var r=0;for(;r<n;r++){t(e[r],r)}return e}function he(e,t){return e.indexOf(t)!==-1}function pe(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function ve(e,t){return e.slice(0,t.length)===t}function me(e,t,n,r){Object.defineProperty(e,t,be({value:n,enumerable:false,writable:false,configurable:true},r));return e}var ge=function(){var e=-1;return function(){return++e}}();var ye=function(e,t){return Object.getOwnPropertyDescriptor(e,t)};function be(e){var t;var n=1;var r=arguments;var i=r.length;for(;n<i;n++){if(t=r[n]){for(var a in t){if(ce(e,a)){e[a]=t[a]}}}}return e}var xe=Object.freeze({each:de,contains:he,toCamel:pe,startsWith:ve,defineProperty:me,uid:ge,getPropDescriptor:ye,extend:be});var we=be(Object.create(Q.settings),{skipAnonymousTags:true,autoUpdate:true});function _e(e,t,n){var r=this.__.parent;var i=this.__.item;if(!i){while(r&&!i){i=r.__.item;r=r.__.parent}}if(ce(n,"currentTarget")){n.currentTarget=e}if(ce(n,"target")){n.target=n.srcElement}if(ce(n,"which")){n.which=n.charCode||n.keyCode}n.item=i;t.call(this,n);if(!we.autoUpdate){return}if(!n.preventUpdate){var a=mt(this);if(a.isMounted){a.update()}}}function ke(e,t,n,r){var i;var a=_e.bind(r,n,t);n[e]=null;i=e.replace(T,"");if(!he(r.__.listeners,n)){r.__.listeners.push(n)}if(!n[p]){n[p]={}}if(n[p][e]){n.removeEventListener(i,n[p][e])}n[p][e]=a;n.addEventListener(i,a,false)}function Ce(e,t,r){var i=e.tag||e.dom._tag;var a;var o=i?i.__:{};var s=o.head;var u=e.dom.tagName==="VIRTUAL";if(i&&e.tagName===r){i.update();return}if(i){if(u){a=R();s.parentNode.insertBefore(a,s)}i.unmount(true)}if(!oe(r)){return}e.impl=n[r];if(!e.impl){return}e.tag=i=vt(e.impl,{root:e.dom,parent:t,tagName:r},e.dom.innerHTML,t);de(e.attrs,function(e){return H(i.root,e.name,e.value)});e.tagName=r;i.mount();if(u){_t(i,a||i.root)}t.__.onUnmount=function(){var e=i.opts.dataIs;xt(i.parent.tags,e,i);xt(i.__.parent.tags,e,i);i.unmount()}}function Te(e){if(!e){return null}e=e.replace(a,"");if(E[e]){e=E[e]}return e}function Se(e){if(this.root&&z(this.root,"virtualized")){return}var t=e.dom;var n=Te(e.attr);var r=he([f,d],n);var i=e.root&&e.root.tagName==="VIRTUAL";var a=this.__;var o=a.isAnonymous;var s=t&&(e.parent||t.parentNode);var u=n==="style";var l=n==="class";var c;if(e._riot_id){if(e.__.wasCreated){e.update()}else{e.mount();if(i){_t(e,e.root)}}return}if(e.update){return e.update()}var h=r&&!o?Ct.call(this):this;c=ee(e.expr,h);var p=!se(c);var v=ie(c);if(v){if(l){c=ee(JSON.stringify(c),this)}else if(u){c=j(c)}}if(e.attr&&(!e.wasParsedOnce||!p||c===false)){F(t,z(t,e.attr)?e.attr:n)}if(e.bool){c=c?n:false}if(e.isRtag){return Ce(e,this,c)}if(e.wasParsedOnce&&e.value===c){return}e.value=c;e.wasParsedOnce=true;if(v&&!l&&!u&&!r){return}if(!p){c=""}if(!n){c+="";if(s){e.parent=s;if(s.tagName==="TEXTAREA"){s.value=c;if(!P){t.nodeValue=c}}else{t.nodeValue=c}}return}if(re(c)){ke(n,c,t,this)}else if(r){I(t,n===d?!c:c)}else{if(e.bool){t[n]=c}if(n==="value"&&t.value!==c){t.value=c}else if(p&&c!==false){H(t,n,c)}if(u&&t.hidden){I(t,false)}}}function Ee(e){de(e,Se.bind(this))}var Ae={init:function e(t,n,r){F(t,u);this.tag=n;this.expr=r;this.stub=R();this.pristine=t;var i=t.parentNode;i.insertBefore(this.stub,t);i.removeChild(t);return this},update:function e(){this.value=ee(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=je.apply(this.tag,[this.current,true])}else if(!this.value&&this.current){gt(this.expressions);if(this.current._tag){this.current._tag.unmount()}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current)}this.current=null;this.expressions=[]}if(this.value){Ee.call(this.tag,this.expressions)}},unmount:function e(){gt(this.expressions||[])}};var Pe={init:function e(t,n,r,i){this.dom=t;this.attr=r;this.rawValue=i;this.parent=n;this.hasExp=ee.hasExpr(i);return this},update:function e(){var t=this.value;var n=this.parent&&mt(this.parent);var r=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?ee(this.rawValue,this.parent):this.rawValue;if(!se(t)&&n){xt(n.refs,t,r)}if(!se(this.value)&&oe(this.value)){if(n){bt(n.refs,this.value,r,null,this.parent.__.index)}if(this.value!==t){H(this.dom,this.attr,this.value)}}else{F(this.dom,this.attr)}if(!this.dom.__ref){this.dom.__ref=r}},unmount:function e(){var t=this.tag||this.dom;var n=this.parent&&mt(this.parent);if(!se(this.value)&&n){xt(n.refs,this.value,t)}}};function Oe(e,t,n,r){var i=r?Object.create(r):{};i[e.key]=t;if(e.pos){i[e.pos]=n}return i}function Me(e,t){var n=t.length;var r=e.length;while(n>r){n--;Ne.apply(t[n],[t,n])}}function Ne(e,t){e.splice(t,1);this.unmount();xt(this.parent,this,this.__.tagName,true)}function Re(e){var t=this;de(Object.keys(this.tags),function(n){pt.apply(t.tags[n],[n,e])})}function De(e,t,n){if(n){Tt.apply(this,[e,t])}else{U(e,this.root,t.root)}}function Be(e,t,n){if(n){kt.apply(this,[e,t])}else{U(e,this.root,t.root)}}function Le(e,t){if(t){kt.call(this,e)}else{e.appendChild(this.root)}}function Ie(e,t,n,r){if(e){return r?ee(e,n):t[e]}return t}function Fe(e,t,r){var i=typeof z(e,c)!==v||F(e,c);var a=z(e,h);var o=a?ee.hasExpr(a):false;var s=yt(e);var f=n[s];var d=e.parentNode;var p=R();var g=ht(e);var y=z(e,u);var b=[];var x=true;var w=e.innerHTML;var _=!n[s];var k=e.tagName==="VIRTUAL";var C=[];var T;F(e,l);F(e,h);r=ee.loopKeys(r);r.isLoop=true;if(y){F(e,u)}d.insertBefore(p,e);d.removeChild(e);r.update=function n(){r.value=ee(r.val,t);var u=r.value;var l=N();var c=!le(u)&&!oe(u);var d=p.parentNode;var h=[];if(!d){return}if(c){T=u||false;u=T?Object.keys(u).map(function(e){return Oe(r,u[e],e)}):[]}else{T=false}if(y){u=u.filter(function(e,n){if(r.key&&!c){return!!ee(y,Oe(r,e,n,t))}return!!ee(y,be(Object.create(t),e))})}de(u,function(n,c){var p=!T&&r.key?Oe(r,n,c):n;var v=Ie(a,n,p,o);var y=i&&typeof n===m&&!T;var S=C.indexOf(v);var E=S===-1;var A=!E&&y?S:c;var P=b[A];var O=c>=C.length;var M=y&&E||!y&&!P;if(M){P=dt(f,{parent:t,isLoop:x,isAnonymous:_,tagName:s,root:e.cloneNode(_),item:p,index:c},w);P.mount();if(O){Le.apply(P,[l||d,k])}else{Be.apply(P,[d,b[c],k])}if(!O){C.splice(c,0,p)}b.splice(c,0,P);if(g){bt(t.tags,s,P,true)}}else if(A!==c&&y){if(a||he(u,C[A])){De.apply(P,[d,b[c],k]);b.splice(c,0,b.splice(A,1)[0]);C.splice(c,0,C.splice(A,1)[0])}if(r.pos){P[r.pos]=c}if(!g&&P.tags){Re.call(P,c)}}P.__.item=p;P.__.index=c;P.__.parent=t;h[c]=v;if(!M){P.update(p)}});Me(u,b);C=h.slice();d.insertBefore(l,p)};r.unmount=function(){de(b,function(e){e.unmount()})};return r}function je(e,t){var n=this;var r=[];V(e,function(i){var a=i.nodeType;var o;var c;if(!t&&i===e){return}if(a===3&&i.parentNode.tagName!=="STYLE"&&ee.hasExpr(i.nodeValue)){r.push({dom:i,expr:i.nodeValue})}if(a!==1){return}var f=i.tagName==="VIRTUAL";if(o=z(i,l)){if(f){H(i,"loopVirtual",true)}r.push(Fe(i,n,o));return false}if(o=z(i,u)){r.push(Object.create(Ae).init(i,n,o));return false}if(o=z(i,s)){if(ee.hasExpr(o)){r.push({isRtag:true,expr:o,dom:i,attrs:[].slice.call(i.attributes)});return false}}c=ht(i);if(f){if(z(i,"virtualized")){i.parentElement.removeChild(i)}if(!c&&!z(i,"virtualized")&&!z(i,"loopVirtual")){c={tmpl:i.outerHTML}}}if(c&&(i!==e||t)){if(f&&!z(i,s)){H(i,"virtualized",true);var d=dt({tmpl:i.outerHTML},{root:i,parent:n},i.innerHTML);r.push(d)}else{r.push(vt(c,{root:i,parent:n},i.innerHTML,n));return false}}ze.apply(n,[i,i.attributes,function(e,t){if(!t){return}r.push(t)}])});return r}function ze(e,t,n){var i=this;de(t,function(t){if(!t){return false}var a=t.name;var s=ne(a);var u;if(he(o,a)&&e.tagName.toLowerCase()!==r){u=Object.create(Pe).init(e,i,a,t.value)}else if(ee.hasExpr(t.value)){u={dom:e,expr:t.value,attr:a,bool:s}}n(t,u)})}var He=/<yield\b/i;var Ue=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi;var We=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi;var Ve=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi;var qe={tr:"tbody",th:"tr",td:"tr",col:"colgroup"};var Ke=P&&P<10?k:C;var Ye="div";var $e="svg";function Ge(e,t,n){var r=n[0]==="o",i=r?"select>":"table>";e.innerHTML="<"+i+t.trim()+"</"+i;i=e.firstChild;if(r){i.selectedIndex=-1}else{var a=qe[n];if(a&&i.childElementCount===1){i=M(a,i)}}return i}function Xe(e,t){if(!He.test(e)){return e}var n={};t=t&&t.replace(We,function(e,t,r){n[t]=n[t]||r;return""}).trim();return e.replace(Ve,function(e,t,r){return n[t]||r||""}).replace(Ue,function(e,n){return t||n||""})}function Ze(e,t,n){var r=e&&e.match(/^\s*<([-\w]+)/);var i=r&&r[1].toLowerCase();var a=B(n?$e:Ye);e=Xe(e,t);if(Ke.test(i)){a=Ge(a,e,i)}else{L(a,e,n)}return a}function Je(e,t){var r=this;var i=r.name;var a=r.tmpl;var o=r.css;var s=r.attrs;var u=r.onCreate;if(!n[i]){Qe(i,a,o,s,u);n[i].class=this.constructor}wt(e,i,t,this);if(o){Z.inject()}return this}function Qe(e,t,r,i,a){if(re(i)){a=i;if(/^[\w-]+\s?=/.test(r)){i=r;r=""}else{i=""}}if(r){if(re(r)){a=r}else{Z.add(r)}}e=e.toLowerCase();n[e]={name:e,tmpl:t,attrs:i,fn:a};return e}function et(e,t,r,i,a){if(r){Z.add(r,e)}n[e]={name:e,tmpl:t,attrs:i,fn:a};return e}function tt(e,t,n){var r=[];var i,a;function o(e){if(e.tagName){var i=z(e,s),a;if(t&&i!==t){i=t;H(e,s,t)}a=wt(e,i||e.tagName.toLowerCase(),n);if(a){r.push(a)}}else if(e.length){de(e,o)}}Z.inject();if(ie(t)){n=t;t=0}if(oe(e)){e=e==="*"?a=St():e+St(e.split(/, */));i=e?O(e):[]}else{i=e}if(t==="*"){t=a||St();if(i.tagName){i=O(t,i)}else{var u=[];de(i,function(e){return u.push(O(t,e))});i=u}t=0}o(i);return r}var nt={};var rt=nt[i]={};var it=0;function at(e,t,n){if(ie(e)){at("__"+it+++"__",e,true);return}var r=n?rt:nt;if(!t){if(ae(r[e])){throw new Error("Unregistered mixin: "+e)}return r[e]}r[e]=re(t)?be(t.prototype,r[e]||{})&&t:be(r[e]||{},t)}function ot(){return de(t,function(e){return e.update()})}function st(e){n[e]=null}var ut="v3.7.4";var lt=Object.freeze({Tag:Je,tag:Qe,tag2:et,mount:tt,mixin:at,update:ot,unregister:st,version:ut});function ct(e,t,n,r,i){if(e&&n){return}var o=e?Ct.call(this):t||this;de(i,function(e){if(e.expr){Se.call(o,e.expr)}r[pe(e.name).replace(a,"")]=e.expr?e.expr.value:e.value})}function ft(e){var t=this.__;var n=t.isAnonymous;me(this,"isMounted",e);if(!n){if(e){this.trigger("mount")}else{this.trigger("unmount");this.off("*");this.__.wasCreated=false}}}function dt(e,n,r){if(e===void 0){e={}}if(n===void 0){n={}}var o=n.context||{};var s=be({},n.opts);var u=n.parent;var l=n.isLoop;var c=!!n.isAnonymous;var f=we.skipAnonymousTags&&c;var d=n.item;var h=n.index;var v=[];var m=[];var g=[];var y=n.root;var b=n.tagName||yt(y);var x=b==="virtual";var w=!x&&!e.tmpl;var _;if(!f){te(o)}if(e.name&&y._tag){y._tag.unmount(true)}me(o,"isMounted",false);me(o,"__",{isAnonymous:c,instAttrs:v,innerHTML:r,tagName:b,index:h,isLoop:l,isInline:w,listeners:[],virts:[],wasCreated:false,tail:null,head:null,parent:null,item:null});me(o,"_riot_id",ge());me(o,"root",y);be(o,{opts:s},d);me(o,"parent",u||null);me(o,"tags",{});me(o,"refs",{});if(w||l&&c){_=y}else{if(!x){y.innerHTML=""}_=Ze(e.tmpl,r,D(y))}me(o,"update",function e(t){var n={};var r=o.isMounted&&!f;if(c&&u){be(o,u)}be(o,t);ct.apply(o,[l,u,c,n,v]);if(r&&o.isMounted&&re(o.shouldUpdate)&&!o.shouldUpdate(t,n)){return o}be(s,n);if(r){o.trigger("update",t)}Ee.call(o,g);if(r){o.trigger("updated")}return o});me(o,"mixin",function e(){de(arguments,function(e){var t;var n;var r=[];var i=["init","__proto__"];e=oe(e)?at(e):e;if(re(e)){t=new e}else{t=e}var a=Object.getPrototypeOf(t);do{r=r.concat(Object.getOwnPropertyNames(n||t))}while(n=Object.getPrototypeOf(n||t));de(r,function(e){if(!he(i,e)){var n=ye(t,e)||ye(a,e);var r=n&&(n.get||n.set);if(!o.hasOwnProperty(e)&&r){Object.defineProperty(o,e,n)}else{o[e]=re(t[e])?t[e].bind(o):t[e]}}});if(t.init){t.init.bind(o)(s)}});return o});me(o,"mount",function t(){y._tag=o;ze.apply(u,[y,y.attributes,function(e,t){if(!c&&Pe.isPrototypeOf(t)){t.tag=o}e.expr=t;v.push(e)}]);W(e.attrs,function(e,t){m.push({name:e,value:t})});ze.apply(o,[y,m,function(e,t){if(t){g.push(t)}else{H(y,e.name,e.value)}}]);ct.apply(o,[l,u,c,s,v]);var n=at(i);if(n&&!f){for(var r in n){if(n.hasOwnProperty(r)){o.mixin(n[r])}}}if(e.fn){e.fn.call(o,s)}if(!f){o.trigger("before-mount")}de(je.apply(o,[_,c]),function(e){return g.push(e)});o.update(d);if(!c&&!w){while(_.firstChild){y.appendChild(_.firstChild)}}me(o,"root",y);if(!f&&o.parent){var a=mt(o.parent);a.one(!a.isMounted?"mount":"updated",function(){ft.call(o,true)})}else{ft.call(o,true)}o.__.wasCreated=true;return o});me(o,"unmount",function n(r){var i=o.root;var s=i.parentNode;var l=t.indexOf(o);if(!f){o.trigger("before-unmount")}W(e.attrs,function(e){if(ve(e,a)){e=e.slice(a.length)}F(y,e)});o.__.listeners.forEach(function(e){Object.keys(e[p]).forEach(function(t){e.removeEventListener(t,e[p][t])})});if(l!==-1){t.splice(l,1)}if(u&&!c){var d=mt(u);if(x){Object.keys(o.tags).forEach(function(e){return xt(d.tags,e,o.tags[e])})}else{xt(d.tags,b,o)}}if(o.__.virts){de(o.__.virts,function(e){if(e.parentNode){e.parentNode.removeChild(e)}})}gt(g);de(v,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()});if(r){L(i,"")}else if(s){s.removeChild(i)}if(o.__.onUnmount){o.__.onUnmount()}if(!o.isMounted){ft.call(o,true)}ft.call(o,false);delete o.root._tag;return o});return o}function ht(e){return e.tagName&&n[z(e,s)||z(e,s)||e.tagName.toLowerCase()]}function pt(e,t){var n=this.parent;var r;if(!n){return}r=n.tags[e];if(le(r)){r.splice(t,0,r.splice(r.indexOf(this),1)[0])}else{bt(n.tags,e,this)}}function vt(e,t,n,r){var i=dt(e,t,n);var a=t.tagName||yt(t.root,true);var o=mt(r);me(i,"parent",o);i.__.parent=r;bt(o.tags,a,i);if(o!==r){bt(r.tags,a,i)}return i}function mt(e){var t=e;while(t.__.isAnonymous){if(!t.parent){break}t=t.parent}return t}function gt(e){de(e,function(e){if(e.unmount){e.unmount(true)}else if(e.tagName){e.tag.unmount(true)}else if(e.unmount){e.unmount()}})}function yt(e,t){var n=ht(e);var r=!t&&z(e,s);return r&&!ee.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase()}function bt(e,t,n,r,i){var a=e[t];var o=le(a);var s=!ae(i);if(a&&a===n){return}if(!a&&r){e[t]=[n]}else if(!a){e[t]=n}else{if(o){var u=a.indexOf(n);if(u===i){return}if(u!==-1){a.splice(u,1)}if(s){a.splice(i,0,n)}else{a.push(n)}}else{e[t]=[a,n]}}}function xt(e,t,n,r){if(le(e[t])){var i=e[t].indexOf(n);if(i!==-1){e[t].splice(i,1)}if(!e[t].length){delete e[t]}else if(e[t].length===1&&!r){e[t]=e[t][0]}}else if(e[t]===n){delete e[t]}}function wt(e,r,i,a){var o=n[r];var s=n[r].class;var u=a||(s?Object.create(s.prototype):{});var l=e._innerHTML=e._innerHTML||e.innerHTML;var c=be({root:e,opts:i,context:u},{parent:i?i.parent:null});var f;if(o&&e){f=dt(o,c,l)}if(f&&f.mount){f.mount(true);if(!he(t,f)){t.push(f)}}return f}function _t(e,t){var n=N();kt.call(e,n);t.parentNode.replaceChild(n,t)}function kt(e,t){var n=this;var r=R();var i=R();var a=N();var o;var s;this.root.insertBefore(r,this.root.firstChild);this.root.appendChild(i);this.__.head=s=r;this.__.tail=i;while(s){o=s.nextSibling;a.appendChild(s);n.__.virts.push(s);s=o}if(t){e.insertBefore(a,t.__.head)}else{e.appendChild(a)}}function Ct(){if(this.parent){return be(Object.create(this),this.parent)}return this}function Tt(e,t){var n=this;var r=this.__.head;var i;var a=N();while(r){i=r.nextSibling;a.appendChild(r);r=i;if(r===n.__.tail){a.appendChild(r);e.insertBefore(a,t.__.head);break}}}function St(e){if(!e){var t=Object.keys(n);return t+St(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var n=t.trim().toLowerCase();return e+",["+s+'="'+n+'"]'},"")}var Et=Object.freeze({getTag:ht,moveChildTag:pt,initChildTag:vt,getImmediateCustomParentTag:mt,unmountAll:gt,getTagName:yt,arrayishAdd:bt,arrayishRemove:xt,mountTo:wt,makeReplaceVirtual:_t,makeVirtual:kt,inheritParentProps:Ct,moveVirtual:Tt,selectTags:St});var At=we;var Pt={tmpl:ee,brackets:Q,styleManager:Z,vdom:t,styleNode:Z.styleNode,dom:q,check:fe,misc:xe,tags:Et};var Ot=Je;var Mt=Qe;var Nt=et;var Rt=tt;var Dt=at;var Bt=ot;var Lt=st;var It=ut;var Ft=te;var jt=be({},lt,{observable:te,settings:At,util:Pt});e.settings=At;e.util=Pt;e.Tag=Ot;e.tag=Mt;e.tag2=Nt;e.mount=Rt;e.mixin=Dt;e.update=Bt;e.unregister=Lt;e.version=It;e.observable=Ft;e["default"]=jt;Object.defineProperty(e,"__esModule",{value:true})})});var i=t(r);var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var u={type:"logger",log:function e(t){this.output("log",t)},warn:function e(t){this.output("warn",t)},error:function e(t){this.output("error",t)},output:function e(t,n){var r;if(console&&console[t]){(r=console)[t].apply(r,s(n))}}};var l=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};o(this,e);this.init(t,n)}e.prototype.init=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=n.prefix||"i18next:";this.logger=t||u;this.options=n;this.debug=n.debug};e.prototype.setDebug=function e(t){this.debug=t};e.prototype.log=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"log","",true)};e.prototype.warn=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"warn","",true)};e.prototype.error=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"error","")};e.prototype.deprecate=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return this.forward(n,"warn","WARNING DEPRECATED: ",true)};e.prototype.forward=function e(t,n,r,i){if(i&&!this.debug){return null}if(typeof t[0]==="string"){t[0]=""+r+this.prefix+" "+t[0]}return this.logger[n](t)};e.prototype.create=function t(n){return new e(this.logger,a({prefix:this.prefix+":"+n+":"},this.options))};return e}();var c=new l;function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function e(){f(this,e);this.observers={}}e.prototype.on=function e(t,n){var r=this;t.split(" ").forEach(function(e){r.observers[e]=r.observers[e]||[];r.observers[e].push(n)})};e.prototype.off=function e(t,n){var r=this;if(!this.observers[t]){return}this.observers[t].forEach(function(){if(!n){delete r.observers[t]}else{var e=r.observers[t].indexOf(n);if(e>-1){r.observers[t].splice(e,1)}}})};e.prototype.emit=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}if(this.observers[t]){var a=[].concat(this.observers[t]);a.forEach(function(e){e.apply(undefined,r)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(e){var n;e.apply(e,(n=[t]).concat.apply(n,r))})}};return e}();function h(e){if(e==null){return""}return""+e}function p(e,t,n){e.forEach(function(e){if(t[e]){n[e]=t[e]}})}function v(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||typeof e==="string"}var a=typeof t!=="string"?[].concat(t):t.split(".");while(a.length>1){if(i()){return{}}var o=r(a.shift());if(!e[o]&&n){e[o]=new n}e=e[o]}if(i()){return{}}return{obj:e,k:r(a.shift())}}function m(e,t,n){var r=v(e,t,Object),i=r.obj,a=r.k;i[a]=n}function g(e,t,n,r){var i=v(e,t,Object),a=i.obj,o=i.k;a[o]=a[o]||[];if(r){a[o]=a[o].concat(n)}if(!r){a[o].push(n)}}function y(e,t){var n=v(e,t),r=n.obj,i=n.k;if(!r){return undefined}return r[i]}function b(e,t,n){for(var r in t){if(r in e){if(typeof e[r]==="string"||e[r]instanceof String||typeof t[r]==="string"||t[r]instanceof String){if(n){e[r]=t[r]}}else{b(e[r],t[r],n)}}else{e[r]=t[r]}}return e}function x(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function _(e){if(typeof e==="string"){return e.replace(/[&<>"'\/]/g,function(e){return w[e]})}return e}var k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function C(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):C(e,t)}}var A=function(e){E(t,e);function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};T(this,t);var i=S(this,e.call(this));i.data=n||{};i.options=r;return i}t.prototype.addNamespaces=function e(t){if(this.options.ns.indexOf(t)<0){this.options.ns.push(t)}};t.prototype.removeNamespaces=function e(t){var n=this.options.ns.indexOf(t);if(n>-1){this.options.ns.splice(n,1)}};t.prototype.getResource=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var a=i.keySeparator||this.options.keySeparator;if(a===undefined){a="."}var o=[t,n];if(r&&typeof r!=="string"){o=o.concat(r)}if(r&&typeof r==="string"){o=o.concat(a?r.split(a):r)}if(t.indexOf(".")>-1){o=t.split(".")}return y(this.data,o)};t.prototype.addResource=function e(t,n,r,i){var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:false};var o=this.options.keySeparator;if(o===undefined){o="."}var s=[t,n];if(r){s=s.concat(o?r.split(o):r)}if(t.indexOf(".")>-1){s=t.split(".");i=n;n=s[1]}this.addNamespaces(n);m(this.data,s,i);if(!a.silent){this.emit("added",t,n,r,i)}};t.prototype.addResources=function e(t,n,r){for(var i in r){if(typeof r[i]==="string"){this.addResource(t,n,i,r[i],{silent:true})}}this.emit("added",t,n,r)};t.prototype.addResourceBundle=function e(t,n,r,i,a){var o=[t,n];if(t.indexOf(".")>-1){o=t.split(".");i=r;r=n;n=o[1]}this.addNamespaces(n);var s=y(this.data,o)||{};if(i){b(s,r,a)}else{s=k({},s,r)}m(this.data,o,s);this.emit("added",t,n,r)};t.prototype.removeResourceBundle=function e(t,n){if(this.hasResourceBundle(t,n)){delete this.data[t][n]}this.removeNamespaces(n);this.emit("removed",t,n)};t.prototype.hasResourceBundle=function e(t,n){return this.getResource(t,n)!==undefined};t.prototype.getResourceBundle=function e(t,n){if(!n){n=this.options.defaultNS}if(this.options.compatibilityAPI==="v1"){return k({},this.getResource(t,n))}return this.getResource(t,n)};t.prototype.toJSON=function e(){return this.data};return t}(d);var P={processors:{},addPostProcessor:function e(t){this.processors[t.name]=t},handle:function e(t,n,r,i,a){var o=this;t.forEach(function(e){if(o.processors[e]){n=o.processors[e].process(n,r,i,a)}});return n}};var O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var M=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function N(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function R(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function D(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):N(e,t)}}var L=function(e){B(t,e);function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};R(this,t);var i=D(this,e.call(this));p(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,i);i.options=r;i.logger=c.create("translator");return i}t.prototype.changeLanguage=function e(t){if(t){this.language=t}};t.prototype.exists=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}};var r=this.resolve(t,n);return r&&r.res!==undefined};t.prototype.extractFromKey=function e(t,n){var r=n.nsSeparator||this.options.nsSeparator;if(r===undefined){r=":"}var i=n.keySeparator||this.options.keySeparator||".";var a=n.ns||this.options.defaultNS;if(r&&t.indexOf(r)>-1){var o=t.split(r);if(r!==i||r===i&&this.options.ns.indexOf(o[0])>-1){a=o.shift()}t=o.join(i)}if(typeof a==="string"){a=[a]}return{key:t,namespaces:a}};t.prototype.translate=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if((typeof n==="undefined"?"undefined":M(n))!=="object"){n=this.options.overloadTranslationOptionHandler(arguments)}if(t===undefined||t===null||t===""){return""}if(typeof t==="number"){t=String(t)}if(typeof t==="string"){t=[t]}var r=n.keySeparator||this.options.keySeparator||".";var i=this.extractFromKey(t[t.length-1],n),a=i.key,o=i.namespaces;var s=o[o.length-1];var u=n.lng||this.language;var l=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(l){var c=n.nsSeparator||this.options.nsSeparator;return s+c+a}return a}var f=this.resolve(t,n);var d=f&&f.res;var h=f&&f.usedKey||a;var p=Object.prototype.toString.apply(d);var v=["[object Number]","[object Function]","[object RegExp]"];var m=n.joinArrays!==undefined?n.joinArrays:this.options.joinArrays;if(d&&typeof d!=="string"&&v.indexOf(p)<0&&!(m&&p==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.logger.warn("accessing an object - but returnObjects options is not enabled!");return this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,n):"key '"+a+" ("+this.language+")' returned an object instead of string."}if(n.keySeparator||this.options.keySeparator){var g=p==="[object Array]"?[]:{};for(var y in d){if(Object.prototype.hasOwnProperty.call(d,y)){g[y]=this.translate(""+h+r+y,O({},n,{joinArrays:false,ns:o}))}}d=g}}else if(m&&p==="[object Array]"){d=d.join(m);if(d){d=this.extendTranslation(d,t,n)}}else{var b=false;var x=false;if(!this.isValidLookup(d)&&n.defaultValue!==undefined){b=true;d=n.defaultValue}if(!this.isValidLookup(d)){x=true;d=a}if(x||b){this.logger.log("missingKey",u,s,a,d);var w=[];var _=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_&&_[0]){for(var k=0;k<_.length;k++){w.push(_[k])}}else if(this.options.saveMissingTo==="all"){w=this.languageUtils.toResolveHierarchy(n.lng||this.language)}else{w.push(n.lng||this.language)}if(this.options.saveMissing){if(this.options.missingKeyHandler){this.options.missingKeyHandler(w,s,a,d)}else if(this.backendConnector&&this.backendConnector.saveMissing){this.backendConnector.saveMissing(w,s,a,d)}}this.emit("missingKey",w,s,a,d)}d=this.extendTranslation(d,t,n);if(x&&d===a&&this.options.appendNamespaceToMissingKey){d=s+":"+a}if(x&&this.options.parseMissingKeyHandler){d=this.options.parseMissingKeyHandler(d)}}return d};t.prototype.extendTranslation=function e(t,n,r){var i=this;if(r.interpolation){this.interpolator.init(O({},r,{interpolation:O({},this.options.interpolation,r.interpolation)}))}var a=r.replace&&typeof r.replace!=="string"?r.replace:r;if(this.options.interpolation.defaultVariables){a=O({},this.options.interpolation.defaultVariables,a)}t=this.interpolator.interpolate(t,a,r.lng||this.language);if(r.nest!==false){t=this.interpolator.nest(t,function(){return i.translate.apply(i,arguments)},r)}if(r.interpolation){this.interpolator.reset()}var o=r.postProcess||this.options.postProcess;var s=typeof o==="string"?[o]:o;if(t!==undefined&&s&&s.length&&r.applyPostProcessor!==false){t=P.handle(s,t,n,r,this)}return t};t.prototype.resolve=function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=void 0;var a=void 0;if(typeof t==="string"){t=[t]}t.forEach(function(e){if(n.isValidLookup(i)){return}var t=n.extractFromKey(e,r);var o=t.key;a=o;var s=t.namespaces;if(n.options.fallbackNS){s=s.concat(n.options.fallbackNS)}var u=r.count!==undefined&&typeof r.count!=="string";var l=r.context!==undefined&&typeof r.context==="string"&&r.context!=="";var c=r.lngs?r.lngs:n.languageUtils.toResolveHierarchy(r.lng||n.language);s.forEach(function(e){if(n.isValidLookup(i)){return}c.forEach(function(t){if(n.isValidLookup(i)){return}var a=o;var s=[a];var c=void 0;if(u){c=n.pluralResolver.getSuffix(t,r.count)}if(u&&l){s.push(a+c)}if(l){s.push(a+=""+n.options.contextSeparator+r.context)}if(u){s.push(a+=c)}var f=void 0;while(f=s.pop()){if(!n.isValidLookup(i)){i=n.getResource(t,e,f,r)}}})})});return{res:i,usedKey:a}};t.prototype.isValidLookup=function e(t){return t!==undefined&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")};t.prototype.getResource=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return this.resourceStore.getResource(t,n,r,i)};return t}(d);function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function F(e){return e.charAt(0).toUpperCase()+e.slice(1)}var j=function(){function e(t){I(this,e);this.options=t;this.whitelist=this.options.whitelist||false;this.logger=c.create("languageUtils")}e.prototype.getScriptPartFromCode=function e(t){if(!t||t.indexOf("-")<0){return null}var n=t.split("-");if(n.length===2){return null}n.pop();return this.formatLanguageCode(n.join("-"))};e.prototype.getLanguagePartFromCode=function e(t){if(!t||t.indexOf("-")<0){return t}var n=t.split("-");return this.formatLanguageCode(n[0])};e.prototype.formatLanguageCode=function e(t){if(typeof t==="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"];var r=t.split("-");if(this.options.lowerCaseLng){r=r.map(function(e){return e.toLowerCase()})}else if(r.length===2){r[0]=r[0].toLowerCase();r[1]=r[1].toUpperCase();if(n.indexOf(r[1].toLowerCase())>-1){r[1]=F(r[1].toLowerCase())}}else if(r.length===3){r[0]=r[0].toLowerCase();if(r[1].length===2){r[1]=r[1].toUpperCase()}if(r[0]!=="sgn"&&r[2].length===2){r[2]=r[2].toUpperCase()}if(n.indexOf(r[1].toLowerCase())>-1){r[1]=F(r[1].toLowerCase())}if(n.indexOf(r[2].toLowerCase())>-1){r[2]=F(r[2].toLowerCase())}}return r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t};e.prototype.isWhitelisted=function e(t){if(this.options.load==="languageOnly"||this.options.nonExplicitWhitelist){t=this.getLanguagePartFromCode(t)}return!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1};e.prototype.getFallbackCodes=function e(t,n){if(!t){return[]}if(typeof t==="string"){t=[t]}if(Object.prototype.toString.apply(t)==="[object Array]"){return t}if(!n){return t.default||[]}var r=t[n];if(!r){r=t[this.getScriptPartFromCode(n)]}if(!r){r=t[this.formatLanguageCode(n)]}if(!r){r=t.default}return r||[]};e.prototype.toResolveHierarchy=function e(t,n){var r=this;var i=this.getFallbackCodes(n||this.options.fallbackLng||[],t);var a=[];var o=function e(t){if(!t){return}if(r.isWhitelisted(t)){a.push(t)}else{r.logger.warn("rejecting non-whitelisted language code: "+t)}};if(typeof t==="string"&&t.indexOf("-")>-1){if(this.options.load!=="languageOnly"){o(this.formatLanguageCode(t))}if(this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"){o(this.getScriptPartFromCode(t))}if(this.options.load!=="currentOnly"){o(this.getLanguagePartFromCode(t))}}else if(typeof t==="string"){o(this.formatLanguageCode(t))}i.forEach(function(e){if(a.indexOf(e)<0){o(r.formatLanguageCode(e))}});return a};return e}();function z(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var H=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}];var U={1:function e(t){return Number(t>1)},2:function e(t){return Number(t!=1)},3:function e(t){return 0},4:function e(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function e(t){return Number(t===0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function e(t){return Number(t==1?0:t>=2&&t<=4?1:2)},7:function e(t){return Number(t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function e(t){return Number(t==1?0:t==2?1:t!=8&&t!=11?2:3)},9:function e(t){return Number(t>=2)},10:function e(t){return Number(t==1?0:t==2?1:t<7?2:t<11?3:4)},11:function e(t){return Number(t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3)},12:function e(t){return Number(t%10!=1||t%100==11)},13:function e(t){return Number(t!==0)},14:function e(t){return Number(t==1?0:t==2?1:t==3?2:3)},15:function e(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function e(t){return Number(t%10==1&&t%100!=11?0:t!==0?1:2)},17:function e(t){return Number(t==1||t%10==1?0:1)},18:function e(t){return Number(t==0?0:t==1?1:2)},19:function e(t){return Number(t==1?0:t===0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function e(t){return Number(t==1?0:t===0||t%100>0&&t%100<20?1:2)},21:function e(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}};function W(){var e={};H.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:U[t.fc]}})});return e}var V=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};z(this,e);this.languageUtils=t;this.options=n;this.logger=c.create("pluralResolver");this.rules=W()}e.prototype.addRule=function e(t,n){this.rules[t]=n};e.prototype.getRule=function e(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]};e.prototype.needsPlural=function e(t){var n=this.getRule(t);return n&&n.numbers.length>1};e.prototype.getSuffix=function e(t,n){var r=this;var i=this.getRule(t);if(i){var a=i.noAbs?i.plurals(n):i.plurals(Math.abs(n));var o=i.numbers[a];if(this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1){if(o===2){o="plural"}else if(o===1){o=""}}var s=function e(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};if(this.options.compatibilityJSON==="v1"){if(o===1){return""}if(typeof o==="number"){return"_plural_"+o.toString()}return s()}else if(this.options.compatibilityJSON==="v2"||i.numbers.length===2&&i.numbers[0]===1){return s()}else if(i.numbers.length===2&&i.numbers[0]===1){return s()}return this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}this.logger.warn("no plural rule found for: "+t);return""};return e}();var q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function K(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Y=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};K(this,e);this.logger=c.create("interpolator");this.init(t,true)}e.prototype.init=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments[1];if(n){this.options=t;this.format=t.interpolation&&t.interpolation.format||function(e){return e};this.escape=t.interpolation&&t.interpolation.escape||_}if(!t.interpolation){t.interpolation={escapeValue:true}}var r=t.interpolation;this.escapeValue=r.escapeValue!==undefined?r.escapeValue:true;this.prefix=r.prefix?x(r.prefix):r.prefixEscaped||"{{";this.suffix=r.suffix?x(r.suffix):r.suffixEscaped||"}}";this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",";this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-";this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"";this.nestingPrefix=r.nestingPrefix?x(r.nestingPrefix):r.nestingPrefixEscaped||x("$t(");this.nestingSuffix=r.nestingSuffix?x(r.nestingSuffix):r.nestingSuffixEscaped||x(")");this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3;this.resetRegExp()};e.prototype.reset=function e(){if(this.options){this.init(this.options)}};e.prototype.resetRegExp=function e(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(t,"g");var n=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(n,"g");var r=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(r,"g")};e.prototype.interpolate=function e(t,n,r){var i=this;var a=void 0;var o=void 0;var s=void 0;function u(e){return e.replace(/\$/g,"$$$$")}var l=function e(t){if(t.indexOf(i.formatSeparator)<0){return y(n,t)}var a=t.split(i.formatSeparator);var o=a.shift().trim();var s=a.join(i.formatSeparator).trim();return i.format(y(n,o),s,r)};this.resetRegExp();s=0;while(a=this.regexpUnescape.exec(t)){o=l(a[1].trim());t=t.replace(a[0],o);this.regexpUnescape.lastIndex=0;s++;if(s>=this.maxReplaces){break}}s=0;while(a=this.regexp.exec(t)){o=l(a[1].trim());if(typeof o!=="string"){o=h(o)}if(!o){this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+t);o=""}o=this.escapeValue?u(this.escape(o)):u(o);t=t.replace(a[0],o);this.regexp.lastIndex=0;s++;if(s>=this.maxReplaces){break}}return t};e.prototype.nest=function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=void 0;var a=void 0;var o=q({},r);o.applyPostProcessor=false;function s(e){if(e.indexOf(",")<0){return e}var t=e.split(",");e=t.shift();var n=t.join(",");n=this.interpolate(n,o);n=n.replace(/'/g,'"');try{o=JSON.parse(n)}catch(t){this.logger.error("failed parsing options string in nesting for key "+e,t)}return e}while(i=this.nestingRegexp.exec(t)){a=n(s.call(this,i[1].trim()),o);if(a&&i[0]===t&&typeof a!=="string"){return a}if(typeof a!=="string"){a=h(a)}if(!a){this.logger.warn("missed to resolve "+i[1]+" for nesting "+t);a=""}t=t.replace(i[0],a);this.regexp.lastIndex=0}return t};return e}();var $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var G=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function X(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function Z(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function J(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function Q(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):X(e,t)}}function ee(e,t){var n=e.indexOf(t);while(n!==-1){e.splice(n,1);n=e.indexOf(t)}}var te=function(e){Q(t,e);function t(n,r,i){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};Z(this,t);var o=J(this,e.call(this));o.backend=n;o.store=r;o.languageUtils=i.languageUtils;o.options=a;o.logger=c.create("backendConnector");o.state={};o.queue=[];if(o.backend&&o.backend.init){o.backend.init(i,a.backend,a)}return o}t.prototype.queueLoad=function e(t,n,r){var i=this;var a=[];var o=[];var s=[];var u=[];t.forEach(function(e){var t=true;n.forEach(function(n){var r=e+"|"+n;if(i.store.hasResourceBundle(e,n)){i.state[r]=2}else if(i.state[r]<0){}else if(i.state[r]===1){if(o.indexOf(r)<0){o.push(r)}}else{i.state[r]=1;t=false;if(o.indexOf(r)<0){o.push(r)}if(a.indexOf(r)<0){a.push(r)}if(u.indexOf(n)<0){u.push(n)}}});if(!t){s.push(e)}});if(a.length||o.length){this.queue.push({pending:o,loaded:{},errors:[],callback:r})}return{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:u}};t.prototype.loaded=function e(t,n,r){var i=this;var a=t.split("|"),o=G(a,2),s=o[0],u=o[1];if(n){this.emit("failedLoading",s,u,n)}if(r){this.store.addResourceBundle(s,u,r)}this.state[t]=n?-1:2;this.queue.forEach(function(e){g(e.loaded,[s],u);ee(e.pending,t);if(n){e.errors.push(n)}if(e.pending.length===0&&!e.done){i.emit("loaded",e.loaded);e.done=true;if(e.errors.length){e.callback(e.errors)}else{e.callback()}}});this.queue=this.queue.filter(function(e){return!e.done})};t.prototype.read=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=this;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:250;var s=arguments[5];if(!t.length){return s(null,{})}return this.backend[r](t,n,function(e,u){if(e&&u&&i<5){setTimeout(function(){a.read.call(a,t,n,r,i+1,o*2,s)},o);return}s(e,u)})};t.prototype.load=function e(t,n,r){var i=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.");return r&&r()}var a=$({},this.backend.options,this.options.backend);if(typeof t==="string"){t=this.languageUtils.toResolveHierarchy(t)}if(typeof n==="string"){n=[n]}var o=this.queueLoad(t,n,r);if(!o.toLoad.length){if(!o.pending.length){r()}return null}if(a.allowMultiLoading&&this.backend.readMulti){this.read(o.toLoadLanguages,o.toLoadNamespaces,"readMulti",null,null,function(e,t){if(e){i.logger.warn("loading namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading failed",e)}if(!e&&t){i.logger.log("successfully loaded namespaces "+o.toLoadNamespaces.join(", ")+" for languages "+o.toLoadLanguages.join(", ")+" via multiloading",t)}o.toLoad.forEach(function(n){var r=n.split("|"),a=G(r,2),o=a[0],s=a[1];var u=y(t,[o,s]);if(u){i.loaded(n,e,u)}else{var l="loading namespace "+s+" for language "+o+" via multiloading failed";i.loaded(n,l);i.logger.error(l)}})})}else{o.toLoad.forEach(function(e){i.loadOne(e)})}};t.prototype.reload=function e(t,n){var r=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.")}var i=$({},this.backend.options,this.options.backend);if(typeof t==="string"){t=this.languageUtils.toResolveHierarchy(t)}if(typeof n==="string"){n=[n]}if(i.allowMultiLoading&&this.backend.readMulti){this.read(t,n,"readMulti",null,null,function(e,i){if(e){r.logger.warn("reloading namespaces "+n.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",e)}if(!e&&i){r.logger.log("successfully reloaded namespaces "+n.join(", ")+" for languages "+t.join(", ")+" via multiloading",i)}t.forEach(function(t){n.forEach(function(n){var a=y(i,[t,n]);if(a){r.loaded(t+"|"+n,e,a)}else{var o="reloading namespace "+n+" for language "+t+" via multiloading failed";r.loaded(t+"|"+n,o);r.logger.error(o)}})})})}else{t.forEach(function(e){n.forEach(function(t){r.loadOne(e+"|"+t,"re")})})}};t.prototype.loadOne=function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var i=t.split("|"),a=G(i,2),o=a[0],s=a[1];this.read(o,s,"read",null,null,function(e,i){if(e){n.logger.warn(r+"loading namespace "+s+" for language "+o+" failed",e)}if(!e&&i){n.logger.log(r+"loaded namespace "+s+" for language "+o,i)}n.loaded(t,e,i)})};t.prototype.saveMissing=function e(t,n,r,i){if(this.backend&&this.backend.create){this.backend.create(t,n,r,i)}if(!t||!t[0]){return}this.store.addResource(t[0],n,r,i)};return t}(d);var ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function re(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function ie(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function ae(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function oe(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):re(e,t)}}var se=function(e){oe(t,e);function t(n,r,i){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};ie(this,t);var o=ae(this,e.call(this));o.cache=n;o.store=r;o.services=i;o.options=a;o.logger=c.create("cacheConnector");if(o.cache&&o.cache.init){o.cache.init(i,a.cache,a)}return o}t.prototype.load=function e(t,n,r){var i=this;if(!this.cache){return r&&r()}var a=ne({},this.cache.options,this.options.cache);var o=typeof t==="string"?this.services.languageUtils.toResolveHierarchy(t):t;if(a.enabled){this.cache.load(o,function(e,t){if(e){i.logger.error("loading languages "+o.join(", ")+" from cache failed",e)}if(t){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){for(var a in t[n]){if(Object.prototype.hasOwnProperty.call(t[n],a)){if(a!=="i18nStamp"){var s=t[n][a];if(s){i.store.addResourceBundle(n,a,s)}}}}}}}if(r){r()}})}else if(r){r()}};t.prototype.save=function e(){if(this.cache&&this.options.cache&&this.options.cache.enabled){this.cache.save(this.store.data)}};return t}(d);function ue(){return{debug:false,initImmediate:true,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:false,whitelist:false,nonExplicitWhitelist:false,load:"all",preload:false,simplifyPluralSuffix:true,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:false,saveMissingTo:"fallback",missingKeyHandler:false,postProcess:false,returnNull:true,returnEmptyString:true,returnObjects:false,joinArrays:false,returnedObjectHandler:function e(){},parseMissingKeyHandler:false,appendNamespaceToMissingKey:false,appendNamespaceToCIMode:false,overloadTranslationOptionHandler:function e(t){return{defaultValue:t[1]}},interpolation:{escapeValue:true,format:function e(t,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function le(e){if(typeof e.ns==="string"){e.ns=[e.ns]}if(typeof e.fallbackLng==="string"){e.fallbackLng=[e.fallbackLng]}if(typeof e.fallbackNS==="string"){e.fallbackNS=[e.fallbackNS]}if(e.whitelist&&e.whitelist.indexOf("cimode")<0){e.whitelist.push("cimode")}return e}var ce=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function de(e,t){var n=Object.getOwnPropertyNames(t);for(var r=0;r<n.length;r++){var i=n[r];var a=Object.getOwnPropertyDescriptor(t,i);if(a&&a.configurable&&e[i]===undefined){Object.defineProperty(e,i,a)}}return e}function he(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function pe(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function ve(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):de(e,t)}}function me(){}var ge=function(e){ve(t,e);function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];he(this,t);var i=pe(this,e.call(this));i.options=le(n);i.services={};i.logger=c;i.modules={external:[]};if(r&&!i.isInitialized&&!n.isClone){var a;if(!i.options.initImmediate){return a=i.init(n,r),pe(i,a)}setTimeout(function(){i.init(n,r)},0)}return i}t.prototype.init=function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];if(typeof n==="function"){r=n;n={}}this.options=fe({},ue(),this.options,le(n));this.format=this.options.interpolation.format;if(!r){r=me}function i(e){if(!e){return null}if(typeof e==="function"){return new e}return e}if(!this.options.isClone){if(this.modules.logger){c.init(i(this.modules.logger),this.options)}else{c.init(null,this.options)}var a=new j(this.options);this.store=new A(this.options.resources,this.options);var o=this.services;o.logger=c;o.resourceStore=this.store;o.resourceStore.on("added removed",function(e,t){o.cacheConnector.save()});o.languageUtils=a;o.pluralResolver=new V(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix});o.interpolator=new Y(this.options);o.backendConnector=new te(i(this.modules.backend),o.resourceStore,o,this.options);o.backendConnector.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});o.backendConnector.on("loaded",function(e){o.cacheConnector.save()});o.cacheConnector=new se(i(this.modules.cache),o.resourceStore,o,this.options);o.cacheConnector.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});if(this.modules.languageDetector){o.languageDetector=i(this.modules.languageDetector);o.languageDetector.init(o,this.options.detection,this.options)}this.translator=new L(this.services,this.options);this.translator.on("*",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}t.emit.apply(t,[e].concat(r))});this.modules.external.forEach(function(e){if(e.init){e.init(t)}})}var s=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];s.forEach(function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}});var u=function e(){t.changeLanguage(t.options.lng,function(e,n){t.isInitialized=true;t.logger.log("initialized",t.options);t.emit("initialized",t.options);r(e,n)})};if(this.options.resources||!this.options.initImmediate){u()}else{setTimeout(u,0)}return this};t.prototype.loadResources=function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:me;if(!this.options.resources){if(this.language&&this.language.toLowerCase()==="cimode"){return n()}var r=[];var i=function e(n){if(!n){return}var i=t.services.languageUtils.toResolveHierarchy(n);i.forEach(function(e){if(r.indexOf(e)<0){r.push(e)}})};if(!this.language){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.forEach(function(e){return i(e)})}else{i(this.language)}if(this.options.preload){this.options.preload.forEach(function(e){return i(e)})}this.services.cacheConnector.load(r,this.options.ns,function(){t.services.backendConnector.load(r,t.options.ns,n)})}else{n(null)}};t.prototype.reloadResources=function e(t,n){if(!t){t=this.languages}if(!n){n=this.options.ns}this.services.backendConnector.reload(t,n)};t.prototype.use=function e(t){if(t.type==="backend"){this.modules.backend=t}if(t.type==="cache"){this.modules.cache=t}if(t.type==="logger"||t.log&&t.warn&&t.error){this.modules.logger=t}if(t.type==="languageDetector"){this.modules.languageDetector=t}if(t.type==="postProcessor"){P.addPostProcessor(t)}if(t.type==="3rdParty"){this.modules.external.push(t)}return this};t.prototype.changeLanguage=function e(t,n){var r=this;var i=function e(t,i){r.translator.changeLanguage(i);if(i){r.emit("languageChanged",i);r.logger.log("languageChanged",i)}if(n){n(t,function(){return r.t.apply(r,arguments)})}};var a=function e(t){if(t){r.language=t;r.languages=r.services.languageUtils.toResolveHierarchy(t);if(r.services.languageDetector){r.services.languageDetector.cacheUserLanguage(t)}}r.loadResources(function(e){i(e,t)})};if(!t&&this.services.languageDetector&&!this.services.languageDetector.async){a(this.services.languageDetector.detect())}else if(!t&&this.services.languageDetector&&this.services.languageDetector.async){this.services.languageDetector.detect(a)}else{a(t)}};t.prototype.getFixedT=function e(t,n){var r=this;var i=function e(t,n){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++){a[o-2]=arguments[o]}var s=fe({},n);if((typeof n==="undefined"?"undefined":ce(n))!=="object"){s=r.options.overloadTranslationOptionHandler([t,n].concat(a))}s.lng=s.lng||e.lng;s.lngs=s.lngs||e.lngs;s.ns=s.ns||e.ns;return r.t(t,s)};if(typeof t==="string"){i.lng=t}else{i.lngs=t}i.ns=n;return i};t.prototype.t=function e(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)};t.prototype.exists=function e(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)};t.prototype.setDefaultNamespace=function e(t){this.options.defaultNS=t};t.prototype.loadNamespaces=function e(t,n){var r=this;if(!this.options.ns){return n&&n()}if(typeof t==="string"){t=[t]}t.forEach(function(e){if(r.options.ns.indexOf(e)<0){r.options.ns.push(e)}});this.loadResources(n)};t.prototype.loadLanguages=function e(t,n){if(typeof t==="string"){t=[t]}var r=this.options.preload||[];var i=t.filter(function(e){return r.indexOf(e)<0});if(!i.length){return n()}this.options.preload=r.concat(i);this.loadResources(n)};t.prototype.dir=function e(t){if(!t){t=this.languages&&this.languages.length>0?this.languages[0]:this.language}if(!t){return"rtl"}var n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return n.indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"};t.prototype.createInstance=function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];return new t(n,r)};t.prototype.cloneInstance=function e(){var n=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:me;var a=fe({},this.options,r,{isClone:true});var o=new t(a);var s=["store","services","language"];s.forEach(function(e){o[e]=n[e]});o.translator=new L(o.services,o.options);o.translator.on("*",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}o.emit.apply(o,[e].concat(n))});o.init(a,i);o.translator.options=o.options;return o};return t}(d);var ye=new ge;var be=ye.changeLanguage.bind(ye);var xe=ye.cloneInstance.bind(ye);var we=ye.createInstance.bind(ye);var _e=ye.dir.bind(ye);var ke=ye.exists.bind(ye);var Ce=ye.getFixedT.bind(ye);var Te=ye.init.bind(ye);var Se=ye.loadLanguages.bind(ye);var Ee=ye.loadNamespaces.bind(ye);var Ae=ye.loadResources.bind(ye);var Pe=ye.off.bind(ye);var Oe=ye.on.bind(ye);var Me=ye.setDefaultNamespace.bind(ye);var Ne=ye.t.bind(ye);var Re=ye.use.bind(ye);var De=[];var Be=De.forEach;var Le=De.slice;function Ie(e){Be.call(Le.call(arguments,1),function(t){if(t){for(var n in t){if(e[n]===undefined){e[n]=t[n]}}}});return e}var Fe={create:function e(t,n,r,i){var a=void 0;if(r){var o=new Date;o.setTime(o.getTime()+r*60*1e3);a="; expires="+o.toGMTString()}else{a=""}i=i?"domain="+i+";":"";document.cookie=t+"="+n+a+";"+i+"path=/"},read:function e(t){var n=t+"=";var r=document.cookie.split(";");for(var i=0;i<r.length;i++){var a=r[i];while(a.charAt(0)===" "){a=a.substring(1,a.length)}if(a.indexOf(n)===0){return a.substring(n.length,a.length)}}return null},remove:function e(t){this.create(t,"",-1)}};var je={name:"cookie",lookup:function e(t){var n=void 0;if(t.lookupCookie&&typeof document!=="undefined"){var r=Fe.read(t.lookupCookie);if(r){n=r}}return n},cacheUserLanguage:function e(t,n){if(n.lookupCookie&&typeof document!=="undefined"){Fe.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain)}}};var ze={name:"querystring",lookup:function e(t){var n=void 0;if(typeof window!=="undefined"){var r=window.location.search.substring(1);var i=r.split("&");for(var a=0;a<i.length;a++){var o=i[a].indexOf("=");if(o>0){var s=i[a].substring(0,o);if(s===t.lookupQuerystring){n=i[a].substring(o+1)}}}}return n}};var He=void 0;try{He=window!=="undefined"&&window.localStorage!==null;var Ue="i18next.translate.boo";window.localStorage.setItem(Ue,"foo");window.localStorage.removeItem(Ue)}catch(e){He=false}var We={name:"localStorage",lookup:function e(t){var n=void 0;if(t.lookupLocalStorage&&He){var r=window.localStorage.getItem(t.lookupLocalStorage);if(r){n=r}}return n},cacheUserLanguage:function e(t,n){if(n.lookupLocalStorage&&He){window.localStorage.setItem(n.lookupLocalStorage,t)}}};var Ve={name:"navigator",lookup:function e(t){var n=[];if(typeof navigator!=="undefined"){if(navigator.languages){for(var r=0;r<navigator.languages.length;r++){n.push(navigator.languages[r])}}if(navigator.userLanguage){n.push(navigator.userLanguage)}if(navigator.language){n.push(navigator.language)}}return n.length>0?n:undefined}};var qe={name:"htmlTag",lookup:function e(t){var n=void 0;var r=t.htmlTag||(typeof document!=="undefined"?document.documentElement:null);if(r&&typeof r.getAttribute==="function"){n=r.getAttribute("lang")}return n}};var Ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function Ye(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function $e(){return{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Ge=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Ye(this,e);this.type="languageDetector";this.detectors={};this.init(t,n)}Ke(e,[{key:"init",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.services=t;this.options=Ie(n,this.options||{},$e());this.i18nOptions=r;this.addDetector(je);this.addDetector(ze);this.addDetector(We);this.addDetector(Ve);this.addDetector(qe)}},{key:"addDetector",value:function e(t){this.detectors[t.name]=t}},{key:"detect",value:function e(t){var n=this;if(!t){t=this.options.order}var r=[];t.forEach(function(e){if(n.detectors[e]){var t=n.detectors[e].lookup(n.options);if(t&&typeof t==="string"){t=[t]}if(t){r=r.concat(t)}}});var i=void 0;r.forEach(function(e){if(i){return}var t=n.services.languageUtils.formatLanguageCode(e);if(n.services.languageUtils.isWhitelisted(t)){i=t}});return i||this.i18nOptions.fallbackLng[0]}},{key:"cacheUserLanguage",value:function e(t,n){var r=this;if(!n){n=this.options.caches}if(!n){return}if(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1){return}n.forEach(function(e){if(r.detectors[e]){r.detectors[e].cacheUserLanguage(t,r.options)}})}}]);return e}();Ge.type="languageDetector";var Xe={word:{manage:"ÁÆ°ÁêÜÁîªÈù¢",dashboard:"„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ"}};var Ze={};var Je={init:()=>{return new Promise((e,t)=>{ye.use(Ge).init({fallbackLng:"ja",resources:{ja:{translation:Xe},en:{translation:Ze}}},n=>{if(n){t(n);return}e()})})},get:()=>{return ye}};const Qe=ye;function et(e,t){if(t==null){return e}var n=e.length,r=-1,i=t.length;while(++r<i){e[n+r]=t[r]}return e}var tt=et;function nt(e){return e}var rt=nt;function it(e){return function(t){return t[e]}}var at=it;function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var st=ot;var ut;var lt;function ct(){lt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];ut=true;for(var e in{toString:null}){ut=false}}function ft(e,t,n){var r,i=0;if(ut==null){ct()}for(r in e){if(dt(t,e,r,n)===false){break}}if(ut){var a=e.constructor,o=!!a&&e===a.prototype;while(r=lt[i++]){if((r!=="constructor"||!o&&st(e,r))&&e[r]!==Object.prototype[r]){if(dt(t,e,r,n)===false){break}}}}}function dt(e,t,n,r){return e.call(r,t[n],n,t)}var ht=ft;function pt(e,t,n){ht(e,function(r,i){if(st(e,i)){return t.call(n,e[i],i,e)}})}var vt=pt;var mt=/^\[object (.*)\]$/;var gt=Object.prototype.toString;var yt;function bt(e){if(e===null){return"Null"}else if(e===yt){return"Undefined"}else{return mt.exec(gt.call(e))[1]}}var xt=bt;function wt(e,t){return xt(e)===t}var _t=wt;var kt=Array.isArray||function(e){return _t(e,"Array")};var Ct=kt;function Tt(e,t){var n=-1,r=e.length;while(++n<r){if(At(e[n],t)){return true}}return false}function St(e,t){var n=-1,r=t.length;while(++n<r){if(!Tt(e,t[n])){return false}}return true}function Et(e,t){var n=true;vt(t,function(t,r){if(!At(e[r],t)){return n=false}});return n}function At(e,t){if(e&&typeof e==="object"&&t&&typeof t==="object"){if(Ct(e)&&Ct(t)){return St(e,t)}else{return Et(e,t)}}else{return e===t}}var Pt=At;function Ot(e,t){if(e==null){return rt}switch(typeof e){case"function":return typeof t!=="undefined"?function(n,r,i){return e.call(t,n,r,i)}:e;case"object":return function(t){return Pt(t,e)};case"string":case"number":return at(e)}}var Mt=Ot;function Nt(e,t,n){t=Mt(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){var o=t(e[i],i,e);if(o!=null){tt(r,o)}}return r}var Rt=Nt;function Dt(e,t,n){n=n||0;if(e==null){return-1}var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t){return i}i++}return-1}var Bt=Dt;function Lt(e,t){if(t==null){return e}var n=-1,r=t.length;while(++n<r){if(Bt(e,t[n])===-1){e.push(t[n])}}return e}var It=Lt;function Ft(e,t,n){t=Mt(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(t(o,i,e)){r.push(o)}}return r}var jt=Ft;function zt(e){return jt(e,function(e){return e!=null})}var Ht=zt;function Ut(e,t){return Bt(e,t)!==-1}var Wt=Ut;function Vt(e,t){t=t||qt;return jt(e,function(e,n,r){var i=r.length;while(++n<i){if(t(e,r[n])){return false}}return true})}function qt(e,t){return e===t}var Kt=Vt;function Yt(e,t,n){t=Mt(t,n);var r=false;if(e==null){return r}var i=-1,a=e.length;while(++i<a){if(t(e[i],i,e)){r=true;break}}return r}var $t=Yt;function Gt(e,t,n){var r=e.length;if(t==null){t=0}else if(t<0){t=Math.max(r+t,0)}else{t=Math.min(t,r)}if(n==null){n=r}else if(n<0){n=Math.max(r+n,0)}else{n=Math.min(n,r)}var i=[];while(t<n){i.push(e[t++])}return i}var Xt=Gt;function Zt(e){var t=Xt(arguments,1),n=jt(Kt(e),function(e){return!$t(t,function(t){return Wt(t,e)})});return n}var Jt=Zt;function Qt(e,t){if(e===t){return e!==0||1/e===1/t}return e!==e&&t!==t}var en=Qt;function tn(e,t,n){t=Mt(t,n);var r=true;if(e==null){return r}var i=-1,a=e.length;while(++i<a){if(!t(e[i],i,e)){r=false;break}}return r}var nn=tn;function rn(e,t,n){n=n||en;if(!Ct(e)||!Ct(t)){return n(e,t)}if(e.length!==t.length){return false}return nn(e,an(n),t)}function an(e){return function(t,n){return n in this&&e(t,this[n])}}var on=rn;function sn(e,t,n){t=Mt(t,n);if(e==null){return-1}var r=-1,i=e.length;while(++r<i){if(t(e[r],r,e)){return r}}return-1}var un=sn;function ln(e,t,n){var r=un(e,t,n);return r>=0?e[r]:void 0}var cn=ln;function fn(e,t,n){t=Mt(t,n);if(e==null){return-1}var r=e.length;while(--r>=0){if(t(e[r],r,e)){return r}}return-1}var dn=fn;function hn(e,t,n){var r=dn(e,t,n);return r>=0?e[r]:void 0}var pn=hn;function vn(e,t,n){if(n===0){tt(t,e);return t}var r,i=-1,a=e.length;while(++i<a){r=e[i];if(Ct(r)){vn(r,t,n-1)}else{t.push(r)}}return t}function mn(e,t){if(e==null){return[]}t=t==null?-1:t;return vn(e,[],t)}var gn=mn;function yn(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var bn=yn;function xn(e,t,n){if(t){t=Mt(t,n)}else{t=rt}var r={};bn(e,function(e){var n=t(e);if(!(n in r)){r[n]=[]}r[n].push(e)});return r}var wn=xn;function _n(e,t,n){var r=[];if(e==null){return r}n=typeof n==="number"?n:0;var i=e.length;var a=n>=0?n:i+n;while(a<i){if(e[a]===t){r.push(a)}a++}return r}var kn=_n;function Cn(e,t){var n=Jt(Xt(arguments,1),e);if(n.length){Array.prototype.push.apply(e,n)}return e.length}var Tn=Cn;function Sn(e){var t=Xt(arguments,1),n=jt(Kt(e),function(e){return nn(t,function(t){return Wt(t,e)})});return n}var En=Sn;function An(e,t,n){if(e==null){return e}var r=Xt(arguments,2);var i=-1,a=e.length,o;while(++i<a){o=e[i];o[t].apply(o,r)}return e}var Pn=An;function On(e){return e!=null&&e!==""}function Mn(e,t){t=t||"";return jt(e,On).join(t)}var Nn=Mn;function Rn(e){if(e==null||e.length<1){return undefined}return e[e.length-1]}var Dn=Rn;function Bn(e,t,n){if(e==null){return-1}var r=e.length;n=n==null||n>=r?r-1:n;n=n<0?r+n:n;while(n>=0){if(e[n]===t){return n}n--}return-1}var Ln=Bn;function In(e,t,n){t=Mt(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){r[i]=t(e[i],i,e)}return r}var Fn=In;function jn(e,t,n){if(e==null||!e.length){return Infinity}else if(e.length&&!t){return Math.max.apply(Math,e)}else{t=Mt(t,n);var r,i=-Infinity,a,o;var s=-1,u=e.length;while(++s<u){a=e[s];o=t(a,s,e);if(o>i){i=o;r=a}}return r}}var zn=jn;function Hn(e,t,n){if(e==null||!e.length){return-Infinity}else if(e.length&&!t){return Math.min.apply(Math,e)}else{t=Mt(t,n);var r,i=Infinity,a,o;var s=-1,u=e.length;while(++s<u){a=e[s];o=t(a,s,e);if(o<i){i=o;r=a}}return r}}var Un=Hn;var Wn=-2147483648;var Vn=2147483647;function qn(){return qn.get()}qn.get=Math.random;var Kn=qn;function Yn(e,t){e=e==null?Wn:e;t=t==null?Vn:t;return e+(t-e)*Kn()}var $n=Yn;function Gn(e,t){e=e==null?Wn:~~e;t=t==null?Vn:~~t;return Math.round($n(e-.5,t+.499999999999))}var Xn=Gn;function Zn(e,t){if(t!=null){var n=[];if(t>0&&e&&e.length){t=t>e.length?e.length:t;while(t--){n.push(Jn(e))}}return n}return e&&e.length?Jn(e):void 0}function Jn(e){var t=Xn(0,e.length-1);return e.splice(t,1)[0]}var Qn=Zn;function er(e,t){return Fn(e,t)}var tr=er;function nr(e,t,n){if(t==null){t=e;e=0}n=n||1;var r=[],i=countSteps_1(t-e,n),a=e;while(a<=t){r.push(a);a+=n}return r}var rr=nr;function ir(e,t,n){var r=arguments.length>2,i=n;if(e==null||!e.length){if(!r){throw new Error("reduce of empty array with no initial value")}else{return n}}var a=-1,o=e.length;while(++a<o){if(!r){i=e[a];r=true}else{i=t(i,e[a],a,e)}}return i}var ar=ir;function or(e,t,n){var r=arguments.length>2;if(e==null||!e.length){if(r){return n}else{throw new Error("reduce of empty array with no initial value")}}var i=e.length,a=n,o;while(--i>=0){o=e[i];if(!r){a=o;r=true}else{a=t(a,o,i,e)}}return a}var sr=or;function ur(e,t,n){t=Mt(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(!t(o,i,e)){r.push(o)}}return r}var lr=ur;function cr(e,t){var n=Bt(e,t);if(n!==-1){e.splice(n,1)}}var fr=cr;function dr(e,t){var n=Bt(e,t);while(n!==-1){e.splice(n,1);n=Bt(e,t,n)}}var hr=dr;function pr(e){var t=e.slice();t.reverse();return t}var vr=pr;function mr(e){var t=[],n;if(e==null){return t}var r=-1,i=e.length;while(++r<i){if(!r){t[0]=e[0]}else{n=Xn(0,r);t[r]=t[n];t[n]=e[r]}}return t}var gr=mr;function yr(e,t){if(e==null){return[]}else if(e.length<2){return e}if(t==null){t=br}var n,r,i;n=~~(e.length/2);r=yr(e.slice(0,n),t);i=yr(e.slice(n,e.length),t);return xr(r,i,t)}function br(e,t){return e<t?-1:e>t?1:0}function xr(e,t,n){var r=[];while(e.length&&t.length){if(n(e[0],t[0])<=0){r.push(e.shift())}else{r.push(t.shift())}}if(e.length){r.push.apply(r,e)}if(t.length){r.push.apply(r,t)}return r}var wr=yr;function _r(e,t,n){t=Mt(t,n);return wr(e,function(e,n){e=t(e);n=t(n);return e<n?-1:e>n?1:0})}var kr=_r;function Cr(e,t){t=t||2;var n=[];if(e==null){return n}var r=Math.floor(e.length/t),i=e.length%t,a=0,o=e.length,s=0,u;while(a<o){u=r;if(s<i){u++}n.push(e.slice(a,a+u));s++;a+=u}return n}var Tr=Cr;function Sr(e,t,n){var r=-1;var i=[];if(!n){while(++r<e){i[r]=t(r,e)}}else{while(++r<e){i[r]=t.call(n,r,e)}}return i}var Er=Sr;function Ar(e){return _t(e,"Function")}var Pr=Ar;function Or(e,t){var n={};if(e==null){return n}var r=-1,i=e.length,a;if(Pr(t)){while(++r<i){a=e[r];n[t(a)]=a}}else{while(++r<i){a=e[r];n[a[t]]=a}}return n}var Mr=Or;function Nr(e){var t=arguments;var n=[];var r=-1,i=arguments.length;while(++r<i){tt(n,t[r])}return Kt(n)}var Rr=Nr;function Dr(e,t){e=Kt(e);t=Kt(t);var n=jt(e,function(e){return!Wt(t,e)}),r=jt(t,function(t){return!Wt(e,t)});return n.concat(r)}var Br=Dr;function Lr(e){return e==null?0:e.length}function Ir(e){var t=arguments;var n=e?zn(Fn(arguments,Lr)):0,r=[],i=-1;while(++i<n){r.push(Fn(t,function(e){return e==null?undefined:e[i]}))}return r}var Fr=Ir;var jr={append:tt,collect:Rt,combine:It,compact:Ht,contains:Wt,difference:Jt,equals:on,every:nn,filter:jt,find:cn,findIndex:un,findLast:pn,findLastIndex:dn,flatten:gn,forEach:bn,groupBy:wn,indexOf:Bt,indicesOf:kn,insert:Tn,intersection:En,invoke:Pn,join:Nn,last:Dn,lastIndexOf:Ln,map:Fn,max:zn,min:Un,pick:Qn,pluck:tr,range:rr,reduce:ar,reduceRight:sr,reject:lr,remove:fr,removeAll:hr,reverse:vr,shuffle:gr,slice:Xt,some:$t,sort:wr,sortBy:kr,split:Tr,take:Er,toLookup:Mr,union:Rr,unique:Kt,xor:Br,zip:Fr};var zr=jr.find;var Hr=jr.forEach;var Ur=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"};var Wr=ui;var Vr=Gr;var qr=Xr;var Kr=Qr;var Yr=si;var $r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Gr(e,t){var n=[];var r=0;var i=0;var a="";var o=t&&t.delimiter||"/";var s;while((s=$r.exec(e))!=null){var u=s[0];var l=s[1];var c=s.index;a+=e.slice(i,c);i=c+u.length;if(l){a+=l[1];continue}var f=e[i];var d=s[2];var h=s[3];var p=s[4];var v=s[5];var m=s[6];var g=s[7];if(a){n.push(a);a=""}var y=d!=null&&f!=null&&f!==d;var b=m==="+"||m==="*";var x=m==="?"||m==="*";var w=s[2]||o;var _=p||v;n.push({name:h||r++,prefix:d||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!g,pattern:_?ti(_):g?".*":"[^"+ei(w)+"]+?"})}if(i<e.length){a+=e.substr(i)}if(a){n.push(a)}return n}function Xr(e,t){return Qr(Gr(e,t))}function Zr(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Jr(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Qr(e){var t=new Array(e.length);for(var n=0;n<e.length;n++){if(typeof e[n]==="object"){t[n]=new RegExp("^(?:"+e[n].pattern+")$")}}return function(n,r){var i="";var a=n||{};var o=r||{};var s=o.pretty?Zr:encodeURIComponent;for(var u=0;u<e.length;u++){var l=e[u];if(typeof l==="string"){i+=l;continue}var c=a[l.name];var f;if(c==null){if(l.optional){if(l.partial){i+=l.prefix}continue}else{throw new TypeError('Expected "'+l.name+'" to be defined')}}if(Ur(c)){if(!l.repeat){throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`")}if(c.length===0){if(l.optional){continue}else{throw new TypeError('Expected "'+l.name+'" to not be empty')}}for(var d=0;d<c.length;d++){f=s(c[d]);if(!t[u].test(f)){throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`")}i+=(d===0?l.prefix:l.delimiter)+f}continue}f=l.asterisk?Jr(c):s(c);if(!t[u].test(f)){throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"')}i+=l.prefix+f}return i}}function ei(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ti(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ni(e,t){e.keys=t;return e}function ri(e){return e.sensitive?"":"i"}function ii(e,t){var n=e.source.match(/\((?!\?)/g);if(n){for(var r=0;r<n.length;r++){t.push({name:r,prefix:null,delimiter:null,optional:false,repeat:false,partial:false,asterisk:false,pattern:null})}}return ni(e,t)}function ai(e,t,n){var r=[];for(var i=0;i<e.length;i++){r.push(ui(e[i],t,n).source)}var a=new RegExp("(?:"+r.join("|")+")",ri(n));return ni(a,t)}function oi(e,t,n){return si(Gr(e,n),t,n)}function si(e,t,n){if(!Ur(t)){n=t||n;t=[]}n=n||{};var r=n.strict;var i=n.end!==false;var a="";for(var o=0;o<e.length;o++){var s=e[o];if(typeof s==="string"){a+=ei(s)}else{var u=ei(s.prefix);var l="(?:"+s.pattern+")";t.push(s);if(s.repeat){l+="(?:"+u+l+")*"}if(s.optional){if(!s.partial){l="(?:"+u+"("+l+"))?"}else{l=u+"("+l+")?"}}else{l=u+"("+l+")"}a+=l}}var c=ei(n.delimiter||"/");var f=a.slice(-c.length)===c;if(!r){a=(f?a.slice(0,-c.length):a)+"(?:"+c+"(?=$))?"}if(i){a+="$"}else{a+=r&&f?"":"(?="+c+"|$)"}return ni(new RegExp("^"+a,ri(n)),t)}function ui(e,t,n){if(!Ur(t)){n=t||n;t=[]}n=n||{};if(e instanceof RegExp){return ii(e,t)}if(Ur(e)){return ai(e,t,n)}return oi(e,t,n)}Wr.parse=Vr;Wr.compile=qr;Wr.tokensToFunction=Kr;Wr.tokensToRegExp=Yr;var li=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function ci(e){return e&&e.__esModule?e["default"]:e}function fi(e,t){return t={exports:{}},e(t,t.exports),t.exports}var di=fi(function(e){(function(t){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&e.exports){e.exports=a}else if(!t.Promise){t.Promise=a}})(li)});var hi=function(){};{hi=function(e,t,n){var r=arguments;var i=arguments.length;n=new Array(i>2?i-2:0);for(var a=2;a<i;a++){n[a-2]=r[a]}if(t===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(t.length<10||/^[s\W]*$/.test(t)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+t)}if(!e){var o=0;var s="Warning: "+t.replace(/%s/g,function(){return n[o++]});if(typeof console!=="undefined"){console.error(s)}try{throw new Error(s)}catch(e){}}}}var pi=hi;var vi=function(e,t,n,r,i,a,o,s){{if(t===undefined){throw new Error("invariant requires an error message argument")}}if(!e){var u;if(t===undefined){u=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var l=[n,r,i,a,o,s];var c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}};var mi=vi;var gi=function e(t){return t.charAt(0)==="/"};var yi=function e(t,n){for(var r=n,i=r+1,a=t.length;i<a;r+=1,i+=1){t[r]=t[i]}t.pop()};var bi=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=t&&t.split("/")||[];var i=n&&n.split("/")||[];var a=t&&gi(t);var o=n&&gi(n);var s=a||o;if(t&&gi(t)){i=r}else if(r.length){i.pop();i=i.concat(r)}if(!i.length){return"/"}var u=void 0;if(i.length){var l=i[i.length-1];u=l==="."||l===".."||l===""}else{u=false}var c=0;for(var f=i.length;f>=0;f--){var d=i[f];if(d==="."){yi(i,f)}else if(d===".."){yi(i,f);c++}else if(c){yi(i,f);c--}}if(!s){for(;c--;c){i.unshift("..")}}if(s&&i[0]!==""&&(!i[0]||!gi(i[0]))){i.unshift("")}var h=i.join("/");if(u&&h.substr(-1)!=="/"){h+="/"}return h};var xi=bi;var wi=fi(function(e,t){"use strict";t.__esModule=true;var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function e(t,r){if(t===r){return true}if(t==null||r==null){return false}if(Array.isArray(t)){return Array.isArray(r)&&t.length===r.length&&t.every(function(t,n){return e(t,r[n])})}var i=typeof t==="undefined"?"undefined":n(t);var a=typeof r==="undefined"?"undefined":n(r);if(i!==a){return false}if(i==="object"){var o=t.valueOf();var s=r.valueOf();if(o!==t||s!==r){return e(o,s)}var u=Object.keys(t);var l=Object.keys(r);if(u.length!==l.length){return false}return u.every(function(n){return e(t[n],r[n])})}return false};t.default=r});var _i=ci(wi);var ki=function e(t){return t.charAt(0)==="/"?t:"/"+t};var Ci=function e(t){return t.charAt(0)==="/"?t.substr(1):t};var Ti=function e(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)};var Si=function e(t,n){return Ti(t,n)?t.substr(n.length):t};var Ei=function e(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t};var Ai=function e(t){var n=t||"/";var r="";var i="";var a=n.indexOf("#");if(a!==-1){i=n.substr(a);n=n.substr(0,a)}var o=n.indexOf("?");if(o!==-1){r=n.substr(o);n=n.substr(0,o)}return{pathname:n,search:r==="?"?"":r,hash:i==="#"?"":i}};var Pi=function e(t){var n=t.pathname,r=t.search,i=t.hash;var a=n||"/";if(r&&r!=="?"){a+=r.charAt(0)==="?"?r:"?"+r}if(i&&i!=="#"){a+=i.charAt(0)==="#"?i:"#"+i}return a};var Oi=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Mi=function e(t,n,r,i){var a=void 0;if(typeof t==="string"){a=Ai(t);a.state=n}else{a=Oi({},t);if(a.pathname===undefined){a.pathname=""}if(a.search){if(a.search.charAt(0)!=="?"){a.search="?"+a.search}}else{a.search=""}if(a.hash){if(a.hash.charAt(0)!=="#"){a.hash="#"+a.hash}}else{a.hash=""}if(n!==undefined&&a.state===undefined){a.state=n}}try{a.pathname=decodeURI(a.pathname)}catch(e){if(e instanceof URIError){throw new URIError('Pathname "'+a.pathname+'" could not be decoded. '+"This is likely caused by an invalid percent-encoding.")}else{throw e}}if(r){a.key=r}if(i){if(!a.pathname){a.pathname=i.pathname}else if(a.pathname.charAt(0)!=="/"){a.pathname=xi(a.pathname,i.pathname)}}else{if(!a.pathname){a.pathname="/"}}return a};var Ni=function e(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&_i(t.state,n.state)};var Ri=function e(){var t=null;var n=function e(n){pi(t==null,"A history supports only one prompt at a time");t=n;return function(){if(t===n){t=null}}};var r=function e(n,r,i,a){if(t!=null){var o=typeof t==="function"?t(n,r):t;if(typeof o==="string"){if(typeof i==="function"){i(o,a)}else{pi(false,"A history needs a getUserConfirmation function in order to use a prompt message");a(true)}}else{a(o!==false)}}else{a(true)}};var i=[];var a=function e(t){var n=true;var r=function e(){if(n){t.apply(undefined,arguments)}};i.push(r);return function(){n=false;i=i.filter(function(e){return e!==r})}};var o=function e(){var t=arguments;for(var n=arguments.length,r=Array(n),a=0;a<n;a++){r[a]=t[a]}i.forEach(function(e){return e.apply(undefined,r)})};return{setPrompt:n,confirmTransitionTo:r,appendListener:a,notifyListeners:o}};var Di=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var Bi=function e(t,n,r){return t.addEventListener?t.addEventListener(n,r,false):t.attachEvent("on"+n,r)};var Li=function e(t,n,r){return t.removeEventListener?t.removeEventListener(n,r,false):t.detachEvent("on"+n,r)};var Ii=function e(t,n){return n(window.confirm(t))};var Fi=function e(){var t=window.navigator.userAgent;if((t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1){return false}return window.history&&"pushState"in window.history};var ji=function e(){return window.navigator.userAgent.indexOf("Trident")===-1};var zi=function e(){return window.navigator.userAgent.indexOf("Firefox")===-1};var Hi=function e(t){return t.state===undefined&&navigator.userAgent.indexOf("CriOS")===-1};var Ui=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Wi=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Vi="popstate";var qi="hashchange";var Ki=function e(){try{return window.history.state||{}}catch(e){return{}}};var Yi=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};mi(Di,"Browser history needs a DOM");var n=window.history;var r=Fi();var i=!ji();var a=t.forceRefresh,o=a===undefined?false:a,s=t.getUserConfirmation,u=s===undefined?Ii:s,l=t.keyLength,c=l===undefined?6:l;var f=t.basename?Ei(ki(t.basename)):"";var d=function e(t){var n=t||{},r=n.key,i=n.state;var a=window.location,o=a.pathname,s=a.search,u=a.hash;var l=o+s+u;pi(!f||Ti(l,f),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+l+'" to begin with "'+f+'".');if(f){l=Si(l,f)}return Mi(l,i,r)};var h=function e(){return Math.random().toString(36).substr(2,c)};var p=Ri();var v=function e(t){Wi(D,t);D.length=n.length;p.notifyListeners(D.location,D.action)};var m=function e(t){if(Hi(t)){return}b(d(t.state))};var g=function e(){b(d(Ki()))};var y=false;var b=function e(t){if(y){y=false;v()}else{var n="POP";p.confirmTransitionTo(t,n,u,function(e){if(e){v({action:n,location:t})}else{x(t)}})}};var x=function e(t){var n=D.location;var r=_.indexOf(n.key);if(r===-1){r=0}var i=_.indexOf(t.key);if(i===-1){i=0}var a=r-i;if(a){y=true;S(a)}};var w=d(Ki());var _=[w.key];var k=function e(t){return f+Pi(t)};var C=function e(t,i){pi(!((typeof t==="undefined"?"undefined":Ui(t))==="object"&&t.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="PUSH";var s=Mi(t,i,h(),D.location);p.confirmTransitionTo(s,a,u,function(e){if(!e){return}var t=k(s);var i=s.key,u=s.state;if(r){n.pushState({key:i,state:u},null,t);if(o){window.location.href=t}else{var l=_.indexOf(D.location.key);var c=_.slice(0,l===-1?0:l+1);c.push(s.key);_=c;v({action:a,location:s})}}else{pi(u===undefined,"Browser history cannot push state in browsers that do not support HTML5 history");window.location.href=t}})};var T=function e(t,i){pi(!((typeof t==="undefined"?"undefined":Ui(t))==="object"&&t.state!==undefined&&i!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="REPLACE";var s=Mi(t,i,h(),D.location);p.confirmTransitionTo(s,a,u,function(e){if(!e){return}var t=k(s);var i=s.key,u=s.state;if(r){n.replaceState({key:i,state:u},null,t);if(o){window.location.replace(t)}else{var l=_.indexOf(D.location.key);if(l!==-1){_[l]=s.key}v({action:a,location:s})}}else{pi(u===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history");window.location.replace(t)}})};var S=function e(t){n.go(t)};var E=function e(){return S(-1)};var A=function e(){return S(1)};var P=0;var O=function e(t){P+=t;if(P===1){Bi(window,Vi,m);if(i){Bi(window,qi,g)}}else if(P===0){Li(window,Vi,m);if(i){Li(window,qi,g)}}};var M=false;var N=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=p.setPrompt(t);if(!M){O(1);M=true}return function(){if(M){M=false;O(-1)}return n()}};var R=function e(t){var n=p.appendListener(t);O(1);return function(){O(-1);n()}};var D={length:n.length,action:"POP",location:w,createHref:k,push:C,replace:T,go:S,goBack:E,goForward:A,block:N,listen:R};return D};var $i=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var Gi="hashchange";var Xi={hashbang:{encodePath:function e(t){return t.charAt(0)==="!"?t:"!/"+Ci(t)},decodePath:function e(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:Ci,decodePath:ki},slash:{encodePath:ki,decodePath:ki}};var Zi=function e(){var t=window.location.href;var n=t.indexOf("#");return n===-1?"":t.substring(n+1)};var Ji=function e(t){return window.location.hash=t};var Qi=function e(t){var n=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,n>=0?n:0)+"#"+t)};var ea=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};mi(Di,"Hash history needs a DOM");var n=window.history;var r=zi();var i=t.getUserConfirmation,a=i===undefined?Ii:i,o=t.hashType,s=o===undefined?"slash":o;var u=t.basename?Ei(ki(t.basename)):"";var l=Xi[s],c=l.encodePath,f=l.decodePath;var d=function e(){var t=f(Zi());pi(!u||Ti(t,u),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+t+'" to begin with "'+u+'".');if(u){t=Si(t,u)}return Mi(t)};var h=Ri();var p=function e(t){$i(B,t);B.length=n.length;h.notifyListeners(B.location,B.action)};var v=false;var m=null;var g=function e(){var t=Zi();var n=c(t);if(t!==n){Qi(n)}else{var r=d();var i=B.location;if(!v&&Ni(i,r)){return}if(m===Pi(r)){return}m=null;y(r)}};var y=function e(t){if(v){v=false;p()}else{var n="POP";h.confirmTransitionTo(t,n,a,function(e){if(e){p({action:n,location:t})}else{b(t)}})}};var b=function e(t){var n=B.location;var r=k.lastIndexOf(Pi(n));if(r===-1){r=0}var i=k.lastIndexOf(Pi(t));if(i===-1){i=0}var a=r-i;if(a){v=true;E(a)}};var x=Zi();var w=c(x);if(x!==w){Qi(w)}var _=d();var k=[Pi(_)];var C=function e(t){return"#"+c(u+Pi(t))};var T=function e(t,n){pi(n===undefined,"Hash history cannot push state; it is ignored");var r="PUSH";var i=Mi(t,undefined,undefined,B.location);h.confirmTransitionTo(i,r,a,function(e){if(!e){return}var t=Pi(i);var n=c(u+t);var a=Zi()!==n;if(a){m=t;Ji(n);var o=k.lastIndexOf(Pi(B.location));var s=k.slice(0,o===-1?0:o+1);s.push(t);k=s;p({action:r,location:i})}else{pi(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");p()}})};var S=function e(t,n){pi(n===undefined,"Hash history cannot replace state; it is ignored");var r="REPLACE";var i=Mi(t,undefined,undefined,B.location);h.confirmTransitionTo(i,r,a,function(e){if(!e){return}var t=Pi(i);var n=c(u+t);var a=Zi()!==n;if(a){m=t;Qi(n)}var o=k.indexOf(Pi(B.location));if(o!==-1){k[o]=t}p({action:r,location:i})})};var E=function e(t){pi(r,"Hash history go(n) causes a full page reload in this browser");n.go(t)};var A=function e(){return E(-1)};var P=function e(){return E(1)};var O=0;var M=function e(t){O+=t;if(O===1){Bi(window,Gi,g)}else if(O===0){Li(window,Gi,g)}};var N=false;var R=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=h.setPrompt(t);if(!N){M(1);N=true}return function(){if(N){N=false;M(-1)}return n()}};var D=function e(t){var n=h.appendListener(t);M(1);return function(){M(-1);n()}};var B={length:n.length,action:"POP",location:_,createHref:C,push:T,replace:S,go:E,goBack:A,goForward:P,block:R,listen:D};return B};var ta=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var na=Object.assign||function(e){var t=arguments;for(var n=1;n<arguments.length;n++){var r=t[n];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};var ra=function e(t,n,r){return Math.min(Math.max(t,n),r)};var ia=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=t.getUserConfirmation,r=t.initialEntries,i=r===undefined?["/"]:r,a=t.initialIndex,o=a===undefined?0:a,s=t.keyLength,u=s===undefined?6:s;var l=Ri();var c=function e(t){na(k,t);k.length=k.entries.length;l.notifyListeners(k.location,k.action)};var f=function e(){return Math.random().toString(36).substr(2,u)};var d=ra(o,0,i.length-1);var h=i.map(function(e){return typeof e==="string"?Mi(e,undefined,f()):Mi(e,undefined,e.key||f())});var p=Pi;var v=function e(t,r){pi(!((typeof t==="undefined"?"undefined":ta(t))==="object"&&t.state!==undefined&&r!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="PUSH";var a=Mi(t,r,f(),k.location);l.confirmTransitionTo(a,i,n,function(e){if(!e){return}var t=k.index;var n=t+1;var r=k.entries.slice(0);if(r.length>n){r.splice(n,r.length-n,a)}else{r.push(a)}c({action:i,location:a,index:n,entries:r})})};var m=function e(t,r){pi(!((typeof t==="undefined"?"undefined":ta(t))==="object"&&t.state!==undefined&&r!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var i="REPLACE";var a=Mi(t,r,f(),k.location);l.confirmTransitionTo(a,i,n,function(e){if(!e){return}k.entries[k.index]=a;c({action:i,location:a})})};var g=function e(t){var r=ra(k.index+t,0,k.entries.length-1);var i="POP";var a=k.entries[r];l.confirmTransitionTo(a,i,n,function(e){if(e){c({action:i,location:a,index:r})}else{c()}})};var y=function e(){return g(-1)};var b=function e(){return g(1)};var x=function e(t){var n=k.index+t;return n>=0&&n<k.entries.length};var w=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return l.setPrompt(t)};var _=function e(t){return l.appendListener(t)};var k={length:h.length,action:"POP",location:h[d],index:d,entries:h,createHref:p,push:v,replace:m,go:g,goBack:y,goForward:b,canGo:x,block:w,listen:_};return k};var aa={BROWSER:"BROWSER",MEMORY:"MEMORY",HASH:"HASH"};var oa=function e(t){if(t===void 0){t=aa.BROWSER}switch(t){case aa.BROWSER:this._history=Yi();break;case aa.MEMORY:this._history=ia();break;case aa.HASH:this._history=ea();break;default:break}this._routes=[];this._unlistener=null;this._onBefore=null;this._onBeforeOnce=null;this._onAfter=null;this._onAfterOnce=null};oa.prototype.start=function e(t){var n=this;if(t===void 0){t=true}this._unlistener=this._history.listen(function(e,t){n._change(e,t)});if(t){this._change(this.getCurrentLocation(),this.getCurrentAction())}};oa.prototype.stop=function e(){if(!this._unlistener){return}this._unlistener();this._unlistener=null};oa.prototype.on=function e(t,n,r,i){var a=[];var o=Wr(t,a);this._routes.push({pattern:t,regexp:o,keys:a,onEnter:n,onBefore:r,onAfter:i});return this};oa.prototype.onBefore=function e(t){this._onBefore=t;return this};oa.prototype.onBeforeOnce=function e(t){this._onBeforeOnce=t;return this};oa.prototype.onAfter=function e(t){this._onAfter=t;return this};oa.prototype.onAfterOnce=function e(t){this._onAfterOnce=t;return this};oa.prototype.navigateTo=function e(t){var n=this;return di.resolve().then(function(){if(n.getCurrentLocation().pathname===t){console.warn("same path is passed.");return}n._history.push(t)})};oa.prototype.replace=function e(t){var n=this;return di.resolve().then(function(){if(n.getCurrentLocation().pathname===t){console.warn("same path is passed.");return}n._history.replace(t)})};oa.prototype.getCurrentLocation=function e(){return this._history.location};oa.prototype.getCurrentAction=function e(){return this._history.action};oa.prototype.createHref=function e(t){return this._history.createHref({pathname:t})};oa.prototype._change=function e(t){var n=this;var r=zr(this._routes,function(e){return!!e.regexp.exec(t.pathname)});if(!r){return}var i=this._parseLocation(t,r);var a=false;var o=function(e){a=true;n.replace(e)};di.resolve().then(function(){if(!n._onBeforeOnce){return di.resolve()}var e=n._onBeforeOnce;n._onBeforeOnce=null;return e(i)}).then(function(){if(!n._onBefore){return di.resolve()}return n._onBefore(i)}).then(function(){if(!r.onBefore){return di.resolve()}return r.onBefore(i,o)}).then(function(){if(a||!r.onEnter){return di.resolve()}return r.onEnter(i)}).then(function(){if(a||!r.onAfter){return di.resolve()}return r.onAfter(i)}).then(function(){if(a||!n._onAfter){return di.resolve()}return n._onAfter(i)}).then(function(){if(a||!n._onAfterOnce){return di.resolve()}var e=n._onAfterOnce;n._onAfterOnce=null;return e(i)}).catch(function(e){console.error(e.message||"couldn't route. check the onBefore and onAfter functions.")})};oa.prototype._parseLocation=function e(t,n){var r={};var i=n.regexp.exec(t.pathname).slice(1);Hr(n.keys,function(e,t){r[e.name]=i[t]});var a={};Hr(t.search.slice(1).split("&"),function(e){if(!e){return}var t=e.split("=");a[t[0]]=t[1]});var o=t.hash.slice(1);return{params:r,queries:a,hash:o,pathname:t.pathname}};oa.BROWSER=aa.BROWSER;oa.MEMORY=aa.MEMORY;oa.HASH=aa.HASH;i.tag2("viron-icon-exclamation",'<svg viewbox="-8007 1982 2 8"> <g transform="translate(-8379 1794.5)"> <rect width="5" height="2" rx="0.4" transform="translate(372 192.5) rotate(-90)"></rect> <rect width="2" height="2" rx="0.4" transform="translate(372 195.5) rotate(-90)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconExclamation {opts.class}"',function(e){});var sa=function(){const e=()=>{const e=JSON.stringify(this.opts.data,undefined,4);let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");t=t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,e=>{let t="number";if(/^"/.test(e)){if(/:$/.test(e)){t="key"}else{t="string"}}else if(/true|false/.test(e)){t="boolean"}else if(/null/.test(e)){t="null"}return'<span class="Prettyprint__'+t+'">'+e+"</span>"});this.refs.canvas.innerHTML=t};this.on("mount",()=>{e()}).on("updated",()=>{e()})};i.tag2("viron-prettyprint",'<pre class="Prettyprint__canvas" ref="canvas"></pre>',"",'class="Prettyprint"',function(e){this.external(sa)});var ua=function(){this.title=this.opts.title;this.message=this.opts.message;this.detail=null;const e=this.opts.error;if(!!e){this.title=this.title||e.name||e.statusText||"Error";this.message=this.message||e.message}if(!!e&&!!e.response&&!!e.response.obj&&!!e.response.obj.error&&!!e.response.obj.error.data){const t=e.response.obj.error.data;this.title=t.name||this.title;this.message=t.message||this.message}this.on("mount",()=>{const e=this.opts.error;if(!e){return}if(e instanceof Error){return}Promise.resolve().then(()=>{if(!!e.json){return e.json()}return e.text().then(e=>JSON.parse(e))}).then(e=>{const t=e.error;this.detail=t;!this.opts.title&&!!t.name&&(this.title=t.name);!this.opts.message&&!!t.data&&!!t.data.message&&(this.message=t.data.message);this.update()}).catch(()=>{return Promise.resolve()})})};i.tag2("viron-error",'<div class="Error__icon"> <viron-icon-exclamation></viron-icon-exclamation> </div> <div class="Error__title">{title}</div> <div class="Error__message" if="{!!message}">{message}</div> <viron-prettyprint if="{!!detail}" data="{detail}"></viron-prettyprint>',"",'class="Error"',function(e){this.external(ua)});var la={onBefore:(e,t,n)=>{const r=t.params.endpointKey;const i=e.getter("endpoints.one",r);if(!i){return Promise.resolve().then(()=>{n("/")}).catch(t=>e.action("modals.add","viron-error",{error:t}))}return Promise.resolve().then(()=>e.action("current.update",r)).then(()=>{const t=e.getter("viron.existence");if(t){return Promise.resolve()}return Promise.resolve().then(()=>e.action("oas.setup",r,i.url,i.token)).then(()=>e.action("viron.get",r))}).then(()=>{if(!t.params.page){return Promise.resolve().then(()=>{const t=e.getter("viron.pageIdOf",0);n(`/${r}/${t}`)})}return e.action("page.get",t.params.page)}).catch(t=>{if(t.status!==401){return e.action("modals.add","viron-error",{error:t})}return Promise.resolve().then(()=>e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå",message:"Ë™çË®º„ÅåÂàá„Çå„Åæ„Åó„Åü„ÄÇÂÜçÂ∫¶„É≠„Ç∞„Ç§„É≥„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"})).then(()=>{n("/")})})},onEnter:(e,t)=>{return e.action("location.update",{name:"components",route:t})}};var ca={onBefore:e=>{return Promise.resolve().then(()=>Promise.all([e.action("current.remove"),e.action("page.remove"),e.action("oas.clear"),e.action("viron.remove")])).catch(t=>e.action("modals.add","viron-error",{error:t}))},onEnter:(e,t)=>{return e.action("location.update",{name:"endpoints",route:t})}};var fa={onBefore:(e,t,n)=>{const r=JSON.parse(decodeURIComponent(t.queries.endpoint));const i=r.url;if(!!e.getter("endpoints.oneByURL",i)){return Promise.resolve().then(()=>{n("/");e.action("toasts.add",{message:`Êó¢„Å´„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„ÅåÂ≠òÂú®„Åó„Åæ„Åô„ÄÇ`})})}return Promise.resolve().then(()=>e.action("endpoints.mergeOneWithKey",r)).then(()=>e.action("modals.add","viron-error",{title:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàËøΩÂä†",message:`„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„Åå‰∏ÄË¶ß„Å´ËøΩÂä†„Åï„Çå„Åæ„Åó„Åü„ÄÇ`})).then(()=>{n("/")}).catch(t=>{n("/");e.action("modals.add","viron-error",{title:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„ÉàËøΩÂä† Â§±Êïó",message:`„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà(${i})„ÇíËøΩÂä†Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ`,error:t})})}};var da={onEnter:(e,t)=>{return e.action("location.update",{name:"notfound",route:t})}};var ha={onBefore:(e,t,n)=>{const r=t.params.endpointKey;const i=t.queries.token;const a=!!i;let o;const s=[];if(a){o=`/${r}`;s.push(e.action("auth.update",r,decodeURIComponent(i)))}else{o="/";s.push(e.action("auth.remove",r));s.push(e.action("modals.add","viron-error",{title:"Ë™çË®ºÂ§±Êïó",message:"OAuthË™çË®º„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÊ≠£„Åó„ÅÑ„Ç¢„Ç´„Ç¶„É≥„Éà„ÅßÂÜçÂ∫¶„ÅäË©¶„Åó‰∏ã„Åï„ÅÑ„ÄÇË©≥„Åó„ÅÑ„Ç®„É©„ÉºÂéüÂõ†„Å´„Å§„ÅÑ„Å¶„ÅØÁÆ°ÁêÜËÄÖ„Å´Âïè„ÅÑÂêà„Çè„Åõ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"}))}return Promise.all(s).then(()=>{n(o)}).catch(t=>e.action("modals.add","viron-error",{error:t}))}};let pa;var va={init:e=>{return Promise.resolve().then(()=>{const t=new oa(oa.HASH);t.onBefore(()=>Promise.all([e.action("application.startNavigation")])).on("/",t=>ca.onEnter(e,t),(t,n)=>ca.onBefore(e,t,n)).on("/oauthredirect/:endpointKey",()=>Promise.resolve(),(t,n)=>ha.onBefore(e,t,n)).on("/endpointimport",()=>Promise.resolve(),(t,n)=>fa.onBefore(e,t,n)).on("/:endpointKey/:page?",t=>la.onEnter(e,t),(t,n)=>la.onBefore(e,t,n)).on("*",t=>da.onEnter(e,t)).onAfter(()=>Promise.all([e.action("application.endNavigation")])).onAfterOnce(()=>e.action("application.launch"));return t}).then(e=>{e.start();pa=e;return e})},getInstance:()=>{return pa}};const ma="ontouchstart"in document;const ga=10;const ya="hold";var ba={init:()=>{return Promise.resolve().then(()=>{i.settings.autoUpdate=false;i.mixin({init:function(){this.i18n=Je.get()},listen:function(...e){const t=this.riotx.get();this.riotxChange(t,...e)},external:function(e){const t=this;e.apply(t)},close:function(){if(this.opts.isModal){this.opts.modalCloser()}if(this.opts.isMediapreview){this.opts.mediapreviewCloser()}if(this.opts.isDrawer){this.opts.drawerCloser()}if(this.opts.isPopover){this.opts.popoverCloser()}},closeAllFloats:function(){const e=this.riotx.get();e.action("popovers.removeAll")},getRouter:()=>{return va.getInstance()},getClickHandler:function(e){if(ma){return false}let t=this;while(e.indexOf("parent.")===0){e=e.replace("parent.","");t=t.parent}return t[e]},getTouchStartHandler:function(){if(!ma){return false}return e=>{const t=e.touches[0].pageX;const n=e.touches[0].pageY;e.currentTarget.setAttribute("touch_start_x",t);e.currentTarget.setAttribute("touch_start_y",n);e.currentTarget.classList.add(ya)}},getTouchMoveHandler:function(){if(!ma){return false}return e=>{const t=e.currentTarget.classList.contains(ya);if(!t){return}const n=e.currentTarget.getAttribute("touch_start_x");const r=e.currentTarget.getAttribute("touch_start_y");const i=e.touches[0].pageX;const a=e.touches[0].pageY;const o=i-n;const s=a-r;const u=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));if(u>=ga){e.currentTarget.classList.remove(ya)}}},getTouchEndHandler:function(e){if(!ma){return false}let t=this;while(e.indexOf("parent.")===0){e=e.replace("parent.","");t=t.parent}const n=t[e];return e=>{const t=e.currentTarget.classList.contains(ya);if(t){n(e)}e.currentTarget.classList.remove(ya)}}})})}};var xa=n(function(t){(function(e){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&t.exports){t.exports=a}else if(!e.Promise){e.Promise=a}})(e)});(function(e){"use strict";if(e.fetch){return}var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer){var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var r=function(e){return e&&DataView.prototype.isPrototypeOf(e)};var i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1}}function a(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function o(e){if(typeof e!=="string"){e=String(e)}return e}function s(e){var n={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};if(t.iterable){n[Symbol.iterator]=function(){return n}}return n}function u(e){this.map={};if(e instanceof u){e.forEach(function(e,t){this.append(t,e)},this)}else if(Array.isArray(e)){e.forEach(function(e){this.append(e[0],e[1])},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}u.prototype.append=function(e,t){e=a(e);t=o(t);var n=this.map[e];this.map[e]=n?n+","+t:t};u.prototype["delete"]=function(e){delete this.map[a(e)]};u.prototype.get=function(e){e=a(e);return this.has(e)?this.map[e]:null};u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))};u.prototype.set=function(e,t){this.map[a(e)]=o(t)};u.prototype.forEach=function(e,t){for(var n in this.map){if(this.map.hasOwnProperty(n)){e.call(t,this.map[n],n,this)}}};u.prototype.keys=function(){var e=[];this.forEach(function(t,n){e.push(n)});return s(e)};u.prototype.values=function(){var e=[];this.forEach(function(t){e.push(t)});return s(e)};u.prototype.entries=function(){var e=[];this.forEach(function(t,n){e.push([n,t])});return s(e)};if(t.iterable){u.prototype[Symbol.iterator]=u.prototype.entries}function l(e){if(e.bodyUsed){return Promise.reject(new TypeError("Already read"))}e.bodyUsed=true}function c(e){return new Promise(function(t,n){e.onload=function(){t(e.result)};e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader;var n=c(t);t.readAsArrayBuffer(e);return n}function d(e){var t=new FileReader;var n=c(t);t.readAsText(e);return n}function h(e){var t=new Uint8Array(e);var n=new Array(t.length);for(var r=0;r<t.length;r++){n[r]=String.fromCharCode(t[r])}return n.join("")}function p(e){if(e.slice){return e.slice(0)}else{var t=new Uint8Array(e.byteLength);t.set(new Uint8Array(e));return t.buffer}}function v(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if(!e){this._bodyText=""}else if(typeof e==="string"){this._bodyText=e}else if(t.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e}else if(t.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this._bodyText=e.toString()}else if(t.arrayBuffer&&t.blob&&r(e)){this._bodyArrayBuffer=p(e.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))){this._bodyArrayBuffer=p(e)}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof e==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(t.blob){this.blob=function(){var e=l(this);if(e){return e}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return l(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(f)}}}this.text=function(){var e=l(this);if(e){return e}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(h(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(t.formData){this.formData=function(){return this.text().then(b)}}this.json=function(){return this.text().then(JSON.parse)};return this}var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function y(e,t){t=t||{};var n=t.body;if(e instanceof y){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new u(e.headers)}this.method=e.method;this.mode=e.mode;if(!n&&e._bodyInit!=null){n=e._bodyInit;e.bodyUsed=true}}else{this.url=String(e)}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new u(t.headers)}this.method=g(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&n){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(n)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})};function b(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var n=e.split("=");var r=n.shift().replace(/\+/g," ");var i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}});return t}function x(e){var t=new u;e.split(/\r?\n/).forEach(function(e){var n=e.split(":");var r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}});return t}v.call(y.prototype);function w(e,t){if(!t){t={}}this.type="default";this.status="status"in t?t.status:200;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in t?t.statusText:"OK";this.headers=new u(t.headers);this.url=t.url||"";this._initBody(e)}v.call(w.prototype);w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})};w.error=function(){var e=new w(null,{status:0,statusText:""});e.type="error";return e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(_.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new w(null,{status:t,headers:{location:e}})};e.Headers=u;e.Request=y;e.Response=w;e.fetch=function(e,n){return new Promise(function(r,i){var a=new y(e,n);var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:x(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new w(t,e))};o.onerror=function(){i(new TypeError("Network request failed"))};o.ontimeout=function(){i(new TypeError("Network request failed"))};o.open(a.method,a.url,true);if(a.credentials==="include"){o.withCredentials=true}if("responseType"in o&&t.blob){o.responseType="blob"}a.headers.forEach(function(e,t){o.setRequestHeader(t,e)});o.send(typeof a._bodyInit==="undefined"?null:a._bodyInit)})};e.fetch.polyfill=true})(typeof self!=="undefined"?self:window);window.Promise=xa;var wa="0.9.4";function _a(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var ka=_a;function Ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Ta=Ca;var Sa;var Ea;function Aa(){Ea=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];Sa=true;for(var e in{toString:null}){Sa=false}}function Pa(e,t,n){var r,i=0;if(Sa==null){Aa()}for(r in e){if(Oa(t,e,r,n)===false){break}}if(Sa){var a=e.constructor,o=!!a&&e===a.prototype;while(r=Ea[i++]){if((r!=="constructor"||!o&&Ta(e,r))&&e[r]!==Object.prototype[r]){if(Oa(t,e,r,n)===false){break}}}}}function Oa(e,t,n,r){return e.call(r,t[n],n,t)}var Ma=Pa;function Na(e,t,n){Ma(e,function(r,i){if(Ta(e,i)){return t.call(n,e[i],i,e)}})}var Ra=Na;var Da=Object.keys||function(e){var t=[];Ra(e,function(e,n){t.push(n)});return t};var Ba=Da;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var La=Object.getOwnPropertySymbols;var Ia=Object.prototype.hasOwnProperty;var Fa=Object.prototype.propertyIsEnumerable;function ja(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function za(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}var Ha=za()?Object.assign:function(e,t){var n=arguments;var r;var i=ja(e);var a;for(var o=1;o<arguments.length;o++){r=Object(n[o]);for(var s in r){if(Ia.call(r,s)){i[s]=r[s]}}if(La){a=La(r);for(var u=0;u<a.length;u++){if(Fa.call(r,a[u])){i[a[u]]=r[a[u]]}}}}return i};var Ua=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function Wa(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Va=Wa(function(e){(function(t){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;l(e);return}else if(typeof n==="function"){f(i(n,t),e);return}}e._state=1;e._value=t;l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;l(e)}function l(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function c(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function f(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new c(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&e.exports){e.exports=a}else if(!t.Promise){t.Promise=a}})(Ua)});var qa={debug:false,default:"@",changeBindName:"riotxChange"};var Ka=function(){var e=[],t=arguments.length;while(t--){e[t]=arguments[t]}if(!qa.debug){return}e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var Ya=function e(t){this.name=t.name;if(!this.name){this.name=qa.default;Ka("Default store name. name="+this.name)}this.state=Ha({},t.state);this._actions=Ha({},t.actions);this._mutations=Ha({},t.mutations);this._getters=Ha({},t.getters);i.observable(this)};Ya.prototype.getter=function e(t){var n=[],r=arguments.length-1;while(r-- >0){n[r]=arguments[r+1]}Ka("[getter]",t,n);var i={state:Ha({},this.state)};return this._getters[t].apply(null,[i].concat(n))};Ya.prototype.commit=function e(t){var n=this;var r=[],i=arguments.length-1;while(i-- >0){r[i]=arguments[i+1]}var a=Ha({},this.state);Ka.apply(void 0,["[commit(before)]",t,a].concat(r));var o={getter:function(e){var t=[],r=arguments.length-1;while(r-- >0){t[r]=arguments[r+1]}return n.getter.apply(n,[e].concat(t))},state:a};var s=this._mutations[t].apply(null,[o].concat(r));Ka.apply(void 0,["[commit(after)]",t,a].concat(r));Ha(this.state,a);ka(s,function(e){n.trigger(e,n.state,n)})};Ya.prototype.action=function e(t){var n=this;var r=[],i=arguments.length-1;while(i-- >0){r[i]=arguments[i+1]}Ka("[action]",t,r);var a={getter:function(e){var t=[],r=arguments.length-1;while(r-- >0){t[r]=arguments[r+1]}return n.getter.apply(n,[e].concat(t))},state:Ha({},this.state),commit:function(){var e=[],t=arguments.length;while(t--){e[t]=arguments[t]}(r=n).commit.apply(r,e);var r}};return Va.resolve().then(function(){return n._actions[t].apply(null,[a].concat(r))})};Ya.prototype.change=function e(){var t=[],n=arguments.length;while(n--){t[n]=arguments[n]}(r=this).on.apply(r,t);var r};var $a=function e(){this.version=wa||"";this.Store=Ya;this.stores={};var t=function(e,t,n){var r=[],i=arguments.length-3;while(i-- >0){r[i]=arguments[i+3]}this._riotx_change_handlers.push({store:e,evtName:t,handler:n});r.unshift(n);r.unshift(t);e.change.apply(e,r)};i.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*");ka(e._riotx_change_handlers,function(e){e.store.off(e.evtName,e.handler)});delete e.riotx;delete e._riotx_change_handlers;delete e[qa.changeBindName]});if(qa.debug){this.on("*",function(t){Ka(t,e)})}this._riotx_change_handlers=[];this[qa.changeBindName]=t},riotx:this})};$a.prototype.add=function e(t){if(this.stores[t.name]){throw new Error("The store instance named `"+t.name+"` already exists.")}this.stores[t.name]=t;return this};$a.prototype.get=function e(t){if(t===void 0){t=qa.default}return this.stores[t]};$a.prototype.debug=function e(t){qa.debug=!!t;return this};$a.prototype.setChangeBindName=function e(t){qa.changeBindName=t;return this};$a.prototype.reset=function e(){this.stores={};return this};$a.prototype.size=function e(){return Ba(this.stores).length};var Ga=new $a;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var Xa=Object.getOwnPropertySymbols;var Za=Object.prototype.hasOwnProperty;var Ja=Object.prototype.propertyIsEnumerable;function Qa(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function eo(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}var to=eo()?Object.assign:function(e,t){var n;var r=Qa(e);var i;for(var a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var o in n){if(Za.call(n,o)){r[o]=n[o]}}if(Xa){i=Xa(n);for(var s=0;s<i.length;s++){if(Ja.call(n,i[s])){r[i[s]]=n[i[s]]}}}}return r};function no(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ro=no;var io;var ao;function oo(){ao=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];io=true;for(var e in{toString:null}){io=false}}function so(e,t,n){var r,i=0;if(io==null){oo()}for(r in e){if(uo(t,e,r,n)===false){break}}if(io){var a=e.constructor,o=!!a&&e===a.prototype;while(r=ao[i++]){if((r!=="constructor"||!o&&ro(e,r))&&e[r]!==Object.prototype[r]){if(uo(t,e,r,n)===false){break}}}}}function uo(e,t,n,r){return e.call(r,t[n],n,t)}var lo=so;function co(e,t,n){lo(e,function(r,i){if(ro(e,i)){return t.call(n,e[i],i,e)}})}var fo=co;var ho=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=t});return n};var po=ho("application",{launch:e=>{return Promise.resolve().then(()=>{e.commit("application.launch",true)})},startNavigation:e=>{return Promise.resolve().then(()=>{e.commit("application.navigation",true)})},endNavigation:e=>{return Promise.resolve().then(()=>{e.commit("application.navigation",false)})},startDrag:e=>{return Promise.resolve().then(()=>{e.commit("application.drag",true)})},endDrag:e=>{return Promise.resolve().then(()=>{e.commit("application.drag",false)})},toggleMenu:e=>{return Promise.resolve().then(()=>{e.commit("application.menuToggle")})},updateEndpointFilterText:(e,t)=>{return Promise.resolve().then(()=>{e.commit("application.endpointFilterText",t);e.commit("application.endpointTempFilterText",t)})},updateEndpointTempFilterText:(e,t)=>{return Promise.resolve().then(()=>{e.commit("application.endpointTempFilterText",t)})},resetEndpointFilterText:e=>{return Promise.resolve().then(()=>{e.commit("application.endpointFilterText","");e.commit("application.endpointTempFilterText","")})}});function vo(e){return Object.prototype.toString.call(e).slice(8,-1)}var mo=vo;function go(e,t){return mo(e)===t}var yo=go;function bo(e){return yo(e,"Object")}var xo=bo;const wo=e=>{return JSON.stringify(e)};const _o=e=>{const t=[];const n=Object.keys(e);n.forEach(n=>{const r=e[n];const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;t.push(i)});return t.join("&")};const ko=e=>{const t=new FormData;const n=Object.keys(e);n.forEach(n=>{const r=e[n];if(xo(r)||Array.isArray(r)){t.append(n,JSON.stringify(r))}else if(r!=null){t.append(n,r)}});return t};const Co=(e,t,n)=>{n=to({mode:"cors",redirect:"follow",headers:{"Content-Type":"application/json"},cache:"no-store"},n);if(!!n.body&&(n.method==="POST"||n.method==="PUT")){switch(n.headers["Content-Type"]){case"application/json":n.body=wo(n.body);break;case"application/x-www-form-urlencoded":n.body=_o(n.body);break;case"multipart/form-data":n.body=ko(n.body);break;default:break}}const r=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:r,url:t,options:n})).then(()=>Promise.race([fetch(t,n),new Promise((e,t)=>{setTimeout(()=>{t(new Error("ÊôÇÈñì„Åå„Åã„Åã„ÇäÈÅé„Åé„Åü„Åü„ÇÅÈÄö‰ø°„Çí‰∏≠Êñ≠„Åó„Åæ„Åó„Åü„ÄÇ"))},1e3*10)})])).then(t=>{e.commit("application.removeNetworking",r,e);return t}).then(e=>{if(!e.ok){return Promise.reject(e)}return Promise.resolve(e)}).catch(t=>{e.commit("application.removeNetworking",r,e);throw t})};var To=ho("auth",{update:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.updateToken",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.updateToken",t,null)})},validate:(e,t)=>{const n=e.getter("endpoints.one",t);return Promise.resolve().then(()=>Co(e,n.url,{headers:{Authorization:n.token}})).then(n=>{const r=n.headers.get("Authorization");if(!!r){e.commit("endpoints.updateToken",t,r)}return true}).catch(n=>{if(n.status!==401){throw n}e.commit("endpoints.updateToken",t,null);return false})},getTypes:(e,t)=>{const n=e.getter("endpoints.one",t);const r=`${new URL(n.url).origin}/viron_authtype`;return Promise.resolve().then(()=>Co(e,r)).then(e=>e.json())},signinOAuth:(e,t,n)=>{return Promise.resolve().then(()=>{const r=e.getter("endpoints.one",t);const i=new URL(r.url).origin;const a=encodeURIComponent(`${location.href}oauthredirect/${t}`);const o=`${i}${n.url}?redirect_url=${a}`;location.href=o})},signinEmail:(e,t,n,r,i)=>{const a=e.getter("endpoints.one",t);const o=`${new URL(a.url).origin}${n.url}`;return Promise.resolve().then(()=>Co(e,o,{method:n.method,body:{email:r,password:i}})).then(n=>{const r=n.headers.get("Authorization");e.commit("endpoints.updateToken",t,r)})}});function So(e,t){var n=0;for(var r=e.length-1;r>=0;r--){var i=e[r];if(i==="."){e.splice(r,1)}else if(i===".."){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t){for(;n--;n){e.unshift("..")}}return e}var Eo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var Ao=function(e){return Eo.exec(e).slice(1)};function Po(){var e="",t=false;for(var n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if(typeof r!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!r){continue}e=r+"/"+e;t=r.charAt(0)==="/"}e=So(zo(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function Oo(e){var t=Mo(e),n=Ho(e,-1)==="/";e=So(zo(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&n){e+="/"}return(t?"/":"")+e}function Mo(e){return e.charAt(0)==="/"}function No(){var e=Array.prototype.slice.call(arguments,0);return Oo(zo(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function Ro(e,t){e=Po(e).substr(1);t=Po(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!==""){break}}var n=e.length-1;for(;n>=0;n--){if(e[n]!==""){break}}if(t>n){return[]}return e.slice(t,n-t+1)}var r=n(e.split("/"));var i=n(t.split("/"));var a=Math.min(r.length,i.length);var o=a;for(var s=0;s<a;s++){if(r[s]!==i[s]){o=s;break}}var u=[];for(var s=o;s<r.length;s++){u.push("..")}u=u.concat(i.slice(o));return u.join("/")}var Do="/";var Bo=":";function Lo(e){var t=Ao(e),n=t[0],r=t[1];if(!n&&!r){return"."}if(r){r=r.substr(0,r.length-1)}return n+r}function Io(e,t){var n=Ao(e)[2];if(t&&n.substr(-1*t.length)===t){n=n.substr(0,n.length-t.length)}return n}function Fo(e){return Ao(e)[3]}var jo={extname:Fo,basename:Io,dirname:Lo,sep:Do,delimiter:Bo,relative:Ro,join:No,isAbsolute:Mo,normalize:Oo,resolve:Po};function zo(e,t){if(e.filter){return e.filter(t)}var n=[];for(var r=0;r<e.length;r++){if(t(e[r],r,e)){n.push(e[r])}}return n}var Ho="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){if(t<0){t=e.length+t}return e.substr(t,n)};var Uo=Object.freeze({resolve:Po,normalize:Oo,isAbsolute:Mo,join:No,relative:Ro,sep:Do,delimiter:Bo,dirname:Lo,basename:Io,extname:Fo,default:jo});var Wo=Uo&&jo||Uo;"use strict";var Vo=is;var qo=ls;var Ko=Wo.basename;var Yo=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g;var $o=/%[0-9A-Fa-f]{2}/;var Go=/%([0-9A-Fa-f]{2})/g;var Xo=/[^\x20-\x7e\xa0-\xff]/g;var Zo=/\\([\u0000-\u007f])/g;var Jo=/([\\"])/g;var Qo=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g;var es=/^[\x20-\x7e\x80-\xff]+$/;var ts=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/;var ns=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/;var rs=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function is(e,t){var n=t||{};var r=n.type||"attachment";var i=as(e,n.fallback);return os(new ps(r,i))}function as(e,t){if(e===undefined){return}var n={};if(typeof e!=="string"){throw new TypeError("filename must be a string")}if(t===undefined){t=true}if(typeof t!=="string"&&typeof t!=="boolean"){throw new TypeError("fallback must be a string or boolean")}if(typeof t==="string"&&Xo.test(t)){throw new TypeError("fallback must be ISO-8859-1 string")}var r=Ko(e);var i=es.test(r);var a=typeof t!=="string"?t&&us(r):Ko(t);var o=typeof a==="string"&&a!==r;if(o||!i||$o.test(r)){n["filename*"]=r}if(i||o){n.filename=o?a:r}return n}function os(e){var t=e.parameters;var n=e.type;if(!n||typeof n!=="string"||!ts.test(n)){throw new TypeError("invalid type")}var r=String(n).toLowerCase();if(t&&typeof t==="object"){var i;var a=Object.keys(t).sort();for(var o=0;o<a.length;o++){i=a[o];var s=i.substr(-1)==="*"?hs(t[i]):ds(t[i]);r+="; "+i+"="+s}}return r}function ss(e){var t=ns.exec(e);if(!t){throw new TypeError("invalid extended field value")}var n=t[1].toLowerCase();var r=t[2];var i;var a=r.replace(Go,cs);switch(n){case"iso-8859-1":i=us(a);break;case"utf-8":i=new Buffer(a,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return i}function us(e){return String(e).replace(Xo,"?")}function ls(e){if(!e||typeof e!=="string"){throw new TypeError("argument string is required")}var t=rs.exec(e);if(!t){throw new TypeError("invalid type format")}var n=t[0].length;var r=t[1].toLowerCase();var i;var a=[];var o={};var s;n=Qo.lastIndex=t[0].substr(-1)===";"?n-1:n;while(t=Qo.exec(e)){if(t.index!==n){throw new TypeError("invalid parameter format")}n+=t[0].length;i=t[1].toLowerCase();s=t[2];if(a.indexOf(i)!==-1){throw new TypeError("invalid duplicate parameter")}a.push(i);if(i.indexOf("*")+1===i.length){i=i.slice(0,-1);s=ss(s);o[i]=s;continue}if(typeof o[i]==="string"){continue}if(s[0]==='"'){s=s.substr(1,s.length-2).replace(Zo,"$1")}o[i]=s}if(n!==-1&&n!==e.length){throw new TypeError("invalid parameter format")}return new ps(r,o)}function cs(e,t){return String.fromCharCode(parseInt(t,16))}function fs(e){var t=String(e).charCodeAt(0).toString(16).toUpperCase();return t.length===1?"%0"+t:"%"+t}function ds(e){var t=String(e);return'"'+t.replace(Jo,"\\$1")+'"'}function hs(e){var t=String(e);var n=encodeURIComponent(t).replace(Yo,fs);return"UTF-8''"+n}function ps(e,t){this.type=e;this.parameters=t}Vo.parse=qo;var vs=n(function(t,n){(function(e,n){if(typeof undefined==="function"&&undefined.amd){undefined([],n)}else{t.exports=n()}})(e,function(){return function e(t,n,r){var i=window,a="application/octet-stream",o=r||a,s=t,u=!n&&!r&&s,l=document.createElement("a"),c=function(e){return String(e)},f=i.Blob||i.MozBlob||i.WebKitBlob||c,d=n||"download",h,p;f=f.call?f.bind(i):Blob;if(String(this)==="true"){s=[s,o];o=s[0];s=s[1]}if(u&&u.length<2048){d=u.split("/").pop().split("?")[0];l.href=u;if(l.href.indexOf(u)!==-1){var v=new XMLHttpRequest;v.open("GET",u,true);v.responseType="blob";v.onload=function(t){e(t.target.response,d,a)};setTimeout(function(){v.send()},0);return v}}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(s)){if(s.length>1024*1024*1.999&&f!==c){s=m(s);o=s.type||a}else{return navigator.msSaveBlob?navigator.msSaveBlob(m(s),d):g(s)}}h=s instanceof f?s:new f([s],{type:o});function m(e){var t=e.split(/[:;,]/),n=t[1],r=t[2]=="base64"?atob:decodeURIComponent,i=r(t.pop()),a=i.length,o=0,s=new Uint8Array(a);for(o;o<a;++o){s[o]=i.charCodeAt(o)}return new f([s],{type:n})}function g(e,t){if("download"in l){l.href=e;l.setAttribute("download",d);l.className="download-js-link";l.innerHTML="downloading...";l.style.display="none";document.body.appendChild(l);setTimeout(function(){l.click();document.body.removeChild(l);if(t===true){setTimeout(function(){i.URL.revokeObjectURL(l.href)},250)}},66);return true}if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)){e=e.replace(/^data:([\w\/\-\+]+)/,a);if(!window.open(e)){if(confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")){location.href=e}}return true}var n=document.createElement("iframe");document.body.appendChild(n);if(!t){e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)}n.src=e;setTimeout(function(){document.body.removeChild(n)},333)}if(navigator.msSaveBlob){return navigator.msSaveBlob(h,d)}if(i.URL){g(i.URL.createObjectURL(h),true)}else{if(typeof h==="string"||h.constructor===c){try{return g("data:"+o+";base64,"+i.btoa(h))}catch(e){return g("data:"+o+","+encodeURIComponent(h))}}p=new FileReader;p.onload=function(e){g(this.result)};p.readAsDataURL(h)}return true}})});var ms=ho("components",{get:(e,t,n,r)=>{if(r===void 0)r={};const i=n.api.method;if(i!=="get"){return Promise.reject("only `get` method is allowed.")}let a=n.api.path;if(a.indexOf("/")!==0){a="/"+a}const o=e.getter("oas.apiByPathAndMethod",a,i);const s=e.getter("current.all");const u=e.getter("endpoints.one",s);const l=u.token;const c=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:c})).then(()=>o(r,{requestInterceptor:e=>{e.headers["Authorization"]=l}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(r=>{const i=r.headers["Authorization"];if(!!i){e.commit("endpoints.updateToken",s,i)}e.commit("components.updateOne",t,n,r.obj,r.headers);e.commit("application.removeNetworking",c,e)}).catch(t=>{e.commit("application.removeNetworking",c,e);throw t})},operate:(e,t,n)=>{const r=e.getter("oas.api",t.operationId);const i=e.getter("endpoints.one",e.getter("current.all")).token;const a=e.getter("current.all");const o=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:o})).then(()=>r(n,{requestInterceptor:e=>{e.headers["Authorization"]=i}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(t=>{e.commit("application.removeNetworking",o,e);const n=t.headers["Authorization"];if(!!n){e.commit("endpoints.updateToken",a,n)}const r=t.headers["content-disposition"];if(!r){return t}const i=Vo.parse(r);if(i.type!=="attachment"){return t}vs(t.data,i.parameters.filename,t.headers["content-type"]);return t}).catch(t=>{e.commit("application.removeNetworking",o,e);throw t})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("components.removeOne",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("components.removeAll")})}});var gs=ho("current",{update:(e,t)=>{return Promise.resolve().then(()=>{e.commit("current.all",t)})},remove:e=>{return Promise.resolve().then(()=>{e.commit("current.all",null)})}});var ys=ho("drawers",{add:(e,t,n,r)=>{return Promise.resolve().then(()=>{e.commit("drawers.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("drawers.remove",t)})}});"use strict";var bs=1;function xs(){bs=(bs*9301+49297)%233280;return bs/233280}function ws(e){bs=e}var _s={nextValue:xs,seed:ws};"use strict";var ks="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";var Cs;var Ts;var Ss;function Es(){Ss=false}function As(e){if(!e){if(Cs!==ks){Cs=ks;Es()}return}if(e===Cs){return}if(e.length!==ks.length){throw new Error("Custom alphabet for shortid must be "+ks.length+" unique characters. You submitted "+e.length+" characters: "+e)}var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length){throw new Error("Custom alphabet for shortid must be "+ks.length+" unique characters. These characters were not unique: "+t.join(", "))}Cs=e;Es()}function Ps(e){As(e);return Cs}function Os(e){_s.seed(e);if(Ts!==e){Es();Ts=e}}function Ms(){if(!Cs){As(ks)}var e=Cs.split("");var t=[];var n=_s.nextValue();var r;while(e.length>0){n=_s.nextValue();r=Math.floor(n*e.length);t.push(e.splice(r,1)[0])}return t.join("")}function Ns(){if(Ss){return Ss}Ss=Ms();return Ss}function Rs(e){var t=Ns();return t[e]}var Ds={characters:Ps,seed:Os,lookup:Rs,shuffled:Ns};"use strict";var Bs=typeof window==="object"&&(window.crypto||window.msCrypto);function Ls(){if(!Bs||!Bs.getRandomValues){return Math.floor(Math.random()*256)&48}var e=new Uint8Array(1);Bs.getRandomValues(e);return e[0]&48}var Is=Ls;"use strict";function Fs(e,t){var n=0;var r;var i="";while(!r){i=i+e(t>>4*n&15|Is());r=t<Math.pow(16,n+1);n++}return i}var js=Fs;"use strict";function zs(e){var t=Ds.shuffled();return{version:t.indexOf(e.substr(0,1))&15,worker:t.indexOf(e.substr(1,1))&15}}var Hs=zs;"use strict";var Us=1459707606518;var Ws=6;var Vs;var qs;function Ks(e){var t="";var n=Math.floor((Date.now()-Us)*.001);if(n===qs){Vs++}else{Vs=0;qs=n}t=t+js(Ds.lookup,Ws);t=t+js(Ds.lookup,e);if(Vs>0){t=t+js(Ds.lookup,Vs)}t=t+js(Ds.lookup,n);return t}var Ys=Ks;"use strict";function $s(e){if(!e||typeof e!=="string"||e.length<6){return false}var t=Ds.characters();var n=e.length;for(var r=0;r<n;r++){if(t.indexOf(e[r])===-1){return false}}return true}var Gs=$s;"use strict";var Xs=0;var Zs=n(function(e){"use strict";var t=Xs||0;function n(t){Ds.seed(t);return e.exports}function r(n){t=n;return e.exports}function i(e){if(e!==undefined){Ds.characters(e)}return Ds.shuffled()}function a(){return Ys(t)}e.exports=a;e.exports.generate=a;e.exports.seed=n;e.exports.worker=r;e.exports.characters=i;e.exports.decode=Hs;e.exports.isValid=Gs});"use strict";var Js=Zs;var Qs=ho("endpoints",{add:(e,t)=>{return Promise.resolve().then(()=>Co(e,t)).catch(n=>{if(n.status!==401){throw n}const r=Js.generate();const i={key:r,url:t,token:null,title:"",name:"",description:"",version:"",color:"",thumbnail:null,tags:[],theme:"standard"};e.commit("endpoints.add",r,i)})},update:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.update",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.remove",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.removeAll")})},mergeAll:(e,t)=>{return Promise.resolve().then(()=>{e.commit("endpoints.mergeAll",t)})},mergeOneWithKey:(e,t)=>{return Promise.resolve().then(()=>{const n=Js.generate();t.key=n;e.commit("endpoints.add",n,t)})},tidyUpOrder:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.tidyUpOrder")})},changeOrder:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("endpoints.changeOrder",t,n)})},cleanup:e=>{return Promise.resolve().then(()=>{e.commit("endpoints.cleanup")})}});var eu=ho("layout",{updateSize:(e,t,n)=>{return Promise.resolve().then(()=>{e.commit("layout.updateSize",t,n)})},updateComponentsGridColumnCount:(e,t)=>{return Promise.resolve().then(()=>{e.commit("layout.updateComponentsGridColumnCount",t)})}});var tu=ho("location",{update:(e,t)=>{return Promise.resolve().then(()=>{e.commit("location.all",t)})}});let nu=true;let ru;var iu=ho("mediapreviews",{add:(e,t,n)=>{if(!nu){console.warn("Â§öÈáç„Å´Ëµ∑Âãï„Åó„Å™„ÅÑ„Çà„ÅÜ„ÄÅ‰∏ÄÂÆöÊôÇÈñì„ÅÆ‰ΩúÊàê„ÇíË¶èÂà∂„Åô„Çã„ÄÇ");return Promise.resolve()}nu=false;clearTimeout(ru);ru=setTimeout(()=>{nu=true},300);return Promise.resolve().then(()=>{e.commit("mediapreviews.add",t,n)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("mediapreviews.remove",t)})}});let au=true;let ou;var su=ho("modals",{add:(e,t,n,r)=>{if(!au){console.warn("Â§öÈáç„Å´Ëµ∑Âãï„Åó„Å™„ÅÑ„Çà„ÅÜ„ÄÅ‰∏ÄÂÆöÊôÇÈñì„ÅÆ„É¢„Éº„ÉÄ„É´‰ΩúÊàê„ÇíË¶èÂà∂„Åô„Çã„ÄÇ");return Promise.resolve()}au=false;clearTimeout(ou);ou=setTimeout(()=>{au=true},300);return Promise.resolve().then(()=>{e.commit("modals.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("modals.remove",t)})}});var uu=Array.isArray||function(e){return yo(e,"Array")};var lu=uu;function cu(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var fu=cu;function du(e){var t=[],n,r;fo(e,function(e,i){if(lu(e)){n=i+"=";r=new RegExp("&"+i+"+=$");fu(e,function(e){n+=encodeURIComponent(e)+"&"+i+"="});t.push(n.replace(r,""))}else{t.push(i+"="+encodeURIComponent(e))}});return t.length?"?"+t.join("&"):""}var hu=du;const pu=window.SwaggerClient;var vu=ho("oas",{setup:(e,t,n,r)=>{return Promise.resolve().then(()=>pu.http({url:n,headers:{Authorization:r}})).then(e=>{if(e.status===401){const t=new Error;t.name="401 Authorization Required";t.status=e.spec.status;return Promise.reject(t)}return e}).then(e=>pu({spec:e.body})).then(e=>{const t=e.errors;if(!!t&&!!t.length){return Promise.reject(t)}return e}).then(n=>{e.commit("oas.client",n);e.commit("endpoints.update",t,n.spec.info)})},clear:e=>{return Promise.resolve().then(()=>{e.commit("oas.clearClient")})},getAutocomplete:(e,t,n)=>{const r=e.getter("current.all");const i=e.getter("endpoints.one",r);const a=i.token;const o=`${new URL(i.url).origin}${t}${hu(n)}`;return Promise.resolve().then(()=>Co(e,o,{headers:{Authorization:a}})).then(e=>e.json())}});function mu(e){return e}var gu=mu;function yu(e){return function(t){return t[e]}}var bu=yu;function xu(e,t){var n=-1,r=e.length;while(++n<r){if(ku(e[n],t)){return true}}return false}function wu(e,t){var n=-1,r=t.length;while(++n<r){if(!xu(e,t[n])){return false}}return true}function _u(e,t){var n=true;fo(t,function(t,r){if(!ku(e[r],t)){return n=false}});return n}function ku(e,t){if(e&&typeof e==="object"&&t&&typeof t==="object"){if(lu(e)&&lu(t)){return wu(e,t)}else{return _u(e,t)}}else{return e===t}}var Cu=ku;function Tu(e,t){if(e==null){return gu}switch(typeof e){case"function":return typeof t!=="undefined"?function(n,r,i){return e.call(t,n,r,i)}:e;case"object":return function(t){return Cu(t,e)};case"string":case"number":return bu(e)}}var Su=Tu;function Eu(e,t,n){t=Su(t,n);var r=false;fo(e,function(n,i){if(t(n,i,e)){r=true;return false}});return r}var Au=Eu;function Pu(e,t,n){t=Su(t,n);var r;Au(e,function(e,n,i){if(t(e,n,i)){r=e;return true}});return r}var Ou=Pu;var Mu=ho("page",{get:(e,t)=>{return Promise.resolve().then(()=>{const n=e.getter("viron.pages");const r=Ou(n,e=>{return e.id===t});e.commit("page.all",r)})},remove:e=>{return Promise.resolve().then(()=>{e.commit("page.all",null)})}});var Nu=ho("popovers",{add:(e,t,n,r)=>{return Promise.resolve().then(()=>{e.commit("popovers.add",t,n,r)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("popovers.remove",t)})},removeAll:e=>{return Promise.resolve().then(()=>{e.commit("popovers.removeAll")})}});var Ru=ho("toasts",{add:(e,t)=>{return Promise.resolve().then(()=>{e.commit("toasts.add",t)})},remove:(e,t)=>{return Promise.resolve().then(()=>{e.commit("toasts.remove",t)})}});var Du=n(function(t){/**
 * @name sua.js
 * @author Kei Funagayama <kei.topaz@gmail.com>
 * @overview UserAgent decision for browser. fork zepto.js(http://zeptojs.com/)
 * @license MIT
 */
(function(e){"use strict";function n(n){if(!n&&e&&e.navigator&&e.navigator.userAgent){n=e.navigator.userAgent}if(!n){throw new Error("useragent setup error. useragent not found.")}this.ie=!!(n.indexOf("MSIE")>=0||n.indexOf("Trident")>=0||n.indexOf("Edge")>=0),this.webkit=n.match(/(WebKit|Webkit)\/([\d.]+)/),this.android=n.match(/(Android)\s+([\d.]+)/),this.android23=n.match(/(Android)\s+(2\.3)([\d.]+)/),this.android4=n.match(/(Android)\s+(4)([\d.]+)/),this.android5=n.match(/(Android)\s+(5)([\d.]+)/),this.android6=n.match(/(Android)\s+(6)([\d.]+)/),this.android7=n.match(/(Android)\s+(7)([\d.]+)/),this.ipad=n.match(/(iPad).*OS\s([\d_]+)/),this.iphone=!this.ipad&&n.match(/(iPhone\sOS)\s([\d_]+)/),this.webos=n.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),this.touchpad=this.webos&&n.match(/TouchPad/),this.kindle=n.match(/(Kindle)/),this.silk=n.match(/(Silk)/),this.blackberry=n.match(/(BlackBerry).*/),this.bb10=n.match(/(BB10).*Version\/([\d.]+)/),this.rimtabletos=n.match(/(RIM\sTablet\sOS)\s([\d.]+)/),this.playbook=n.match(/PlayBook/),this.chrome=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),this.firefox=n.match(/Firefox\/([\d.]+)/),this.wii=n.match(/Nintendo (Wii);/),this.wiiu=n.match(/Nintendo (WiiU)/),this.ds=n.match(/Nintendo (DS|3DS|DSi);/),this.nintendo_switch=n.match(/Nintendo (Switch);/),this.ps3=n.match(/PLAYSTATION 3/),this.psp=n.match(/(PlayStation Portable)/),this.psvita=n.match(/(PlayStation Vita)/),this.windowsphone=n.match(/(Windows Phone |Windows Phone OS )([\d.]+)/),this.safari=n.match(/(Version)\/([0-9\.]+).*Safari\/([0-9\.]+)/),this.trident=n.match(/Trident\/([\d\.]+)/),this.xbox=n.match(/Xbox/),this.iphone5=!("object"!=="undefined"&&t.exports)&&this.iphone&&screen&&screen.width===320&&screen.height===568,this.vivaldi=n.match(/Vivaldi\/([\d.]+)/);this.iphone3=this.iphone&&e.devicePixelRatio===1?true:false;this.browser={locale:undefined,lang:undefined,country:undefined};this.os={};if(this.webkit&&!this.ie){this.browser.webkit=true;this.browser.version=this.webkit[1]}if(this.trident){this.browser.trident=true;this.browser.version=this.trident[1]}if(this.android){this.os.android=true;this.os.version=this.android[2];try{this.browser.locale=n.match(/(Android)\s(.+);\s([^;]+);/)[3];this.browser.lang=this.browser.locale.substring(0,2);this.browser.country=this.browser.locale.substring(3)}catch(e){}}if(this.iphone){this.os.ios=this.os.iphone=true;this.os.version=this.iphone[2].replace(/_/g,".")}if(this.ipad){this.os.ios=this.os.ipad=true;this.os.version=this.ipad[2].replace(/_/g,".")}if(this.os.ios){var r=null;if(this.os.version){r=this.os.version.substring(0,1)}for(var i=3;i<10;i++){this["ios"+i]=r===""+i}}if(this.webos){this.os.webos=true;this.os.version=this.webos[2]}if(this.touchpad){this.os.touchpad=true}if(this.blackberry){this.os.blackberry=true}if(this.bb10){this.os.bb10=true;this.os.version=this.bb10[2]}if(this.rimtabletos){this.os.rimtabletos=true;this.os.version=this.rimtabletos[2]}if(this.playbook){this.browser.playbook=true}if(this.kindle){this.os.kindle=true}if(this.silk){this.browser.silk=true}if(!this.silk&&this.os.android&&n.match(/Kindle Fire/)){this.browser.silk=true}if(this.chrome&&!this.ie){this.browser.chrome=true;this.browser.version=this.chrome[1]}if(this.firefox){this.browser.firefox=true;this.browser.version=this.firefox[1];if(n.match(/Android/)){this.android=["Android","Android",""]}}if(this.wii||this.ds||this.wiiu||this.nintendo_switch){this.os.nintendo=true;if(this.wiiu||this.nintendo_switch){this.browser.nintendo=n.match(/NintendoBrowser\/([\d.]+)/);this.browser.version=this.browser.nintendo[1]}}if(this.windowsphone){this.browser.windowsphone=true;this.browser.version=this.windowsphone[2]}if(this.safari){this.browser.safari=true;this.browser.version=this.safari[2]}if(this.ie){this.browser.ie=/(MSIE|rv:?)\s?([\d\.]+)/.exec(n);this.edge=false;if(!this.browser.ie){this.browser.ie=/(Edge\/)(\d.+)/.exec(n);this.browser.version=this.browser.ie[2];this.edge=true;this.chrome=false;this.webkit=false}else if(!this.windowsphone){this.browser.version=this.browser.ie?this.browser.ie[2]:""}if(0<this.browser.version.indexOf(".")){this.browser.majorversion=this.browser.version.substring(0,this.browser.version.indexOf("."))}else{this.browser.majorversion=this.browser.version}}if(this.vivaldi){this.browser.vivaldi=true;this.browser.version=this.vivaldi[1]}this.os.tablet=!!(this.ipad||this.kindle||this.playbook||this.android&&!n.match(/Mobile/)||this.firefox&&n.match(/Tablet/));this.os.phone=!!(!this.os.tablet&&(this.android||this.iphone||this.webos||this.blackberry||this.bb10||this.chrome&&n.match(/Android/)||this.chrome&&n.match(/CriOS\/([\d.]+)/)||this.firefox&&n.match(/Mobile/)||this.windowsphone&&n.match(/IEMobile/)));this.mobile=!!(this.os.tablet||this.os.phone);this.webview={};if(n.match(/Twitter/)){this.webview.twitter=true}}n.VERSION="2.1.0";if("object"!=="undefined"&&t.exports){t.exports=n}if(!e.SUA){e.SUA=n}})(e)});var Bu=ho("ua",{setup:e=>{return Promise.resolve().then(()=>{const t=new Du(navigator.userAgent);e.commit("ua.all",t)})}});var Lu=ho("util",{refreshAllComponents:e=>{return Promise.resolve().then(()=>{e.commit("util.components_refresh")})}});const Iu="/viron";var Fu=ho("viron",{get:(e,t)=>{const n=e.getter("oas.operationObject",Iu,"get");const r=e.getter("oas.api",n.operationId);const i=e.getter("current.all");const a=e.getter("endpoints.one",i);const o=a.token;const s=`networking_${Date.now()}`;return Promise.resolve().then(()=>e.commit("application.addNetworking",{id:s})).then(()=>r({},{requestInterceptor:e=>{e.headers["Authorization"]=o}})).then(e=>{if(!e.ok){return Promise.reject(e)}return e}).then(n=>{const r=n.headers["Authorization"];if(!!r){e.commit("endpoints.updateToken",i,r)}e.commit("viron.all",to({endpointKey:t},n.obj));const a=to({},n.obj);delete a.pages;e.commit("endpoints.update",i,a);e.commit("application.removeNetworking",s,e)}).catch(t=>{e.commit("application.removeNetworking",s,e);throw t})},remove:e=>{return Promise.resolve().then(()=>{e.commit("viron.all",null)})}});var ju=to({},po,To,ms,gs,ys,Qs,eu,tu,iu,su,vu,Mu,Nu,Ru,Bu,Lu,Fu);var zu=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=((e,...n)=>{return t(e.state,...n)})});return n};var Hu=zu("application",{all:e=>{return e.application},version:e=>{return e.application.version},latestVersion:e=>{return e.application.latestVersion},isLaunched:e=>{return e.application.isLaunched},isNavigating:e=>{return e.application.isNavigating},isNetworking:e=>{return e.application.isNetworking},isDragging:e=>{return e.application.isDragging},isMenuOpened:e=>{return e.application.isMenuOpened},endpointFilterText:e=>{return e.application.endpointFilterText},endpointTempFilterText:e=>{return e.application.endpointTempFilterText}});function Uu(e,t,n){t=Su(t,n);if(e==null){return-1}var r=-1,i=e.length;while(++r<i){if(t(e[r],r,e)){return r}}return-1}var Wu=Uu;function Vu(e,t,n){var r=Wu(e,t,n);return r>=0?e[r]:void 0}var qu=Vu;function Ku(e,t,n){n=n||0;if(e==null){return-1}var r=e.length,i=n<0?r+n:n;while(i<r){if(e[i]===t){return i}i++}return-1}var Yu=Ku;function $u(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length;while(++i<a){r[i]=t(e[i],i,e)}return r}var Gu=$u;function Xu(e,t){if(e==null){return[]}else if(e.length<2){return e}if(t==null){t=Zu}var n,r,i;n=~~(e.length/2);r=Xu(e.slice(0,n),t);i=Xu(e.slice(n,e.length),t);return Ju(r,i,t)}function Zu(e,t){return e<t?-1:e>t?1:0}function Ju(e,t,n){var r=[];while(e.length&&t.length){if(n(e[0],t[0])<=0){r.push(e.shift())}else{r.push(t.shift())}}if(e.length){r.push.apply(r,e)}if(t.length){r.push.apply(r,t)}return r}var Qu=Xu;function el(e,t,n){t=Su(t,n);return Qu(e,function(e,n){e=t(e);n=t(n);return e<n?-1:e>n?1:0})}var tl=el;function nl(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(t(o,i,e)){r.push(o)}}return r}var rl=nl;function il(e,t){t=t||al;return rl(e,function(e,n,r){var i=r.length;while(++n<i){if(t(e,r[n])){return false}}return true})}function al(e,t){return e===t}var ol=il;function sl(e){return yo(e,"Number")}var ul=sl;var ll=zu("components",{all:e=>{return e.state.components},one:(e,t)=>{return e.components[t]},def:(e,t)=>{return e.components[t].def},response:(e,t)=>{return e.components[t].response},columns:(e,t)=>{const n=e.components[t];const r=n.columns;const i=n.def.table_labels||[];return Qu(r,(e,t)=>{let n=Yu(i,e.key);let r=Yu(i,t.key);if(n>=0){n=i.length-n}if(r>=0){r=i.length-r}return r-n})},operations:(e,t,n)=>{const r=e.components[t];let i;switch(n){case"table":i=r.tableOperations;break;case"row":i=r.rowOperations;break;default:i=r.operations||[];break}return i},postOperation:(e,t,n)=>{const r=e.components[t];let i;switch(n){case"table":i=r.tableOperations;break;case"row":i=r.rowOperations;break;default:i=r.operations||[];break}const a=r.def.api.path;const o=qu(i,e=>{return e.path===a&&e.method==="post"});if(!o){return null}return o},searchParameters:(e,t)=>{return e.components[t]["searchParameters"]},primary:(e,t)=>{return e.components[t]["primary"]},pagination:(e,t)=>{return e.components[t].pagination||null},hasPagination:(e,t)=>{return e.components[t].def.pagination&&e.components[t].pagination.max>=2},autoRefreshSec:(e,t)=>{const n=e.components[t].autoRefreshSec;if(!ul(n)){return null}return n},parameterObjectsForCrossSearch:e=>{let t=[];fo(e.components,e=>{t=t.concat(e.searchParameters||[])});const n={};t=Gu(t,e=>{const t=e.name;n[t]||(n[t]=0);n[t]=n[t]+1;return to({},e)});t=ol(t,(e,t)=>{return e.name===t.name});t=tl(t,e=>{return n[e.name]*-1});return t}});var cl=zu("current",{all:e=>{const t=e.application.version;return e.current[t]}});var fl=zu("drawers",{all:e=>{return e.drawers}});function dl(e,t,n){var r=e.length;if(t==null){t=0}else if(t<0){t=Math.max(r+t,0)}else{t=Math.min(t,r)}if(n==null){n=r}else if(n<0){n=Math.max(r+n,0)}else{n=Math.min(n,r)}var i=[];while(t<n){i.push(e[t++])}return i}var hl=dl;function pl(e){return!!e&&typeof e==="object"&&e.constructor===Object}var vl=pl;function ml(e,t){var n=0,r=arguments.length,i;while(++n<r){i=arguments[n];if(i!=null){fo(i,gl,e)}}return e}function gl(e,t){this[t]=e}var yl=ml;function bl(e){switch(mo(e)){case"Object":return xl(e);case"Array":return kl(e);case"RegExp":return wl(e);case"Date":return _l(e);default:return e}}function xl(e){if(vl(e)){return yl({},e)}else{return e}}function wl(e){var t="";t+=e.multiline?"m":"";t+=e.global?"g":"";t+=e.ignoreCase?"i":"";return new RegExp(e.source,t)}function _l(e){return new Date(+e)}function kl(e){return e.slice()}var Cl=bl;function Tl(e,t){switch(mo(e)){case"Object":return Sl(e,t);case"Array":return El(e,t);default:return Cl(e)}}function Sl(e,t){if(vl(e)){var n={};fo(e,function(e,n){this[n]=Tl(e,t)},n);return n}else if(t){return t(e)}else{return e}}function El(e,t){var n=[],r=-1,i=e.length;while(++r<i){n[r]=Tl(e[r],t)}return n}var Al=Tl;function Pl(e){var t=0;fo(e,function(){t++});return t}var Ol=Pl;function Ml(e){return e==null?"":e.toString()}var Nl=Ml;function Rl(e,t,n){e=Nl(e);t=Nl(t);return e.indexOf(t,n)!==-1}var Dl=Rl;const Bl=e=>{let t=[];fo(e,(e,n)=>{e.key=n;t.push(e)});t=tl(t,e=>{return e.order});return t};const Ll=(e,t)=>{t=t||"";t=t.replace(/„ÄÄ/g," ");t=t.replace(/,/g," ");const n=rl((t||"").split(" "),e=>{return!!e});if(!n.length){return e}return rl(e,e=>{let t=false;fu(n,n=>{if(Dl(e.url,n)){t=true}if(Dl(e.title,n)){t=true}if(Dl(e.name,n)){t=true}if(Dl(e.description,n)){t=true}if(Dl(e.memo,n)){t=true}fu(e.tags||[],e=>{if(Dl(e,n)){t=true}})});return t})};var Il=zu("endpoints",{all:e=>{const t=e.application.version;return e.endpoints[t]||{}},allByOrder:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);n=Bl(n);return n},allByOrderFiltered:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);n=Bl(n);n=Ll(n,e.application.endpointFilterText);return n},namesFiltered:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);r=Bl(r);let i=[];fu(r,e=>{if(!!e.name){i.push(e.name)}});i=ol(i,(e,t)=>{return e===t});let a=e.application.endpointTempFilterText;a=a.replace(/„ÄÄ/g," ");a=a.replace(/,/g," ");const o=rl((a||"").split(" "),e=>{return!!e});if(!!o.length){i=rl(i,e=>{let t=true;fu(o,n=>{if(!Dl(e,n)){t=false}});return t})}if(!!t){i=hl(i,0,t)}return i},tagsFiltered:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);r=Bl(r);let i=[];fu(r,e=>{fu(e.tags||[],e=>{i.push(e)})});i=ol(i,(e,t)=>{return e===t});let a=e.application.endpointTempFilterText;a=a.replace(/„ÄÄ/g," ");a=a.replace(/,/g," ");const o=rl((a||"").split(" "),e=>{return!!e});if(!!o.length){i=rl(i,e=>{let t=true;fu(o,n=>{if(!Dl(e,n)){t=false}});return t})}if(!!t){i=hl(i,0,t)}return i},count:e=>{const t=e.application.version;const n=e.endpoints[t]||{};return Ol(n)},allWithoutToken:e=>{const t=e.application.version;const n=Al(e.endpoints[t]);fo(n,e=>{delete e.token});return n},one:(e,t)=>{const n=e.application.version;const r=e.endpoints[n]||{};return r[t]},oneByURL:(e,t)=>{const n=e.application.version;const r=e.endpoints[n]||{};return Ou(r,e=>{return e.url===t})}});var Fl={layoutThreshold:640,layoutTypeDesktop:"desktop",layoutTypeMobile:"mobile",authtypeEmail:"email",authtypeOauth:"oauth"};var jl=zu("layout",{type:e=>{return e.layout.type},isDesktop:e=>{return e.layout.type===Fl.layoutTypeDesktop},isMobile:e=>{return e.layout.type===Fl.layoutTypeMobile},size:e=>{return e.layout.size},componentsGridColumnCount:e=>{return e.layout.componentsGridColumnCount}});var zl=zu("location",{all:e=>{return e.location},isTop:e=>{return e.location.name==="endpoints"},name:e=>{return e.location.name},route:e=>{return e.location.route}});var Hl=zu("mediapreviews",{all:e=>{return e.mediapreviews}});var Ul=zu("modals",{all:e=>{return e.modals}});var Wl=zu("oas",{client:e=>{return e.oas.client},spec:e=>{return e.oas.client.spec},originalSpec:e=>{return e.oas.client.originalSpec},apis:e=>{return e.oas.client.apis},flatApis:e=>{const t={};fo(e.oas.client.apis,e=>{fo(e,(e,n)=>{t[n]=e})});return t},api:(e,t)=>{const n={};fo(e.oas.client.apis,e=>{fo(e,(e,t)=>{n[t]=e})});return n[t]},apiByPathAndMethod:(e,t,n)=>{const r=e.oas.client.spec.paths[t][n];const i=r.operationId;const a={};fo(e.oas.client.apis,e=>{fo(e,(e,t)=>{a[t]=e})});return a[i]},pathItemObject:(e,t)=>{return e.oas.client.spec.paths[t]},pathItemObjectMethodNameByOperationId:(e,t)=>{let n;fo(e.oas.client.spec.paths,e=>{if(!!n){return}fo(e,(e,r)=>{if(!!n){return}if(e.operationId===t){n=r}})});return n},operationObject:(e,t,n)=>{return e.oas.client.spec.paths[t][n]},operationObjectsAsAction:(e,t)=>{const n=["get","put","post","delete"];const r=t.api.path;const i=t.primary;const a=t.actions||[];const o=[];fu(n,t=>{if(t==="get"){return}const n=!!e.oas.client.spec.paths[r]&&!!e.oas.client.spec.paths[r][t];if(!n){return}o.push({path:r,method:t,appendTo:"self"})});if(!!i){const t=`${r}/{${i}}`;fu(n,n=>{const r=!!e.oas.client.spec.paths[t]&&!!e.oas.client.spec.paths[t][n];if(!r){return}o.push({path:t,method:n,appendTo:"row"})})}fu(a,t=>{const r=t.indexOf(`{${i}}`)>=0?"row":"self";fu(n,n=>{const i=!!e.oas.client.spec.paths[t]&&!!e.oas.client.spec.paths[t][n];if(!i){return}o.push({path:t,method:n,appendTo:r})})});const s=[];fu(o,t=>{const n=e.oas.client.spec.paths[t.path][t.method];s.push(to({operationObject:n},t))});return s},operationId:(e,t,n)=>{return e.oas.client.spec.paths[t][n].operationId},parameterObjects:(e,t,n)=>{return e.oas.client.spec.paths[t][n].parameters||[]},responseObjects:(e,t,n)=>{return e.oas.client.spec.paths[t][n].responses},responseObject:(e,t,n,r)=>{if(r===void 0)r=200;return e.oas.client.spec.paths[t][n].responses[r]},schemaObject:(e,t,n,r)=>{if(r===void 0)r=200;return e.oas.client.spec.paths[t][n].responses[r].schema}});function Vl(e,t){return Yu(e,t)!==-1}var ql=Vl;function Kl(e,t,n){t=Su(t,n);var r=[];if(e==null){return r}var i=-1,a=e.length,o;while(++i<a){o=e[i];if(!t(o,i,e)){r.push(o)}}return r}var Yl=Kl;var $l=zu("page",{all:e=>{return e.page||{}},id:e=>{const t=e.page;if(!t){return""}return t.id},name:e=>{const t=e.page;if(!t){return""}return t.name},components:e=>{const t=e.page;if(!t){return[]}return t.components},componentsInline:e=>{const t=e.page;if(!t){return[]}return rl(t.components,e=>{return ql(["number"],e.style)})},componentsTable:e=>{const t=e.page;if(!t){return[]}return rl(t.components,e=>{return ql(["table"],e.style)})},componentsNotTable:e=>{const t=e.page;if(!t){return[]}return Yl(t.components,e=>{return e.style==="table"})},componentsCount:e=>{const t=e.page;if(!t){return 0}return(t.components||[]).length}});var Gl=zu("popovers",{all:e=>{return e.popovers}});var Xl=zu("toasts",{all:e=>{return e.toasts}});var Zl=zu("ua",{all:e=>{return e.ua},isChrome:e=>{return!!e.ua.chrome},isSafari:e=>{return!!e.ua.safari},isEdge:e=>{return!!e.ua.edge},isFirefox:e=>{return!!e.ua.firefox},usingBrowser:e=>{const t=e.ua;if(!!t.chrome){return"chrome"}if(!!t.safari){return"safari"}if(!!t.edge){return"edge"}if(!!t.firefox){return"firefox"}return null}});var Jl=zu("util",{components_refresh:e=>{return e.util.components_refresh}});function Ql(e,t,n){t=Su(t,n);var r={};fo(e,function(e,n,i){if(t(e,n,i)){r[n]=e}});return r}var ec=Ql;function tc(e){var t=[];fo(e,function(e,n){t.push(e)});return t}var nc=tc;const rc="dashboard";const ic="manage";var ac=zu("viron",{all:e=>{if(!e.viron){return null}return e.viron},existence:e=>{return!!e.viron},pages:e=>{return e.viron.pages},pageIdOf:(e,t)=>{return e.viron.pages[t].id},name:e=>{if(!e.viron){return null}return e.viron.name},endpointKey:e=>{if(!e.viron){return null}return e.viron.endpointKey},thumbnail:e=>{if(!e.viron){return null}return e.viron.thumbnail},color:e=>{if(!e.viron){return null}return e.viron.color},theme:e=>{const t="standard";if(!e.viron){return t}if(!ql(["standard","midnight","terminal"],e.viron.theme)){return t}return e.viron.theme},dashboard:e=>{if(!e.viron){return[]}return nc(ec(e.viron.pages,e=>{if(e.section!==rc){return false}return true}))},manage:e=>{if(!e.viron){return[]}return nc(ec(e.viron.pages,e=>{if(e.section!==ic){return false}return true}))},menu:e=>{const t=[];if(!e.viron||!e.viron.sections){return t}const n=e.viron.sections;fu(n,e=>{t.push({name:e.label||e.id,id:e.id,groups:[]})});const r=e.viron.pages;fu(r,e=>{const n=qu(t,t=>{return t.id===e.section});const r=e.group;const i=!r;if(i){n.groups.push({pages:[{name:e.name,id:e.id}],isIndependent:i})}else{if(!qu(n.groups,e=>{return e.name===r})){n.groups.push({name:r,pages:[],isIndependent:i})}const t=qu(n.groups,e=>{return e.name===r});t.pages.push({name:e.name,id:e.id})}});return t}});var oc=to({},Hu,ll,cl,fl,Il,jl,zl,Hl,Ul,Wl,$l,Gl,Xl,Zl,Jl,ac);var sc=(e,t)=>{const n={};fo(t,(t,r)=>{n[`${e}.${r}`]=((e,...n)=>{return t(e.state,...n)})});return n};var uc=sc("application",{launch:(e,t)=>{e.application.isLaunched=t;return["application"]},navigation:(e,t)=>{e.application.isNavigating=t;return["application"]},addNetworking:(e,t)=>{e.application.networkings.push(to({id:`networking_${Date.now()}`},t));e.application.isNetworking=true;return["application"]},removeNetworking:(e,t,n)=>{e.application.networkings=Yl(e.application.networkings,e=>{return e.id===t});if(!!n){setTimeout(()=>{n.commit("application.isNetworking")},500)}else if(!e.application.networkings.length){e.application.isNetworking=false}return["application"]},isNetworking:e=>{e.application.isNetworking=!!e.application.networkings.length;return["application"]},drag:(e,t)=>{e.application.isDragging=t;return["application"]},menuToggle:e=>{e.application.isMenuOpened=!e.application.isMenuOpened;return["application"]},endpointFilterText:(e,t)=>{e.application.endpointFilterText=t;return["application"]},endpointTempFilterText:(e,t)=>{e.application.endpointTempFilterText=t;return["application"]}});var lc=sc("components",{updateOne:(e,t,n,r,i)=>{e.components[t]={def:n,response:r};const a=n.api.method;const o=n.api.path;const s=n.query;const u=e.oas.client.spec.paths[o][a].parameters||[];e.components[t]["searchParameters"]=rl(u,e=>{if(e.in!=="query"){return false}if(!qu(s,t=>{return t.key===e.name})){return false}return true});if(n.pagination){e.components[t]["pagination"]={current:Number(i["x-pagination-current-page"]||0),size:Number(i["x-pagination-limit"]||0),max:Number(i["x-pagination-total-pages"]||0)}}if(ul(n.auto_refresh_sec)){e.components[t]["autoRefreshSec"]=n.auto_refresh_sec}if(n.style==="table"){const r=e.oas.client.spec.paths[o][a].responses[200].schema.items.properties;const i=[];fo(r,(e,t)=>{i.push(to({key:t},e))});e.components[t]["columns"]=i;const s=[];const u=[];fu(["put","post","delete"],t=>{const n=!!e.oas.client.spec.paths[o]&&e.oas.client.spec.paths[o][t];if(!n){return}s.push(to({method:t,path:o},n))});const l=n.primary;e.components[t]["primary"]=l;if(!!l){fu(["get","put","post","delete"],t=>{const n=!!e.oas.client.spec.paths[`${o}/{${l}}`]&&e.oas.client.spec.paths[`${o}/{${l}}`][t];if(!n){return}u.push(to({method:t,path:`${o}/{${l}}`},n))})}fu(n.actions||[],t=>{const n=t.indexOf(`{${l}}`)>=0;fu(["get","put","post","delete"],r=>{const i=!!e.oas.client.spec.paths[t]&&e.oas.client.spec.paths[t][r];if(!i){return}let a;if(n){a=u}else{a=s}a.push(to({method:r,path:t},i))})});e.components[t]["tableOperations"]=s;e.components[t]["rowOperations"]=u}return["components",t]},removeOne:(e,t)=>{delete e.components[t];return["components",t]},removeAll:e=>{e.components={};return["components"]}});var cc=n(function(t,n){"use strict";(function(e,n){if(typeof undefined==="function"&&undefined.amd){undefined([],n)}else{t.exports=n()}})(e,function(){var t={},n=typeof window!="undefined"?window:e,r=n.document,i="localStorage",a="script",o;t.disabled=false;t.version="1.3.20";t.set=function(e,t){};t.get=function(e,t){};t.has=function(e){return t.get(e)!==undefined};t.remove=function(e){};t.clear=function(){};t.transact=function(e,n,r){if(r==null){r=n;n=null}if(n==null){n={}}var i=t.get(e,n);r(i);t.set(e,i)};t.getAll=function(){};t.forEach=function(){};t.serialize=function(e){return JSON.stringify(e)};t.deserialize=function(e){if(typeof e!="string"){return undefined}try{return JSON.parse(e)}catch(t){return e||undefined}};function s(){try{return i in n&&n[i]}catch(e){return false}}if(s()){o=n[i];t.set=function(e,n){if(n===undefined){return t.remove(e)}o.setItem(e,t.serialize(n));return n};t.get=function(e,n){var r=t.deserialize(o.getItem(e));return r===undefined?n:r};t.remove=function(e){o.removeItem(e)};t.clear=function(){o.clear()};t.getAll=function(){var e={};t.forEach(function(t,n){e[t]=n});return e};t.forEach=function(e){for(var n=0;n<o.length;n++){var r=o.key(n);e(r,t.get(r))}}}else if(r&&r.documentElement.addBehavior){var u,l;try{l=new ActiveXObject("htmlfile");l.open();l.write("<"+a+">document.w=window</"+a+'><iframe src="/favicon.ico"></iframe>');l.close();u=l.w.frames[0].document;o=u.createElement("div")}catch(e){o=r.createElement("div");u=r.body}var c=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o);u.appendChild(o);o.addBehavior("#default#userData");o.load(i);var r=e.apply(t,n);u.removeChild(o);return r}};var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var d=function(e){return e.replace(/^d/,"___$&").replace(f,"___")};t.set=c(function(e,n,r){n=d(n);if(r===undefined){return t.remove(n)}e.setAttribute(n,t.serialize(r));e.save(i);return r});t.get=c(function(e,n,r){n=d(n);var i=t.deserialize(e.getAttribute(n));return i===undefined?r:i});t.remove=c(function(e,t){t=d(t);e.removeAttribute(t);e.save(i)});t.clear=c(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--){e.removeAttribute(t[n].name)}e.save(i)});t.getAll=function(e){var n={};t.forEach(function(e,t){n[e]=t});return n};t.forEach=c(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,a;a=r[i];++i){n(a.name,t.deserialize(e.getAttribute(a.name)))}})}try{var h="__storejs__";t.set(h,h);if(t.get(h)!=h){t.disabled=true}t.remove(h)}catch(e){t.disabled=true}t.enabled=!t.disabled;return t})});var fc=sc("current",{all:(e,t)=>{const n=e.application.version;e.current[n]=t;cc.set("current",e.current);return["current"]}});var dc=sc("drawers",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};e.drawers.unshift({id:`drawer_${Date.now()}`,tagName:t,tagOpts:n,drawerOpts:r});return["drawers"]},remove:(e,t)=>{e.drawers=Yl(e.drawers,e=>{return e.id===t});return["drawers"]}});const hc=e=>{const t=9999;let n=[];fo(e,(e,r)=>{n.push({key:r,order:ul(e.order)?e.order:t})});n=tl(n,e=>{return e.order});fu(n,(t,n)=>{e[t.key].order=n});return e};var pc=sc("endpoints",{add:(e,t,n)=>{if(!ul(n.order)){n.order=-1}const r=e.application.version;let i=to({},e.endpoints[r]);i[t]=n;i=hc(i);e.endpoints[r]=i;cc.set("endpoints",e.endpoints);return["endpoints"]},remove:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);delete r[t];r=hc(r);e.endpoints[n]=r;cc.set("endpoints",e.endpoints);return["endpoints"]},removeAll:e=>{const t=e.application.version;e.endpoints[t]={};cc.set("endpoints",e.endpoints);return["endpoints"]},update:(e,t,n)=>{const r=e.application.version;const i=e.endpoints[r];if(!n){delete i[t]}else{i[t]=to({},i[t],n)}cc.set("endpoints",e.endpoints);return["endpoints"]},updateToken:(e,t,n)=>{const r=e.application.version;const i=e.endpoints[r];if(!!i[t]){i[t].token=n}cc.set("endpoints",e.endpoints);return["endpoints"]},mergeAll:(e,t)=>{const n=e.application.version;let r=to({},e.endpoints[n]);fo(t,e=>{let t=Ou(r,t=>{return e.url===t.url});if(!t){const t=Js.generate();e.key=t;r[t]=e}else{to(t,e)}});r=hc(r);e.endpoints[n]=r;cc.set("endpoints",e.endpoints);return["endpoints"]},tidyUpOrder:e=>{const t=e.application.version;const n=hc(to({},e.endpoints[t]));e.endpoints[t]=n;cc.set("endpoints",e.endpoints);return["endpoints"]},changeOrder:(e,t,n)=>{const r=e.application.version;let i=to({},e.endpoints[r]);i[t].order=n-.5;i=hc(i);e.endpoints[r]=i;cc.set("endpoints",e.endpoints);return["endpoints"]},cleanup:e=>{const t=e.application.version;let n=to({},e.endpoints[t]);fo(n,(e,t)=>{if(!xo(e)){delete n[t]}});e.endpoints[t]=n;cc.set("endpoints",e.endpoints);return["endpoints"]}});var vc=sc("layout",{updateSize:(e,t,n)=>{e.layout.size.width=t;e.layout.size.height=n;if(t>Fl.layoutThreshold){e.layout.type=Fl.layoutTypeDesktop}else{e.layout.type=Fl.layoutTypeMobile}return["layout"]},updateComponentsGridColumnCount:(e,t)=>{e.layout.componentsGridColumnCount=t;return["layout"]}});var mc=sc("location",{all:(e,t)=>{e.location=to({},e.location,t);return["location"]},name:(e,t)=>{e.location.name=t;return["location"]},route:(e,t)=>{e.location.route=t;return["location"]}});var gc=sc("mediapreviews",{add:(e,t,n)=>{if(t===void 0)t={};if(n===void 0)n={};e.mediapreviews.push({id:`mediapreview_${Date.now()}`,tagOpts:t,mediapreviewOpts:n});return["mediapreviews"]},remove:(e,t)=>{e.mediapreviews=Yl(e.mediapreviews,e=>{return e.id===t});return["mediapreviews"]}});var yc=sc("modals",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};e.modals.push({id:`modal_${Date.now()}`,tagName:t,tagOpts:n,modalOpts:r});return["modals"]},remove:(e,t)=>{e.modals=Yl(e.modals,e=>{return e.id===t});return["modals"]}});var bc=sc("oas",{client:(e,t)=>{e.oas.client=t;return["oas"]},clearClient:e=>{e.oas.client=null;return["oas"]}});var xc=sc("page",{all:(e,t)=>{e.page=t;return["page"]}});var wc=sc("popovers",{add:(e,t,n,r)=>{if(n===void 0)n={};if(r===void 0)r={};e.popovers.push({id:`popover_${Date.now()}`,tagName:t,tagOpts:n,popoverOpts:to({direction:"T",width:100,x:0,y:0},r)});return["popovers"]},remove:(e,t)=>{e.popovers=Yl(e.popovers,e=>{return e.id===t});return["popovers"]},removeAll:e=>{e.popovers=[];return["popovers"]}});const _c=()=>{return`toast_${Date.now()}`};const kc=1e3;var Cc=sc("toasts",{add:(e,t)=>{const n=to({timeout:kc,autoHide:true},t,{id:_c()});e.toasts.push(n);return["toasts"]},remove:(e,t)=>{e.toasts=Yl(e.toasts,e=>{return e.id===t});return["toasts"]}});var Tc=sc("ua",{all:(e,t)=>{e.ua=t;return["ua"]}});var Sc=sc("util",{components_refresh:e=>{e.util.components_refresh=e.util.components_refresh+1;return["util"]}});function Ec(e,t){if(t==null){return e}var n=-1,r=t.length;while(++n<r){if(Yu(e,t[n])===-1){e.push(t[n])}}return e}var Ac=Ec;var Pc=sc("viron",{all:(e,t)=>{if(!!t){t.sections=t.sections||[];if(!qu(t.sections,e=>{return e.id==="manage"})){t.sections=Ac([{id:"manage",label:Qe.t("word.manage")}],t.sections)}if(!qu(t.sections,e=>{return e.id==="dashboard"})){t.sections=Ac([{id:"dashboard",label:Qe.t("word.dashboard")}],t.sections)}}e.viron=t;return["viron"]}});var Oc=to({},uc,lc,fc,dc,pc,vc,mc,gc,yc,bc,xc,wc,Cc,Tc,Sc,Pc);var Mc=(e,t)=>{const n={};n[e]=t;return n};var Nc=Mc("application",{version:(()=>{const e=new URL(window.location.href);if(e.hostname==="localhost"){return"local"}return e.pathname.replace(/viron/,"").replace(/\//g,"")})(),latestVersion:"v1",isLaunched:false,isNavigating:false,networkings:[],isNetworking:false,isDragging:false,isMenuOpened:true,endpointFilterText:"",endpointTempFilterText:""});var Rc=Mc("components",{});if(!xo(cc.get("current"))){cc.set("current",{})}var Dc=Mc("current",cc.get("current",{}));var Bc=Mc("drawers",[]);var Lc=Mc("endpoints",cc.get("endpoints",{}));var Ic=Mc("layout",{type:(()=>{const e=window.innerWidth;if(e>Fl.layoutThreshold){return Fl.layoutTypeDesktop}return Fl.layoutTypeMobile})(),size:{width:window.innerWidth,height:window.innerHeight},componentsGridColumnCount:(()=>{const e=window.getComputedStyle(document.querySelector("html"));const t=Number(e.getPropertyValue("--page-components-grid-column-count"));return t})()});var Fc=Mc("location",{name:"",route:{params:{},queries:{},hash:""}});var jc=Mc("mediapreviews",[]);var zc=Mc("modals",[]);var Hc=Mc("oas",{client:null});var Uc=Mc("page",null);var Wc=Mc("popovers",[]);var Vc=Mc("signinShowKey",null);var qc=Mc("toasts",[]);var Kc=Mc("ua",{});var Yc=Mc("util",{components_refresh:0});var $c=Mc("viron",null);var Gc=to({},Nc,Rc,Dc,Bc,Lc,Ic,Fc,jc,zc,Hc,Uc,Wc,Vc,qc,Kc,Yc,$c);const Xc=e=>{return`component_${e}`};var Zc={init:()=>{return Promise.resolve().then(()=>{const e=new Ga.Store({state:Gc,actions:ju,mutations:Oc,getters:oc});Ga.add(e);return e})}};i.tag2("viron-icon-search",'<svg viewbox="-3434 14059.999 15.999 16.003"> <path d="M3710.818-13811.056l-3.051-3.05a6.957,6.957,0,0,1-3.768,1.1,7.008,7.008,0,0,1-7-7,7.008,7.008,0,0,1,7-7,7.008,7.008,0,0,1,7,7,6.957,6.957,0,0,1-1.107,3.773l3.051,3.049a.205.205,0,0,1,0,.284l-1.839,1.839a.206.206,0,0,1-.142.058A.206.206,0,0,1,3710.818-13811.056ZM3700-13820a4,4,0,0,0,4,4,4,4,0,0,0,4-4,4,4,0,0,0-4-4A4,4,0,0,0,3700-13820Z" transform="translate(-7131 27887)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSearch {opts.class}"',function(e){});i.tag2("viron-icon-reload",'<svg viewbox="-1791 11377 14.063 16"> <path d="M43.991,5.189a.469.469,0,0,0-.679-.126L41.791,6.2a.469.469,0,0,0-.123.613,4.082,4.082,0,0,1,.582,2.09,4.219,4.219,0,1,1-8.437,0,4.224,4.224,0,0,1,3.75-4.193v1.38a.469.469,0,0,0,.75.375l3.75-2.812a.469.469,0,0,0,0-.75L38.312.094a.469.469,0,0,0-.75.375V1.891a7.049,7.049,0,1,0,6.428,3.3Z" transform="translate(-1822 11377)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconReload {opts.class}"',function(e){});var Jc=n(function(e){!function(){var t={version:"3.5.17"};var n=[].slice,r=function(e){return n.call(e)};var i=this.document;function a(e){return e&&(e.ownerDocument||e.document||e).documentElement}function o(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i){try{r(i.documentElement.childNodes)[0].nodeType}catch(e){r=function(e){var t=e.length,n=new Array(t);while(t--){n[t]=e[t]}return n}}}if(!Date.now){Date.now=function(){return+new Date}}if(i){try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,u=s.setAttribute,l=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;s.setAttribute=function(e,t){u.call(this,e,t+"")};s.setAttributeNS=function(e,t,n){l.call(this,e,t,n+"")};c.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}}t.ascending=d;function d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};t.min=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;break}}while(++n<r){if((a=e[n])!=null&&i>a){i=a}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null&&i>a){i=a}}}return i};t.max=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=a;break}}while(++n<r){if((a=e[n])!=null&&a>i){i=a}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>i){i=a}}}return i};t.extent=function(e,t){var n=-1,r=e.length,i,a,o;if(arguments.length===1){while(++n<r){if((a=e[n])!=null&&a>=a){i=o=a;break}}while(++n<r){if((a=e[n])!=null){if(i>a){i=a}if(o<a){o=a}}}}else{while(++n<r){if((a=t.call(e,e[n],n))!=null&&a>=a){i=o=a;break}}while(++n<r){if((a=t.call(e,e[n],n))!=null){if(i>a){i=a}if(o<a){o=a}}}}return[i,o]};function h(e){return e===null?NaN:+e}function p(e){return!isNaN(e)}t.sum=function(e,t){var n=0,r=e.length,i,a=-1;if(arguments.length===1){while(++a<r){if(p(i=+e[a])){n+=i}}}else{while(++a<r){if(p(i=+t.call(e,e[a],a))){n+=i}}}return n};t.mean=function(e,t){var n=0,r=e.length,i,a=-1,o=r;if(arguments.length===1){while(++a<r){if(p(i=h(e[a]))){n+=i}else{--o}}}else{while(++a<r){if(p(i=h(t.call(e,e[a],a)))){n+=i}else{--o}}}if(o){return n/o}};t.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i};t.median=function(e,n){var r=[],i=e.length,a,o=-1;if(arguments.length===1){while(++o<i){if(p(a=h(e[o]))){r.push(a)}}}else{while(++o<i){if(p(a=h(n.call(e,e[o],o)))){r.push(a)}}}if(r.length){return t.quantile(r.sort(d),.5)}};t.variance=function(e,t){var n=e.length,r=0,i,a,o=0,s=-1,u=0;if(arguments.length===1){while(++s<n){if(p(i=h(e[s]))){a=i-r;r+=a/++u;o+=a*(i-r)}}}else{while(++s<n){if(p(i=h(t.call(e,e[s],s)))){a=i-r;r+=a/++u;o+=a*(i-r)}}}if(u>1){return o/(u-1)}};t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};function v(e){return{left:function(t,n,r,i){if(arguments.length<3){r=0}if(arguments.length<4){i=t.length}while(r<i){var a=r+i>>>1;if(e(t[a],n)<0){r=a+1}else{i=a}}return r},right:function(t,n,r,i){if(arguments.length<3){r=0}if(arguments.length<4){i=t.length}while(r<i){var a=r+i>>>1;if(e(t[a],n)>0){i=a}else{r=a+1}}return r}}}var m=v(d);t.bisectLeft=m.left;t.bisect=t.bisectRight=m.right;t.bisector=function(e){return v(e.length===1?function(t,n){return d(e(t),n)}:e)};t.shuffle=function(e,t,n){if((r=arguments.length)<3){n=e.length;if(r<2){t=0}}var r=n-t,i,a;while(r){a=Math.random()*r--|0;i=e[r+t],e[r+t]=e[a+t],e[a+t]=i}return e};t.permute=function(e,t){var n=t.length,r=new Array(n);while(n--){r[n]=e[t[n]]}return r};t.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],a=new Array(n<0?0:n);while(t<n){a[t]=[r=i,i=e[++t]]}return a};t.transpose=function(e){if(!(o=e.length)){return[]}for(var n=-1,r=t.min(e,g),i=new Array(r);++n<r;){for(var a=-1,o,s=i[n]=new Array(o);++a<o;){s[a]=e[a][n]}}return i};function g(e){return e.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(e){var t=[];for(var n in e){t.push(n)}return t};t.values=function(e){var t=[];for(var n in e){t.push(e[n])}return t};t.entries=function(e){var t=[];for(var n in e){t.push({key:n,value:e[n]})}return t};t.merge=function(e){var t=e.length,n,r=-1,i=0,a,o;while(++r<t){i+=e[r].length}a=new Array(i);while(--t>=0){o=e[t];n=o.length;while(--n>=0){a[--i]=o[n]}}return a};var y=Math.abs;t.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity){throw new Error("infinite range")}var r=[],i=b(y(n)),a=-1,o;e*=i,t*=i,n*=i;if(n<0){while((o=e+n*++a)>t){r.push(o/i)}}else{while((o=e+n*++a)<t){r.push(o/i)}}return r};function b(e){var t=1;while(e*t%1){t*=10}return t}function x(e,t){for(var n in t){Object.defineProperty(e.prototype,n,{value:t[n],enumerable:false})}}t.map=function(e,t){var n=new w;if(e instanceof w){e.forEach(function(e,t){n.set(e,t)})}else if(Array.isArray(e)){var r=-1,i=e.length,a;if(arguments.length===1){while(++r<i){n.set(r,e[r])}}else{while(++r<i){n.set(t.call(e,a=e[r],r),a)}}}else{for(var o in e){n.set(o,e[o])}}return n};function w(){this._=Object.create(null)}var _="__proto__",k="\0";x(w,{has:S,get:function(e){return this._[C(e)]},set:function(e,t){return this._[C(e)]=t},remove:E,keys:A,values:function(){var e=[];for(var t in this._){e.push(this._[t])}return e},entries:function(){var e=[];for(var t in this._){e.push({key:T(t),value:this._[t]})}return e},size:P,empty:O,forEach:function(e){for(var t in this._){e.call(this,T(t),this._[t])}}});function C(e){return(e+="")===_||e[0]===k?k+e:e}function T(e){return(e+="")[0]===k?e.slice(1):e}function S(e){return C(e)in this._}function E(e){return(e=C(e))in this._&&delete this._[e]}function A(){var e=[];for(var t in this._){e.push(T(t))}return e}function P(){var e=0;for(var t in this._){++e}return e}function O(){for(var e in this._){return false}return true}t.nest=function(){var e={},n=[],r=[],i,a;function o(t,r,s){if(s>=n.length){return a?a.call(e,r):i?r.sort(i):r}var u=-1,l=r.length,c=n[s++],f,d,h,p=new w,v;while(++u<l){if(v=p.get(f=c(d=r[u]))){v.push(d)}else{p.set(f,[d])}}if(t){d=t();h=function(e,n){d.set(e,o(t,n,s))}}else{d={};h=function(e,n){d[e]=o(t,n,s)}}p.forEach(h);return d}function s(e,t){if(t>=n.length){return e}var i=[],a=r[t++];e.forEach(function(e,n){i.push({key:e,values:s(n,t)})});return a?i.sort(function(e,t){return a(e.key,t.key)}):i}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(t.map,e,0),0)};e.key=function(t){n.push(t);return e};e.sortKeys=function(t){r[n.length-1]=t;return e};e.sortValues=function(t){i=t;return e};e.rollup=function(t){a=t;return e};return e};t.set=function(e){var t=new M;if(e){for(var n=0,r=e.length;n<r;++n){t.add(e[n])}}return t};function M(){this._=Object.create(null)}x(M,{has:S,add:function(e){this._[C(e+="")]=true;return e},remove:E,values:A,size:P,empty:O,forEach:function(e){for(var t in this._){e.call(this,T(t))}}});t.behavior={};function N(e){return e}t.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r){e[i=arguments[n]]=R(e,t,t[i])}return e};function R(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function D(e,t){if(t in e){return t}t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=B.length;n<r;++n){var i=B[n]+t;if(i in e){return i}}}var B=["webkit","ms","moz","Moz","o","O"];function L(){}t.dispatch=function(){var e=new I,t=-1,n=arguments.length;while(++t<n){e[arguments[t]]=F(e)}return e};function I(){}I.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0){r=e.slice(n+1);e=e.slice(0,n)}if(e){return arguments.length<2?this[e].on(r):this[e].on(r,t)}if(arguments.length===2){if(t==null){for(e in this){if(this.hasOwnProperty(e)){this[e].on(r,null)}}}return this}};function F(e){var t=[],n=new w;function r(){var n=t,r=-1,i=n.length,a;while(++r<i){if(a=n[r].on){a.apply(this,arguments)}}return e}r.on=function(r,i){var a=n.get(r),o;if(arguments.length<2){return a&&a.on}if(a){a.on=null;t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1));n.remove(r)}if(i){t.push(n.set(r,{on:i}))}return e};return r}t.event=null;function j(){t.event.preventDefault()}function z(){var e=t.event,n;while(n=e.sourceEvent){e=n}return e}function H(e){var n=new I,r=0,i=arguments.length;while(++r<i){n[arguments[r]]=F(n)}n.of=function(r,i){return function(a){try{var o=a.sourceEvent=t.event;a.target=e;t.event=a;n[a.type].apply(r,i)}finally{t.event=o}}};return n}t.requote=function(e){return e.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var W={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t){e[n]=t[n]}};function V(e){W(e,$);return e}var q=function(e,t){return t.querySelector(e)},K=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[D(e,"matchesSelector")];Y=function(e,t){return n.call(e,t)};return Y(e,t)};if(typeof Sizzle==="function"){q=function(e,t){return Sizzle(e,t)[0]||null};K=Sizzle;Y=Sizzle.matchesSelector}t.selection=function(){return t.select(i.documentElement)};var $=t.selection.prototype=[];$.select=function(e){var t=[],n,r,i,a;e=G(e);for(var o=-1,s=this.length;++o<s;){t.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var u=-1,l=i.length;++u<l;){if(a=i[u]){n.push(r=e.call(a,a.__data__,u,o));if(r&&"__data__"in a){r.__data__=a.__data__}}else{n.push(null)}}}return V(t)};function G(e){return typeof e==="function"?e:function(){return q(e,this)}}$.selectAll=function(e){var t=[],n,i;e=X(e);for(var a=-1,o=this.length;++a<o;){for(var s=this[a],u=-1,l=s.length;++u<l;){if(i=s[u]){t.push(n=r(e.call(i,i.__data__,u,a)));n.parentNode=i}}}return V(t)};function X(e){return typeof e==="function"?e:function(){return K(e,this)}}var Z="http://www.w3.org/1999/xhtml";var J={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0&&(n=e.slice(0,t))!=="xmlns"){e=e.slice(t+1)}return J.hasOwnProperty(n)?{space:J[n],local:e}:e}};$.attr=function(e,n){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=t.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e){this.each(Q(n,e[n]))}return this}return this.each(Q(e,n))};function Q(e,n){e=t.ns.qualify(e);function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function a(){this.setAttribute(e,n)}function o(){this.setAttributeNS(e.space,e.local,n)}function s(){var t=n.apply(this,arguments);if(t==null){this.removeAttribute(e)}else{this.setAttribute(e,t)}}function u(){var t=n.apply(this,arguments);if(t==null){this.removeAttributeNS(e.space,e.local)}else{this.setAttributeNS(e.space,e.local,t)}}return n==null?e.local?i:r:typeof n==="function"?e.local?u:s:e.local?o:a}function ee(e){return e.trim().replace(/\s+/g," ")}$.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node(),r=(e=ne(e)).length,i=-1;if(t=n.classList){while(++i<r){if(!t.contains(e[i])){return false}}}else{t=n.getAttribute("class");while(++i<r){if(!te(e[i]).test(t)){return false}}}return true}for(t in e){this.each(re(t,e[t]))}return this}return this.each(re(e,t))};function te(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ne(e){return(e+"").trim().split(/^|\s+/)}function re(e,t){e=ne(e).map(ie);var n=e.length;function r(){var r=-1;while(++r<n){e[r](this,t)}}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n){e[r](this,i)}}return typeof t==="function"?i:r}function ie(e){var t=te(e);return function(n,r){if(i=n.classList){return r?i.add(e):i.remove(e)}var i=n.getAttribute("class")||"";if(r){t.lastIndex=0;if(!t.test(i)){n.setAttribute("class",ee(i+" "+e))}}else{n.setAttribute("class",ee(i.replace(t," ")))}}}$.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=""}for(n in e){this.each(ae(n,e[n],t))}return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ae(e,t,n))};function ae(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);if(r==null){this.style.removeProperty(e)}else{this.style.setProperty(e,r,n)}}return t==null?r:typeof t==="function"?a:i}$.property=function(e,t){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]}for(t in e){this.each(oe(t,e[t]))}return this}return this.each(oe(e,t))};function oe(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);if(n==null){delete this[e]}else{this[e]=n}}return t==null?n:typeof t==="function"?i:r}$.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};$.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};$.append=function(e){e=se(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function se(e){function n(){var t=this.ownerDocument,n=this.namespaceURI;return n===Z&&t.documentElement.namespaceURI===Z?t.createElement(e):t.createElementNS(n,e)}function r(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=t.ns.qualify(e)).local?r:n}$.insert=function(e,t){e=se(e);t=G(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};$.remove=function(){return this.each(ue)};function ue(){var e=this.parentNode;if(e){e.removeChild(this)}}$.data=function(e,t){var n=-1,r=this.length,i,a;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r){if(a=i[n]){e[n]=a.__data__}}return e}function o(e,n){var r,i=e.length,a=n.length,o=Math.min(i,a),c=new Array(a),f=new Array(a),d=new Array(i),h,p;if(t){var v=new w,m=new Array(i),g;for(r=-1;++r<i;){if(h=e[r]){if(v.has(g=t.call(h,h.__data__,r))){d[r]=h}else{v.set(g,h)}m[r]=g}}for(r=-1;++r<a;){if(!(h=v.get(g=t.call(n,p=n[r],r)))){f[r]=le(p)}else if(h!==true){c[r]=h;h.__data__=p}v.set(g,true)}for(r=-1;++r<i;){if(r in m&&v.get(m[r])!==true){d[r]=e[r]}}}else{for(r=-1;++r<o;){h=e[r];p=n[r];if(h){h.__data__=p;c[r]=h}else{f[r]=le(p)}}for(;r<a;++r){f[r]=le(n[r])}for(;r<i;++r){d[r]=e[r]}}f.update=c;f.parentNode=c.parentNode=d.parentNode=e.parentNode;s.push(f);u.push(c);l.push(d)}var s=he([]),u=V([]),l=V([]);if(typeof e==="function"){while(++n<r){o(i=this[n],e.call(i,i.parentNode.__data__,n))}}else{while(++n<r){o(i=this[n],e)}}u.enter=function(){return s};u.exit=function(){return l};return u};function le(e){return{__data__:e}}$.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};$.filter=function(e){var t=[],n,r,i;if(typeof e!=="function"){e=ce(e)}for(var a=0,o=this.length;a<o;a++){t.push(n=[]);n.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return V(t)};function ce(e){return function(){return Y(this,e)}}$.order=function(){for(var e=-1,t=this.length;++e<t;){for(var n=this[e],r=n.length-1,i=n[r],a;--r>=0;){if(a=n[r]){if(i&&i!==a.nextSibling){i.parentNode.insertBefore(a,i)}i=a}}}return this};$.sort=function(e){e=fe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;){this[t].sort(e)}return this.order()};function fe(e){if(!arguments.length){e=d}return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}$.each=function(e){return de(this,function(t,n,r){e.call(t,t.__data__,n,r)})};function de(e,t){for(var n=0,r=e.length;n<r;n++){for(var i=e[n],a=0,o=i.length,s;a<o;a++){if(s=i[a]){t(s,a,n)}}}return e}$.call=function(e){var t=r(arguments);e.apply(t[0]=this,t);return this};$.empty=function(){return!this.node()};$.node=function(){for(var e=0,t=this.length;e<t;e++){for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a){return a}}}return null};$.size=function(){var e=0;de(this,function(){++e});return e};function he(e){W(e,pe);return e}var pe=[];t.selection.enter=he;t.selection.enter.prototype=pe;pe.append=$.append;pe.empty=$.empty;pe.node=$.node;pe.call=$.call;pe.size=$.size;pe.select=function(e){var t=[],n,r,i,a,o;for(var s=-1,u=this.length;++s<u;){i=(a=this[s]).update;t.push(n=[]);n.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;){if(o=a[l]){n.push(i[l]=r=e.call(a.parentNode,o.__data__,l,s));r.__data__=o.__data__}else{n.push(null)}}}return V(t)};pe.insert=function(e,t){if(arguments.length<2){t=ve(this)}return $.insert.call(this,e,t)};function ve(e){var t,n;return function(r,i,a){var o=e[a].update,s=o.length,u;if(a!=n){n=a,t=0}if(i>=t){t=i+1}while(!(u=o[t])&&++t<s){}return u}}t.select=function(e){var t;if(typeof e==="string"){t=[q(e,i)];t.parentNode=i.documentElement}else{t=[e];t.parentNode=a(e)}return V([t])};t.selectAll=function(e){var t;if(typeof e==="string"){t=r(K(e,i));t.parentNode=i.documentElement}else{t=r(e);t.parentNode=null}return V([t])};$.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=false}for(n in e){this.each(me(n,e[n],t))}return this}if(r<2){return(r=this.node()["__on"+e])&&r._}n=false}return this.each(me(e,t,n))};function me(e,n,i){var a="__on"+e,o=e.indexOf("."),s=ye;if(o>0){e=e.slice(0,o)}var u=ge.get(e);if(u){e=u,s=be}function l(){var t=this[a];if(t){this.removeEventListener(e,t,t.$);delete this[a]}}function c(){var t=s(n,r(arguments));l.call(this);this.addEventListener(e,this[a]=t,t.$=i);t._=n}function f(){var n=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),r;for(var i in this){if(r=i.match(n)){var a=this[i];this.removeEventListener(r[1],a,a.$);delete this[i]}}}return o?n?c:l:n?L:f}var ge=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(i){ge.forEach(function(e){if("on"+e in i){ge.remove(e)}})}function ye(e,n){return function(r){var i=t.event;t.event=r;n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function be(e,t){var n=ye(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var xe,we=0;function _e(e){var n=".dragsuppress-"+ ++we,r="click"+n,i=t.select(o(e)).on("touchmove"+n,j).on("dragstart"+n,j).on("selectstart"+n,j);if(xe==null){xe="onselectstart"in e?false:D(e.style,"userSelect")}if(xe){var s=a(e).style,u=s[xe];s[xe]="none"}return function(e){i.on(n,null);if(xe){s[xe]=u}if(e){var t=function(){i.on(r,null)};i.on(r,function(){j();t()},true);setTimeout(t,0)}}}t.mouse=function(e){return Ce(e,z())};var ke=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ce(e,n){if(n.changedTouches){n=n.changedTouches[0]}var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(ke<0){var a=o(e);if(a.scrollX||a.scrollY){r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var s=r[0][0].getScreenCTM();ke=!(s.f||s.e);r.remove()}}if(ke){i.x=n.pageX,i.y=n.pageY}else{i.x=n.clientX,i.y=n.clientY}i=i.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]}var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}t.touch=function(e,t,n){if(arguments.length<3){n=t,t=z().changedTouches}if(t){for(var r=0,i=t.length,a;r<i;++r){if((a=t[r]).identifier===n){return Ce(e,a)}}}};t.behavior.drag=function(){var e=H(a,"drag","dragstart","dragend"),n=null,r=s(L,t.mouse,o,"mousemove","mouseup"),i=s(Te,t.touch,N,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,a,o,s){return function(){var u=this,l=t.event.target.correspondingElement||t.event.target,c=u.parentNode,f=e.of(u,arguments),d=0,h=r(),p=".drag"+(h==null?"":"-"+h),v,m=t.select(a(l)).on(o+p,b).on(s+p,x),g=_e(l),y=i(c,h);if(n){v=n.apply(u,arguments);v=[v.x-y[0],v.y-y[1]]}else{v=[0,0]}f({type:"dragstart"});function b(){var e=i(c,h),t,n;if(!e){return}t=e[0]-y[0];n=e[1]-y[1];d|=t|n;y=e;f({type:"drag",x:e[0]+v[0],y:e[1]+v[1],dx:t,dy:n})}function x(){if(!i(c,h)){return}m.on(o+p,null).on(s+p,null);g(d);f({type:"dragend"})}}}a.origin=function(e){if(!arguments.length){return n}n=e;return a};return t.rebind(a,e,"on")};function Te(){return t.event.changedTouches[0].identifier}t.touches=function(e,t){if(arguments.length<2){t=z().touches}return t?r(t).map(function(t){var n=Ce(e,t);n.identifier=t.identifier;return n}):[]};var Se=1e-6,Ee=Se*Se,Ae=Math.PI,Pe=2*Ae,Oe=Pe-Se,Me=Ae/2,Ne=Ae/180,Re=180/Ae;function De(e){return e>0?1:e<0?-1:0}function Be(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Le(e){return e>1?0:e<-1?Ae:Math.acos(e)}function Ie(e){return e>1?Me:e<-1?-Me:Math.asin(e)}function Fe(e){return((e=Math.exp(e))-1/e)/2}function je(e){return((e=Math.exp(e))+1/e)/2}function ze(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Ue=Math.SQRT2,We=2,Ve=4;t.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=a-n,l=o-r,c=u*u+l*l,f,d;if(c<Ee){d=Math.log(s/i)/Ue;f=function(e){return[n+e*u,r+e*l,i*Math.exp(Ue*e*d)]}}else{var h=Math.sqrt(c),p=(s*s-i*i+Ve*c)/(2*i*We*h),v=(s*s-i*i-Ve*c)/(2*s*We*h),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(v*v+1)-v);d=(g-m)/Ue;f=function(e){var t=e*d,a=je(m),o=i/(We*h)*(a*ze(Ue*t+m)-Fe(m));return[n+o*u,r+o*l,i*a/je(Ue*t+m)]}}f.duration=d*1e3;return f};t.behavior.zoom=function(){var e={x:0,y:0,k:1},n,r,a,s=[960,500],u=qe,l=250,c=0,f="mousedown.zoom",d="mousemove.zoom",h="mouseup.zoom",p,v="touchstart.zoom",m,g=H(_,"zoomstart","zoom","zoomend"),y,b,x,w;if(!Ye){Ye="onwheel"in i?(Ke=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ke=function(){return t.event.wheelDelta},"mousewheel"):(Ke=function(){return-t.event.detail},"MozMousePixelScroll")}function _(e){e.on(f,N).on(Ye+".zoom",D).on("dblclick.zoom",B).on(v,R)}_.event=function(n){n.each(function(){var n=g.of(this,arguments),i=e;if(Mu){t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};P(n)}).tween("zoom:zoom",function(){var a=s[0],o=s[1],u=r?r[0]:a/2,l=r?r[1]:o/2,c=t.interpolateZoom([(u-e.x)/e.k,(l-e.y)/e.k,a/e.k],[(u-i.x)/i.k,(l-i.y)/i.k,a/i.k]);return function(t){var r=c(t),i=a/r[2];this.__chart__=e={x:u-r[0]*i,y:l-r[1]*i,k:i};O(n)}}).each("interrupt.zoom",function(){M(n)}).each("end.zoom",function(){M(n)})}else{this.__chart__=e;P(n);O(n);M(n)}})};_.translate=function(t){if(!arguments.length){return[e.x,e.y]}e={x:+t[0],y:+t[1],k:e.k};A();return _};_.scale=function(t){if(!arguments.length){return e.k}e={x:e.x,y:e.y,k:null};T(+t);A();return _};_.scaleExtent=function(e){if(!arguments.length){return u}u=e==null?qe:[+e[0],+e[1]];return _};_.center=function(e){if(!arguments.length){return a}a=e&&[+e[0],+e[1]];return _};_.size=function(e){if(!arguments.length){return s}s=e&&[+e[0],+e[1]];return _};_.duration=function(e){if(!arguments.length){return l}l=+e;return _};_.x=function(t){if(!arguments.length){return b}b=t;y=t.copy();e={x:0,y:0,k:1};return _};_.y=function(t){if(!arguments.length){return w}w=t;x=t.copy();e={x:0,y:0,k:1};return _};function k(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function C(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function T(t){e.k=Math.max(u[0],Math.min(u[1],t))}function S(t,n){n=C(n);e.x+=t[0]-n[0];e.y+=t[1]-n[1]}function E(n,i,a,o){n.__chart__={x:e.x,y:e.y,k:e.k};T(Math.pow(2,o));S(r=i,a);n=t.select(n);if(l>0){n=n.transition().duration(l)}n.call(_.event)}function A(){if(b){b.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert))}if(w){w.domain(x.range().map(function(t){return(t-e.y)/e.k}).map(x.invert))}}function P(e){if(!c++){e({type:"zoomstart"})}}function O(t){A();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function M(e){if(!--c){e({type:"zoomend"}),r=null}}function N(){var e=this,n=g.of(e,arguments),r=0,i=t.select(o(e)).on(d,u).on(h,l),a=k(t.mouse(e)),s=_e(e);Su.call(e);P(n);function u(){r=1;S(t.mouse(e),a);O(n)}function l(){i.on(d,null).on(h,null);s(r);M(n)}}function R(){var n=this,r=g.of(n,arguments),i={},a=0,o,s=".zoom-"+t.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],d=t.select(n),h=_e(n);y();P(r);d.on(f,null).on(v,y);function p(){var r=t.touches(n);o=e.k;r.forEach(function(e){if(e.identifier in i){i[e.identifier]=k(e)}});return r}function y(){var r=t.event.target;t.select(r).on(u,b).on(l,x);c.push(r);var o=t.event.changedTouches;for(var s=0,f=o.length;s<f;++s){i[o[s].identifier]=null}var d=p(),h=Date.now();if(d.length===1){if(h-m<500){var v=d[0];E(n,v,i[v.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);j()}m=h}else if(d.length>1){var v=d[0],g=d[1],y=v[0]-g[0],w=v[1]-g[1];a=y*y+w*w}}function b(){var e=t.touches(n),s,u,l,c;Su.call(n);for(var f=0,d=e.length;f<d;++f,c=null){l=e[f];if(c=i[l.identifier]){if(u){break}s=l,u=c}}if(c){var h=(h=l[0]-s[0])*h+(h=l[1]-s[1])*h,p=a&&Math.sqrt(h/a);s=[(s[0]+l[0])/2,(s[1]+l[1])/2];u=[(u[0]+c[0])/2,(u[1]+c[1])/2];T(p*o)}m=null;S(s,u);O(r)}function x(){if(t.event.touches.length){var e=t.event.changedTouches;for(var n=0,a=e.length;n<a;++n){delete i[e[n].identifier]}for(var o in i){return void p()}}t.selectAll(c).on(s,null);d.on(f,N).on(v,R);h();M(r)}}function D(){var i=g.of(this,arguments);if(p){clearTimeout(p)}else{Su.call(this),n=k(r=a||t.mouse(this)),P(i)}p=setTimeout(function(){p=null;M(i)},50);j();T(Math.pow(2,Ke()*.002)*e.k);S(r,n);O(i)}function B(){var n=t.mouse(this),r=Math.log(e.k)/Math.LN2;E(this,n,k(n),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return t.rebind(_,g,"on")};var qe=[0,Infinity],Ke,Ye;t.color=$e;function $e(){}$e.prototype.toString=function(){return this.rgb()+""};t.hsl=Ge;function Ge(e,t,n){return this instanceof Ge?void(this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Ge?new Ge(e.h,e.s,e.l):gt(""+e,yt,Ge):new Ge(e,t,n)}var Xe=Ge.prototype=new $e;Xe.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ge(this.h,this.s,this.l/e)};Xe.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ge(this.h,this.s,e*this.l)};Xe.rgb=function(){return Ze(this.h,this.s,this.l)};function Ze(e,t,n){var r,i;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;i=n<=.5?n*(1+t):n+t-n*t;r=2*n-i;function a(e){if(e>360){e-=360}else if(e<0){e+=360}if(e<60){return r+(i-r)*e/60}if(e<180){return i}if(e<240){return r+(i-r)*(240-e)/60}return r}function o(e){return Math.round(a(e)*255)}return new dt(o(e+120),o(e),o(e-120))}t.hcl=Je;function Je(e,n,r){return this instanceof Je?void(this.h=+e,this.c=+n,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):e instanceof tt?ut(e.l,e.a,e.b):ut((e=bt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,n,r)}var Qe=Je.prototype=new $e;Qe.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+nt*(arguments.length?e:1)))};Qe.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-nt*(arguments.length?e:1)))};Qe.rgb=function(){return et(this.h,this.c,this.l).rgb()};function et(e,t,n){if(isNaN(e)){e=0}if(isNaN(t)){t=0}return new tt(n,Math.cos(e*=Ne)*t,Math.sin(e)*t)}t.lab=tt;function tt(e,t,n){return this instanceof tt?void(this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof tt?new tt(e.l,e.a,e.b):e instanceof Je?et(e.h,e.c,e.l):bt((e=dt(e)).r,e.g,e.b):new tt(e,t,n)}var nt=18;var rt=.95047,it=1,at=1.08883;var ot=tt.prototype=new $e;ot.brighter=function(e){return new tt(Math.min(100,this.l+nt*(arguments.length?e:1)),this.a,this.b)};ot.darker=function(e){return new tt(Math.max(0,this.l-nt*(arguments.length?e:1)),this.a,this.b)};ot.rgb=function(){return st(this.l,this.a,this.b)};function st(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;i=lt(i)*rt;r=lt(r)*it;a=lt(a)*at;return new dt(ft(3.2404542*i-1.5371385*r-.4985314*a),ft(-.969266*i+1.8760108*r+.041556*a),ft(.0556434*i-.2040259*r+1.0572252*a))}function ut(e,t,n){return e>0?new Je(Math.atan2(n,t)*Re,Math.sqrt(t*t+n*n),e):new Je(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ft(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}t.rgb=dt;function dt(e,t,n){return this instanceof dt?void(this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof dt?new dt(e.r,e.g,e.b):gt(""+e,dt,Ze):new dt(e,t,n)}function ht(e){return new dt(e>>16,e>>8&255,e&255)}function pt(e){return ht(e)+""}var vt=dt.prototype=new $e;vt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;if(!t&&!n&&!r){return new dt(i,i,i)}if(t&&t<i){t=i}if(n&&n<i){n=i}if(r&&r<i){r=i}return new dt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))};vt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new dt(e*this.r,e*this.g,e*this.b)};vt.hsl=function(){return yt(this.r,this.g,this.b)};vt.toString=function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)};function mt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,n){var r=0,i=0,a=0,o,s,u;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(wt(s[0]),wt(s[1]),wt(s[2]))}}}if(u=_t.get(e)){return t(u.r,u.g,u.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(u=parseInt(e.slice(1),16))){if(e.length===4){r=(u&3840)>>4;r=r>>4|r;i=u&240;i=i>>4|i;a=u&15;a=a<<4|a}else if(e.length===7){r=(u&16711680)>>16;i=(u&65280)>>8;a=u&255}}return t(r,i,a)}function yt(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),a=i-r,o,s,u=(i+r)/2;if(a){s=u<.5?a/(i+r):a/(2-i-r);if(e==i){o=(t-n)/a+(t<n?6:0)}else if(t==i){o=(n-e)/a+2}else{o=(e-t)/a+4}o*=60}else{o=NaN;s=u>0&&u<1?0:o}return new Ge(o,s,u)}function bt(e,t,n){e=xt(e);t=xt(t);n=xt(n);var r=ct((.4124564*e+.3575761*t+.1804375*n)/rt),i=ct((.2126729*e+.7151522*t+.072175*n)/it),a=ct((.0193339*e+.119192*t+.9503041*n)/at);return tt(116*i-16,500*(r-i),200*(i-a))}function xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var _t=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_t.forEach(function(e,t){_t.set(e,ht(t))});function kt(e){return typeof e==="function"?e:function(){return e}}t.functor=kt;t.xhr=Ct(N);function Ct(e){return function(t,n,r){if(arguments.length===2&&typeof n==="function"){r=n,n=null}return Tt(t,n,e,r)}}function Tt(e,n,i,a){var o={},s=t.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)){l=new XDomainRequest}"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()};function f(){var e=l.status,t;if(!e&&Et(l)||e>=200&&e<300||e===304){try{t=i.call(o,l)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,l)}}l.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(o,l)}finally{t.event=n}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2){return u[e]}if(t==null){delete u[e]}else{u[e]=t+""}return o};o.mimeType=function(e){if(!arguments.length){return n}n=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length){return c}c=e;return o};o.response=function(e){i=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(r(arguments)))}});o.send=function(t,r,i){if(arguments.length===2&&typeof r==="function"){i=r,r=null}l.open(t,e,true);if(n!=null&&!("accept"in u)){u["accept"]=n+",*/*"}if(l.setRequestHeader){for(var a in u){l.setRequestHeader(a,u[a])}}if(n!=null&&l.overrideMimeType){l.overrideMimeType(n)}if(c!=null){l.responseType=c}if(i!=null){o.on("error",i).on("load",function(e){i(null,e)})}s.beforesend.call(o,l);l.send(r==null?null:r);return o};o.abort=function(){l.abort();return o};t.rebind(o,s,"on");return a==null?o:o.get(St(a))}function St(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Et(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}t.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){if(arguments.length<3){r=n,n=null}var i=Tt(e,t,n==null?a:o(n),r);i.row=function(e){return arguments.length?i.response((n=e)==null?a:o(e)):n};return i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n){return n(e,r-1)}var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})};i.parseRows=function(e,t){var n={},i={},a=[],o=e.length,s=0,u=0,l,c;function f(){if(s>=o){return i}if(c){return c=false,n}var t=s;if(e.charCodeAt(t)===34){var a=t;while(a++<o){if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34){break}++a}}s=a+2;var u=e.charCodeAt(a+1);if(u===13){c=true;if(e.charCodeAt(a+2)===10){++s}}else if(u===10){c=true}return e.slice(t+1,a).replace(/""/g,'"')}while(s<o){var u=e.charCodeAt(s++),l=1;if(u===10){c=true}else if(u===13){c=true;if(e.charCodeAt(s)===10){++s,++l}}else if(u!==r){continue}return e.slice(t,s-l)}return e.slice(t)}while((l=f())!==i){var d=[];while(l!==n&&l!==i){d.push(l);l=f()}if(t&&(d=t(d,u++))==null){continue}a.push(d)}return a};i.format=function(t){if(Array.isArray(t[0])){return i.formatRows(t)}var n=new M,r=[];t.forEach(function(e){for(var t in e){if(!n.has(t)){r.push(n.add(t))}}});return[r.map(u).join(e)].concat(t.map(function(t){return r.map(function(e){return u(t[e])}).join(e)})).join("\n")};i.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var At,Pt,Ot,Mt,Nt=this[D(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){Rt.apply(this,arguments)};function Rt(e,t,n){var r=arguments.length;if(r<2){t=0}if(r<3){n=Date.now()}var i=n+t,a={c:e,t:i,n:null};if(Pt){Pt.n=a}else{At=a}Pt=a;if(!Ot){Mt=clearTimeout(Mt);Ot=1;Nt(Dt)}return a}function Dt(){var e=Bt(),t=Lt()-e;if(t>24){if(isFinite(t)){clearTimeout(Mt);Mt=setTimeout(Dt,t)}Ot=0}else{Ot=1;Nt(Dt)}}t.timer.flush=function(){Bt();Lt()};function Bt(){var e=Date.now(),t=At;while(t){if(e>=t.t&&t.c(e-t.t)){t.c=null}t=t.n}return e}function Lt(){var e,t=At,n=Infinity;while(t){if(t.c){if(t.t<n){n=t.t}t=(e=t).n}else{t=e?e.n=t.n:At=t.n}}Pt=e;return n}function It(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Ft=["y","z","a","f","p","n","¬µ","m","","k","M","G","T","P","E","Z","Y"].map(jt);t.formatPrefix=function(e,n){var r=0;if(e=+e){if(e<0){e*=-1}if(n){e=t.round(e,It(e,n))}r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return Ft[8+r/3]};function jt(e,t){var n=Math.pow(10,y(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function zt(e){var n=e.decimal,r=e.thousands,i=e.grouping,a=e.currency,o=i&&r?function(e,t){var n=e.length,a=[],o=0,s=i[0],u=0;while(n>0&&s>0){if(u+s+1>t){s=Math.max(1,t-u)}a.push(e.substring(n-=s,n+s));if((u+=s+1)>t){break}s=i[o=(o+1)%i.length]}return a.reverse().join(r)}:N;return function(e){var r=Ht.exec(e),i=r[1]||" ",s=r[2]||">",u=r[3]||"-",l=r[4]||"",c=r[5],f=+r[6],d=r[7],h=r[8],p=r[9],v=1,m="",g="",y=false,b=true;if(h){h=+h.substring(1)}if(c||i==="0"&&s==="="){c=i="0";s="="}switch(p){case"n":d=true;p="g";break;case"%":v=100;g="%";p="f";break;case"p":v=100;g="%";p="r";break;case"b":case"o":case"x":case"X":if(l==="#"){m="0"+p.toLowerCase()}case"c":b=false;case"d":y=true;h=0;break;case"s":v=-1;p="r";break}if(l==="$"){m=a[0],g=a[1]}if(p=="r"&&!h){p="g"}if(h!=null){if(p=="g"){h=Math.max(1,Math.min(21,h))}else if(p=="e"||p=="f"){h=Math.max(0,Math.min(20,h))}}p=Ut.get(p)||Wt;var x=c&&d;return function(e){var r=g;if(y&&e%1){return""}var a=e<0||e===0&&1/e<0?(e=-e,"-"):u==="-"?"":u;if(v<0){var l=t.formatPrefix(e,h);e=l.scale(e);r=l.symbol+g}else{e*=v}e=p(e,h);var w=e.lastIndexOf("."),_,k;if(w<0){var C=b?e.lastIndexOf("e"):-1;if(C<0){_=e,k=""}else{_=e.substring(0,C),k=e.substring(C)}}else{_=e.substring(0,w);k=n+e.substring(w+1)}if(!c&&d){_=o(_,Infinity)}var T=m.length+_.length+k.length+(x?0:a.length),S=T<f?new Array(T=f-T+1).join(i):"";if(x){_=o(S+_,S.length?f-k.length:Infinity)}a+=m;e=_+k;return(s==="<"?a+e+S:s===">"?S+a+e:s==="^"?S.substring(0,T>>=1)+a+e+S.substring(T):a+(x?e:S+e))+r}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ut=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,n){return(e=t.round(e,It(e,n))).toFixed(Math.max(0,Math.min(20,It(e*(1+1e-15),n))))}});function Wt(e){return e+""}var Vt=t.time={},qt=Date;function Kt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Kt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Yt.setUTCDate.apply(this._,arguments)},setDay:function(){Yt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Yt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Yt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Yt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Yt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Yt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Yt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Yt.setTime.apply(this._,arguments)}};var Yt=Date.prototype;function $t(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){t(n=e(new qt(n-1)),1);return n}function a(e,n){t(e=new qt(+e),n);return e}function o(e,r,a){var o=i(e),s=[];if(a>1){while(o<r){if(!(n(o)%a)){s.push(new Date(+o))}t(o,1)}}else{while(o<r){s.push(new Date(+o)),t(o,1)}}return s}function s(e,t,n){try{qt=Kt;var r=new Kt;r._=e;return o(r,t,n)}finally{qt=Date}}e.floor=e;e.round=r;e.ceil=i;e.offset=a;e.range=o;var u=e.utc=Gt(e);u.floor=u;u.round=Gt(r);u.ceil=Gt(i);u.offset=Gt(a);u.range=s;return e}function Gt(e){return function(t,n){try{qt=Kt;var r=new Kt;r._=t;return e(r,n)._}finally{qt=Date}}}Vt.year=$t(function(e){e=Vt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Vt.years=Vt.year.range;Vt.years.utc=Vt.year.utc.range;Vt.day=$t(function(e){var t=new qt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Vt.days=Vt.day.range;Vt.days.utc=Vt.day.utc.range;Vt.dayOfYear=function(e){var t=Vt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Vt[e]=$t(function(e){(e=Vt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Vt[e+"s"]=n.range;Vt[e+"s"].utc=n.utc.range;Vt[e+"OfYear"]=function(e){var n=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(n+t)%7)/7)}});Vt.week=Vt.sunday;Vt.weeks=Vt.sunday.range;Vt.weeks.utc=Vt.sunday.utc.range;Vt.weekOfYear=Vt.sundayOfYear;function Xt(e){var n=e.dateTime,r=e.date,i=e.time,a=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){var r=[],i=-1,a=0,o,s,u;while(++i<t){if(e.charCodeAt(i)===37){r.push(e.slice(a,i));if((s=Zt[o=e.charAt(++i)])!=null){o=e.charAt(++i)}if(u=w[o]){o=u(n,s==null?o==="e"?" ":"0":s)}r.push(o);a=i+1}}r.push(e.slice(a,i));return r.join("")}n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,e,t,0);if(r!=t.length){return null}if("p"in n){n.H=n.H%12+n.p*12}var i=n.Z!=null&&qt!==Kt,a=new(i?Kt:qt);if("j"in n){a.setFullYear(n.y,0,n.j)}else if("W"in n||"U"in n){if(!("w"in n)){n.w="W"in n?1:0}a.setFullYear(n.y,0,1);a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(a.getDay()+5)%7:n.w+n.U*7-(a.getDay()+6)%7)}else{a.setFullYear(n.y,n.m,n.d)}a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L);return i?a._:a};n.toString=function(){return e};return n}function f(e,t,n,r){var i,a,o,s=0,u=t.length,l=n.length;while(s<u){if(r>=l){return-1}i=t.charCodeAt(s++);if(i===37){o=t.charAt(s++);a=_[o in Zt?t.charAt(s++):o];if(!a||(r=a(e,n,r))<0){return-1}}else if(i!=n.charCodeAt(r++)){return-1}}return r}c.utc=function(e){var t=c(e);function n(e){try{qt=Kt;var n=new qt;n._=e;return t(n)}finally{qt=Date}}n.parse=function(e){try{qt=Kt;var n=t.parse(e);return n&&n._}finally{qt=Date}};n.toString=t.toString;return n};c.multi=c.utc.multi=xn;var d=t.map(),h=tn(o),p=nn(o),v=tn(s),m=nn(s),g=tn(u),y=nn(u),b=tn(l),x=nn(l);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var w={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(n),d:function(e,t){return en(e.getDate(),t,2)},e:function(e,t){return en(e.getDate(),t,2)},H:function(e,t){return en(e.getHours(),t,2)},I:function(e,t){return en(e.getHours()%12||12,t,2)},j:function(e,t){return en(1+Vt.dayOfYear(e),t,3)},L:function(e,t){return en(e.getMilliseconds(),t,3)},m:function(e,t){return en(e.getMonth()+1,t,2)},M:function(e,t){return en(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return en(e.getSeconds(),t,2)},U:function(e,t){return en(Vt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return en(Vt.mondayOfYear(e),t,2)},x:c(r),X:c(i),y:function(e,t){return en(e.getFullYear()%100,t,2)},Y:function(e,t){return en(e.getFullYear()%1e4,t,4)},Z:yn,"%":function(){return"%"}};var _={a:k,A:C,b:T,B:S,c:E,d:dn,e:dn,H:pn,I:pn,j:hn,L:gn,m:fn,M:vn,p:O,S:mn,U:an,w:rn,W:on,x:A,X:P,y:un,Y:sn,Z:ln,"%":bn};function k(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){h.lastIndex=0;var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function T(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1}function S(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function E(e,t,n){return f(e,w.c.toString(),t,n)}function A(e,t,n){return f(e,w.x.toString(),t,n)}function P(e,t,n){return f(e,w.X.toString(),t,n)}function O(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}return c}var Zt={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,Qt=/^%/;function en(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function tn(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function nn(e){var t=new w,n=-1,r=e.length;while(++n<r){t.set(e[n].toLowerCase(),n)}return t}function rn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function an(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function on(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function sn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function un(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.y=cn(+r[0]),n+r[0].length):-1}function ln(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function cn(e){return e+(e>68?1900:2e3)}function fn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function hn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function pn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function vn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function gn(e,t,n){Jt.lastIndex=0;var r=Jt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=y(t)/60|0,i=y(t)%60;return n+en(r,"0",2)+en(i,"0",2)}function bn(e,t,n){Qt.lastIndex=0;var r=Qt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xn(e){var t=e.length,n=-1;while(++n<t){e[n][0]=this(e[n][0])}return function(t){var n=0,r=e[n];while(!r[1](t)){r=e[++n]}return r[0](t)}}t.locale=function(e){return{numberFormat:zt(e),timeFormat:Xt(e)}};var wn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=wn.numberFormat;t.geo={};function _n(){}_n.prototype={s:0,t:0,add:function(e){Cn(e,this.t,kn);Cn(kn.s,this.s,this);if(this.s){this.t+=kn.t}else{this.s=kn.t}},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var kn=new _n;function Cn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}t.geo.stream=function(e,t){if(e&&Sn.hasOwnProperty(e.type)){Sn[e.type](e,t)}else{Tn(e,t)}};function Tn(e,t){if(e&&En.hasOwnProperty(e.type)){En[e.type](e,t)}}var Sn={Feature:function(e,t){Tn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i){Tn(n[r].geometry,t)}}};var En={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){e=n[r],t.point(e[0],e[1],e[2])}},LineString:function(e,t){An(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){An(n[r],t,0)}},Polygon:function(e,t){Pn(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i){Pn(n[r],t)}},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i){Tn(n[r],t)}}};function An(e,t,n){var r=-1,i=e.length-n,a;t.lineStart();while(++r<i){a=e[r],t.point(a[0],a[1],a[2])}t.lineEnd()}function Pn(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r){An(e[n],t,1)}t.polygonEnd()}t.geo.area=function(e){On=0;t.geo.stream(e,Nn);return On};var On,Mn=new _n;var Nn={sphere:function(){On+=4*Ae},point:L,lineStart:L,lineEnd:L,polygonStart:function(){Mn.reset();Nn.lineStart=Rn},polygonEnd:function(){var e=2*Mn;On+=e<0?4*Ae+e:e;Nn.lineStart=Nn.lineEnd=Nn.point=L}};function Rn(){var e,t,n,r,i;Nn.point=function(o,s){Nn.point=a;n=(e=o)*Ne,r=Math.cos(s=(t=s)*Ne/2+Ae/4),i=Math.sin(s)};function a(e,t){e*=Ne;t=t*Ne/2+Ae/4;var a=e-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),c=i*l,f=r*u+c*Math.cos(s),d=c*o*Math.sin(s);Mn.add(Math.atan2(d,f));n=e,r=u,i=l}Nn.lineEnd=function(){a(e,t)}}function Dn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ln(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function In(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Fn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function zn(e){return[Math.atan2(e[1],e[0]),Ie(e[2])]}function Hn(e,t){return y(e[0]-t[0])<Se&&y(e[1]-t[1])<Se}t.geo.bounds=function(){var e,n,r,i,a,o,s,u,l,c,f;var d={point:h,lineStart:v,lineEnd:m,polygonStart:function(){d.point=g;d.lineStart=b;d.lineEnd=x;l=0;Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd();d.point=h;d.lineStart=v;d.lineEnd=m;if(Mn<0){e=-(r=180),n=-(i=90)}else if(l>Se){i=90}else if(l<-Se){n=-90}f[0]=e,f[1]=r}};function h(t,a){c.push(f=[e=t,r=t]);if(a<n){n=a}if(a>i){i=a}}function p(t,o){var s=Dn([t*Ne,o*Ne]);if(u){var l=Ln(u,s),c=[l[1],-l[0],0],f=Ln(c,l);jn(f);f=zn(f);var d=t-a,p=d>0?1:-1,v=f[0]*Re*p,m=y(d)>180;if(m^(p*a<v&&v<p*t)){var g=f[1]*Re;if(g>i){i=g}}else if(v=(v+360)%360-180,m^(p*a<v&&v<p*t)){var g=-f[1]*Re;if(g<n){n=g}}else{if(o<n){n=o}if(o>i){i=o}}if(m){if(t<a){if(w(e,t)>w(e,r)){r=t}}else{if(w(t,r)>w(e,r)){e=t}}}else{if(r>=e){if(t<e){e=t}if(t>r){r=t}}else{if(t>a){if(w(e,t)>w(e,r)){r=t}}else{if(w(t,r)>w(e,r)){e=t}}}}}else{h(t,o)}u=s,a=t}function v(){d.point=p}function m(){f[0]=e,f[1]=r;d.point=h;u=null}function g(e,t){if(u){var n=e-a;l+=y(n)>180?n+(n>0?360:-360):n}else{o=e,s=t}Nn.point(e,t);p(e,t)}function b(){Nn.lineStart()}function x(){g(o,s);Nn.lineEnd();if(y(l)>Se){e=-(r=180)}f[0]=e,f[1]=r;u=null}function w(e,t){return(t-=e)<0?t+360:t}function _(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(a){i=r=-(e=n=Infinity);c=[];t.geo.stream(a,d);var o=c.length;if(o){c.sort(_);for(var s=1,u=c[0],l,h=[u];s<o;++s){l=c[s];if(k(l[0],u)||k(l[1],u)){if(w(u[0],l[1])>w(u[0],u[1])){u[1]=l[1]}if(w(l[0],u[1])>w(u[0],u[1])){u[0]=l[0]}}else{h.push(u=l)}}var p=-Infinity,v;for(var o=h.length-1,s=0,u=h[o],l;s<=o;u=l,++s){l=h[s];if((v=w(u[1],l[0]))>p){p=v,e=l[0],r=u[1]}}}c=f=null;return e===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}();t.geo.centroid=function(e){Un=Wn=Vn=qn=Kn=Yn=$n=Gn=Xn=Zn=Jn=0;t.geo.stream(e,Qn);var n=Xn,r=Zn,i=Jn,a=n*n+r*r+i*i;if(a<Ee){n=Yn,r=$n,i=Gn;if(Wn<Se){n=Vn,r=qn,i=Kn}a=n*n+r*r+i*i;if(a<Ee){return[NaN,NaN]}}return[Math.atan2(r,n)*Re,Ie(i/Math.sqrt(a))*Re]};var Un,Wn,Vn,qn,Kn,Yn,$n,Gn,Xn,Zn,Jn;var Qn={sphere:L,point:er,lineStart:nr,lineEnd:rr,polygonStart:function(){Qn.lineStart=ir},polygonEnd:function(){Qn.lineStart=nr}};function er(e,t){e*=Ne;var n=Math.cos(t*=Ne);tr(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function tr(e,t,n){++Un;Vn+=(e-Vn)/Un;qn+=(t-qn)/Un;Kn+=(n-Kn)/Un}function nr(){var e,t,n;Qn.point=function(i,a){i*=Ne;var o=Math.cos(a*=Ne);e=o*Math.cos(i);t=o*Math.sin(i);n=Math.sin(a);Qn.point=r;tr(e,t,n)};function r(r,i){r*=Ne;var a=Math.cos(i*=Ne),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Wn+=l;Yn+=l*(e+(e=o));$n+=l*(t+(t=s));Gn+=l*(n+(n=u));tr(e,t,n)}}function rr(){Qn.point=er}function ir(){var e,t,n,r,i;Qn.point=function(o,s){e=o,t=s;Qn.point=a;o*=Ne;var u=Math.cos(s*=Ne);n=u*Math.cos(o);r=u*Math.sin(o);i=Math.sin(s);tr(n,r,i)};Qn.lineEnd=function(){a(e,t);Qn.lineEnd=rr;Qn.point=er};function a(e,t){e*=Ne;var a=Math.cos(t*=Ne),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,d=Math.sqrt(l*l+c*c+f*f),h=n*o+r*s+i*u,p=d&&-Le(h)/d,v=Math.atan2(d,h);Xn+=p*l;Zn+=p*c;Jn+=p*f;Wn+=v;Yn+=v*(n+(n=o));$n+=v*(r+(r=s));Gn+=v*(i+(i=u));tr(n,r,i)}}function ar(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}if(e.invert&&t.invert){n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}}return n}function or(){return true}function sr(e,t,n,r,i){var a=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0){return}var t,n=e[0],r=e[t];if(Hn(n,r)){i.lineStart();for(var s=0;s<t;++s){i.point((n=e[s])[0],n[1])}i.lineEnd();return}var u=new lr(n,e,null,true),l=new lr(n,null,u,false);u.o=l;a.push(u);o.push(l);u=new lr(r,e,null,false);l=new lr(r,null,u,true);u.o=l;a.push(u);o.push(l)});o.sort(t);ur(a);ur(o);if(!a.length){return}for(var s=0,u=n,l=o.length;s<l;++s){o[s].e=u=!u}var c=a[0],f,d;while(1){var h=c,p=true;while(h.v){if((h=h.n)===c){return}}f=h.z;i.lineStart();do{h.v=h.o.v=true;if(h.e){if(p){for(var s=0,l=f.length;s<l;++s){i.point((d=f[s])[0],d[1])}}else{r(h.x,h.n.x,1,i)}h=h.n}else{if(p){f=h.p.z;for(var s=f.length-1;s>=0;--s){i.point((d=f[s])[0],d[1])}}else{r(h.x,h.p.x,-1,i)}h=h.p}h=h.o;f=h.z;p=!p}while(!h.v);i.lineEnd()}}function ur(e){if(!(t=e.length)){return}var t,n=0,r=e[0],i;while(++n<t){r.n=i=e[n];i.p=r;r=i}r.n=i=e[0];i.p=r}function lr(e,t,n,r){this.x=e;this.z=t;this.o=n;this.e=r;this.v=false;this.n=this.p=null}function cr(e,n,r,i){return function(a,o){var s=n(o),u=a.invert(i[0],i[1]);var l={point:c,lineStart:d,lineEnd:h,polygonStart:function(){l.point=x;l.lineStart=w;l.lineEnd=_;p=[];y=[]},polygonEnd:function(){l.point=c;l.lineStart=d;l.lineEnd=h;p=t.merge(p);var e=yr(u,y);if(p.length){if(!g){o.polygonStart(),g=true}sr(p,hr,e,r,o)}else if(e){if(!g){o.polygonStart(),g=true}o.lineStart();r(null,null,1,o);o.lineEnd()}if(g){o.polygonEnd(),g=false}p=y=null},sphere:function(){o.polygonStart();o.lineStart();r(null,null,1,o);o.lineEnd();o.polygonEnd()}};function c(t,n){var r=a(t,n);if(e(t=r[0],n=r[1])){o.point(t,n)}}function f(e,t){var n=a(e,t);s.point(n[0],n[1])}function d(){l.point=f;s.lineStart()}function h(){l.point=c;s.lineEnd()}var p;var v=dr(),m=n(v),g=false,y,b;function x(e,t){b.push([e,t]);var n=a(e,t);m.point(n[0],n[1])}function w(){m.lineStart();b=[]}function _(){x(b[0][0],b[0][1]);m.lineEnd();var e=m.clean(),t=v.buffer(),n,r=t.length;b.pop();y.push(b);b=null;if(!r){return}if(e&1){n=t[0];var r=n.length-1,i=-1,a;if(r>0){if(!g){o.polygonStart(),g=true}o.lineStart();while(++i<r){o.point((a=n[i])[0],a[1])}o.lineEnd()}return}if(r>1&&e&2){t.push(t.pop().concat(t.shift()))}p.push(t.filter(fr))}return l}}function fr(e){return e.length>1}function dr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:L,buffer:function(){var n=e;e=[];t=null;return n},rejoin:function(){if(e.length>1){e.push(e.pop().concat(e.shift()))}}}}function hr(e,t){return((e=e.x)[0]<0?e[1]-Me-Se:Me-e[1])-((t=t.x)[0]<0?t[1]-Me-Se:Me-t[1])}var pr=cr(or,vr,gr,[-Ae,-Ae/2]);function vr(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(a,o){var s=a>0?Ae:-Ae,u=y(a-t);if(y(u-Ae)<Se){e.point(t,n=(n+o)/2>0?Me:-Me);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);e.point(a,n);i=0}else if(r!==s&&u>=Ae){if(y(t-r)<Se){t-=r*Se}if(y(a-s)<Se){a-=s*Se}n=mr(t,n,a,o);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);i=0}e.point(t=a,n=o);r=s},lineEnd:function(){e.lineEnd();t=n=NaN},clean:function(){return 2-i}}}function mr(e,t,n,r){var i,a,o=Math.sin(e-n);return y(o)>Se?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function gr(e,t,n,r){var i;if(e==null){i=n*Me;r.point(-Ae,i);r.point(0,i);r.point(Ae,i);r.point(Ae,0);r.point(Ae,-i);r.point(0,-i);r.point(-Ae,-i);r.point(-Ae,0);r.point(-Ae,i)}else if(y(e[0]-t[0])>Se){var a=e[0]<t[0]?Ae:-Ae;i=n*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(t[0],t[1])}}function yr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Mn.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(!c){continue}var f=l[0],d=f[0],h=f[1]/2+Ae/4,p=Math.sin(h),v=Math.cos(h),m=1;while(true){if(m===c){m=0}e=l[m];var g=e[0],y=e[1]/2+Ae/4,b=Math.sin(y),x=Math.cos(y),w=g-d,_=w>=0?1:-1,k=_*w,C=k>Ae,T=p*b;Mn.add(Math.atan2(T*_*Math.sin(k),v*x+T*Math.cos(k)));a+=C?w+_*Pe:w;if(C^d>=n^g>=n){var S=Ln(Dn(f),Dn(e));jn(S);var E=Ln(i,S);jn(E);var A=(C^w>=0?-1:1)*Ie(E[2]);if(r>A||r===A&&(S[0]||S[1])){o+=C^w>=0?1:-1}}if(!m++){break}d=g,p=b,v=x,f=e}}return(a<-Se||a<Se&&Mn<-Se)^o&1}function br(e){var t=Math.cos(e),n=t>0,r=y(t)>Se,i=ni(e,6*Ne);return cr(a,o,i,n?[0,-e]:[-Ae,e-Ae]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,l,c;return{lineStart:function(){l=o=false;c=1},point:function(f,d){var h=[f,d],p,v=a(f,d),m=n?v?0:u(f,d):v?u(f+(f<0?Ae:-Ae),d):0;if(!t&&(l=o=v)){e.lineStart()}if(v!==o){p=s(t,h);if(Hn(t,p)||Hn(h,p)){h[0]+=Se;h[1]+=Se;v=a(h[0],h[1])}}if(v!==o){c=0;if(v){e.lineStart();p=s(h,t);e.point(p[0],p[1])}else{p=s(t,h);e.point(p[0],p[1]);e.lineEnd()}t=p}else if(r&&t&&n^v){var g;if(!(m&i)&&(g=s(h,t,true))){c=0;if(n){e.lineStart();e.point(g[0][0],g[0][1]);e.point(g[1][0],g[1][1]);e.lineEnd()}else{e.point(g[1][0],g[1][1]);e.lineEnd();e.lineStart();e.point(g[0][0],g[0][1])}}}if(v&&(!t||!Hn(t,h))){e.point(h[0],h[1])}t=h,o=v,i=m},lineEnd:function(){if(o){e.lineEnd()}t=null},clean:function(){return c|(l&&o)<<1}}}function s(e,n,r){var i=Dn(e),a=Dn(n);var o=[1,0,0],s=Ln(i,a),u=Bn(s,s),l=s[0],c=u-l*l;if(!c){return!r&&e}var f=t*u/c,d=-t*l/c,h=Ln(o,s),p=Fn(o,f),v=Fn(s,d);In(p,v);var m=h,g=Bn(p,m),b=Bn(m,m),x=g*g-b*(Bn(p,p)-1);if(x<0){return}var w=Math.sqrt(x),_=Fn(m,(-g-w)/b);In(_,p);_=zn(_);if(!r){return _}var k=e[0],C=n[0],T=e[1],S=n[1],E;if(C<k){E=k,k=C,C=E}var A=C-k,P=y(A-Ae)<Se,O=P||A<Se;if(!P&&S<T){E=T,T=S,S=E}if(O?P?T+S>0^_[1]<(y(_[0]-k)<Se?T:S):T<=_[1]&&_[1]<=S:A>Ae^(k<=_[0]&&_[0]<=C)){var M=Fn(m,(-g+w)/b);In(M,p);return[_,zn(M)]}}function u(t,r){var i=n?e:Ae-e,a=0;if(t<-i){a|=1}else if(t>i){a|=2}if(r<-i){a|=4}else if(r>i){a|=8}return a}}function xr(e,t,n,r){return function(i){var a=i.a,o=i.b,s=a.x,u=a.y,l=o.x,c=o.y,f=0,d=1,h=l-s,p=c-u,v;v=e-s;if(!h&&v>0){return}v/=h;if(h<0){if(v<f){return}if(v<d){d=v}}else if(h>0){if(v>d){return}if(v>f){f=v}}v=n-s;if(!h&&v<0){return}v/=h;if(h<0){if(v>d){return}if(v>f){f=v}}else if(h>0){if(v<f){return}if(v<d){d=v}}v=t-u;if(!p&&v>0){return}v/=p;if(p<0){if(v<f){return}if(v<d){d=v}}else if(p>0){if(v>d){return}if(v>f){f=v}}v=r-u;if(!p&&v<0){return}v/=p;if(p<0){if(v>d){return}if(v>f){f=v}}else if(p>0){if(v<f){return}if(v<d){d=v}}if(f>0){i.a={x:s+f*h,y:u+f*p}}if(d<1){i.b={x:s+d*h,y:u+d*p}}return i}}var wr=1e9;t.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){if(i){i.valid=false}i=a(e);i.valid=true;return i},extent:function(s){if(!arguments.length){return[[e,t],[n,r]]}a=_r(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]);if(i){i.valid=false,i=null}return o}};return o.extent([[0,0],[960,500]])};function _r(e,n,r,i){return function(u){var l=u,c=dr(),f=xr(e,n,r,i),d,h,p;var v={point:b,lineStart:A,lineEnd:P,polygonStart:function(){u=c;d=[];h=[];E=true},polygonEnd:function(){u=l;d=t.merge(d);var n=m([e,i]),r=E&&n,a=d.length;if(r||a){u.polygonStart();if(r){u.lineStart();g(null,null,1,u);u.lineEnd()}if(a){sr(d,o,n,g,u)}u.polygonEnd()}d=h=p=null}};function m(e){var t=0,n=h.length,r=e[1];for(var i=0;i<n;++i){for(var a=1,o=h[i],s=o.length,u=o[0],l;a<s;++a){l=o[a];if(u[1]<=r){if(l[1]>r&&Be(u,l,e)>0){++t}}else{if(l[1]<=r&&Be(u,l,e)<0){--t}}u=l}}return t!==0}function g(t,o,u,l){var c=0,f=0;if(t==null||(c=a(t,u))!==(f=a(o,u))||s(t,o)<0^u>0){do{l.point(c===0||c===3?e:r,c>1?i:n)}while((c=(c+u+4)%4)!==f)}else{l.point(o[0],o[1])}}function y(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function b(e,t){if(y(e,t)){u.point(e,t)}}var x,w,_,k,C,T,S,E;function A(){v.point=O;if(h){h.push(p=[])}S=true;T=false;k=C=NaN}function P(){if(d){O(x,w);if(_&&T){c.rejoin()}d.push(c.buffer())}v.point=b;if(T){u.lineEnd()}}function O(e,t){e=Math.max(-wr,Math.min(wr,e));t=Math.max(-wr,Math.min(wr,t));var n=y(e,t);if(h){p.push([e,t])}if(S){x=e,w=t,_=n;S=false;if(n){u.lineStart();u.point(e,t)}}else{if(n&&T){u.point(e,t)}else{var r={a:{x:k,y:C},b:{x:e,y:t}};if(f(r)){if(!T){u.lineStart();u.point(r.a.x,r.a.y)}u.point(r.b.x,r.b.y);if(!n){u.lineEnd()}E=false}else if(n){u.lineStart();u.point(e,t);E=false}}}k=e,C=t,T=n}return v};function a(t,i){return y(t[0]-e)<Se?i>0?0:3:y(t[0]-r)<Se?i>0?2:1:y(t[1]-n)<Se?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}}function kr(e){var t=0,n=Ae/3,r=$r(e),i=r(t,n);i.parallels=function(e){if(!arguments.length){return[t/Ae*180,n/Ae*180]}return r(t=e[0]*Ae/180,n=e[1]*Ae/180)};return i}function Cr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,Ie((i-(e*e+n*n)*r*r)/(2*r))]};return o}(t.geo.conicEqualArea=function(){return kr(Cr)}).raw=Cr;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var e=t.geo.albers();var n=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var r=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var i,a={point:function(e,t){i=[e,t]}},o,s,u;function l(e){var t=e[0],n=e[1];i=null;(o(t,n),i)||(s(t,n),i)||u(t,n);return i}l.invert=function(t){var i=e.scale(),a=e.translate(),o=(t[0]-a[0])/i,s=(t[1]-a[1])/i;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?n:s>=.166&&s<.234&&o>=-.214&&o<-.115?r:e).invert(t)};l.stream=function(t){var i=e.stream(t),a=n.stream(t),o=r.stream(t);return{point:function(e,t){i.point(e,t);a.point(e,t);o.point(e,t)},sphere:function(){i.sphere();a.sphere();o.sphere()},lineStart:function(){i.lineStart();a.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();a.polygonEnd();o.polygonEnd()}}};l.precision=function(t){if(!arguments.length){return e.precision()}e.precision(t);n.precision(t);r.precision(t);return l};l.scale=function(t){if(!arguments.length){return e.scale()}e.scale(t);n.scale(t*.35);r.scale(t);return l.translate(e.translate())};l.translate=function(t){if(!arguments.length){return e.translate()}var i=e.scale(),c=+t[0],f=+t[1];o=e.translate(t).clipExtent([[c-.455*i,f-.238*i],[c+.455*i,f+.238*i]]).stream(a).point;s=n.translate([c-.307*i,f+.201*i]).clipExtent([[c-.425*i+Se,f+.12*i+Se],[c-.214*i-Se,f+.234*i-Se]]).stream(a).point;u=r.translate([c-.205*i,f+.212*i]).clipExtent([[c-.214*i+Se,f+.166*i+Se],[c-.115*i-Se,f+.234*i-Se]]).stream(a).point;return l};return l.scale(1070)};var Tr,Sr,Er={point:L,lineStart:L,lineEnd:L,polygonStart:function(){Sr=0;Er.lineStart=Ar},polygonEnd:function(){Er.lineStart=Er.lineEnd=Er.point=L;Tr+=y(Sr/2)}};function Ar(){var e,t,n,r;Er.point=function(a,o){Er.point=i;e=n=a,t=r=o};function i(e,t){Sr+=r*e-n*t;n=e,r=t}Er.lineEnd=function(){i(e,t)}}var Pr,Or,Mr,Nr;var Rr={point:Dr,lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L};function Dr(e,t){if(e<Pr){Pr=e}if(e>Mr){Mr=e}if(t<Or){Or=t}if(t>Nr){Nr=t}}function Br(){var e=Lr(4.5),t=[];var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=Lr(t);return n},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r);n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function Lr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ir={point:Fr,lineStart:jr,lineEnd:zr,polygonStart:function(){Ir.lineStart=Hr},polygonEnd:function(){Ir.point=Fr;Ir.lineStart=jr;Ir.lineEnd=zr}};function Fr(e,t){Vn+=e;qn+=t;++Kn}function jr(){var e,t;Ir.point=function(r,i){Ir.point=n;Fr(e=r,t=i)};function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);Yn+=o*(e+n)/2;$n+=o*(t+r)/2;Gn+=o;Fr(e=n,t=r)}}function zr(){Ir.point=Fr}function Hr(){var e,t,n,r;Ir.point=function(a,o){Ir.point=i;Fr(e=n=a,t=r=o)};function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Yn+=o*(n+e)/2;$n+=o*(r+t)/2;Gn+=o;o=r*e-n*t;Xn+=o*(n+e);Zn+=o*(r+t);Jn+=o*3;Fr(n=e,r=t)}Ir.lineEnd=function(){i(e,t)}}function Ur(e){var t=4.5;var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=e;return n},result:L};function r(n,r){e.moveTo(n+t,r);e.arc(n,r,t,0,Pe)}function i(t,r){e.moveTo(t,r);n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Wr(e){var t=.5,n=Math.cos(30*Ne),r=16;function i(e){return(r?o:a)(e)}function a(t){return Kr(t,function(n,r){n=e(n,r);t.point(n[0],n[1])})}function o(t){var n,i,a,o,u,l,c,f,d,h,p,v,m;var g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){t.polygonStart();g.lineStart=_},polygonEnd:function(){t.polygonEnd();g.lineStart=b}};function y(n,r){n=e(n,r);t.point(n[0],n[1])}function b(){d=NaN;g.point=x;t.lineStart()}function x(n,i){var a=Dn([n,i]),o=e(n,i);s(d,h,f,p,v,m,d=o[0],h=o[1],f=n,p=a[0],v=a[1],m=a[2],r,t);t.point(d,h)}function w(){g.point=y;t.lineEnd()}function _(){b();g.point=k;g.lineEnd=C}function k(e,t){x(n=e,i=t),a=d,o=h,u=p,l=v,c=m;g.point=x}function C(){s(d,h,f,p,v,m,a,o,n,u,l,c,r,t);g.lineEnd=w;w()}return g}function s(r,i,a,o,u,l,c,f,d,h,p,v,m,g){var b=c-r,x=f-i,w=b*b+x*x;if(w>4*t&&m--){var _=o+h,k=u+p,C=l+v,T=Math.sqrt(_*_+k*k+C*C),S=Math.asin(C/=T),E=y(y(C)-1)<Se||y(a-d)<Se?(a+d)/2:Math.atan2(k,_),A=e(E,S),P=A[0],O=A[1],M=P-r,N=O-i,R=x*M-b*N;if(R*R/w>t||y((b*M+x*N)/w-.5)>.3||o*h+u*p+l*v<n){s(r,i,a,o,u,l,P,O,E,_/=T,k/=T,C,m,g);g.point(P,O);s(P,O,E,_,k,C,c,f,d,h,p,v,m,g)}}}i.precision=function(e){if(!arguments.length){return Math.sqrt(t)}r=(t=e*e)>0&&16;return i};return i}t.geo.path=function(){var e=4.5,n,r,i,a,o;function s(n){if(n){if(typeof e==="function"){a.pointRadius(+e.apply(this,arguments))}if(!o||!o.valid){o=i(a)}t.geo.stream(n,o)}return a.result()}s.area=function(e){Tr=0;t.geo.stream(e,i(Er));return Tr};s.centroid=function(e){Vn=qn=Kn=Yn=$n=Gn=Xn=Zn=Jn=0;t.geo.stream(e,i(Ir));return Jn?[Xn/Jn,Zn/Jn]:Gn?[Yn/Gn,$n/Gn]:Kn?[Vn/Kn,qn/Kn]:[NaN,NaN]};s.bounds=function(e){Mr=Nr=-(Pr=Or=Infinity);t.geo.stream(e,i(Rr));return[[Pr,Or],[Mr,Nr]]};s.projection=function(e){if(!arguments.length){return n}i=(n=e)?e.stream||Vr(e):N;return u()};s.context=function(t){if(!arguments.length){return r}a=(r=t)==null?new Br:new Ur(t);if(typeof e!=="function"){a.pointRadius(e)}return u()};s.pointRadius=function(t){if(!arguments.length){return e}e=typeof t==="function"?t:(a.pointRadius(+t),+t);return s};function u(){o=null;return s}return s.projection(t.geo.albersUsa()).context(null)};function Vr(e){var t=Wr(function(t,n){return e([t*Re,n*Re])});return function(e){return Gr(t(e))}}t.geo.transform=function(e){return{stream:function(t){var n=new qr(t);for(var r in e){n[r]=e[r]}return n}}};function qr(e){this.stream=e}qr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Kr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}t.geo.projection=Yr;t.geo.projectionMutator=$r;function Yr(e){return $r(function(){return e})()}function $r(e){var n,r,i,a=Wr(function(e,t){e=n(e,t);return[e[0]*o+p,v-e[1]*o]}),o=150,s=480,u=250,l=0,c=0,f=0,d=0,h=0,p,v,m=pr,g=N,y=null,b=null,x;function w(e){e=i(e[0]*Ne,e[1]*Ne);return[e[0]*o+p,v-e[1]*o]}function _(e){e=i.invert((e[0]-p)/o,(v-e[1])/o);return e&&[e[0]*Re,e[1]*Re]}w.stream=function(e){if(x){x.valid=false}x=Gr(m(r,a(g(e))));x.valid=true;return x};w.clipAngle=function(e){if(!arguments.length){return y}m=e==null?(y=e,pr):br((y=+e)*Ne);return C()};w.clipExtent=function(e){if(!arguments.length){return b}b=e;g=e?_r(e[0][0],e[0][1],e[1][0],e[1][1]):N;return C()};w.scale=function(e){if(!arguments.length){return o}o=+e;return k()};w.translate=function(e){if(!arguments.length){return[s,u]}s=+e[0];u=+e[1];return k()};w.center=function(e){if(!arguments.length){return[l*Re,c*Re]}l=e[0]%360*Ne;c=e[1]%360*Ne;return k()};w.rotate=function(e){if(!arguments.length){return[f*Re,d*Re,h*Re]}f=e[0]%360*Ne;d=e[1]%360*Ne;h=e.length>2?e[2]%360*Ne:0;return k()};t.rebind(w,a,"precision");function k(){i=ar(r=Jr(f,d,h),n);var e=n(l,c);p=s-e[0]*o;v=u+e[1]*o;return C()}function C(){if(x){x.valid=false,x=null}return w}return function(){n=e.apply(this,arguments);w.invert=n.invert&&_;return k()}}function Gr(e){return Kr(e,function(t,n){e.point(t*Ne,n*Ne)})}function Xr(e,t){return[e,t]}(t.geo.equirectangular=function(){return Yr(Xr)}).raw=Xr.invert=Xr;t.geo.rotation=function(e){e=Jr(e[0]%360*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(t){t=e(t[0]*Ne,t[1]*Ne);return t[0]*=Re,t[1]*=Re,t}t.invert=function(t){t=e.invert(t[0]*Ne,t[1]*Ne);return t[0]*=Re,t[1]*=Re,t};return t};function Zr(e,t){return[e>Ae?e-Pe:e<-Ae?e+Pe:e,t]}Zr.invert=Xr;function Jr(e,t,n){return e?t||n?ar(ei(e),ti(t,n)):ei(e):t||n?ti(t,n):Zr}function Qr(e){return function(t,n){return t+=e,[t>Ae?t-Pe:t<-Ae?t+Pe:t,n]}}function ei(e){var t=Qr(e);t.invert=Qr(-e);return t}function ti(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),Ie(c*i+u*a)]}o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),Ie(c*n-s*r)]};return o}t.geo.circle=function(){var e=[0,0],t,n=6,r;function i(){var t=typeof e==="function"?e.apply(this,arguments):e,n=Jr(-t[0]*Ne,-t[1]*Ne,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=Re,e[1]*=Re}});return{type:"Polygon",coordinates:[i]}}i.origin=function(t){if(!arguments.length){return e}e=t;return i};i.angle=function(e){if(!arguments.length){return t}r=ni((t=+e)*Ne,n*Ne);return i};i.precision=function(e){if(!arguments.length){return n}r=ni(t*Ne,(n=+e)*Ne);return i};return i.angle(90)};function ni(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;if(i!=null){i=ri(n,i);a=ri(n,a);if(o>0?i<a:i>a){i+=o*Pe}}else{i=e+o*Pe;a=e-.5*u}for(var l,c=i;o>0?c>a:c<a;c-=u){s.point((l=zn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}}function ri(e,t){var n=Dn(t);n[0]-=e;jn(n);var r=Le(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Se)%(2*Math.PI)}t.geo.distance=function(e,t){var n=(t[0]-e[0])*Ne,r=e[1]*Ne,i=t[1]*Ne,a=Math.sin(n),o=Math.cos(n),s=Math.sin(r),u=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f;return Math.atan2(Math.sqrt((f=c*a)*f+(f=u*l-s*c*o)*f),s*l+u*c*o)};t.geo.graticule=function(){var e,n,r,i,a,o,s,u,l=10,c=l,f=90,d=360,h,p,v,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/f)*f,r,f).map(v).concat(t.range(Math.ceil(u/d)*d,s,d).map(m)).concat(t.range(Math.ceil(n/l)*l,e,l).filter(function(e){return y(e%f)>Se}).map(h)).concat(t.range(Math.ceil(o/c)*c,a,c).filter(function(e){return y(e%d)>Se}).map(p))}b.lines=function(){return x().map(function(e){return{type:"LineString",coordinates:e}})};b.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(s).slice(1),v(r).reverse().slice(1),m(u).reverse().slice(1))]}};b.extent=function(e){if(!arguments.length){return b.minorExtent()}return b.majorExtent(e).minorExtent(e)};b.majorExtent=function(e){if(!arguments.length){return[[i,u],[r,s]]}i=+e[0][0],r=+e[1][0];u=+e[0][1],s=+e[1][1];if(i>r){e=i,i=r,r=e}if(u>s){e=u,u=s,s=e}return b.precision(g)};b.minorExtent=function(t){if(!arguments.length){return[[n,o],[e,a]]}n=+t[0][0],e=+t[1][0];o=+t[0][1],a=+t[1][1];if(n>e){t=n,n=e,e=t}if(o>a){t=o,o=a,a=t}return b.precision(g)};b.step=function(e){if(!arguments.length){return b.minorStep()}return b.majorStep(e).minorStep(e)};b.majorStep=function(e){if(!arguments.length){return[f,d]}f=+e[0],d=+e[1];return b};b.minorStep=function(e){if(!arguments.length){return[l,c]}l=+e[0],c=+e[1];return b};b.precision=function(t){if(!arguments.length){return g}g=+t;h=ii(o,a,90);p=ai(n,e,g);v=ii(u,s,90);m=ai(i,r,g);return b};return b.majorExtent([[-180,-90+Se],[180,90-Se]]).minorExtent([[-180,-80-Se],[180,80+Se]])};function ii(e,n,r){var i=t.range(e,n-Se,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function ai(e,n,r){var i=t.range(e,n-Se,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function oi(e){return e.source}function si(e){return e.target}t.geo.greatArc=function(){var e=oi,n,r=si,i;function a(){return{type:"LineString",coordinates:[n||e.apply(this,arguments),i||r.apply(this,arguments)]}}a.distance=function(){return t.geo.distance(n||e.apply(this,arguments),i||r.apply(this,arguments))};a.source=function(t){if(!arguments.length){return e}e=t,n=typeof t==="function"?null:t;return a};a.target=function(e){if(!arguments.length){return r}r=e,i=typeof e==="function"?null:e;return a};a.precision=function(){return arguments.length?a:0};return a};t.geo.interpolate=function(e,t){return ui(e[0]*Ne,e[1]*Ne,t[0]*Ne,t[1]*Ne)};function ui(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(He(r-t)+i*o*He(n-e))),h=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*u+t*c,i=n*l+t*f,o=n*a+t*s;return[Math.atan2(i,r)*Re,Math.atan2(o,Math.sqrt(r*r+i*i))*Re]}:function(){return[e*Re,t*Re]};p.distance=d;return p}t.geo.length=function(e){li=0;t.geo.stream(e,ci);return li};var li;var ci={sphere:L,point:L,lineStart:fi,lineEnd:L,polygonStart:L,polygonEnd:L};function fi(){var e,t,n;ci.point=function(i,a){e=i*Ne,t=Math.sin(a*=Ne),n=Math.cos(a);ci.point=r};ci.lineEnd=function(){ci.point=ci.lineEnd=L};function r(r,i){var a=Math.sin(i*=Ne),o=Math.cos(i),s=y((r*=Ne)-e),u=Math.cos(s);li+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u);e=r,t=a,n=o}}function di(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]};return n}var hi=di(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Yr(hi)}).raw=hi;var pi=di(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},N);(t.geo.azimuthalEquidistant=function(){return Yr(pi)}).raw=pi;function vi(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ae/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i){return yi}function o(e,t){if(a>0){if(t<-Me+Se){t=-Me+Se}}else{if(t>Me-Se){t=Me-Se}}var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}o.invert=function(e,t){var n=a-t,r=De(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Me]};return o}(t.geo.conicConformal=function(){return kr(vi)}).raw=vi;function mi(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(y(r)<Se){return Xr}function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-De(r)*Math.sqrt(e*e+n*n)]};return a}(t.geo.conicEquidistant=function(){return kr(mi)}).raw=mi;var gi=di(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Yr(gi)}).raw=gi;function yi(e,t){return[e,Math.log(Math.tan(Ae/4+t/2))]}yi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Me]};function bi(e){var t=Yr(e),n=t.scale,r=t.translate,i=t.clipExtent,a;t.scale=function(){var e=n.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.translate=function(){var e=r.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(a=e==null){var s=Ae*n(),u=r();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else if(a){o=null}return o};return t.clipExtent(null)}(t.geo.mercator=function(){return bi(yi)}).raw=yi;var xi=di(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Yr(xi)}).raw=xi;var wi=di(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Yr(wi)}).raw=wi;function _i(e,t){return[Math.log(Math.tan(Ae/4+t/2)),-e]}_i.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Me]};(t.geo.transverseMercator=function(){var e=bi(_i),t=e.center,n=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])};return n([0,0,90])}).raw=_i;t.geom={};function ki(e){return e[0]}function Ci(e){return e[1]}t.geom.hull=function(e){var t=ki,n=Ci;if(arguments.length){return r(e)}function r(e){if(e.length<3){return[]}var r=kt(t),i=kt(n),a,o=e.length,s=[],u=[];for(a=0;a<o;a++){s.push([+r.call(this,e[a],a),+i.call(this,e[a],a),a])}s.sort(Si);for(a=0;a<o;a++){u.push([s[a][0],-s[a][1]])}var l=Ti(s),c=Ti(u);var f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(a=l.length-1;a>=0;--a){h.push(e[s[l[a]][2]])}for(a=+f;a<c.length-d;++a){h.push(e[s[c[a]][2]])}return h}r.x=function(e){return arguments.length?(t=e,r):t};r.y=function(e){return arguments.length?(n=e,r):n};return r};function Ti(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&Be(e[n[r-2]],e[n[r-1]],e[i])<=0){--r}n[r++]=i}return n.slice(0,r)}function Si(e,t){return e[0]-t[0]||e[1]-t[1]}t.geom.polygon=function(e){W(e,Ei);return e};var Ei=t.geom.polygon.prototype=[];Ei.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t){n=r;r=this[e];i+=n[1]*r[0]-n[0]*r[1]}return i*.5};Ei.centroid=function(e){var t=-1,n=this.length,r=0,i=0,a,o=this[n-1],s;if(!arguments.length){e=-1/(6*this.area())}while(++t<n){a=o;o=this[t];s=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*s;i+=(a[1]+o[1])*s}return[r*e,i*e]};Ei.clip=function(e){var t,n=Oi(e),r=-1,i=this.length-Oi(this),a,o,s=this[i-1],u,l,c;while(++r<i){t=e.slice();e.length=0;u=this[r];l=t[(o=t.length-n)-1];a=-1;while(++a<o){c=t[a];if(Ai(c,s,u)){if(!Ai(l,s,u)){e.push(Pi(l,c,s,u))}e.push(c)}else if(Ai(l,s,u)){e.push(Pi(l,c,s,u))}l=c}if(n){e.push(e[0])}s=u}return e};function Ai(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Pi(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+d*o,u+d*c]}function Oi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}var Mi,Ni,Ri,Di=[],Bi,Li,Ii=[];function Fi(){aa(this);this.edge=this.site=this.circle=null}function ji(e){var t=Di.pop()||new Fi;t.site=e;return t}function zi(e){Xi(e);Ri.remove(e);Di.push(e);aa(e)}function Hi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];zi(e);var u=a;while(u.circle&&y(n-u.circle.x)<Se&&y(r-u.circle.cy)<Se){a=u.P;s.unshift(u);zi(u);u=a}s.unshift(u);Xi(u);var l=o;while(l.circle&&y(n-l.circle.x)<Se&&y(r-l.circle.cy)<Se){o=l.N;s.push(l);zi(l);l=o}s.push(l);Xi(l);var c=s.length,f;for(f=1;f<c;++f){l=s[f];u=s[f-1];na(l.edge,u.site,l.site,i)}u=s[0];l=s[c-1];l.edge=ea(u.site,l.site,null,i);Gi(u);Gi(l)}function Ui(e){var t=e.x,n=e.y,r,i,a,o,s=Ri._;while(s){a=Wi(s,n)-t;if(a>Se){s=s.L}else{o=t-Vi(s,n);if(o>Se){if(!s.R){r=s;break}s=s.R}else{if(a>-Se){r=s.P;i=s}else if(o>-Se){r=s;i=s.N}else{r=i=s}break}}}var u=ji(e);Ri.insert(r,u);if(!r&&!i){return}if(r===i){Xi(r);i=ji(r.site);Ri.insert(u,i);u.edge=i.edge=ea(r.site,u.site);Gi(r);Gi(i);return}if(!i){u.edge=ea(r.site,u.site);return}Xi(r);Xi(i);var l=r.site,c=l.x,f=l.y,d=e.x-c,h=e.y-f,p=i.site,v=p.x-c,m=p.y-f,g=2*(d*m-h*v),y=d*d+h*h,b=v*v+m*m,x={x:(m*y-h*b)/g+c,y:(d*b-v*y)/g+f};na(i.edge,l,p,x);u.edge=ea(l,e,null,x);i.edge=ea(e,p,null,x);Gi(r);Gi(i)}function Wi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a){return r}var o=e.P;if(!o){return-Infinity}n=o.site;var s=n.x,u=n.y,l=u-t;if(!l){return s}var c=s-r,f=1/a-1/l,d=c/l;if(f){return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r}return(r+s)/2}function Vi(e,t){var n=e.N;if(n){return Wi(n,t)}var r=e.site;return r.y===t?r.x:Infinity}function qi(e){this.site=e;this.edges=[]}qi.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--){n=e[t].edge;if(!n.b||!n.a){e.splice(t,1)}}e.sort(Yi);return e.length};function Ki(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],a,o,s,u,l=Ni,c=l.length,f,d,h,p,v,m;while(c--){f=l[c];if(!f||!f.prepare()){continue}h=f.edges;p=h.length;d=0;while(d<p){m=h[d].end(),s=m.x,u=m.y;v=h[++d%p].start(),a=v.x,o=v.y;if(y(s-a)>Se||y(u-o)>Se){h.splice(d,0,new ra(ta(f.site,m,y(s-t)<Se&&i-u>Se?{x:t,y:y(a-t)<Se?o:i}:y(u-i)<Se&&n-s>Se?{x:y(o-i)<Se?a:n,y:i}:y(s-n)<Se&&u-r>Se?{x:n,y:y(a-n)<Se?o:r}:y(u-r)<Se&&s-t>Se?{x:y(o-r)<Se?a:t,y:r}:null),f.site,null));++p}}}}function Yi(e,t){return t.angle-e.angle}function $i(){aa(this);this.x=this.y=this.arc=this.site=this.cy=null}function Gi(e){var t=e.P,n=e.N;if(!t||!n){return}var r=t.site,i=e.site,a=n.site;if(r===a){return}var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s;var d=2*(u*f-l*c);if(d>=-Ee){return}var h=u*u+l*l,p=c*c+f*f,v=(f*h-l*p)/d,m=(u*p-c*h)/d,f=m+s;var g=Ii.pop()||new $i;g.arc=e;g.site=i;g.x=v+o;g.y=f+Math.sqrt(v*v+m*m);g.cy=f;e.circle=g;var y=null,b=Li._;while(b){if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(b.L){b=b.L}else{y=b.P;break}}else{if(b.R){b=b.R}else{y=b;break}}}Li.insert(y,g);if(!y){Bi=g}}function Xi(e){var t=e.circle;if(t){if(!t.P){Bi=t.N}Li.remove(t);Ii.push(t);aa(t);e.circle=null}}function Zi(e){var t=Mi,n=xr(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!Ji(i,e)||!n(i)||y(i.a.x-i.b.x)<Se&&y(i.a.y-i.b.y)<Se){i.a=i.b=null;t.splice(r,1)}}}function Ji(e,t){var n=e.b;if(n){return true}var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],u=e.l,l=e.r,c=u.x,f=u.y,d=l.x,h=l.y,p=(c+d)/2,v=(f+h)/2,m,g;if(h===f){if(p<i||p>=a){return}if(c>d){if(!r){r={x:p,y:o}}else if(r.y>=s){return}n={x:p,y:s}}else{if(!r){r={x:p,y:s}}else if(r.y<o){return}n={x:p,y:o}}}else{m=(c-d)/(h-f);g=v-m*p;if(m<-1||m>1){if(c>d){if(!r){r={x:(o-g)/m,y:o}}else if(r.y>=s){return}n={x:(s-g)/m,y:s}}else{if(!r){r={x:(s-g)/m,y:s}}else if(r.y<o){return}n={x:(o-g)/m,y:o}}}else{if(f<h){if(!r){r={x:i,y:m*i+g}}else if(r.x>=a){return}n={x:a,y:m*a+g}}else{if(!r){r={x:a,y:m*a+g}}else if(r.x<i){return}n={x:i,y:m*i+g}}}}e.a=r;e.b=n;return true}function Qi(e,t){this.l=e;this.r=t;this.a=this.b=null}function ea(e,t,n,r){var i=new Qi(e,t);Mi.push(i);if(n){na(i,e,t,n)}if(r){na(i,t,e,r)}Ni[e.i].edges.push(new ra(i,e,t));Ni[t.i].edges.push(new ra(i,t,e));return i}function ta(e,t,n){var r=new Qi(e,null);r.a=t;r.b=n;Mi.push(r);return r}function na(e,t,n,r){if(!e.a&&!e.b){e.a=r;e.l=t;e.r=n}else if(e.l===n){e.b=r}else{e.a=r}}function ra(e,t,n){var r=e.a,i=e.b;this.edge=e;this.site=t;this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}ra.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ia(){this._=null}function aa(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ia.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e;t.N=e.N;if(e.N){e.N.P=t}e.N=t;if(e.R){e=e.R;while(e.L){e=e.L}e.L=t}else{e.R=t}n=e}else if(this._){e=ua(this._);t.P=null;t.N=e;e.P=e.L=t;n=e}else{t.P=t.N=null;this._=t;n=null}t.L=t.R=null;t.U=n;t.C=true;e=t;while(n&&n.C){r=n.U;if(n===r.L){i=r.R;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.R){oa(this,n);e=n;n=e.U}n.C=false;r.C=true;sa(this,r)}}else{i=r.L;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.L){sa(this,n);e=n;n=e.U}n.C=false;r.C=true;oa(this,r)}}n=e.U}this._.C=false},remove:function(e){if(e.N){e.N.P=e.P}if(e.P){e.P.N=e.N}e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,a,o;if(!r){a=i}else if(!i){a=r}else{a=ua(i)}if(t){if(t.L===e){t.L=a}else{t.R=a}}else{this._=a}if(r&&i){o=a.C;a.C=e.C;a.L=r;r.U=a;if(a!==i){t=a.U;a.U=e.U;e=a.R;t.L=e;a.R=i;i.U=a}else{a.U=t;t=a;e=a.R}}else{o=e.C;e=a}if(e){e.U=t}if(o){return}if(e&&e.C){e.C=false;return}do{if(e===this._){break}if(e===t.L){n=t.R;if(n.C){n.C=false;t.C=true;oa(this,t);n=t.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;sa(this,n);n=t.R}n.C=t.C;t.C=n.R.C=false;oa(this,t);e=this._;break}}else{n=t.L;if(n.C){n.C=false;t.C=true;sa(this,t);n=t.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;oa(this,n);n=t.L}n.C=t.C;t.C=n.L.C=false;sa(this,t);e=this._;break}}n.C=true;e=t;t=t.U}while(!e.C);if(e){e.C=false}}};function oa(e,t){var n=t,r=t.R,i=n.U;if(i){if(i.L===n){i.L=r}else{i.R=r}}else{e._=r}r.U=i;n.U=r;n.R=r.L;if(n.R){n.R.U=n}r.L=n}function sa(e,t){var n=t,r=t.L,i=n.U;if(i){if(i.L===n){i.L=r}else{i.R=r}}else{e._=r}r.U=i;n.U=r;n.L=r.R;if(n.L){n.L.U=n}r.R=n}function ua(e){while(e.L){e=e.L}return e}function la(e,t){var n=e.sort(ca).pop(),r,i,a;Mi=[];Ni=new Array(e.length);Ri=new ia;Li=new ia;while(true){a=Bi;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==r||n.y!==i){Ni[n.i]=new qi(n);Ui(n);r=n.x,i=n.y}n=e.pop()}else if(a){Hi(a.arc)}else{break}}if(t){Zi(t),Ki(t)}var o={cells:Ni,edges:Mi};Ri=Li=Mi=Ni=null;return o}function ca(e,t){return t.y-e.y||t.x-e.x}t.geom.voronoi=function(e){var t=ki,n=Ci,r=t,i=n,a=fa;if(e){return o(e)}function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];la(s(e),a).cells.forEach(function(a,s){var u=a.edges,l=a.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];c.point=e[s]});return t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/Se)*Se,y:Math.round(i(e,t)/Se)*Se,i:t}})}o.links=function(e){return la(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];la(s(e)).cells.forEach(function(n,r){var i=n.site,a=n.edges.sort(Yi),o=-1,s=a.length,u,l,c=a[s-1].edge,f=c.l===i?c.r:c.l;while(++o<s){l=f;c=a[o].edge;f=c.l===i?c.r:c.l;if(r<l.i&&r<f.i&&da(i,l,f)<0){t.push([e[r],e[l.i],e[f.i]])}}});return t};o.x=function(e){return arguments.length?(r=kt(t=e),o):t};o.y=function(e){return arguments.length?(i=kt(n=e),o):n};o.clipExtent=function(e){if(!arguments.length){return a===fa?null:a}a=e==null?fa:e;return o};o.size=function(e){if(!arguments.length){return a===fa?null:a&&a[1]}return o.clipExtent(e&&[[0,0],e])};return o};var fa=[[-1e6,-1e6],[1e6,1e6]];function da(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)};t.geom.quadtree=function(e,t,n,r,i){var a=ki,o=Ci,s;if(s=arguments.length){a=ha;o=pa;if(s===3){i=n;r=t;n=t=0}return u(e)}function u(e){var u,l=kt(a),c=kt(o),f,d,h,p,v,m,g,b;if(t!=null){v=t,m=n,g=r,b=i}else{g=b=-(v=m=Infinity);f=[],d=[];p=e.length;if(s){for(h=0;h<p;++h){u=e[h];if(u.x<v){v=u.x}if(u.y<m){m=u.y}if(u.x>g){g=u.x}if(u.y>b){b=u.y}f.push(u.x);d.push(u.y)}}else{for(h=0;h<p;++h){var x=+l(u=e[h],h),w=+c(u,h);if(x<v){v=x}if(w<m){m=w}if(x>g){g=x}if(w>b){b=w}f.push(x);d.push(w)}}}var _=g-v,k=b-m;if(_>k){b=m+_}else{g=v+k}function C(e,t,n,r,i,a,o,s){if(isNaN(n)||isNaN(r)){return}if(e.leaf){var u=e.x,l=e.y;if(u!=null){if(y(u-n)+y(l-r)<.01){T(e,t,n,r,i,a,o,s)}else{var c=e.point;e.x=e.y=e.point=null;T(e,c,u,l,i,a,o,s);T(e,t,n,r,i,a,o,s)}}else{e.x=n,e.y=r,e.point=t}}else{T(e,t,n,r,i,a,o,s)}}function T(e,t,n,r,i,a,o,s){var u=(i+o)*.5,l=(a+s)*.5,c=n>=u,f=r>=l,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=va());if(c){i=u}else{o=u}if(f){a=l}else{s=l}C(e,t,n,r,i,a,o,s)}var S=va();S.add=function(e){C(S,e,+l(e,++h),+c(e,h),v,m,g,b)};S.visit=function(e){ma(e,S,v,m,g,b)};S.find=function(e){return ga(S,e[0],e[1],v,m,g,b)};h=-1;if(t==null){while(++h<p){C(S,e[h],f[h],d[h],v,m,g,b)}--h}else{e.forEach(S.add)}f=d=e=u=null;return S}u.x=function(e){return arguments.length?(a=e,u):a};u.y=function(e){return arguments.length?(o=e,u):o};u.extent=function(e){if(!arguments.length){return t==null?null:[[t,n],[r,i]]}if(e==null){t=n=r=i=null}else{t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]}return u};u.size=function(e){if(!arguments.length){return t==null?null:[r-t,i-n]}if(e==null){t=n=r=i=null}else{t=n=0,r=+e[0],i=+e[1]}return u};return u};function ha(e){return e.x}function pa(e){return e.y}function va(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function ma(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=(n+i)*.5,s=(r+a)*.5,u=t.nodes;if(u[0]){ma(e,u[0],n,r,o,s)}if(u[1]){ma(e,u[1],o,r,i,s)}if(u[2]){ma(e,u[2],n,s,o,a)}if(u[3]){ma(e,u[3],o,s,i,a)}}}function ga(e,t,n,r,i,a,o){var s=Infinity,u;(function e(l,c,f,d,h){if(c>a||f>o||d<r||h<i){return}if(p=l.point){var p,v=t-l.x,m=n-l.y,g=v*v+m*m;if(g<s){var y=Math.sqrt(s=g);r=t-y,i=n-y;a=t+y,o=n+y;u=p}}var b=l.nodes,x=(c+d)*.5,w=(f+h)*.5,_=t>=x,k=n>=w;for(var C=k<<1|_,T=C+4;C<T;++C){if(l=b[C&3]){switch(C&3){case 0:e(l,c,f,x,w);break;case 1:e(l,x,f,d,w);break;case 2:e(l,c,w,x,h);break;case 3:e(l,x,w,d,h);break}}}})(e,r,i,a,o);return u}t.interpolateRgb=ya;function ya(e,n){e=t.rgb(e);n=t.rgb(n);var r=e.r,i=e.g,a=e.b,o=n.r-r,s=n.g-i,u=n.b-a;return function(e){return"#"+mt(Math.round(r+o*e))+mt(Math.round(i+s*e))+mt(Math.round(a+u*e))}}t.interpolateObject=ba;function ba(e,t){var n={},r={},i;for(i in e){if(i in t){n[i]=Ca(e[i],t[i])}else{r[i]=e[i]}}for(i in t){if(!(i in e)){r[i]=t[i]}}return function(e){for(i in n){r[i]=n[i](e)}return r}}t.interpolateNumber=xa;function xa(e,t){e=+e,t=+t;return function(n){return e*(1-n)+t*n}}t.interpolateString=wa;function wa(e,t){var n=_a.lastIndex=ka.lastIndex=0,r,i,a,o=-1,s=[],u=[];e=e+"",t=t+"";while((r=_a.exec(e))&&(i=ka.exec(t))){if((a=i.index)>n){a=t.slice(n,a);if(s[o]){s[o]+=a}else{s[++o]=a}}if((r=r[0])===(i=i[0])){if(s[o]){s[o]+=i}else{s[++o]=i}}else{s[++o]=null;u.push({i:o,x:xa(r,i)})}n=ka.lastIndex}if(n<t.length){a=t.slice(n);if(s[o]){s[o]+=a}else{s[++o]=a}}return s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n=0,r;n<t;++n){s[(r=u[n]).i]=r.x(e)}return s.join("")})}var _a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ka=new RegExp(_a.source,"g");t.interpolate=Ca;function Ca(e,n){var r=t.interpolators.length,i;while(--r>=0&&!(i=t.interpolators[r](e,n))){}return i}t.interpolators=[function(e,t){var n=typeof t;return(n==="string"?_t.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ya:wa:t instanceof $e?ya:Array.isArray(t)?Ta:n==="object"&&isNaN(t)?ba:xa)(e,t)}];t.interpolateArray=Ta;function Ta(e,t){var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s){n.push(Ca(e[s],t[s]))}for(;s<i;++s){r[s]=e[s]}for(;s<a;++s){r[s]=t[s]}return function(e){for(s=0;s<o;++s){r[s]=n[s](e)}return r}}var Sa=function(){return N};var Ea=t.map({linear:Sa,poly:Ba,quad:function(){return Na},cubic:function(){return Ra},sin:function(){return La},exp:function(){return Ia},circle:function(){return Fa},elastic:ja,back:za,bounce:function(){return Ha}});var Aa=t.map({in:N,out:Oa,"in-out":Ma,"out-in":function(e){return Ma(Oa(e))}});t.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";r=Ea.get(r)||Sa;i=Aa.get(i)||N;return Pa(i(r.apply(null,n.call(arguments,1))))};function Pa(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Oa(e){return function(t){return 1-e(1-t)}}function Ma(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Na(e){return e*e}function Ra(e){return e*e*e}function Da(e){if(e<=0){return 0}if(e>=1){return 1}var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ba(e){return function(t){return Math.pow(t,e)}}function La(e){return 1-Math.cos(e*Me)}function Ia(e){return Math.pow(2,10*(e-1))}function Fa(e){return 1-Math.sqrt(1-e*e)}function ja(e,t){var n;if(arguments.length<2){t=.45}if(arguments.length){n=t/Pe*Math.asin(1/e)}else{e=1,n=t/4}return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Pe/t)}}function za(e){if(!e){e=1.70158}return function(t){return t*t*((e+1)*t-e)}}function Ha(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}t.interpolateHcl=Ua;function Ua(e,n){e=t.hcl(e);n=t.hcl(n);var r=e.h,i=e.c,a=e.l,o=n.h-r,s=n.c-i,u=n.l-a;if(isNaN(s)){s=0,i=isNaN(i)?n.c:i}if(isNaN(o)){o=0,r=isNaN(r)?n.h:r}else if(o>180){o-=360}else if(o<-180){o+=360}return function(e){return et(r+o*e,i+s*e,a+u*e)+""}}t.interpolateHsl=Wa;function Wa(e,n){e=t.hsl(e);n=t.hsl(n);var r=e.h,i=e.s,a=e.l,o=n.h-r,s=n.s-i,u=n.l-a;if(isNaN(s)){s=0,i=isNaN(i)?n.s:i}if(isNaN(o)){o=0,r=isNaN(r)?n.h:r}else if(o>180){o-=360}else if(o<-180){o+=360}return function(e){return Ze(r+o*e,i+s*e,a+u*e)+""}}t.interpolateLab=Va;function Va(e,n){e=t.lab(e);n=t.lab(n);var r=e.l,i=e.a,a=e.b,o=n.l-r,s=n.a-i,u=n.b-a;return function(e){return st(r+o*e,i+s*e,a+u*e)+""}}t.interpolateRound=qa;function qa(e,t){t-=e;return function(n){return Math.round(e+t*n)}}t.transform=function(e){var n=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Ka(t?t.matrix:Xa)})(e)};function Ka(e){var t=[e.a,e.b],n=[e.c,e.d],r=$a(t),i=Ya(t,n),a=$a(Ga(n,t,-i))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Re;this.translate=[e.e,e.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*Re:0}Ka.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Ya(e,t){return e[0]*t[0]+e[1]*t[1]}function $a(e){var t=Math.sqrt(Ya(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Ga(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}var Xa={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=no;function Za(e){return e.length?e.pop()+",":""}function Ja(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:xa(e[0],t[0])},{i:i-2,x:xa(e[1],t[1])})}else if(t[0]||t[1]){n.push("translate("+t+")")}}function Qa(e,t,n,r){if(e!==t){if(e-t>180){t+=360}else if(t-e>180){e+=360}r.push({i:n.push(Za(n)+"rotate(",null,")")-2,x:xa(e,t)})}else if(t){n.push(Za(n)+"rotate("+t+")")}}function eo(e,t,n,r){if(e!==t){r.push({i:n.push(Za(n)+"skewX(",null,")")-2,x:xa(e,t)})}else if(t){n.push(Za(n)+"skewX("+t+")")}}function to(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Za(n)+"scale(",null,",",null,")");r.push({i:i-4,x:xa(e[0],t[0])},{i:i-2,x:xa(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){n.push(Za(n)+"scale("+t+")")}}function no(e,n){var r=[],i=[];e=t.transform(e),n=t.transform(n);Ja(e.translate,n.translate,r,i);Qa(e.rotate,n.rotate,r,i);eo(e.skew,n.skew,r,i);to(e.scale,n.scale,r,i);e=n=null;return function(e){var t=-1,n=i.length,a;while(++t<n){r[(a=i[t]).i]=a.x(e)}return r.join("")}}function ro(e,t){t=(t-=e=+e)||1/t;return function(n){return(n-e)/t}}function io(e,t){t=(t-=e=+e)||1/t;return function(n){return Math.max(0,Math.min(1,(n-e)/t))}}t.layout={};t.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r){t.push(ao(e[n]))}return t}};function ao(e){var t=e.source,n=e.target,r=so(t,n),i=[t];while(t!==r){t=t.parent;i.push(t)}var a=i.length;while(n!==r){i.splice(a,0,n);n=n.parent}return i}function oo(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function so(e,t){if(e===t){return e}var n=oo(e),r=oo(t),i=n.pop(),a=r.pop(),o=null;while(i===a){o=i;i=n.pop();a=r.pop()}return o}t.layout.chord=function(){var e={},n,r,i,a,o=0,s,u,l;function c(){var e={},c=[],d=t.range(a),h=[],p,v,m,g,y;n=[];r=[];p=0,g=-1;while(++g<a){v=0,y=-1;while(++y<a){v+=i[g][y]}c.push(v);h.push(t.range(a));p+=v}if(s){d.sort(function(e,t){return s(c[e],c[t])})}if(u){h.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})})}p=(Pe-o*a)/p;v=0,g=-1;while(++g<a){m=v,y=-1;while(++y<a){var b=d[g],x=h[b][y],w=i[b][x],_=v,k=v+=w*p;e[b+"-"+x]={index:b,subindex:x,startAngle:_,endAngle:k,value:w}}r[b]={index:b,startAngle:m,endAngle:v,value:c[b]};v+=o}g=-1;while(++g<a){y=g-1;while(++y<a){var C=e[g+"-"+y],T=e[y+"-"+g];if(C.value||T.value){n.push(C.value<T.value?{source:T,target:C}:{source:C,target:T})}}}if(l){f()}}function f(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(t){if(!arguments.length){return i}a=(i=t)&&i.length;n=r=null;return e};e.padding=function(t){if(!arguments.length){return o}o=t;n=r=null;return e};e.sortGroups=function(t){if(!arguments.length){return s}s=t;n=r=null;return e};e.sortSubgroups=function(t){if(!arguments.length){return u}u=t;n=null;return e};e.sortChords=function(t){if(!arguments.length){return l}l=t;if(n){f()}return e};e.chords=function(){if(!n){c()}return n};e.groups=function(){if(!r){c()}return r};return e};t.layout.force=function(){var e={},n=t.dispatch("start","tick","end"),r,i=[1,1],a,o,s=.9,u=po,l=vo,c=-30,f=mo,d=.1,h=.64,p=[],v=[],m,g,y;function b(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/h<u){if(u<f){var l=t.charge/u;e.px-=a*l;e.py-=o*l}return true}if(t.point&&u&&u<f){var l=t.pointCharge/u;e.px-=a*l;e.py-=o*l}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){r=null;n.end({type:"end",alpha:o=0});return true}var e=p.length,a=v.length,u,l,f,h,x,w,_,k,C;for(l=0;l<a;++l){f=v[l];h=f.source;x=f.target;k=x.x-h.x;C=x.y-h.y;if(w=k*k+C*C){w=o*g[l]*((w=Math.sqrt(w))-m[l])/w;k*=w;C*=w;x.x-=k*(_=h.weight+x.weight?h.weight/(h.weight+x.weight):.5);x.y-=C*_;h.x+=k*(_=1-_);h.y+=C*_}}if(_=o*d){k=i[0]/2;C=i[1]/2;l=-1;if(_){while(++l<e){f=p[l];f.x+=(k-f.x)*_;f.y+=(C-f.y)*_}}}if(c){ho(u=t.geom.quadtree(p),o,y);l=-1;while(++l<e){if(!(f=p[l]).fixed){u.visit(b(f))}}}l=-1;while(++l<e){f=p[l];if(f.fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*s;f.y-=(f.py-(f.py=f.y))*s}}n.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length){return p}p=t;return e};e.links=function(t){if(!arguments.length){return v}v=t;return e};e.size=function(t){if(!arguments.length){return i}i=t;return e};e.linkDistance=function(t){if(!arguments.length){return u}u=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length){return l}l=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length){return s}s=+t;return e};e.charge=function(t){if(!arguments.length){return c}c=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length){return Math.sqrt(f)}f=t*t;return e};e.gravity=function(t){if(!arguments.length){return d}d=+t;return e};e.theta=function(t){if(!arguments.length){return Math.sqrt(h)}h=t*t;return e};e.alpha=function(t){if(!arguments.length){return o}t=+t;if(o){if(t>0){o=t}else{r.c=null,r.t=NaN,r=null;n.end({type:"end",alpha:o=0})}}else if(t>0){n.start({type:"start",alpha:o=t});r=Rt(e.tick)}return e};e.start=function(){var t,n=p.length,r=v.length,a=i[0],o=i[1],s,f;for(t=0;t<n;++t){(f=p[t]).index=t;f.weight=0}for(t=0;t<r;++t){f=v[t];if(typeof f.source=="number"){f.source=p[f.source]}if(typeof f.target=="number"){f.target=p[f.target]}++f.source.weight;++f.target.weight}for(t=0;t<n;++t){f=p[t];if(isNaN(f.x)){f.x=d("x",a)}if(isNaN(f.y)){f.y=d("y",o)}if(isNaN(f.px)){f.px=f.x}if(isNaN(f.py)){f.py=f.y}}m=[];if(typeof u==="function"){for(t=0;t<r;++t){m[t]=+u.call(this,v[t],t)}}else{for(t=0;t<r;++t){m[t]=u}}g=[];if(typeof l==="function"){for(t=0;t<r;++t){g[t]=+l.call(this,v[t],t)}}else{for(t=0;t<r;++t){g[t]=l}}y=[];if(typeof c==="function"){for(t=0;t<n;++t){y[t]=+c.call(this,p[t],t)}}else{for(t=0;t<n;++t){y[t]=c}}function d(e,i){if(!s){s=new Array(n);for(u=0;u<n;++u){s[u]=[]}for(u=0;u<r;++u){var a=v[u];s[a.source.index].push(a.target);s[a.target.index].push(a.source)}}var o=s[t],u=-1,l=o.length,c;while(++u<l){if(!isNaN(c=o[u][e])){return c}}return Math.random()*i}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!a){a=t.behavior.drag().origin(N).on("dragstart.force",uo).on("drag.force",x).on("dragend.force",lo)}if(!arguments.length){return a}this.on("mouseover.force",co).on("mouseout.force",fo).call(a)};function x(n){n.px=t.event.x,n.py=t.event.y;e.resume()}return t.rebind(e,n,"on")};function uo(e){e.fixed|=2}function lo(e){e.fixed&=~6}function co(e){e.fixed|=4;e.px=e.x,e.py=e.y}function fo(e){e.fixed&=~4}function ho(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var a=e.nodes,o=a.length,s=-1,u;while(++s<o){u=a[s];if(u==null){continue}ho(u,t,n);e.charge+=u.charge;r+=u.charge*u.cx;i+=u.charge*u.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var l=t*n[e.point.index];e.charge+=e.pointCharge=l;r+=l*e.point.x;i+=l*e.point.y}e.cx=r/e.charge;e.cy=i/e.charge}var po=20,vo=1,mo=Infinity;t.layout.hierarchy=function(){var e=_o,t=xo,n=wo;function r(i){var a=[i],o=[],s;i.depth=0;while((s=a.pop())!=null){o.push(s);if((l=t.call(r,s,s.depth))&&(u=l.length)){var u,l,c;while(--u>=0){a.push(c=l[u]);c.parent=s;c.depth=s.depth+1}if(n){s.value=0}s.children=l}else{if(n){s.value=+n.call(r,s,s.depth)||0}delete s.children}}bo(i,function(t){var r,i;if(e&&(r=t.children)){r.sort(e)}if(n&&(i=t.parent)){i.value+=t.value}});return o}r.sort=function(t){if(!arguments.length){return e}e=t;return r};r.children=function(e){if(!arguments.length){return t}t=e;return r};r.value=function(e){if(!arguments.length){return n}n=e;return r};r.revalue=function(e){if(n){yo(e,function(e){if(e.children){e.value=0}});bo(e,function(e){var t;if(!e.children){e.value=+n.call(r,e,e.depth)||0}if(t=e.parent){t.value+=e.value}})}return e};return r};function go(e,n){t.rebind(e,n,"sort","children","value");e.nodes=e;e.links=ko;return e}function yo(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0){n.push(i[r])}}}}function bo(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(a=o.length)){var i=-1,a,o;while(++i<a){n.push(o[i])}}}while((e=r.pop())!=null){t(e)}}function xo(e){return e.children}function wo(e){return e.value}function _o(e,t){return t.value-e.value}function ko(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(e,t,n,i){var a=e.children;e.x=t;e.y=e.depth*i;e.dx=n;e.dy=i;if(a&&(s=a.length)){var o=-1,s,u,l;n=e.value?n/e.value:0;while(++o<s){r(u=a[o],t,l=u.value*n,i);t+=l}}}function i(e){var t=e.children,n=0;if(t&&(a=t.length)){var r=-1,a;while(++r<a){n=Math.max(n,i(t[r]))}}return 1+n}function a(t,a){var o=e.call(this,t,a);r(o[0],0,n[0],n[1]/i(o[0]));return o}a.size=function(e){if(!arguments.length){return n}n=e;return a};return go(a,e)};t.layout.pie=function(){var e=Number,n=Co,r=0,i=Pe,a=0;function o(s){var u=s.length,l=s.map(function(t,n){return+e.call(o,t,n)}),c=+(typeof r==="function"?r.apply(this,arguments):r),f=(typeof i==="function"?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/u,+(typeof a==="function"?a.apply(this,arguments):a)),h=d*(f<0?-1:1),p=t.sum(l),v=p?(f-u*h)/p:0,m=t.range(u),g=[],y;if(n!=null){m.sort(n===Co?function(e,t){return l[t]-l[e]}:function(e,t){return n(s[e],s[t])})}m.forEach(function(e){g[e]={data:s[e],value:y=l[e],startAngle:c,endAngle:c+=y*v+h,padAngle:d}});return g}o.value=function(t){if(!arguments.length){return e}e=t;return o};o.sort=function(e){if(!arguments.length){return n}n=e;return o};o.startAngle=function(e){if(!arguments.length){return r}r=e;return o};o.endAngle=function(e){if(!arguments.length){return i}i=e;return o};o.padAngle=function(e){if(!arguments.length){return a}a=e;return o};return o};var Co={};t.layout.stack=function(){var e=N,n=Oo,r=Mo,i=Eo,a=To,o=So;function s(u,l){if(!(v=u.length)){return u}var c=u.map(function(t,n){return e.call(s,t,n)});var f=c.map(function(e){return e.map(function(e,t){return[a.call(s,e,t),o.call(s,e,t)]})});var d=n.call(s,f,l);c=t.permute(c,d);f=t.permute(f,d);var h=r.call(s,f,l);var p=c[0].length,v,m,g,y;for(g=0;g<p;++g){i.call(s,c[0][g],y=h[g],f[0][g][1]);for(m=1;m<v;++m){i.call(s,c[m][g],y+=f[m-1][g][1],f[m][g][1])}}return u}s.values=function(t){if(!arguments.length){return e}e=t;return s};s.order=function(e){if(!arguments.length){return n}n=typeof e==="function"?e:Ao.get(e)||Oo;return s};s.offset=function(e){if(!arguments.length){return r}r=typeof e==="function"?e:Po.get(e)||Mo;return s};s.x=function(e){if(!arguments.length){return a}a=e;return s};s.y=function(e){if(!arguments.length){return o}o=e;return s};s.out=function(e){if(!arguments.length){return i}i=e;return s};return s};function To(e){return e.x}function So(e){return e.y}function Eo(e,t,n){e.y0=t;e.y=n}var Ao=t.map({"inside-out":function(e){var n=e.length,r,i,a=e.map(No),o=e.map(Ro),s=t.range(n).sort(function(e,t){return a[e]-a[t]}),u=0,l=0,c=[],f=[];for(r=0;r<n;++r){i=s[r];if(u<l){u+=o[i];c.push(i)}else{l+=o[i];f.push(i)}}return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Oo});var Po=t.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,a,o,s,u=[];for(o=0;o<n;++o){for(a=0,s=0;a<t;a++){s+=e[a][o][1]}if(s>i){i=s}r.push(s)}for(o=0;o<n;++o){u[o]=(i-r[o])/2}return u},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,a,o,s,u,l,c,f,d,h=[];h[0]=f=d=0;for(a=1;a<r;++a){for(i=0,s=0;i<t;++i){s+=e[i][a][1]}for(i=0,u=0,c=n[a][0]-n[a-1][0];i<t;++i){for(o=0,l=(e[i][a][1]-e[i][a-1][1])/(2*c);o<i;++o){l+=(e[o][a][1]-e[o][a-1][1])/c}u+=l*e[i][a][1]}h[a]=f-=s?u/s*c:0;if(f<d){d=f}}for(a=0;a<r;++a){h[a]-=d}return h},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,a,o,s=[];for(a=0;a<n;++a){for(i=0,o=0;i<t;i++){o+=e[i][a][1]}if(o){for(i=0;i<t;i++){e[i][a][1]/=o}}else{for(i=0;i<t;i++){e[i][a][1]=r}}}for(a=0;a<n;++a){s[a]=0}return s},zero:Mo});function Oo(e){return t.range(e.length)}function Mo(e){var t=-1,n=e[0].length,r=[];while(++t<n){r[t]=0}return r}function No(e){var t=1,n=0,r=e[0][1],i,a=e.length;for(;t<a;++t){if((i=e[t][1])>r){n=t;r=i}}return n}function Ro(e){return e.reduce(Do,0)}function Do(e,t){return e+t[1]}t.layout.histogram=function(){var e=true,n=Number,r=Io,i=Bo;function a(a,o){var s=[],u=a.map(n,this),l=r.call(this,u,o),c=i.call(this,l,u,o),f,o=-1,d=u.length,h=c.length-1,p=e?1:1/d,v;while(++o<h){f=s[o]=[];f.dx=c[o+1]-(f.x=c[o]);f.y=0}if(h>0){o=-1;while(++o<d){v=u[o];if(v>=l[0]&&v<=l[1]){f=s[t.bisect(c,v,1,h)-1];f.y+=p;f.push(a[o])}}}return s}a.value=function(e){if(!arguments.length){return n}n=e;return a};a.range=function(e){if(!arguments.length){return r}r=kt(e);return a};a.bins=function(e){if(!arguments.length){return i}i=typeof e==="number"?function(t){return Lo(t,e)}:kt(e);return a};a.frequency=function(t){if(!arguments.length){return e}e=!!t;return a};return a};function Bo(e,t){return Lo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Lo(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];while(++n<=t){a[n]=i*n+r}return a}function Io(e){return[t.min(e),t.max(e)]}t.layout.pack=function(){var e=t.layout.hierarchy().sort(Fo),n=0,r=[1,1],i;function a(t,a){var o=e.call(this,t,a),s=o[0],u=r[0],l=r[1],c=i==null?Math.sqrt:typeof i==="function"?i:function(){return i};s.x=s.y=0;bo(s,function(e){e.r=+c(e.value)});bo(s,Uo);if(n){var f=n*(i?1:Math.max(2*s.r/u,2*s.r/l))/2;bo(s,function(e){e.r+=f});bo(s,Uo);bo(s,function(e){e.r-=f})}qo(s,u/2,l/2,i?1:1/Math.max(2*s.r/u,2*s.r/l));return o}a.size=function(e){if(!arguments.length){return r}r=e;return a};a.radius=function(e){if(!arguments.length){return i}i=e==null||typeof e==="function"?e:+e;return a};a.padding=function(e){if(!arguments.length){return n}n=+e;return a};return go(a,e)};function Fo(e,t){return e.value-t.value}function jo(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function zo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Uo(e){if(!(t=e.children)||!(d=t.length)){return}var t,n=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o,s,u,l,c,f,d;function h(e){n=Math.min(e.x-e.r,n);r=Math.max(e.x+e.r,r);i=Math.min(e.y-e.r,i);a=Math.max(e.y+e.r,a)}t.forEach(Wo);o=t[0];o.x=-o.r;o.y=0;h(o);if(d>1){s=t[1];s.x=s.r;s.y=0;h(s);if(d>2){u=t[2];Ko(o,s,u);h(u);jo(o,u);o._pack_prev=u;jo(u,s);s=o._pack_next;for(l=3;l<d;l++){Ko(o,s,u=t[l]);var p=0,v=1,m=1;for(c=s._pack_next;c!==s;c=c._pack_next,v++){if(Ho(c,u)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,m++){if(Ho(f,u)){break}}}if(p){if(v<m||v==m&&s.r<o.r){zo(o,s=c)}else{zo(o=f,s)}l--}else{jo(o,u);s=u;h(u)}}}}var g=(n+r)/2,y=(i+a)/2,b=0;for(l=0;l<d;l++){u=t[l];u.x-=g;u.y-=y;b=Math.max(b,u.r+Math.sqrt(u.x*u.x+u.y*u.y))}e.r=b;t.forEach(Vo)}function Wo(e){e._pack_next=e._pack_prev=e}function Vo(e){delete e._pack_next;delete e._pack_prev}function qo(e,t,n,r){var i=e.children;e.x=t+=r*e.x;e.y=n+=r*e.y;e.r*=r;if(i){var a=-1,o=i.length;while(++a<o){qo(i[a],t,n,r)}}}function Ko(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o;r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a;n.y=e.y+u*a-l*i}else{n.x=e.x+r;n.y=e.y}}t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Yo,r=[1,1],i=null;function a(t,a){var l=e.call(this,t,a),f=l[0],d=o(f);bo(d,s),d.parent.m=-d.z;yo(d,u);if(i){yo(f,c)}else{var h=f,p=f,v=f;yo(f,function(e){if(e.x<h.x){h=e}if(e.x>p.x){p=e}if(e.depth>v.depth){v=e}});var m=n(h,p)/2-h.x,g=r[0]/(p.x+n(p,h)/2+m),y=r[1]/(v.depth||1);yo(f,function(e){e.x=(e.x+m)*g;e.y=e.depth*y})}return l}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null){for(var i=r.children,a,o=0,s=i.length;o<s;++o){n.push((i[o]=a={_:i[o],parent:r,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a)}}return t.children[0]}function s(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){Zo(e);var a=(t[0].z+t[t.length-1].z)/2;if(i){e.z=i.z+n(e._,i._);e.m=e.z-a}else{e.z=a}}else if(i){e.z=i.z+n(e._,i._)}e.parent.A=l(e,i,e.parent.A||r[0])}function u(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function l(e,t,r){if(t){var i=e,a=e,o=t,s=i.parent.children[0],u=i.m,l=a.m,c=o.m,f=s.m,d;while(o=Go(o),i=$o(i),o&&i){s=$o(s);a=Go(a);a.a=e;d=o.z+c-i.z-u+n(o._,i._);if(d>0){Xo(Jo(o,e,r),e,d);u+=d;l+=d}c+=o.m;u+=i.m;f+=s.m;l+=a.m}if(o&&!Go(a)){a.t=o;a.m+=c-l}if(i&&!$o(s)){s.t=i;s.m+=u-f;r=e}}return r}function c(e){e.x*=r[0];e.y=e.depth*r[1]}a.separation=function(e){if(!arguments.length){return n}n=e;return a};a.size=function(e){if(!arguments.length){return i?null:r}i=(r=e)==null?c:null;return a};a.nodeSize=function(e){if(!arguments.length){return i?r:null}i=(r=e)==null?null:c;return a};return go(a,e)};function Yo(e,t){return e.parent==t.parent?1:2}function $o(e){var t=e.children;return t.length?t[0]:e.t}function Go(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function Xo(e,t,n){var r=n/(t.i-e.i);t.c-=r;t.s+=n;e.c+=r;t.z+=n;t.m+=n}function Zo(e){var t=0,n=0,r=e.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=t;a.m+=t;t+=a.s+(n+=a.c)}}function Jo(e,t,n){return e.a.parent===t.parent?e.a:n}t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=Yo,r=[1,1],i=false;function a(t,a){var o=e.call(this,t,a),s=o[0],u,l=0;bo(s,function(e){var t=e.children;if(t&&t.length){e.x=es(t);e.y=Qo(t)}else{e.x=u?l+=n(e,u):0;e.y=0;u=e}});var c=ts(s),f=ns(s),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;bo(s,i?function(e){e.x=(e.x-s.x)*r[0];e.y=(s.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0];e.y=(1-(s.y?e.y/s.y:1))*r[1]});return o}a.separation=function(e){if(!arguments.length){return n}n=e;return a};a.size=function(e){if(!arguments.length){return i?null:r}i=(r=e)==null;return a};a.nodeSize=function(e){if(!arguments.length){return i?r:null}i=(r=e)!=null;return a};return go(a,e)};function Qo(e){return 1+t.max(e,function(e){return e.y})}function es(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function ts(e){var t=e.children;return t&&t.length?ts(t[0]):e}function ns(e){var t=e.children,n;return t&&(n=t.length)?ns(t[n-1]):e}t.layout.treemap=function(){var e=t.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=rs,o=false,s,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){var n=-1,r=e.length,i,a;while(++n<r){a=(i=e[n]).value*(t<0?0:t);i.area=isNaN(a)||a<=0?0:a}}function f(e){var t=e.children;if(t&&t.length){var n=a(e),r=[],i=t.slice(),o,s=Infinity,l,d=u==="slice"?n.dx:u==="dice"?n.dy:u==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;c(i,n.dx*n.dy/e.value);r.area=0;while((v=i.length)>0){r.push(o=i[v-1]);r.area+=o.area;if(u!=="squarify"||(l=h(r,d))<=s){i.pop();s=l}else{r.area-=r.pop().area;p(r,d,n,false);d=Math.min(n.dx,n.dy);r.length=r.area=0;s=Infinity}}if(r.length){p(r,d,n,true);r.length=r.area=0}t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n=a(e),r=t.slice(),i,o=[];c(r,n.dx*n.dy/e.value);o.area=0;while(i=r.pop()){o.push(i);o.area+=i.area;if(i.z!=null){p(o,i.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}t.forEach(d)}}function h(e,t){var n=e.area,r,i=0,a=Infinity,o=-1,s=e.length;while(++o<s){if(!(r=e[o].area)){continue}if(r<a){a=r}if(r>i){i=r}}n*=n;t*=t;return n?Math.max(t*i*l/n,n/(t*a*l)):Infinity}function p(e,t,r,i){var a=-1,o=e.length,s=r.x,u=r.y,l=t?n(e.area/t):0,c;if(t==r.dx){if(i||l>r.dy){l=r.dy}while(++a<o){c=e[a];c.x=s;c.y=u;c.dy=l;s+=c.dx=Math.min(r.x+r.dx-s,l?n(c.area/l):0)}c.z=true;c.dx+=r.x+r.dx-s;r.y+=l;r.dy-=l}else{if(i||l>r.dx){l=r.dx}while(++a<o){c=e[a];c.x=s;c.y=u;c.dx=l;u+=c.dy=Math.min(r.y+r.dy-u,l?n(c.area/l):0)}c.z=false;c.dy+=r.y+r.dy-u;r.x+=l;r.dx-=l}}function v(t){var n=s||e(t),i=n[0];i.x=i.y=0;if(i.value){i.dx=r[0],i.dy=r[1]}else{i.dx=i.dy=0}if(s){e.revalue(i)}c([i],i.dx*i.dy/i.value);(s?d:f)(i);if(o){s=n}return n}v.size=function(e){if(!arguments.length){return r}r=e;return v};v.padding=function(e){if(!arguments.length){return i}function t(t){var n=e.call(v,t,t.depth);return n==null?rs(t):is(t,typeof n==="number"?[n,n,n,n]:n)}function n(t){return is(t,e)}var r;a=(i=e)==null?rs:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n;return v};v.round=function(e){if(!arguments.length){return n!=Number}n=e?Math.round:Number;return v};v.sticky=function(e){if(!arguments.length){return o}o=e;s=null;return v};v.ratio=function(e){if(!arguments.length){return l}l=e;return v};v.mode=function(e){if(!arguments.length){return u}u=e+"";return v};return go(v,e)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function is(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(i<0){n+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:n,y:r,dx:i,dy:a}}t.random={normal:function(e,t){var n=arguments.length;if(n<2){t=1}if(n<1){e=0}return function(){var n,r,i;do{n=Math.random()*2-1;r=Math.random()*2-1;i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++){t+=Math.random()}return t}}};t.scale={};function as(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function os(e){return e.rangeExtent?e.rangeExtent():as(e.range())}function ss(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function us(e,t){var n=0,r=e.length-1,i=e[n],a=e[r],o;if(a<i){o=n,n=r,r=o;o=i,i=a,a=o}e[n]=t.floor(i);e[r]=t.ceil(a);return e}function ls(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cs}var cs={floor:N,ceil:N};function fs(e,n,r,i){var a=[],o=[],s=0,u=Math.min(e.length,n.length)-1;if(e[u]<e[0]){e=e.slice().reverse();n=n.slice().reverse()}while(++s<=u){a.push(r(e[s-1],e[s]));o.push(i(n[s-1],n[s]))}return function(n){var r=t.bisect(e,n,1,u)-1;return o[r](a[r](n))}}t.scale.linear=function(){return ds([0,1],[0,1],Ca,false)};function ds(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?fs:ss,u=r?io:ro;i=o(e,t,u,n);a=o(t,e,u,Ca);return s}function s(e){return i(e)}s.invert=function(e){return a(e)};s.domain=function(t){if(!arguments.length){return e}e=t.map(Number);return o()};s.range=function(e){if(!arguments.length){return t}t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(qa)};s.clamp=function(e){if(!arguments.length){return r}r=e;return o()};s.interpolate=function(e){if(!arguments.length){return n}n=e;return o()};s.ticks=function(t){return ms(e,t)};s.tickFormat=function(t,n){return gs(e,t,n)};s.nice=function(t){ps(e,t);return o()};s.copy=function(){return ds(e,t,n,r)};return o()}function hs(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function ps(e,t){us(e,ls(vs(e,t)[2]));us(e,ls(vs(e,t)[2]));return e}function vs(e,t){if(t==null){t=10}var n=as(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;if(a<=.15){i*=10}else if(a<=.35){i*=5}else if(a<=.75){i*=2}n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+i*.5;n[2]=i;return n}function ms(e,n){return t.range.apply(t,vs(e,n))}function gs(e,n,r){var i=vs(e,n);if(r){var a=Ht.exec(r);a.shift();if(a[8]==="s"){var o=t.formatPrefix(Math.max(y(i[0]),y(i[1])));if(!a[7]){a[7]="."+bs(o.scale(i[2]))}a[8]="f";r=t.format(a.join(""));return function(e){return r(o.scale(e))+o.symbol}}if(!a[7]){a[7]="."+xs(a[8],i)}r=a.join("")}else{r=",."+bs(i[2])+"f"}return t.format(r)}var ys={s:1,g:1,p:1,r:1,e:1};function bs(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function xs(e,t){var n=bs(t[2]);return e in ys?Math.abs(n-bs(Math.max(y(t[0]),y(t[1]))))+ +(e!=="e"):n-(e==="%")*2}t.scale.log=function(){return ws(t.scale.linear().domain([0,1]),10,true,[1,10])};function ws(e,n,r,i){function a(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function s(t){return e(a(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){if(!arguments.length){return i}r=t[0]>=0;e.domain((i=t.map(Number)).map(a));return s};s.base=function(t){if(!arguments.length){return n}n=+t;e.domain(i.map(a));return s};s.nice=function(){var t=us(i.map(a),r?Math:ks);e.domain(t);i=t.map(o);return s};s.ticks=function(){var e=as(i),t=[],s=e[0],u=e[1],l=Math.floor(a(s)),c=Math.ceil(a(u)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++){for(var d=1;d<f;d++){t.push(o(l)*d)}}t.push(o(l))}else{t.push(o(l));for(;l++<c;){for(var d=f-1;d>0;d--){t.push(o(l)*d)}}}for(l=0;t[l]<s;l++){}for(c=t.length;t[c-1]>u;c--){}t=t.slice(l,c)}return t};s.tickFormat=function(e,r){if(!arguments.length){return _s}if(arguments.length<2){r=_s}else if(typeof r!=="function"){r=t.format(r)}var i=Math.max(1,n*e/s.ticks().length);return function(e){var t=e/o(Math.round(a(e)));if(t*n<n-.5){t*=n}return t<=i?r(e):""}};s.copy=function(){return ws(e.copy(),n,r,i)};return hs(s,e)}var _s=t.format(".0e"),ks={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return Cs(t.scale.linear(),1,[0,1])};function Cs(e,t,n){var r=Ts(t),i=Ts(1/t);function a(t){return e(r(t))}a.invert=function(t){return i(e.invert(t))};a.domain=function(t){if(!arguments.length){return n}e.domain((n=t.map(Number)).map(r));return a};a.ticks=function(e){return ms(n,e)};a.tickFormat=function(e,t){return gs(n,e,t)};a.nice=function(e){return a.domain(ps(n,e))};a.exponent=function(o){if(!arguments.length){return t}r=Ts(t=o);i=Ts(1/t);e.domain(n.map(r));return a};a.copy=function(){return Cs(e.copy(),t,n)};return hs(a,e)}function Ts(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ss([],{t:"range",a:[[]]})};function Ss(e,n){var r,i,a;function o(t){return i[((r.get(t)||(n.t==="range"?r.set(t,e.push(t)):NaN))-1)%i.length]}function s(n,r){return t.range(e.length).map(function(e){return n+r*e})}o.domain=function(t){if(!arguments.length){return e}e=[];r=new w;var i=-1,a=t.length,s;while(++i<a){if(!r.has(s=t[i])){r.set(s,e.push(s))}}return o[n.t].apply(o,n.a)};o.range=function(e){if(!arguments.length){return i}i=e;a=0;n={t:"range",a:arguments};return o};o.rangePoints=function(t,r){if(arguments.length<2){r=0}var u=t[0],l=t[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+r);i=s(u+c*r/2,c);a=0;n={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(t,r){if(arguments.length<2){r=0}var u=t[0],l=t[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+r)|0;i=s(u+Math.round(c*r/2+(l-u-(e.length-1+r)*c)/2),c);a=0;n={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(t,r,u){if(arguments.length<2){r=0}if(arguments.length<3){u=r}var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=(f-c)/(e.length-r+2*u);i=s(c+d*u,d);if(l){i.reverse()}a=d*(1-r);n={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(t,r,u){if(arguments.length<2){r=0}if(arguments.length<3){u=r}var l=t[1]<t[0],c=t[l-0],f=t[1-l],d=Math.floor((f-c)/(e.length-r+2*u));i=s(c+Math.round((f-c-(e.length-r)*d)/2),d);if(l){i.reverse()}a=Math.round(d*(1-r));n={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return a};o.rangeExtent=function(){return as(n.a[0])};o.copy=function(){return Ss(e,n)};return o.domain(e)}t.scale.category10=function(){return t.scale.ordinal().range(Es)};t.scale.category20=function(){return t.scale.ordinal().range(As)};t.scale.category20b=function(){return t.scale.ordinal().range(Ps)};t.scale.category20c=function(){return t.scale.ordinal().range(Os)};var Es=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pt);var As=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pt);var Ps=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pt);var Os=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pt);t.scale.quantile=function(){return Ms([],[])};function Ms(e,n){var r;function i(){var i=0,o=n.length;r=[];while(++i<o){r[i-1]=t.quantile(e,i/o)}return a}function a(e){if(!isNaN(e=+e)){return n[t.bisect(r,e)]}}a.domain=function(t){if(!arguments.length){return e}e=t.map(h).filter(p).sort(d);return i()};a.range=function(e){if(!arguments.length){return n}n=e;return i()};a.quantiles=function(){return r};a.invertExtent=function(t){t=n.indexOf(t);return t<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};a.copy=function(){return Ms(e,n)};return i()}t.scale.quantize=function(){return Ns(0,1,[0,1])};function Ns(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){r=n.length/(t-e);i=n.length-1;return a}a.domain=function(n){if(!arguments.length){return[e,t]}e=+n[0];t=+n[n.length-1];return o()};a.range=function(e){if(!arguments.length){return n}n=e;return o()};a.invertExtent=function(t){t=n.indexOf(t);t=t<0?NaN:t/r+e;return[t,t+1/r]};a.copy=function(){return Ns(e,t,n)};return o()}t.scale.threshold=function(){return Rs([.5],[0,1])};function Rs(e,n){function r(r){if(r<=r){return n[t.bisect(e,r)]}}r.domain=function(t){if(!arguments.length){return e}e=t;return r};r.range=function(e){if(!arguments.length){return n}n=e;return r};r.invertExtent=function(t){t=n.indexOf(t);return[e[t-1],e[t]]};r.copy=function(){return Rs(e,n)};return r}t.scale.identity=function(){return Ds([0,1])};function Ds(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(n){if(!arguments.length){return e}e=n.map(t);return t};t.ticks=function(t){return ms(e,t)};t.tickFormat=function(t,n){return gs(e,t,n)};t.copy=function(){return Ds(e)};return t}t.svg={};function Bs(){return 0}t.svg.arc=function(){var e=Is,t=Fs,n=Bs,r=Ls,i=js,a=zs,o=Hs;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-Me,f=a.apply(this,arguments)-Me,d=Math.abs(f-c),h=c>f?0:1;if(l<s){p=l,l=s,s=p}if(d>=Oe){return u(l,h)+(s?u(s,1-h):"")+"Z"}var p,v,m,g,y=0,b=0,x,w,_,k,C,T,S,E,A=[];if(g=(+o.apply(this,arguments)||0)/2){m=r===Ls?Math.sqrt(s*s+l*l):+r.apply(this,arguments);if(!h){b*=-1}if(l){b=Ie(m/l*Math.sin(g))}if(s){y=Ie(m/s*Math.sin(g))}}if(l){x=l*Math.cos(c+b);w=l*Math.sin(c+b);_=l*Math.cos(f-b);k=l*Math.sin(f-b);var P=Math.abs(f-c-2*b)<=Ae?0:1;if(b&&Us(x,w,_,k)===h^P){var O=(c+f)/2;x=l*Math.cos(O);w=l*Math.sin(O);_=k=null}}else{x=w=0}if(s){C=s*Math.cos(f-y);T=s*Math.sin(f-y);S=s*Math.cos(c+y);E=s*Math.sin(c+y);var M=Math.abs(c-f+2*y)<=Ae?0:1;if(y&&Us(C,T,S,E)===1-h^M){var N=(c+f)/2;C=s*Math.cos(N);T=s*Math.sin(N);S=E=null}}else{C=T=0}if(d>Se&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){v=s<l^h?0:1;var R=p,D=p;if(d<Ae){var B=S==null?[C,T]:_==null?[x,w]:Pi([x,w],[S,E],[_,k],[C,T]),L=x-B[0],I=w-B[1],F=_-B[0],j=k-B[1],z=1/Math.sin(Math.acos((L*F+I*j)/(Math.sqrt(L*L+I*I)*Math.sqrt(F*F+j*j)))/2),H=Math.sqrt(B[0]*B[0]+B[1]*B[1]);D=Math.min(p,(s-H)/(z-1));R=Math.min(p,(l-H)/(z+1))}if(_!=null){var U=Ws(S==null?[C,T]:[S,E],[x,w],l,R,h),W=Ws([_,k],[C,T],l,R,h);if(p===R){A.push("M",U[0],"A",R,",",R," 0 0,",v," ",U[1],"A",l,",",l," 0 ",1-h^Us(U[1][0],U[1][1],W[1][0],W[1][1]),",",h," ",W[1],"A",R,",",R," 0 0,",v," ",W[0])}else{A.push("M",U[0],"A",R,",",R," 0 1,",v," ",W[0])}}else{A.push("M",x,",",w)}if(S!=null){var V=Ws([x,w],[S,E],s,-D,h),q=Ws([C,T],_==null?[x,w]:[_,k],s,-D,h);if(p===D){A.push("L",q[0],"A",D,",",D," 0 0,",v," ",q[1],"A",s,",",s," 0 ",h^Us(q[1][0],q[1][1],V[1][0],V[1][1]),",",1-h," ",V[1],"A",D,",",D," 0 0,",v," ",V[0])}else{A.push("L",q[0],"A",D,",",D," 0 0,",v," ",V[0])}}else{A.push("L",C,",",T)}}else{A.push("M",x,",",w);if(_!=null){A.push("A",l,",",l," 0 ",P,",",h," ",_,",",k)}A.push("L",C,",",T);if(S!=null){A.push("A",s,",",s," 0 ",M,",",1-h," ",S,",",E)}}A.push("Z");return A.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length){return e}e=kt(t);return s};s.outerRadius=function(e){if(!arguments.length){return t}t=kt(e);return s};s.cornerRadius=function(e){if(!arguments.length){return n}n=kt(e);return s};s.padRadius=function(e){if(!arguments.length){return r}r=e==Ls?Ls:kt(e);return s};s.startAngle=function(e){if(!arguments.length){return i}i=kt(e);return s};s.endAngle=function(e){if(!arguments.length){return a}a=kt(e);return s};s.padAngle=function(e){if(!arguments.length){return o}o=kt(e);return s};s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Me;return[Math.cos(r)*n,Math.sin(r)*n]};return s};var Ls="auto";function Is(e){return e.innerRadius}function Fs(e){return e.outerRadius}function js(e){return e.startAngle}function zs(e){return e.endAngle}function Hs(e){return e&&e.padAngle}function Us(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Ws(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,d=t[0]+u,h=t[1]+l,p=(c+d)/2,v=(f+h)/2,m=d-c,g=h-f,y=m*m+g*g,b=n-r,x=c*h-d*f,w=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),_=(x*g-m*w)/y,k=(-x*m-g*w)/y,C=(x*g+m*w)/y,T=(-x*m+g*w)/y,S=_-p,E=k-v,A=C-p,P=T-v;if(S*S+E*E>A*A+P*P){_=C,k=T}return[[_-u,k-l],[_*n/b,k*n/b]]}function Vs(e){var t=ki,n=Ci,r=or,i=Ks,a=i.key,o=.7;function s(a){var s=[],u=[],l=-1,c=a.length,f,d=kt(t),h=kt(n);function p(){s.push("M",i(e(u),o))}while(++l<c){if(r.call(this,f=a[l],l)){u.push([+d.call(this,f,l),+h.call(this,f,l)])}else if(u.length){p();u=[]}}if(u.length){p()}return s.length?s.join(""):null}s.x=function(e){if(!arguments.length){return t}t=e;return s};s.y=function(e){if(!arguments.length){return n}n=e;return s};s.defined=function(e){if(!arguments.length){return r}r=e;return s};s.interpolate=function(e){if(!arguments.length){return a}if(typeof e==="function"){a=i=e}else{a=(i=qs.get(e)||Ks).key}return s};s.tension=function(e){if(!arguments.length){return o}o=e;return s};return s}t.svg.line=function(){return Vs(N)};var qs=t.map({linear:Ks,"linear-closed":Ys,step:$s,"step-before":Gs,"step-after":Xs,basis:nu,"basis-open":ru,"basis-closed":iu,bundle:au,cardinal:Qs,"cardinal-open":Zs,"cardinal-closed":Js,monotone:pu});qs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ks(e){return e.length>1?e.join("L"):e+"Z"}function Ys(e){return e.join("L")+"Z"}function $s(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1])}if(n>1){i.push("H",r[0])}return i.join("")}function Gs(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("V",(r=e[t])[1],"H",r[0])}return i.join("")}function Xs(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n){i.push("H",(r=e[t])[0],"V",r[1])}return i.join("")}function Zs(e,t){return e.length<4?Ks(e):e[1]+eu(e.slice(1,-1),tu(e,t))}function Js(e,t){return e.length<3?Ys(e):e[0]+eu((e.push(e[0]),e),tu([e[e.length-2]].concat(e,[e[1]]),t))}function Qs(e,t){return e.length<3?Ks(e):e[0]+eu(e,tu(e,t))}function eu(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ks(e)}var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n){r+="Q"+(a[0]-o[0]*2/3)+","+(a[1]-o[1]*2/3)+","+a[0]+","+a[1];i=e[1];u=2}if(t.length>1){s=t[1];a=e[u];u++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++){a=e[u];s=t[l];r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}}if(n){var c=e[u];r+="Q"+(a[0]+s[0]*2/3)+","+(a[1]+s[1]*2/3)+","+c[0]+","+c[1]}return r}function tu(e,t){var n=[],r=(1-t)/2,i,a=e[0],o=e[1],s=1,u=e.length;while(++s<u){i=a;a=o;o=e[s];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function nu(e){if(e.length<3){return Ks(e)}var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",ou(lu,o),",",ou(lu,s)];e.push(e[n-1]);while(++t<=n){r=e[t];o.shift();o.push(r[0]);s.shift();s.push(r[1]);cu(u,o,s)}e.pop();u.push("L",r);return u.join("")}function ru(e){if(e.length<4){return Ks(e)}var t=[],n=-1,r=e.length,i,a=[0],o=[0];while(++n<3){i=e[n];a.push(i[0]);o.push(i[1])}t.push(ou(lu,a)+","+ou(lu,o));--n;while(++n<r){i=e[n];a.shift();a.push(i[0]);o.shift();o.push(i[1]);cu(t,a,o)}return t.join("")}function iu(e){var t,n=-1,r=e.length,i=r+4,a,o=[],s=[];while(++n<4){a=e[n%r];o.push(a[0]);s.push(a[1])}t=[ou(lu,o),",",ou(lu,s)];--n;while(++n<i){a=e[n%r];o.shift();o.push(a[0]);s.shift();s.push(a[1]);cu(t,o,s)}return t.join("")}function au(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],a=e[n][0]-r,o=e[n][1]-i,s=-1,u,l;while(++s<=n){u=e[s];l=s/n;u[0]=t*u[0]+(1-t)*(r+l*a);u[1]=t*u[1]+(1-t)*(i+l*o)}}return nu(e)}function ou(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var su=[0,2/3,1/3,0],uu=[0,1/3,2/3,0],lu=[0,1/6,2/3,1/6];function cu(e,t,n){e.push("C",ou(su,t),",",ou(su,n),",",ou(uu,t),",",ou(uu,n),",",ou(lu,t),",",ou(lu,n))}function fu(e,t){return(t[1]-e[1])/(t[0]-e[0])}function du(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=fu(i,a);while(++t<n){r[t]=(o+(o=fu(i=a,a=e[t+1])))/2}r[t]=o;return r}function hu(e){var t=[],n,r,i,a,o=du(e),s=-1,u=e.length-1;while(++s<u){n=fu(e[s],e[s+1]);if(y(n)<Se){o[s]=o[s+1]=0}else{r=o[s]/n;i=o[s+1]/n;a=r*r+i*i;if(a>9){a=n*3/Math.sqrt(a);o[s]=a*r;o[s+1]=a*i}}}s=-1;while(++s<=u){a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([a||0,o[s]*a||0])}return t}function pu(e){return e.length<3?Ks(e):e[0]+eu(e,hu(e))}t.svg.line.radial=function(){var e=Vs(vu);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function vu(e){var t,n=-1,r=e.length,i,a;while(++n<r){t=e[n];i=t[0];a=t[1]-Me;t[0]=i*Math.cos(a);t[1]=i*Math.sin(a)}return e}function mu(e){var t=ki,n=ki,r=0,i=Ci,a=or,o=Ks,s=o.key,u=o,l="L",c=.7;function f(s){var f=[],d=[],h=[],p=-1,v=s.length,m,g=kt(t),y=kt(r),b=t===n?function(){return w}:kt(n),x=r===i?function(){return _}:kt(i),w,_;function k(){f.push("M",o(e(h),c),l,u(e(d.reverse()),c),"Z")}while(++p<v){if(a.call(this,m=s[p],p)){d.push([w=+g.call(this,m,p),_=+y.call(this,m,p)]);h.push([+b.call(this,m,p),+x.call(this,m,p)])}else if(d.length){k();d=[];h=[]}}if(d.length){k()}return f.length?f.join(""):null}f.x=function(e){if(!arguments.length){return n}t=n=e;return f};f.x0=function(e){if(!arguments.length){return t}t=e;return f};f.x1=function(e){if(!arguments.length){return n}n=e;return f};f.y=function(e){if(!arguments.length){return i}r=i=e;return f};f.y0=function(e){if(!arguments.length){return r}r=e;return f};f.y1=function(e){if(!arguments.length){return i}i=e;return f};f.defined=function(e){if(!arguments.length){return a}a=e;return f};f.interpolate=function(e){if(!arguments.length){return s}if(typeof e==="function"){s=o=e}else{s=(o=qs.get(e)||Ks).key}u=o.reverse||o;l=o.closed?"M":"L";return f};f.tension=function(e){if(!arguments.length){return c}c=e;return f};return f}Gs.reverse=Xs;Xs.reverse=Gs;t.svg.area=function(){return mu(N)};t.svg.area.radial=function(){var e=mu(vu);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};t.svg.chord=function(){var e=oi,t=si,n=gu,r=js,i=zs;function a(n,r){var i=o(this,e,n,r),a=o(this,t,n,r);return"M"+i.p0+u(i.r,i.p1,i.a1-i.a0)+(s(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+u(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-Me,c=i.call(e,s,o)-Me;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ae)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}a.radius=function(e){if(!arguments.length){return n}n=kt(e);return a};a.source=function(t){if(!arguments.length){return e}e=kt(t);return a};a.target=function(e){if(!arguments.length){return t}t=kt(e);return a};a.startAngle=function(e){if(!arguments.length){return r}r=kt(e);return a};a.endAngle=function(e){if(!arguments.length){return i}i=kt(e);return a};return a};function gu(e){return e.radius}t.svg.diagonal=function(){var e=oi,t=si,n=yu;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];u=u.map(n);return"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}r.source=function(t){if(!arguments.length){return e}e=kt(t);return r};r.target=function(e){if(!arguments.length){return t}t=kt(e);return r};r.projection=function(e){if(!arguments.length){return n}n=e;return r};return r};function yu(e){return[e.x,e.y]}t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=yu,r=e.projection;e.projection=function(e){return arguments.length?r(bu(n=e)):n};return e};function bu(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Me;return[n*Math.cos(r),n*Math.sin(r)]}}t.svg.symbol=function(){var e=wu,t=xu;function n(n,r){return(ku.get(e.call(this,n,r))||_u)(t.call(this,n,r))}n.type=function(t){if(!arguments.length){return e}e=kt(t);return n};n.size=function(e){if(!arguments.length){return t}t=kt(e);return n};return n};function xu(){return 64}function wu(){return"circle"}function _u(e){var t=Math.sqrt(e/Ae);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var ku=t.map({circle:_u,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Tu)),n=t*Tu;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Cu),n=t*Cu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Cu),n=t*Cu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});t.svg.symbolTypes=ku.keys();var Cu=Math.sqrt(3),Tu=Math.tan(30*Ne);$.transition=function(e){var t=Mu||++Ou,n=Bu(e),r=[],i,a,o=Nu||{time:Date.now(),ease:Da,delay:0,duration:250};for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if(a=l[c]){Lu(a,c,n,t,o)}i.push(a)}}return Au(r,n,t)};$.interrupt=function(e){return this.each(e==null?Su:Eu(Bu(e)))};var Su=Eu(Bu());function Eu(e){return function(){var t,n,r;if((t=this[e])&&(r=t[n=t.active])){r.timer.c=null;r.timer.t=NaN;if(--t.count){delete t[n]}else{delete this[e]}t.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Au(e,t,n){W(e,Pu);e.namespace=t;e.id=n;return e}var Pu=[],Ou=0,Mu,Nu;Pu.call=$.call;Pu.empty=$.empty;Pu.node=$.node;Pu.size=$.size;t.transition=function(e,n){return e&&e.transition?Mu?e.transition(n):e:t.selection().transition(e)};t.transition.prototype=Pu;Pu.select=function(e){var t=this.id,n=this.namespace,r=[],i,a,o;e=G(e);for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if((o=l[c])&&(a=e.call(o,o.__data__,c,s))){if("__data__"in o){a.__data__=o.__data__}Lu(a,c,n,t,o[n][t]);i.push(a)}else{i.push(null)}}}return Au(r,n,t)};Pu.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,a,o,s,u;e=X(e);for(var l=-1,c=this.length;++l<c;){for(var f=this[l],d=-1,h=f.length;++d<h;){if(o=f[d]){u=o[n][t];a=e.call(o,o.__data__,d,l);r.push(i=[]);for(var p=-1,v=a.length;++p<v;){if(s=a[p]){Lu(s,p,n,t,u)}i.push(s)}}}}return Au(r,n,t)};Pu.filter=function(e){var t=[],n,r,i;if(typeof e!=="function"){e=ce(e)}for(var a=0,o=this.length;a<o;a++){t.push(n=[]);for(var r=this[a],s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return Au(t,this.namespace,this.id)};Pu.tween=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){return this.node()[r][n].tween.get(e)}return de(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})};function Ru(e,t,n,r){var i=e.id,a=e.namespace;return de(e,typeof n==="function"?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}Pu.attr=function(e,n){if(arguments.length<2){for(n in e){this.attr(n,e[n])}return this}var r=e=="transform"?no:Ca,i=t.ns.qualify(e);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function s(e){return e==null?a:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function u(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}return Ru(this,"attr."+e,n,i.local?u:s)};Pu.attrTween=function(e,n){var r=t.ns.qualify(e);function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function a(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}return this.tween("attr."+e,r.local?a:i)};Pu.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2){t=""}for(n in e){this.style(n,e[n],t)}return this}n=""}function i(){this.style.removeProperty(e)}function a(t){return t==null?i:(t+="",function(){var r=o(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Ca(r,t),function(t){this.style.setProperty(e,i(t),n)})})}return Ru(this,"style."+e,t,a)};Pu.styleTween=function(e,t,n){if(arguments.length<3){n=""}function r(r,i){var a=t.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return this.tween("style."+e,r)};Pu.text=function(e){return Ru(this,"text",e,Du)};function Du(e){if(e==null){e=""}return function(){this.textContent=e}}Pu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode)){t.removeChild(this)}})};Pu.ease=function(e){var n=this.id,r=this.namespace;if(arguments.length<1){return this.node()[r][n].ease}if(typeof e!=="function"){e=t.ease.apply(t,arguments)}return de(this,function(t){t[r][n].ease=e})};Pu.delay=function(e){var t=this.id,n=this.namespace;if(arguments.length<1){return this.node()[n][t].delay}return de(this,typeof e==="function"?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))};Pu.duration=function(e){var t=this.id,n=this.namespace;if(arguments.length<1){return this.node()[n][t].duration}return de(this,typeof e==="function"?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))};Pu.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var a=Nu,o=Mu;try{Mu=r;de(this,function(t,n,a){Nu=t[i][r];e.call(t,t.__data__,n,a)})}finally{Nu=a;Mu=o}}else{de(this,function(a){var o=a[i][r];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,n)})}return this};Pu.transition=function(){var e=this.id,t=++Ou,n=this.namespace,r=[],i,a,o,s;for(var u=0,l=this.length;u<l;u++){r.push(i=[]);for(var a=this[u],c=0,f=a.length;c<f;c++){if(o=a[c]){s=o[n][e];Lu(o,c,n,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}i.push(o)}}return Au(r,n,t)};function Bu(e){return e==null?"__transition__":"__transition_"+e+"__"}function Lu(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),o=a[r],s,u,l,c,f;function d(e){var t=o.delay;u.t=t+s;if(t<=e){return h(e-t)}u.c=h}function h(n){var i=a.active,d=a[i];if(d){d.timer.c=null;d.timer.t=NaN;--a.count;delete a[i];d.event&&d.event.interrupt.call(e,e.__data__,d.index)}for(var h in a){if(+h<r){var v=a[h];v.timer.c=null;v.timer.t=NaN;--a.count;delete a[h]}}u.c=p;Rt(function(){if(u.c&&p(n||1)){u.c=null;u.t=NaN}return 1},0,s);a.active=r;o.event&&o.event.start.call(e,e.__data__,t);f=[];o.tween.forEach(function(n,r){if(r=r.call(e,e.__data__,t)){f.push(r)}});c=o.ease;l=o.duration}function p(i){var s=i/l,u=c(s),d=f.length;while(d>0){f[--d].call(e,u)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--a.count){delete a[r]}else{delete e[n]}return 1}}if(!o){s=i.time;u=Rt(d,0,s);o=a[r]={tween:new w,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t};i=null;++a.count}}t.svg.axis=function(){var e=t.scale.linear(),n=Iu,i=6,a=6,o=3,s=[10],u=null,l;function c(r){r.each(function(){var r=t.select(this);var c=this.__chart__||e,f=this.__chart__=e.copy();var d=u==null?f.ticks?f.ticks.apply(f,s):f.domain():u,h=l==null?f.tickFormat?f.tickFormat.apply(f,s):N:l,p=r.selectAll(".tick").data(d,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Se),m=t.transition(p.exit()).style("opacity",Se).remove(),g=t.transition(p.order()).style("opacity",1),y=Math.max(i,0)+o,b;var x=os(f),w=r.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),t.transition(w));v.append("line");v.append("text");var k=v.select("line"),C=g.select("line"),T=p.select("text").text(h),S=v.select("text"),E=g.select("text"),A=n==="top"||n==="left"?-1:1,P,O,M,R;if(n==="bottom"||n==="top"){b=ju,P="x",M="y",O="x2",R="y2";T.attr("dy",A<0?"0em":".71em").style("text-anchor","middle");_.attr("d","M"+x[0]+","+A*a+"V0H"+x[1]+"V"+A*a)}else{b=zu,P="y",M="x",O="y2",R="x2";T.attr("dy",".32em").style("text-anchor",A<0?"end":"start");_.attr("d","M"+A*a+","+x[0]+"H0V"+x[1]+"H"+A*a)}k.attr(R,A*i);S.attr(M,A*y);C.attr(O,0).attr(R,A*i);E.attr(P,0).attr(M,A*y);if(f.rangeBand){var D=f,B=D.rangeBand()/2;c=f=function(e){return D(e)+B}}else if(c.rangeBand){c=f}else{m.call(b,f,c)}v.call(b,c,f);g.call(b,f,f)})}c.scale=function(t){if(!arguments.length){return e}e=t;return c};c.orient=function(e){if(!arguments.length){return n}n=e in Fu?e+"":Iu;return c};c.ticks=function(){if(!arguments.length){return s}s=r(arguments);return c};c.tickValues=function(e){if(!arguments.length){return u}u=e;return c};c.tickFormat=function(e){if(!arguments.length){return l}l=e;return c};c.tickSize=function(e){var t=arguments.length;if(!t){return i}i=+e;a=+arguments[t-1];return c};c.innerTickSize=function(e){if(!arguments.length){return i}i=+e;return c};c.outerTickSize=function(e){if(!arguments.length){return a}a=+e;return c};c.tickPadding=function(e){if(!arguments.length){return o}o=+e;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Iu="bottom",Fu={top:1,right:1,bottom:1,left:1};function ju(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function zu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}t.svg.brush=function(){var e=H(d,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],a=[0,0],s,u,l=true,c=true,f=Uu[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m);var i=e.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=e.selectAll(".resize").data(f,N);a.exit().remove();a.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");a.style("display",d.empty()?"none":null);var o=t.transition(e),s=t.transition(i),u;if(n){u=os(n);s.attr("x",u[0]).attr("width",u[1]-u[0]);p(o)}if(r){u=os(r);s.attr("y",u[0]).attr("height",u[1]-u[0]);v(o)}h(o)})}d.event=function(n){n.each(function(){var n=e.of(this,arguments),r={x:i,y:a,i:s,j:u},o=this.__chart__||r;this.__chart__=r;if(Mu){t.select(this).transition().each("start.brush",function(){s=o.i;u=o.j;i=o.x;a=o.y;n({type:"brushstart"})}).tween("brush:brush",function(){var e=Ta(i,r.x),t=Ta(a,r.y);s=u=null;return function(o){i=r.x=e(o);a=r.y=t(o);n({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=r.i;u=r.j;n({type:"brush",mode:"resize"});n({type:"brushend"})})}else{n({type:"brushstart"});n({type:"brush",mode:"resize"});n({type:"brushend"})}})};function h(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+a[+/^s/.test(e)]+")"})}function p(e){e.select(".extent").attr("x",i[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function v(e){e.select(".extent").attr("y",a[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",a[1]-a[0])}function m(){var f=this,m=t.select(t.event.target),g=e.of(f,arguments),y=t.select(f),b=m.datum(),x=!/^(n|s)$/.test(b)&&n,w=!/^(e|w)$/.test(b)&&r,_=m.classed("extent"),k=_e(f),C,T=t.mouse(f),S;var E=t.select(o(f)).on("keydown.brush",O).on("keyup.brush",M);if(t.event.changedTouches){E.on("touchmove.brush",N).on("touchend.brush",D)}else{E.on("mousemove.brush",N).on("mouseup.brush",D)}y.interrupt().selectAll("*").interrupt();if(_){T[0]=i[0]-T[0];T[1]=a[0]-T[1]}else if(b){var A=+/w$/.test(b),P=+/^n/.test(b);S=[i[1-A]-T[0],a[1-P]-T[1]];T[0]=i[A];T[1]=a[P]}else if(t.event.altKey){C=T.slice()}y.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",m.style("cursor"));g({type:"brushstart"});N();function O(){if(t.event.keyCode==32){if(!_){C=null;T[0]-=i[1];T[1]-=a[1];_=2}j()}}function M(){if(t.event.keyCode==32&&_==2){T[0]+=i[1];T[1]+=a[1];_=0;j()}}function N(){var e=t.mouse(f),o=false;if(S){e[0]+=S[0];e[1]+=S[1]}if(!_){if(t.event.altKey){if(!C){C=[(i[0]+i[1])/2,(a[0]+a[1])/2]}T[0]=i[+(e[0]<C[0])];T[1]=a[+(e[1]<C[1])]}else{C=null}}if(x&&R(e,n,0)){p(y);o=true}if(w&&R(e,r,1)){v(y);o=true}if(o){h(y);g({type:"brush",mode:_?"move":"resize"})}}function R(e,t,n){var r=os(t),o=r[0],f=r[1],d=T[n],h=n?a:i,p=h[1]-h[0],v,m;if(_){o-=d;f-=p+d}v=(n?c:l)?Math.max(o,Math.min(f,e[n])):e[n];if(_){m=(v+=d)+p}else{if(C){d=Math.max(o,Math.min(f,2*C[n]-v))}if(d<v){m=v;v=d}else{m=d}}if(h[0]!=v||h[1]!=m){if(n){u=null}else{s=null}h[0]=v;h[1]=m;return true}}function D(){N();y.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);t.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);k();g({type:"brushend"})}}d.x=function(e){if(!arguments.length){return n}n=e;f=Uu[!n<<1|!r];return d};d.y=function(e){if(!arguments.length){return r}r=e;f=Uu[!n<<1|!r];return d};d.clamp=function(e){if(!arguments.length){return n&&r?[l,c]:n?l:r?c:null}if(n&&r){l=!!e[0],c=!!e[1]}else if(n){l=!!e}else if(r){c=!!e}return d};d.extent=function(e){var t,o,l,c,f;if(!arguments.length){if(n){if(s){t=s[0],o=s[1]}else{t=i[0],o=i[1];if(n.invert){t=n.invert(t),o=n.invert(o)}if(o<t){f=t,t=o,o=f}}}if(r){if(u){l=u[0],c=u[1]}else{l=a[0],c=a[1];if(r.invert){l=r.invert(l),c=r.invert(c)}if(c<l){f=l,l=c,c=f}}}return n&&r?[[t,l],[o,c]]:n?[t,o]:r&&[l,c]}if(n){t=e[0],o=e[1];if(r){t=t[0],o=o[0]}s=[t,o];if(n.invert){t=n(t),o=n(o)}if(o<t){f=t,t=o,o=f}if(t!=i[0]||o!=i[1]){i=[t,o]}}if(r){l=e[0],c=e[1];if(n){l=l[1],c=c[1]}u=[l,c];if(r.invert){l=r(l),c=r(c)}if(c<l){f=l,l=c,c=f}if(l!=a[0]||c!=a[1]){a=[l,c]}}return d};d.clear=function(){if(!d.empty()){i=[0,0],a=[0,0];s=u=null}return d};d.empty=function(){return!!n&&i[0]==i[1]||!!r&&a[0]==a[1]};return t.rebind(d,e,"on")};var Hu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Uu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Wu=Vt.format=wn.timeFormat;var Vu=Wu.utc;var qu=Vu("%Y-%m-%dT%H:%M:%S.%LZ");Wu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ku:qu;function Ku(e){return e.toISOString()}Ku.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Ku.toString=qu.toString;Vt.second=$t(function(e){return new qt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Vt.seconds=Vt.second.range;Vt.seconds.utc=Vt.second.utc.range;Vt.minute=$t(function(e){return new qt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Vt.minutes=Vt.minute.range;Vt.minutes.utc=Vt.minute.utc.range;Vt.hour=$t(function(e){var t=e.getTimezoneOffset()/60;return new qt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Vt.hours=Vt.hour.range;Vt.hours.utc=Vt.hour.utc.range;Vt.month=$t(function(e){e=Vt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Vt.months=Vt.month.range;Vt.months.utc=Vt.month.utc.range;function Yu(e,n,r){function i(t){return e(t)}i.invert=function(t){return $u(e.invert(t))};i.domain=function(t){if(!arguments.length){return e.domain().map($u)}e.domain(t);return i};function a(e,r){var i=e[1]-e[0],a=i/r,o=t.bisect(Gu,a);return o==Gu.length?[n.year,vs(e.map(function(e){return e/31536e6}),r)[2]]:!o?[Ju,vs(e,r)[2]]:n[a/Gu[o-1]<Gu[o]/a?o-1:o]}i.nice=function(e,t){var n=i.domain(),r=as(n),o=e==null?a(r,10):typeof e==="number"&&a(r,e);if(o){e=o[0],t=o[1]}function s(n){return!isNaN(n)&&!e.range(n,$u(+n+1),t).length}return i.domain(us(n,t>1?{floor:function(t){while(s(t=e.floor(t))){t=$u(t-1)}return t},ceil:function(t){while(s(t=e.ceil(t))){t=$u(+t+1)}return t}}:e))};i.ticks=function(e,t){var n=as(i.domain()),r=e==null?a(n,10):typeof e==="number"?a(n,e):!e.range&&[{range:e},t];if(r){e=r[0],t=r[1]}return e.range(n[0],$u(+n[1]+1),t<1?1:t)};i.tickFormat=function(){return r};i.copy=function(){return Yu(e.copy(),n,r)};return hs(i,e)}function $u(e){return new Date(e)}var Gu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Xu=[[Vt.second,1],[Vt.second,5],[Vt.second,15],[Vt.second,30],[Vt.minute,1],[Vt.minute,5],[Vt.minute,15],[Vt.minute,30],[Vt.hour,1],[Vt.hour,3],[Vt.hour,6],[Vt.hour,12],[Vt.day,1],[Vt.day,2],[Vt.week,1],[Vt.month,1],[Vt.month,3],[Vt.year,1]];var Zu=Wu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",or]]);var Ju={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map($u)},floor:N,ceil:N};Xu.year=Vt.year;Vt.scale=function(){return Yu(t.scale.linear(),Xu,Zu)};var Qu=Xu.map(function(e){return[e[0].utc,e[1]]});var el=Vu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",or]]);Qu.year=Vt.year.utc;Vt.scale.utc=function(){return Yu(t.scale.linear(),Qu,el)};t.text=Ct(function(e){return e.responseText});t.json=function(e,t){return Tt(e,"application/json",tl,t)};function tl(e){return JSON.parse(e.responseText)}t.html=function(e,t){return Tt(e,"text/html",nl,t)};function nl(e){var t=i.createRange();t.selectNode(i.body);return t.createContextualFragment(e.responseText)}t.xml=Ct(function(e){return e.responseXML});if(typeof undefined==="function"&&undefined.amd){this.d3=t,undefined(t)}else if("object"==="object"&&e.exports){e.exports=t}else{this.d3=t}}()});var Qc=n(function(t,n){(function e(n,r){{t.exports=r(Jc)}})(e,function(e){return function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={exports:{},id:r,loaded:false};e[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=e;n.c=t;n.p="";return n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.version=t.api=t.__api__=t.Chart=t.Plot=t.GPL=undefined;var r=n(1);var i=n(3);var a=n(10);var o=n(16);var s=n(20);var u=n(38);var l=n(18);var c=n(32);var f=n(25);var d=n(26);var h=n(7);var p=n(40);var v=n(41);var m=n(42);var g=n(4);var y=n(45);var b=n(51);var x=n(55);var w=n(56);var _=n(59);var k=n(60);var C=n(61);var T=n(63);var S=n(64);var E=n(65);var A=n(66);var P=n(67);var O=n(68);var M=n(69);var N=n(70);var R=n(71);var D=n(39);var B=n(72);var L=n(73);var I=n(75);var F=n(76);var j=n(77);var z=n(78);var H=n(9);var U=n(8);var W=n(79);var V=n(2);var q=K(V);n(82);function K(e){return e&&e.__esModule?e:{default:e}}function Y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var $={};var G={};var X={UnitDomainPeriodGenerator:l.UnitDomainPeriodGenerator};var Z={errorCodes:U.errorCodes,unitsRegistry:f.unitsRegistry,scalesRegistry:d.scalesRegistry,grammarRegistry:h.GrammarRegistry,tickFormat:c.FormatterRegistry,isChartElement:i.utils.isChartElement,d3:q.default,utils:i.utils,svgUtils:a.utilsDraw,tickPeriod:l.UnitDomainPeriodGenerator,colorBrewers:{add:function e(t,n){if(!(t in $)){$[t]=n}},get:function e(t){return $[t]}},d3_animationInterceptor:H.d3_animationInterceptor,pluginsSDK:W.PluginsSDK,plugins:{add:function e(t,n){if(!(t in G)){G[t]=n}else{throw new Error("Plugin is already registered.")}},get:function e(t){return G[t]||function(e){throw new Error(e+" plugin is not defined")}}},globalSettings:{animationSpeed:750,renderingTimeout:1e4,asyncRendering:false,syncRenderingInterval:50,syncPointerEvents:false,handleRenderingErrors:true,experimentalShouldAnimate:function e(t){var n=function e(t,n){var r=document.createElementNS("http://www.w3.org/2000/svg",t);Object.keys(n).forEach(function(e){return r.setAttribute(e,String(n[e]))});return r};var r=document.createElement("div");r.style.position="absolute";r.style.visibility="hidden";document.body.appendChild(r);var i=n("svg",{width:100,height:100});r.appendChild(i);var a=performance.now();var o,s,u;for(o=0,u;o<10;o++){for(s=0;s<10;s++){u=n("circle",{fill:"black",r:5,cx:o*10,cy:s*10});i.appendChild(u)}}var l=performance.now()-a;document.body.removeChild(r);return t.sources["/"].data.length*l<500},defaultNiceColor:true,defaultColorBrewer:["#fde725","#fbe723","#f8e621","#f6e620","#f4e61e","#f1e51d","#efe51c","#ece51b","#eae51a","#e7e419","#e5e419","#e2e418","#dfe318","#dde318","#dae319","#d8e219","#d5e21a","#d2e21b","#d0e11c","#cde11d","#cae11f","#c8e020","#c5e021","#c2df23","#c0df25","#bddf26","#bade28","#b8de29","#b5de2b","#b2dd2d","#b0dd2f","#addc30","#aadc32","#a8db34","#a5db36","#a2da37","#a0da39","#9dd93b","#9bd93c","#98d83e","#95d840","#93d741","#90d743","#8ed645","#8bd646","#89d548","#86d549","#84d44b","#81d34d","#7fd34e","#7cd250","#7ad151","#77d153","#75d054","#73d056","#70cf57","#6ece58","#6ccd5a","#69cd5b","#67cc5c","#65cb5e","#63cb5f","#60ca60","#5ec962","#5cc863","#5ac864","#58c765","#56c667","#54c568","#52c569","#50c46a","#4ec36b","#4cc26c","#4ac16d","#48c16e","#46c06f","#44bf70","#42be71","#40bd72","#3fbc73","#3dbc74","#3bbb75","#3aba76","#38b977","#37b878","#35b779","#34b679","#32b67a","#31b57b","#2fb47c","#2eb37c","#2db27d","#2cb17e","#2ab07f","#29af7f","#28ae80","#27ad81","#26ad81","#25ac82","#25ab82","#24aa83","#23a983","#22a884","#22a785","#21a685","#21a585","#20a486","#20a386","#1fa287","#1fa187","#1fa188","#1fa088","#1f9f88","#1f9e89","#1e9d89","#1e9c89","#1e9b8a","#1f9a8a","#1f998a","#1f988b","#1f978b","#1f968b","#1f958b","#1f948c","#20938c","#20928c","#20928c","#21918c","#21908d","#218f8d","#218e8d","#228d8d","#228c8d","#228b8d","#238a8d","#23898e","#23888e","#24878e","#24868e","#25858e","#25848e","#25838e","#26828e","#26828e","#26818e","#27808e","#277f8e","#277e8e","#287d8e","#287c8e","#297b8e","#297a8e","#29798e","#2a788e","#2a778e","#2a768e","#2b758e","#2b748e","#2c738e","#2c728e","#2c718e","#2d718e","#2d708e","#2e6f8e","#2e6e8e","#2e6d8e","#2f6c8e","#2f6b8e","#306a8e","#30698e","#31688e","#31678e","#31668e","#32658e","#32648e","#33638d","#33628d","#34618d","#34608d","#355f8d","#355e8d","#365d8d","#365c8d","#375b8d","#375a8c","#38598c","#38588c","#39568c","#39558c","#3a548c","#3a538b","#3b528b","#3b518b","#3c508b","#3c4f8a","#3d4e8a","#3d4d8a","#3e4c8a","#3e4a89","#3e4989","#3f4889","#3f4788","#404688","#404588","#414487","#414287","#424186","#424086","#423f85","#433e85","#433d84","#443b84","#443a83","#443983","#453882","#453781","#453581","#463480","#46337f","#46327e","#46307e","#472f7d","#472e7c","#472d7b","#472c7a","#472a7a","#482979","#482878","#482677","#482576","#482475","#482374","#482173","#482071","#481f70","#481d6f","#481c6e","#481b6d","#481a6c","#48186a","#481769","#481668","#481467","#471365","#471164","#471063","#470e61","#470d60","#460b5e","#460a5d","#46085c","#46075a","#450559","#450457","#440256","#440154"],defaultClassBrewer:i.utils.range(20).map(function(e){return"color20-"+(1+e)}),log:function e(t,n){n=n||"INFO";if(!Array.isArray(t)){t=[t]}console[n.toLowerCase()].apply(console,t)},facetLabelDelimiter:" ‚Üí ",excludeNull:true,minChartWidth:300,minChartHeight:200,minFacetWidth:150,minFacetHeight:100,specEngine:[{name:"COMPACT",width:600,height:400},{name:"AUTO",width:Number.MAX_VALUE,height:Number.MAX_VALUE}],fitModel:"normal",layoutEngine:"EXTRACT",autoRatio:true,defaultSourceMap:["https://raw.githubusercontent.com","TargetProcess/tauCharts/master/src/addons","world-countries.json"].join("/"),getAxisTickLabelSize:i.utils.memoize(r.utilsDom.getAxisTickLabelSize,function(e){return String(e).length}),getScrollbarSize:r.utilsDom.getScrollbarSize,avoidScrollAtRatio:1.5,xAxisTickLabelLimit:150,yAxisTickLabelLimit:150,xTickWordWrapLinesLimit:2,yTickWordWrapLinesLimit:2,xTickWidth:6+3,yTickWidth:6+3,distToXAxisLabel:10,distToYAxisLabel:10,xAxisPadding:20,yAxisPadding:20,xFontLabelDescenderLineHeight:4,xFontLabelHeight:10,yFontLabelHeight:10,xDensityPadding:2,yDensityPadding:2,"xDensityPadding:measure":8,"yDensityPadding:measure":8,utcTime:false,defaultFormats:{measure:"x-num-auto","measure:time":"x-time-auto"}}};s.Plot.__api__=Z;s.Plot.globalSettings=Z.globalSettings;[["COORDS.RECT",p.Cartesian],["COORDS.MAP",m.GeoMap],["COORDS.PARALLEL",v.Parallel],["ELEMENT.GENERIC.CARTESIAN",g.GenericCartesian],["ELEMENT.POINT",y.Point,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.LINE",w.Line,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.PATH",x.Path,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.AREA",b.Area,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL",_.Interval,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL.STACKED",_.Interval,"ELEMENT.GENERIC.CARTESIAN"],["PARALLEL/ELEMENT.LINE",k.ParallelLine]].reduce(function(e,t){return e.reg.apply(e,Y(t))},Z.unitsRegistry);[["identity",C.IdentityScale,function(e,t){return i.utils.defaults(e,{references:t.references,refCounter:t.refCounter})}],["color",T.ColorScale,function(e,t){return i.utils.defaults(e,{nice:t.defaultNiceColor,brewer:e.dimType==="measure"?t.defaultColorBrewer:t.defaultClassBrewer})}],["fill",R.FillScale],["size",S.SizeScale],["ordinal",E.OrdinalScale],["period",A.PeriodScale,function(e,t){return i.utils.defaults(e,{utcTime:t.utcTime})}],["time",P.TimeScale,function(e,t){return i.utils.defaults(e,{utcTime:t.utcTime})}],["linear",O.LinearScale],["logarithmic",M.LogarithmicScale],["value",N.ValueScale]].reduce(function(e,t){return e.reg.apply(e,Y(t))},Z.scalesRegistry);var J=[function(e){return!e.data?["[data] must be specified"]:[]}];Z.chartTypesRegistry=D.chartTypesRegistry.add("scatterplot",I.ChartScatterplot,J).add("line",F.ChartLine,J).add("area",j.ChartArea,J).add("stacked-area",function(e){return j.ChartArea(i.utils.defaults(e,{stack:true}))},J).add("bar",function(e){return L.ChartInterval(i.utils.defaults(e,{flip:false}))},J).add("horizontalBar",function(e){return L.ChartInterval(i.utils.defaults({flip:true},e))},J).add("horizontal-bar",function(e){return L.ChartInterval(i.utils.defaults({flip:true},e))},J).add("stacked-bar",function(e){return L.ChartInterval(i.utils.defaults({flip:false,stack:true},e))},J).add("horizontal-stacked-bar",function(e){return L.ChartInterval(i.utils.defaults({flip:true,stack:true},e))},J).add("map",B.ChartMap,J.concat([function(e){var t=e.fill&&e.code;if(e.fill&&!t){return"[code] must be specified when using [fill]"}},function(e){var t=e.latitude&&e.longitude;if((e.latitude||e.longitude)&&!t){return"[latitude] and [longitude] both must be specified"}}])).add("parallel",z.ChartParallel,J.concat([function(e){var t=e.columns&&e.columns.length>1;if(!t){return"[columns] property must contain at least 2 dimensions"}}]));var Q="1.2.2";t.GPL=o.GPL;t.Plot=s.Plot;t.Chart=u.Chart;t.__api__=X;t.api=Z;t.version=Q;t.default={GPL:o.GPL,Plot:s.Plot,Chart:u.Chart,__api__:X,api:Z,version:Q}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utilsDom=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(2);var a=s(i);var o=n(3);function s(e){return e&&e.__esModule?e:{default:e}}var u=document.createElement("div");var l=new WeakMap;var c={appendTo:function e(t,n){var r;if(t instanceof Node){r=t}else{u.insertAdjacentHTML("afterbegin",t);r=u.childNodes[0]}n.appendChild(r);return r},getScrollbarSize:function e(t){if(l.has(t)){return l.get(t)}var n=t.style.overflow;t.style.overflow="scroll";var r={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};t.style.overflow=n;l.set(t,r);return r},setScrollPadding:function e(t,n){n=n||"both";var r=n==="horizontal"||n==="both";var i=n==="vertical"||n==="both";var a=c.getScrollbarSize(t);var o=i?a.width+"px":"0";var s=r?a.height+"px":"0";t.style.overflow="hidden";t.style.padding="0 "+o+" "+s+" 0";var u=t.scrollWidth>t.clientWidth;var l=t.scrollHeight>t.clientHeight;var f=i&&!l?a.width+"px":"0";var d=r&&!u?a.height+"px":"0";t.style.padding="0 "+f+" "+d+" 0";t.style.overflow="";t.style.overflowX=u?"scroll":"hidden";t.style.overflowY=l?"scroll":"hidden";return a},getStyle:function e(t,n){return window.getComputedStyle(t,undefined).getPropertyValue(n)},getStyleAsNum:function e(t,n){return parseInt(this.getStyle(t,n)||0,10)},getContainerSize:function e(t){var n=this.getStyleAsNum(t,"padding-left");var r=this.getStyleAsNum(t,"padding-right");var i=this.getStyleAsNum(t,"padding-bottom");var a=this.getStyleAsNum(t,"padding-top");var o=this.getStyleAsNum(t,"border-top-width");var s=this.getStyleAsNum(t,"border-left-width");var u=this.getStyleAsNum(t,"border-right-width");var l=this.getStyleAsNum(t,"border-bottom-width");var c=o+s+u+l;var f=t.getBoundingClientRect();return{width:f.width-n-r-2*c,height:f.height-i-a-2*c}},getAxisTickLabelSize:function e(t){var n=document.createElement("div");n.style.position="absolute";n.style.visibility="hidden";n.style.width="100px";n.style.height="100px";n.style.border="1px solid green";n.style.top="0";document.body.appendChild(n);n.innerHTML='<svg class="graphical-report__svg">\n            <g class="graphical-report__cell cell">\n            <g class="x axis">\n            <g class="tick"><text>'+t+"</text></g>\n            </g>\n            </g>\n            </svg>";var r=a.default.select(n).selectAll(".x.axis .tick text")[0][0];var i={width:0,height:0};var o=r.getBoundingClientRect();i.width=o.right-o.left;i.height=o.bottom-o.top;var s=t.length!==0?i.width/t.length:0;i.width=i.width+1.5*s;document.body.removeChild(n);return i},getLabelSize:function e(t,n){var r=n.fontSize,i=n.fontFamily,a=n.fontWeight;var o=typeof r==="string"?r:r+"px";var s=0;var u=t.length-1;for(var l=0;l<=u;l++){var f=t.charAt(l);var d=c.getCharSize(f,{fontSize:o,fontFamily:i,fontWeight:a});s+=d.width}return{width:s,height:parseInt(o)}},getCharSize:o.utils.memoize(function(e,t){var n=t.fontSize,r=t.fontFamily,i=t.fontWeight;var a=document.createElement("div");a.style.position="absolute";a.style.visibility="hidden";a.style.border="0px";a.style.top="0";a.style.fontSize=n;a.style.fontFamily=r;a.style.fontWeight=i;document.body.appendChild(a);a.innerHTML=e===" "?"&nbsp;":e;var o={width:0,height:0};var s=a.getBoundingClientRect();o.width=s.right-s.left;o.height=s.bottom-s.top;document.body.removeChild(a);return o},function(e,t){return e+"_"+JSON.stringify(t)}),selectOrAppend:function e(t,n){var r={".":function e(t,n){return n.classed(t,true)},"#":function e(t,n){return n.attr("id",t)}};var i=Object.keys(r).join("");if(n.indexOf(" ")>=0){throw new Error("Selector should not contain whitespaces.")}if(i.indexOf(n[0])>=0){throw new Error("Selector must have tag at the beginning.")}var o=t instanceof Element;if(o){t=a.default.select(t)}var s=function e(t){return o?t.node():t};var u=t.selectAll(n).filter(function(){return this.parentNode===t.node()}).filter(function(e,t){return t===0});if(!u.empty()){return s(u)}var l;var c=-1;var f=null;for(var d=1,h=n.length,p;d<=h;d++){if(d==h||i.indexOf(n[d])>=0){p=n.substring(c+1,d);if(c<0){l=t.append(p)}else{r[f].call(null,p,l)}f=n[d];c=d}}return s(l)},selectImmediate:function e(t,n){return c.selectAllImmediate(t,n)[0]||null},selectAllImmediate:function e(t,n){var r=[];var i=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;for(var a=t.firstElementChild;Boolean(a);a=a.nextElementSibling){if(i.call(a,n)){r.push(a)}}return r},sortChildren:function e(t,n){if(t.childElementCount>0){var r=Array.prototype.filter.call(t.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE});var i=r.slice().sort(n);var a=r.reduce(function(e,t,n){e.set(t,n);return e},new Map);var s;var u;var l=i.reduce(function(e,t,n){var r=a.get(t);var o=n-r;if(o!==u){if(s){e.push(s)}u=o;s={from:r,to:n,elements:[]}}s.elements.push(t);if(n===i.length-1){e.push(s)}return e},[]);var c=l.slice().sort(function(e,t){return e.from-t.from});var f=c.reduce(function(e,t,n){e.set(t,n);return e},new Map);var d=function e(t){var n=l.map(function(e,t){return{elements:e.elements,from:f.get(e),to:t}}).sort(o.utils.createMultiSorter(function(e,t){return e.elements.length-t.elements.length},t?function(e,t){return t.to-e.to}:function(e,t){return e.to-t.to}));for(var r=0,i,a,s;r<n.length;r++){a=n[r];if(a.from>a.to){for(i=r+1;i<n.length;i++){s=n[i];if(s.from>=a.to&&s.from<a.from){s.from++}}}if(a.from<a.to){for(i=r+1;i<n.length;i++){s=n[i];if(s.from>a.from&&s.from<=a.to){s.from--}}}}return n.filter(function(e){return e.from!==e.to})};var h=d(true);var p=d(false);var v=h.length<p.length?h:p;var m=c.map(function(e){return e.elements});v.forEach(function(e){var n=m.splice(e.from,1)[0];var r=m[e.to];var i=r?r[0]:null;var a;if(e.elements.length===1){a=n[0]}else{a=document.createDocumentFragment();n.forEach(function(e){a.appendChild(e)})}t.insertBefore(a,i);m.splice(e.to,0,n)})}},classes:function e(){var e=[];for(var t=arguments.length,n=Array(t),i=0;i<t;i++){n[i]=arguments[i]}n.filter(function(e){return Boolean(e)}).forEach(function(t){if(typeof t==="string"){e.push(t)}else if((typeof t==="undefined"?"undefined":r(t))==="object"){e.push.apply(e,Object.keys(t).filter(function(e){return Boolean(t[e])}))}});return o.utils.unique(e).join(" ").trim().replace(/\s{2,}/g," ")}};t.utilsDom=c},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utils=undefined;var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=n(4);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var c=function e(t,n,r,i){var a=i(r(t),t);(a[n]||[]).forEach(function(t){return e(t,n,r,i)});return a};var f=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=n(t,i);if(a){(t.units||[]).map(function(t){return e(t,n,r,i+1)})}r(t,i)};var d=0;var h={};var p=function(){function e(e){if((typeof e==="undefined"?"undefined":i(e))=="object"){return JSON.parse(JSON.stringify(e))}else{return e}}var t=[];function n(e){for(var t in e){this[t]=e[t]}}n.prototype={constructor:n,canCopy:function e(t){return false},create:function e(t){},populate:function e(t,n,r){}};function r(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)};this.depth=0}r.prototype={constructor:r,maxDepth:256,cacheResult:function e(t,n){this.copiedObjects.push([t,n])},getCachedResult:function e(t){var n=this.copiedObjects;var r=n.length;for(var i=0;i<r;i++){if(n[i][0]===t){return n[i][1]}}return undefined},deepCopy:function e(n){if(n===null){return null}if((typeof n==="undefined"?"undefined":i(n))!=="object"){return n}var r=this.getCachedResult(n);if(r){return r}for(var a=0;a<t.length;a++){var o=t[a];if(o.canCopy(n)){return this.applyDeepCopier(o,n)}}throw new Error("no DeepCopier is able to copy "+n)},applyDeepCopier:function e(t,n){var r=t.create(n);this.cacheResult(n,r);this.depth++;if(this.depth>this.maxDepth){throw new Error("Exceeded max recursion depth in deep copy.")}t.populate(this.recursiveDeepCopy,n,r);this.depth--;return r}};function a(e,t){var n=new r;if(t){n.maxDepth=t}return n.deepCopy(e)}a.DeepCopier=n;a.deepCopiers=t;a.register=function(e){if(!(e instanceof n)){e=new n(e)}t.unshift(e)};a.register({canCopy:function e(){return true},create:function t(n){if(n instanceof n.constructor){return e(n.constructor.prototype)}else{return{}}},populate:function e(t,n,r){for(var i in n){if(n.hasOwnProperty(i)){r[i]=t(n[i])}}return r}});a.register({canCopy:function e(t){return t instanceof Array},create:function e(t){return new t.constructor},populate:function e(t,n,r){for(var i=0;i<n.length;i++){r.push(t(n[i]))}return r}});a.register({canCopy:function e(t){return t instanceof Date},create:function e(t){return new Date(t)}});return a}();var v=[a.GenericCartesian];var m=function e(t){return/^(#|rgb\(|rgba\()/.test(t)};var g=/(.)^/;var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var x=/\\|'|\r|\n|\u2028|\u2029/g;var w="(?:"+Object.keys(y).join("|")+")";var _=RegExp(w);var k=RegExp(w,"g");var C={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T={clone:function e(t){return p(t)},isDate:function e(t){return t instanceof Date&&!isNaN(Number(t))},isObject:function e(t){return t!=null&&(typeof t==="undefined"?"undefined":i(t))==="object"},isChartElement:function e(t){return v.some(function(e){return t instanceof e})},niceZeroBased:function e(t){var n=10;var r=parseFloat(Math.min.apply(Math,l(t)).toFixed(15));var i=parseFloat(Math.max.apply(Math,l(t)).toFixed(15));if(r===i){var a=i>=0?-1:1;var o=i||1;i=i-a*o/n}r=Math.min(0,r);i=Math.max(0,i);var s=[r,i];var u=s[1]-s[0];var c=Math.pow(10,Math.floor(Math.log(u/n)/Math.LN10));var f=n/u*c;var d=[[.15,10],[.35,5],[.75,2],[1,1],[2,1]];var h=-1;while(f>d[++h][0]){}c*=d[h][1];s[0]=Math.floor(s[0]/c)*c;s[1]=Math.ceil(s[1]/c)*c;var p=r-s[0];var v=s[1]-i;var m=c/2;if(r<0){var g=p>=m?-p:0;s[0]=s[0]-g}if(i>0){var y=v>=m?-v:0;s[1]=s[1]+y}return[parseFloat(s[0].toFixed(15)),parseFloat(s[1].toFixed(15))]},niceTimeDomain:function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{utc:false},a=i.utc;var o=s.default.extent(t),u=r(o,2),l=u[0],c=u[1];var f=c-l;var d=a?s.default.time.scale.utc:s.default.time.scale;if(f===0){var h=24*60*60*1e3;l=new Date(l.getTime()-h);c=new Date(c.getTime()+h);return d().domain([l,c]).nice(n).domain()}var p=d().domain([l,c]).nice(n);if(n){return p.domain()}var v=d().domain([l,c]).nice(n).domain(),m=r(v,2),g=m[0],y=m[1];var b=p.ticks();var x=b.length-1;if((l-g)/(b[1]-g)<.5){l=g}if((y-c)/(y-b[x-1])<.5){c=y}return[l,c]},traverseJSON:c,generateHash:function e(t){var n=btoa(encodeURIComponent(t)).replace(/=/g,"_");if(!h.hasOwnProperty(n)){h[n]="H"+ ++d}return h[n]},generateRatioFunction:function e(t,n,r){var i=function e(t){return T.isDate(t)?t.getTime():t};var a=0;var o=null;var s=T.memoize(function(e,t){return T.unique(e.map(function(e){return t.reduce(function(t,n){return t.concat(i(e[n]))},[])}),function(e){return JSON.stringify(e)}).reduce(function(e,t){var n=t[0];e[n]=e[n]||0;e[n]+=1;return e},{})},function(e,t){var n=o===e?a:++a;o=e;return t.join("")+"-"+n});return function(e,i,a){var o=a.length;var u=r.getSpec();var l=u.sources["/"].data;var c=u.unit.units[0].guide||{};c.padding=c.padding||{l:0,r:0,t:0,b:0};var f=0;if(t==="x"){f=c.padding.l+c.padding.r}else if(t==="y"){f=c.padding.t+c.padding.b}var d=function e(t){var n=s(l,t);return Object.keys(n).reduce(function(e,t){return e+n[t]},0)};var h=function e(t,n){return s(l,t)[n]};var p=d(n);var v=(i-o*f)/p;var m=h(n,e);return(m*v+f)/i}},traverseSpec:f,isSpecRectCoordsOnly:function e(t){var n=true;try{T.traverseSpec(t,function(e){if(e.type.indexOf("COORDS.")===0&&e.type!=="COORDS.RECT"){throw new Error("Not applicable")}},function(e){return e})}catch(e){if(e.message==="Not applicable"){n=false}}return n},throttleLastEvent:function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(i==="requestAnimationFrame"){var a=false;return function(){if(!a){requestAnimationFrame(function(){a=false});for(var e=arguments.length,i=Array(e),o=0;o<e;o++){i[o]=arguments[o]}r.apply(this,i);a=true}t.e=n;t.ts=new Date}}return function(){var e={e:n,ts:new Date};var a=t.e&&t.e===e.e?e.ts-t.ts:i;if(a>=i){for(var o=arguments.length,s=Array(o),u=0;u<o;u++){s[u]=arguments[u]}r.apply(this,s)}t.e=e.e;t.ts=e.ts}},splitEvenly:function e(t,n){var r=t[0];var i=t[1];var a=(i-r)/(n-1);var o=n>=2?T.range(n-2).map(function(e){return r+a*(e+1)}):[];return[r].concat(l(o),[i])},extRGBColor:function e(t){return m(t)?t:""},extCSSClass:function e(t){return m(t)?"":t},toRadian:function e(t){return t/180*Math.PI},normalizeAngle:function e(t){if(Math.abs(t)>=360){t=t%360}if(t<0){t=360+t}return t},range:function e(t,n){if(arguments.length===1){n=t;t=0}var r=[];for(var i=t;i<n;i++){r.push(i)}return r},flatten:function e(t){var n;if(!Array.isArray(t)){return t}return(n=[]).concat.apply(n,l(t.map(function(e){return T.flatten(e)})))},unique:function e(t,n){var r={};var i=[];var a=t.length;var o=n||function(e){return String(e)};for(var s=0;s<a;++s){var u=t[s];var l=o(u);if(!r.hasOwnProperty(l)){r[l]=true;i.push(u)}}return i},groupBy:function e(t,n){return t.reduce(function(e,t){var r=n(t);e[r]=e[r]||[];e[r].push(t);return e},{})},union:function e(t,n){return T.unique(t.concat(n))},intersection:function e(t,n){return t.filter(function(e){return n.indexOf(e)!==-1})},defaults:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a=r.length;if(a===0||!t){return t}for(var o=0;o<a;o++){var s=r[o],u=T.isObject(s)?Object.keys(s):[],l=u.length;for(var c=0;c<l;c++){var f=u[c];if(t[f]===undefined){t[f]=s[f]}}}return t},omit:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a=Object.assign({},t);r.forEach(function(e){delete a[e]});return a},memoize:function e(t,n){var e=function e(r){var i=e.cache;var a=String(n?n.apply(this,arguments):r);if(!i.hasOwnProperty(a)){i[a]=t.apply(this,arguments)}return i[a]};e.cache={};return e},createMultiSorter:function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return function(e,t){var r=0;n.every(function(n){r=n(e,t);return r===0});return r}},pick:function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}var a={};if(t==null){return a}return r.reduce(function(e,n){var r=t[n];if(r){e[n]=r}return e},{})},escape:function e(t){t=t==null?"":String(t);return _.test(t)?t.replace(k,function(e){return y[e]}):t},template:function e(t,n,r){if(!n&&r){n=r}n=T.defaults({},n,C);var i=RegExp([(n.escape||g).source,(n.interpolate||g).source,(n.evaluate||g).source].join("|")+"|$","g");var a=0;var o="__p+='";t.replace(i,function(e,n,r,i,s){o+=t.slice(a,s).replace(x,function(e){return"\\"+b[e]});a=s+e.length;if(n){o+="'+\n((__t=("+n+"))==null?'':utils.escape(__t))+\n'"}else if(r){o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}else if(i){o+="';\n"+i+"\n__p+='"}return e});o+="';\n";if(!n.variable){o="with(obj||{}){\n"+o+"}\n"}o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(n.variable||"obj",o)}catch(e){e.source=o;throw e}var e=function e(t){return s.call(this,t)};var u=n.variable||"obj";e.source="function("+u+"){\n"+o+"}";return e}};t.utils=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GenericCartesian=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(5);var a=n(7);var o=n(9);var s=n(3);var u=n(2);var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var m=t.GenericCartesian=function(e){v(t,e);function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=s.utils.defaults(n.config.guide||{},{animationSpeed:0,enableColorToBarPosition:false});n.config.guide.size=n.config.guide.size||{};var r=n.config.stack;var i=n.config.guide.enableColorToBarPosition;var o=[e.flip&&a.GrammarRegistry.get("flip"),r&&a.GrammarRegistry.get("stack"),i&&a.GrammarRegistry.get("positioningByColor")];n.decorators=(n.config.transformRules||o).concat(e.transformModel||[]);n.adjusters=(n.config.adjustRules||[]).concat(e.adjustScales||[]);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this;var r=this.config;this.regScale("x",t("pos",r.x,[0,r.options.width])).regScale("y",t("pos",r.y,[r.options.height,0])).regScale("size",t("size",r.size,{})).regScale("color",t("color",r.color,{})).regScale("split",t("split",r.split,{})).regScale("label",t("label",r.label,{})).regScale("identity",t("identity",r.identity,{}));var i=this.getScale("x");var a=this.getScale("y");var o=this.getScale("size");var s=this.getScale("label");var u=this.getScale("color");var l=this.getScale("split");var c=this.getScale("identity");var f=a.domain();var h=a.discrete?f[0]:Math.max(0,Math.min.apply(Math,d(f)));var p=a.value(h)+a.stepSize(h)*.5;var v=u.domain();var m="(@taucharts@)";return{data:function e(){return n.data()},flip:false,scaleX:i,scaleY:a,scaleSize:o,scaleLabel:s,scaleColor:u,scaleSplit:l,scaleIdentity:c,color:function e(t){return u.value(t[u.dim])},label:function e(t){return s.value(t[s.dim])},group:function e(t){return""+t[u.dim]+m+t[l.dim]},order:function e(t){var n=t.split(m)[0];var r=v.indexOf(n);return r<0?Number.MAX_VALUE:r},size:function e(t){return o.value(t[o.dim])},id:function e(t){return c.value(t[c.dim],t)},xi:function e(t){return i.value(t[i.dim])},yi:function e(t){return a.value(t[a.dim])},y0:function e(){return p}}}},{key:"getGrammarRules",value:function e(){return this.decorators.filter(function(e){return e})}},{key:"getAdjustScalesRules",value:function e(){return(this.adjusters||[]).filter(function(e){return e})}},{key:"createScreenModel",value:function e(t){var n=t.flip;var r=function e(t,n,r){return t?n:r};return{flip:n,id:t.id,x:r(n,t.yi,t.xi),y:r(n,t.xi,t.yi),x0:r(n,t.y0,t.xi),y0:r(n,t.xi,t.y0),size:t.size,group:t.group,order:t.order,label:t.label,color:function e(n){return t.scaleColor.toColor(t.color(n))},class:function e(n){return t.scaleColor.toClass(t.color(n))},model:t,toFibers:function e(){var n=t.data();var r=s.utils.groupBy(n,t.group);return Object.keys(r).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(e,t){return e.concat([r[t]])},[])}}}},{key:"drawFrames",value:function e(){var t=this;var n=this.config.options;var r=function e(t,n){var r=Math.pow(10,n);return Math.round(r*t)/r};var i=function e(n){return r(t.screenModel.size(n)/2,4)};var a=o.d3_animationInterceptor;var u=function e(n,r,i){var o=t.config.guide.animationSpeed;var s=n.selectAll("."+r).data(function(e){return[e]},t.screenModel.id);s.exit().call(a(o,null,{width:0},function(e){return l.default.select(e).remove()}));s.call(a(o,null,i));s.enter().append("rect").style("stroke-width",0).call(a(o,{width:0},i))};var c=this.config.flip;var d=c?"y":"x";var h=c?"x":"y";var p=c?"x0":"y0";var v=c?"height":"width";var m=c?"width":"height";var g=function e(){var n,r,a;u(this,"lvl-top",(n={},f(n,v,function(e){return i(e)}),f(n,m,1),f(n,d,function(e){return t.screenModel[d](e)-i(e)/2}),f(n,h,function(e){return t.screenModel[h](e)}),f(n,"fill",function e(n){return t.screenModel.color(n)}),f(n,"class",function e(n){return"lvl-top "+t.screenModel.class(n)}),n));u(this,"lvl-btm",(r={},f(r,v,function(e){return i(e)}),f(r,m,1),f(r,d,function(e){return t.screenModel[d](e)-i(e)/2}),f(r,h,function(e){return t.screenModel[p](e)}),f(r,"fill",function e(n){return t.screenModel.color(n)}),f(r,"class",function e(n){return"lvl-btm "+t.screenModel.class(n)}),r));u(this,"lvl-link",(a={},f(a,v,.5),f(a,m,function(e){return Math.abs(t.screenModel[h](e)-t.screenModel[p](e))}),f(a,d,function(e){return t.screenModel[d](e)-.25}),f(a,h,function(e){return Math.min(t.screenModel[h](e),t.screenModel[p](e))}),f(a,"fill",function e(n){return t.screenModel.color(n)}),f(a,"class",function e(n){return"lvl-link "+t.screenModel.class(n)}),a))};var y=function e(){this.attr("class","frame-id-"+t.config.uid).call(function(){var e=this.selectAll(".generic").data(function(e){return e},t.screenModel.id);e.exit().remove();e.call(g);e.enter().append("g").attr("class","generic").call(g)})};var b=s.utils.groupBy(this.data(),t.screenModel.group);var x=Object.keys(b).sort(function(e,n){return t.screenModel.order(e)-t.screenModel.order(n)}).reduce(function(e,t){return e.concat([b[t]])},[]);var w=n.container.selectAll(".frame-id-"+t.config.uid).data(x);w.exit().remove();w.call(y);w.enter().append("g").call(y)}}]);return t}(i.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Element=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(6);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.Element=function(e){f(t,e);function t(e){l(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.screenModel=null;n._elementNameSpace=e.namespace||"default";n._elementScalesHub={};return n}r(t,[{key:"regScale",value:function e(t,n){this._elementScalesHub[t]=n;return this}},{key:"getScale",value:function e(t){return this._elementScalesHub[t]||null}},{key:"fireNameSpaceEvent",value:function e(t,n){var r=this._elementNameSpace;this.fire(t+"."+r,n)}},{key:"subscribe",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(e){return e};var i=this;var o={};[{event:"mouseover",limit:0},{event:"mouseout",limit:0},{event:"click",limit:0},{event:"mousemove",limit:"requestAnimationFrame"}].forEach(function(e){var u=e.event;var l=e.limit;var c=function e(t){var a={data:n.call(this,t),event:r.call(this,s.default.event,t)};i.fire(u,a);i.fireNameSpaceEvent(u,a)};t.on(u,a.utils.throttleLastEvent(o,u,c,l))})}},{key:"allocateRect",value:function e(){return{left:0,top:0,width:0,height:0}}},{key:"defineGrammarModel",value:function e(t){return{}}},{key:"getGrammarRules",value:function e(){return[]}},{key:"getAdjustScalesRules",value:function e(){return[]}},{key:"createScreenModel",value:function e(t){}},{key:"getClosestElement",value:function e(t,n){return null}},{key:"addInteraction",value:function e(){}},{key:"draw",value:function e(){this.config.options.container=this.config.options.slot(this.config.uid);this.drawFrames(this.config.frames)}},{key:"data",value:function e(){return this.config.frames.reduce(function(e,t){return e.concat(t.part())},[])}},{key:"node",value:function e(){return this}}]);return t}(i.Emitter)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i={};var a={};function o(e){var t=a[e];if(!t){t=function t(){var n=this;var r;var i;var a=0;var o=[];while(n=n.handler){i=n.callbacks[e];if(typeof i==="function"){if(!r){r=[this];for(a=0;a<arguments.length;a++){r.push(arguments[a])}}o.unshift({fn:i,context:n.context,args:r})}i=n.callbacks["*"];if(typeof i==="function"){if(!r){r=[this];for(a=0;a<arguments.length;a++){r.push(arguments[a])}}o.unshift({fn:i,context:n.context,args:[{sender:this,type:e,args:r}]})}}o.forEach(function(e){return e.fn.apply(e.context,e.args)})};a[e]=t}return t}var s=function(){function e(){r(this,e);this.handler=null;this.emit_destroy=o("destroy")}n(e,[{key:"addHandler",value:function e(t,n){n=n||this;this.handler={callbacks:t,context:n,handler:this.handler}}},{key:"on",value:function e(t,n,r){var i={};i[t]=n;this.addHandler(i,r);return i}},{key:"fire",value:function e(t,n){o.call(this,t).call(this,n)}},{key:"removeHandler",value:function e(t,n){var r=this;var a;n=n||this;while(a=r,r=r.handler){if(r.callbacks===t&&r.context===n){r.callbacks=i;a.handler=r.handler;return}}}},{key:"destroy",value:function e(){this.emit_destroy();this.handler=null}}]);return e}();t.Emitter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GrammarRegistry=undefined;var r=n(3);var i=n(8);function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var o={};var s={get:function e(t){return o[t]},reg:function e(t,n){o[t]=n;return this}};s.reg("identity",function(){return{}}).reg("flip",function(e){var t=e.scaleY;var n=e.scaleX;var r=-.5;var i=n.domain();var o=n.discrete?i[0]:Math.max(0,Math.min.apply(Math,a(i)));var s=n.value(o)+n.stepSize(o)*r;return{flip:true,scaleX:t,scaleY:n,xi:function e(n){return t.value(n[t.dim])},yi:function e(t){return n.value(t[n.dim])},y0:function e(){return s}}}).reg("positioningByColor",function(e){var t=e.scaleX.discrete?function(e){var t=e.data();var n=t.reduce(function(t,n){var r=n[e.scaleX.dim];var i=n[e.scaleColor.dim];if(!(r in t)){t[r]=[]}if(t[r].indexOf(i)<0){t[r].push(i)}return t},{});var r=e.scaleX;var i=e.scaleColor;var a=i.discrete?i.domain():i.originalSeries().sort(function(e,t){return e-t});var o=a.length||1;var s=function e(t){return r.stepSize(t[r.dim])*(o/(1+o))};return{xi:function t(r){var i=r[e.scaleX.dim];var a=n[i]||[r[e.scaleColor.dim]];var u=a.length;var l=a.indexOf(r[e.scaleColor.dim]);var c=s(r);var f=c/(o+1);var d=e.xi(r)-(u+1)*f/2;var h=(1+l)*f;return d+h}}}:function(){return{}};return t(e)}).reg("groupOrderByAvg",function(e){var t=e.data();var n=function t(n){return n.map(e.yi).reduce(function(e,t){return e+t},0)/n.length};var r=t.reduce(function(t,n){var r=e.group(n);t[r]=t[r]||[];t[r].push(n);return t},{});var i=Object.keys(r).map(function(e){return[e,n(r[e])]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]});return{order:function e(t){var n=i.indexOf(t);return n<0?Number.MAX_VALUE:n}}}).reg("stack",function(e){var t=e.data();var n=e.scaleX;var a=e.scaleY;if(a.discrete||a.domain().some(function(e){return typeof e!=="number"})){throw new i.TauChartError("Stacked field ["+a.dim+"] should be a number",i.errorCodes.STACKED_FIELD_NOT_NUMBER,{field:a.dim})}var o=function e(t){return function(e){var r=e[n.dim];var i=e[a.dim];var o=i>=0?t.positive:t.negative;var s=o[r]||0;var u=s+i;o[r]=u;return{nextStack:u,prevStack:s}}};var s=o({positive:{},negative:{}});var u=o({positive:{},negative:{}});var l=function t(n){return r.utils.memoize(n,e.id)};var c=Number.MAX_VALUE;var f=Number.MIN_VALUE;var d=function e(t){c=t<c?t:c;f=t>f?t:f;return a.value(t)};var h=l(function(e){return d(s(e).nextStack)});var p=l(function(e){return d(u(e).prevStack)});var v=function t(n){return e.group(n)+"/"+(n[a.dim]>=0?1:-1)};var m=r.utils.groupBy(t,v);var g=Object.keys(m).sort(function(t,n){return e.order(t)-e.order(n)}).reduce(function(e,t){return e.concat(m[t])},[]);g.forEach(function(e){h(e);p(e)});a.fixup(function(e){var t={};if(!e.hasOwnProperty("max")||e.max<f){t.max=f}if(!e.hasOwnProperty("min")||e.min>c){t.min=c}return t});return{group:v,data:function e(){return g},yi:h,y0:p}}).reg("size_distribute_evenly",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o=e.data();var s=function e(t,n){return t-n};var u=e.scaleX.discrete?e.scaleX.stepSize()/2:Number.MAX_VALUE;var l=o.map(function(t){return e.xi(t)}).sort(s);var c=l[0];var f=l.slice(1).map(function(e){var t=e-c;c=e;return t}).filter(function(e){return e>0}).sort(s).concat(Number.MAX_VALUE)[0];var d=Math.min(f,u);var h=typeof n==="number"?n:i;var p={minSize:h,maxSize:typeof r==="number"?r:Math.max(h,Math.min(a,d))};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=p.minSize;t.maxSize=p.maxSize}else{if(e.maxSize>p.maxSize){t.maxSize=p.maxSize}}return t});return{}}).reg("adjustStaticSizeScale",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o={minSize:typeof n==="number"?n:i,maxSize:typeof r==="number"?r:a};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=o.minSize;t.maxSize=o.maxSize}return t});return{}}).reg("adjustSigmaSizeScale",function(e,t){var n=t.minLimit,r=t.maxLimit,i=t.defMin,a=t.defMax;var o=e.data();var s=function e(t,n){return t-n};var u=o.map(function(t){return e.xi(t)}).sort(s);var l=u[0];var c=u.slice(1).map(function(e){var t=e-l;l=e;return t}).filter(function(e){return e>0}).sort(s).concat(Number.MAX_VALUE)[0];var f=e.scaleX.discrete?e.scaleX.stepSize()/2:Number.MAX_VALUE;var d=Math.min(c,f);var h=typeof n==="number"?n:i;var p=typeof r==="number"?r:a;var v=function e(t){var n=(h+p)/2;var r=p;var i=h;var a=.5;return Math.round(n+(r-n)/(1+Math.exp(-(t-i)/a)))};var m={minSize:h,maxSize:Math.max(h,Math.min(p,v(d)))};e.scaleSize.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.minSize=m.minSize;t.maxSize=m.maxSize}else{if(e.maxSize>m.maxSize){t.maxSize=m.maxSize}}return t});return{}}).reg("avoidScalesOverflow",function(e,t){var n=t.sizeDirection;var r=function e(t,r){return!t||t.discrete||t.scaleType==="logarithmic"||n.indexOf(r)<0};var i=r(e.scaleX,"x");var a=r(e.scaleY,"y");if(i&&a){return{}}var o;var s;e.scaleSize.fixup(function(e){o=e.minSize;s=e.maxSize;return e});var u=e.data().reduce(function(t,n){var r=e.size(n);var u=(r>=o?r:o+r*(s-o))/2;var l,c;if(!i){l=e.xi(n);t.left=Math.min(t.left,l-u);t.right=Math.max(t.right,l+u)}if(!a){c=e.yi(n);t.top=Math.min(t.top,c-u);t.bottom=Math.max(t.bottom,c+u)}return t},{top:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,left:Number.MAX_VALUE});var l=function t(n,r,i,a){var o=n.domain();var s=Math.abs(n.value(o[1])-n.value(o[0]));var u=(o[1]-o[0])/s;var l=Math.max(0,-r);var c=Math.max(0,i-s);var f=e.flip?c:l;var d=e.flip?l:c;var h=Number(o[0])-(a?d:f)*u;var p=Number(o[1])+(a?f:d)*u;n.fixup(function(e){var t={};if(!e.fixed){t.fixed=true;t.min=h;t.max=p;t.nice=false}else{t.min=e.min>h?t.min:e.min;t.max=e.max<p?t.max:e.max}return t});return s/(f+s+d)};var c=i?1:l(e.scaleX,u.left,u.right,false);var f=a?1:l(e.scaleY,u.top,u.bottom,true);var d=Math.min(o*c,o*f);var h=Math.min(s*c,s*f);e.scaleSize.fixup(function(){return{minSize:d,maxSize:h}});return{}});t.GrammarRegistry=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function i(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var a=function(e){i(t,e);function t(e,i,a){n(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.name="TauChartError";o.message=e;o.errorCode=i;o.errorArgs=a;return o}return t}(Error);var o={STACKED_FIELD_NOT_NUMBER:"STACKED_FIELD_NOT_NUMBER",NO_DATA:"NO_DATA",NOT_SUPPORTED_TYPE_CHART:"NOT_SUPPORTED_TYPE_CHART",UNKNOWN_UNIT_TYPE:"UNKNOWN_UNIT_TYPE",INVALID_LOG_DOMAIN:"INVALID_LOG_DOMAIN"};t.TauChartError=a;t.errorCodes=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cutText=t.wrapText=t.d3_selectAllImmediate=t.d3_transition=t.d3_decorator_avoidLabelsCollisions=t.d3_decorator_prettify_categorical_axis_ticks=t.d3_decorator_highlightZeroTick=t.d3_decorator_fixEdgeAxisTicksOverflow=t.d3_decorator_fixHorizontalAxisTicksOverflow=t.d3_decorator_fix_axis_start_line=t.d3_decorator_prettify_axis_label=t.d3_decorator_wrap_tick_label=t.d3_createPathTween=t.d3_animationInterceptor=undefined;var r=n(3);var i=n(1);var a=n(10);var o=n(2);var s=f(o);var u=n(11);var l=f(u);var c=n(13);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var p=function e(){return r.utils.memoize(function(e){return e.node().getComputedTextLength()},function(e){return e.node().textContent.length})};var v=function e(t,n,r){r=r||p();t.each(function(){var e=s.default.select(this.parentNode);var t=e.data()[0];var i=n(t);var a=s.default.select(this);var o=a.text().split(/\s+/);var u=false;var l=o.reduce(function(e,t,n){if(u){return e}var o=n>0?[e,t].join(" "):t;var s=r(a.text(o));if(s<i){e=o}else{var l=Math.floor(i/s*o.length);e=o.substr(0,l-4)+"...";u=true}return e},"");a.text(l)})};var m=function e(t,n,r,i,a,o){o=o||p();var u=function e(t,n,r,i,a,o,s){var u=s*r+o;return t.append("tspan").attr("x",i).attr("y",a).attr("dy",u+"em").text(n)};t.each(function(){var e=s.default.select(this.parentNode);var t=e.data()[0];var l=n(t);var c=s.default.select(this),f=c.text().split(/\s+/),d=1.1,h=c.attr("x"),p=c.attr("y"),v=parseFloat(c.attr("dy"));c.text(null);var m=u(c,null,d,h,p,v,0);var g=false;var y=f.length-1;var b=f.reduce(function(e,t,n){if(g){return e}var i=e.length===r||n===y;var a=e[e.length-1];var s=a!==""?a+" "+t:t;var u=o(m.text(s));var c=u>l;if(c&&i){var f=Math.floor(l/u*s.length);e[e.length-1]=s.substr(0,f-4)+"...";g=true}if(c&&!i){e.push(t)}if(!c){e[e.length-1]=s}return e},[""]).filter(function(e){return e.length>0});p=a?-1*(b.length-1)*Math.floor(i*.5):p;b.forEach(function(e,t){return u(c,e,d,h,p,v,t)});m.remove()})};var g=function e(t,n,r,i){t.selectAll(".tick").each(function(e){if(n(e)){var t=s.default.select(this);var a=function t(i){var a;var o=n(e);var s=r?o:0;var u=r?0:o;i.attr("transform","translate("+s+","+u+")");var l=n.stepSize(e)*.5;var c=r?"x":"y";var f=r?l:-l;i.select("line").attr((a={},h(a,c+"1",f),h(a,c+"2",f),a))};if(!t.classed("tau-enter")){t.call(a);t.classed("tau-enter",true)}T(t,i).call(a)}})};var y=function e(t,n){var r=n.length&&n[0]instanceof Date;if(r){n=n.map(function(e){return Number(e)})}var i=t.selectAll(".tick").filter(function(e){return n.indexOf(r?Number(e):e)>=0})[0];if(i.length<2){return}var a=parseFloat(i[0].attributes.transform.value.replace("translate(",""));var o=parseFloat(i[1].attributes.transform.value.replace("translate(",""));var s=o-a;var u=0;var l=-1;var c=t.selectAll(".tick text").filter(function(e){return n.indexOf(r?Number(e):e)>=0})[0];c.forEach(function(e,t){var n=e.textContent||"";var r=n.length;if(r>u){u=r;l=t}});var f=false;if(l>=0){var d=c[l].getBoundingClientRect();f=s-d.width<8}t.classed({"graphical-report__d3-time-overflown":f})};var b=function e(t,n){n=n.map(function(e){return Number(e)});var r=t.selectAll(".tick text").filter(function(e){return n.indexOf(Number(e))>=0})[0];if(r.length===0){return}var i=t.node();while(i&&i.tagName!=="svg"){i=i.parentNode}var a=i.getBoundingClientRect();r.forEach(function(e){var t=s.default.select(e);t.attr("dx",0)});var o=function e(t,n){var r=s.default.select(t);var i=t.getBoundingClientRect();var o=n>0?"right":"left";var u=n*(i[o]-a[o]);r.attr("dx",u>0?-n*u:0)};o(r[0],-1);o(r[r.length-1],1)};var x=function e(t,n,r,o,s){var u=function e(t){t.attr("transform",a.utilsDraw.translate(0,n?o:0));return t};var l=function e(t){if(n){t.attr("x2",r)}else{t.attr("y2",o)}return t};var c="tau-extra"+(n?"Y":"X")+"Tick";var f=i.utilsDom.selectOrAppend(t,"g."+c);var d=i.utilsDom.selectOrAppend(f,"line");if(!f.node().hasAttribute("opacity")){f.attr("opacity",1e-6)}T(f,s).call(u);T(d,s).call(l)};var w=function e(t,n,r,o,s){var u=r?1:-1;var l=i.utilsDom.selectOrAppend(t,"text.label").attr("class",i.utilsDom.classes("label",n.cssClass)).attr("transform",a.utilsDraw.rotate(n.rotate));var c=T(l,s).attr("x",u*n.size*.5).attr("y",u*n.padding).style("text-anchor",n.textAnchor);var f=" ‚Üí ";var d=function(e){var t=[];for(var n=0;n<e.length-1;n++){t.push(e[n],f)}t.push(e[n]);return t}(n.text.split(f));var h=l.selectAll("tspan").data(d);h.enter().append("tspan").attr("class",function(e,t){return t%2?"label-token-delimiter label-token-delimiter-"+t:"label-token label-token-"+t}).text(function(e){return e});h.exit().remove();if(["left","right"].indexOf(n.dock)>=0){var p={left:[-o,0],right:[0,o]};c.attr("x",p[n.dock][Number(r)])}};var _=function e(t,n,i,o,s){var u=r.utils.normalizeAngle(i.rotate);var l=t.selectAll(".tick text").attr("transform",a.utilsDraw.rotate(u)).style("text-anchor",i.textAnchor);var c=Math.abs(u/90);if(c%2>0){var f=u<180?1:-1;var d=o?.5:-2;var h=i.scaleOrient==="top"||i.scaleOrient==="left"?-1:1;var g=d*(i.scaleOrient==="bottom"||i.scaleOrient==="top"?h<0?0:.71:.32);var y=t.selectAll(".tick text");var b={x:9*f,y:0,dx:o?null:g+"em",dy:g+"em"};y.transition();y.attr(b);T(y,n,"axisTransition").attr(b)}var x=function e(t){return Math.max(s.stepSize(t),i.tickFormatWordWrapLimit)};if(i.tickFormatWordWrap){l.call(m,x,i.tickFormatWordWrapLines,i.tickFontHeight,!o)}else{l.call(v,x,p())}};var k=function e(t,n,r){var a=r.length&&r[0]instanceof Date;if(a){r=r.map(function(e){return Number(e)})}var o=11;var u=n?-10:20;var l=n?0:1;var c=n?1:-1;var f=[];t.selectAll(".tick").filter(function(e){return r.indexOf(a?Number(e):e)>=0}).each(function(){var e=s.default.select(this);var t=e.attr("transform").replace("translate(","").replace(" ",",").split(",")[l];var n=c*parseFloat(t);var r=e.selectAll("text");var i=r.node().getBBox().width;var a=i/2;var o=n-a;var u=n+a;f.push({c:n,s:o,e:u,l:0,textRef:r,tickRef:e})});var d=function e(t,n){return t.map(function(e,t,r){return n(r[t-1]||{e:-Infinity,s:-Infinity,l:0},e,r[t+1]||{e:Infinity,s:Infinity,l:0})})};var h=function e(t,n){var r={"[T][1]":-1,"[T][-1]":0,"[T][0]":1,"[F][0]":-1};var i="["+n.toString().toUpperCase().charAt(0)+"]["+t+"]";return r.hasOwnProperty(i)?r[i]:0};var p=f.sort(function(e,t){return e.c-t.c});d(p,function(e,t,r){var a=e.e>t.s;var s=r.s<t.e;if(a||s){t.l=h(e.l,a);var l=t.textRef[0].length;var c=t.textRef.text();if(l>1){c=c.replace(/([\.]*$)/gi,"")+"..."}var f=t.l*o;var d=parseFloat(t.textRef.attr("y"))+f;var p=n?0:f;var v=n?f:0;var m=function(e){var t=0;if(!e){return t}var n=e.indexOf("rotate(");if(n>=0){var r=e.indexOf(")",n+7);var i=e.substring(n+7,r);t=parseFloat(i.trim())}return t}(t.textRef.attr("transform"));t.textRef.text(function(e,t){return t===0?c:""}).attr("transform","translate("+p+","+v+") rotate("+m+")");var g={x1:0,x2:0,y1:d+(n?-1:5),y2:u};if(!n){g.transform="rotate(-90)"}i.utilsDom.selectOrAppend(t.tickRef,"line.label-ref").attr(g)}else{t.tickRef.selectAll("line.label-ref").remove()}return t})};var C=function e(t,n){var r=n.ticks();var i=n.domain();var a=r.length-1;var o=r.length>1&&i[0]*i[1]<0&&-i[0]>(r[1]-r[0])/2&&i[1]>(r[a]-r[a-1])/2;t.selectAll(".tick").classed("zero-tick",function(e){return e===0&&o})};var T=function e(t,n,r){if(n>0){t=t.transition(r).duration(n);t.attr=S}t.onTransitionEnd=function(e){P(this,e);return this};return t};var S=function e(t,n){var r=s.default.transition.prototype.attr.apply(this,arguments);if(arguments.length===0){throw new Error("Unexpected `transition().attr()` arguments.")}var i;if(arguments.length===1){i=t}else if(arguments.length>1){i=h({},t,n)}var a="__transitionAttrs__";var o="__lastTransitions__";var u=A();this.each(function(){var e=this;var t={};for(var n in i){if(typeof i[n]==="function"){t[n]=i[n].apply(this,arguments)}else{t[n]=i[n]}}this[a]=Object.assign(this[a]||{},t);if(!this[a][o]){Object.defineProperty(this[a],o,{value:{}})}Object.keys(t).forEach(function(t){return e[a][o][t]=u})});var l=function e(){var t=this;if(this[a]){Object.keys(i).filter(function(e){return t[a][o][e]===u}).forEach(function(e){return delete t[a][e]});if(Object.keys(this[a]).length===0){delete this[a]}}};this.each("interrupt."+u,l);this.each("end."+u,l);return r};var E=0;var A=function e(){return++E};var P=function e(t,n){if(!s.default.transition.prototype.isPrototypeOf(t)||t.empty()){n.call(null,t);return}var r=t.size();var i=function e(){r--;if(r===0){n.call(null,t)}};t.each("interrupt.d3_on_transition_end",i);t.each("end.d3_on_transition_end",i);return t};var O=function e(t,n,i,a){var o=a||function(e){return e};var s=function e(){o(this)};return function(){var e=this;if(n){e=e.attr(r.utils.defaults(n,i))}e=T(e,t);e=e.attr(i);if(t>0){e.each("end.d3_animationInterceptor",s)}else{e.each(s)}return e}};var M=function e(t,n){var r=t.node();return t.selectAll(n).filter(function(){return this.parentNode===r})};var N=function e(t,n,i,a){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"linear";var s="__pathPoints__";return function(e){var t=this;if(!this[s]){this[s]=i.map(function(){return[]})}var u=i.map(function(n,i){var u=r.utils.unique(e,a).map(n);var f=c.getLineInterpolator(o)||c.getLineInterpolator("linear");var d=f(u);var h=t[s][i];var p=l.default(h,d,c.getInterpolatorSplineType(o));return{pointsFrom:h,pointsTo:d,interpolate:p}});return function(e){if(e===0){var r=u.map(function(e){return e.pointsFrom});return n.apply(undefined,d(r))}if(e===1){var i=u.map(function(e){return e.pointsTo});t[s]=i;return n.apply(undefined,d(i))}var a=u.map(function(t){return t.interpolate(e)});t[s]=a;return n.apply(undefined,d(a))}}};t.d3_animationInterceptor=O;t.d3_createPathTween=N;t.d3_decorator_wrap_tick_label=_;t.d3_decorator_prettify_axis_label=w;t.d3_decorator_fix_axis_start_line=x;t.d3_decorator_fixHorizontalAxisTicksOverflow=y;t.d3_decorator_fixEdgeAxisTicksOverflow=b;t.d3_decorator_highlightZeroTick=C;t.d3_decorator_prettify_categorical_axis_ticks=g;t.d3_decorator_avoidLabelsCollisions=k;t.d3_transition=T;t.d3_selectAllImmediate=M;t.wrapText=m;t.cutText=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.utilsDraw=undefined;var r=n(2);var i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var o={translate:function e(t,n){return"translate("+t+","+n+")"},rotate:function e(t){return"rotate("+t+")"},getOrientation:function e(t){return["bottom","top"].indexOf(t.toLowerCase())>=0?"h":"v"},isIntersect:function e(t,n,r,i,a,o,s,u){var l,c,f,d;l=r-t;c=i-n;f=s-a;d=u-o;var h,p;h=(-c*(t-a)+l*(n-o))/(-f*c+l*d);p=(f*(n-o)-d*(t-a))/(-f*c+l*d);return h>=0&&h<=1&&p>=0&&p<=1},getDeepTransformTranslate:function e(t){var n=function e(t){var n={x:0,y:0};var r=t.indexOf("translate(");if(r>=0){var i=t.indexOf(")",r+10);var a=t.substring(r+10,i);var o=a.trim().replace(","," ").replace(/\s+/," ").split(" ");n.x=parseFloat(o[0]);if(o.length>1){n.y=parseFloat(o[1])}}return n};var r={x:0,y:0};var i=t;var a,o;while(i&&i.nodeName.toUpperCase()!=="SVG"){o=i.getAttribute("transform");if(o){a=n(o);r.x+=a.x;r.y+=a.y}i=i.parentNode}return r},raiseElements:function e(t,n,r){var a=t.selectAll(n).filter(r);if(a.empty()){return}var o=i.default.select(a.node().parentNode).selectAll(n).filter(function(e){return!r(e)})[0];var s=o[o.length-1];if(s){var u=Array.prototype.indexOf.call(s.parentNode.childNodes,s);var l=s.nextSibling;a.each(function(){var e=Array.prototype.indexOf.call(this.parentNode.childNodes,this);if(e>u){return}this.parentNode.insertBefore(this,l)})}}};t.utilsDraw=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();t.default=o;var i=n(3);var a=n(12);function o(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"polyline";var r;return function(i){if(i===0){return e}if(i===1){return t}if(!r){r=(n==="cubic"?u:s)(e,t)}return r(i)}}function s(e,t){e=e.filter(function(e){return!e.isInterpolated});var n=e.map(function(e){return e.id});var r=t.map(function(e){return e.id});var i=n.filter(function(e){return r.indexOf(e)>=0});var a=e.filter(function(e){return!e.positionIsBeingChanged});var o=t.filter(function(e){return!e.positionIsBeingChanged});var s=_(a,o);var u=_(o,a);var d=[];i.forEach(function(a,o){var h=n.indexOf(a);var p=r.indexOf(a);if(o===0&&(h>0||p>0)){d.push(l({polylineFrom:e.slice(0,h+1),polylineTo:t.slice(0,p+1),toOppositeScale:p===0?s:u}))}if(o>0){var v=n.indexOf(i[o-1]);var m=r.indexOf(i[o-1]);if(h-v>1||p-m>1){d.push(c({polylineFrom:e.slice(v,h+1),polylineTo:t.slice(m,p+1)}))}}d.push(f({pointFrom:e[h],pointTo:t[p]}));if(o===i.length-1&&(e.length-h-1>0||t.length-p-1>0)){d.push(l({polylineFrom:e.slice(h),polylineTo:t.slice(p),toOppositeScale:t.length-p===1?s:u}))}});if(d.length===0&&(t.length>0&&i.length===0||e.length>0&&i.length===0)){d.push(h({polylineFrom:e.slice(0),polylineTo:t.slice(0)}))}return function(e){var t=[];d.forEach(function(n){var r=n(e);p(t,r)});return t}}function u(e,t){for(var n=2;n<e.length-1;n+=3){e[n-1].isCubicControl=true;e[n].isCubicControl=true}for(n=2;n<t.length-1;n+=3){t[n-1].isCubicControl=true;t[n].isCubicControl=true}e=e.filter(function(e){return!e.isInterpolated});var r,i;for(n=e.length-2;n>=0;n--){i=e[n+1];r=e[n];if(!r.isCubicControl&&!i.isCubicControl){e.splice(n+1,0,a.getBezierPoint(1/3,i,r),a.getBezierPoint(2/3,i,r));e[n+1].isCubicControl=true;e[n+2].isCubicControl=true}}var o=e.filter(function(e,t){return t%3===0});var s=t.filter(function(e,t){return t%3===0});var u=o.map(function(e){return e.id});var v=s.map(function(e){return e.id});var m=u.reduce(function(t,n){return t[n]=e.findIndex(function(e){return e.id===n}),t},{});var g=v.reduce(function(e,n){return e[n]=t.findIndex(function(e){return e.id===n}),e},{});var y=u.filter(function(e){return v.indexOf(e)>=0});var b=o.filter(function(e){return!e.positionIsBeingChanged});var x=s.filter(function(e){return!e.positionIsBeingChanged});var w=_(b,x);var k=_(x,b);var C=[];y.forEach(function(n,r){var i=m[n];var a=g[n];if(r===0&&(i>0||a>0)){C.push(l({polylineFrom:e.slice(0,i+1),polylineTo:t.slice(0,a+1),toOppositeScale:a===0?w:k,isCubic:true}))}if(r>0){var o=m[y[r-1]];var s=g[y[r-1]];if(i-o>3||a-s>3){C.push(c({polylineFrom:e.slice(o,i+1),polylineTo:t.slice(s,a+1),isCubic:true}))}else{C.push(d({polylineFrom:e.slice(o,i+1),polylineTo:t.slice(s,a+1)}))}}C.push(f({pointFrom:e[i],pointTo:t[a]}));if(r===y.length-1&&(e.length-i-1>0||t.length-a-1>0)){C.push(l({polylineFrom:e.slice(i),polylineTo:t.slice(a),toOppositeScale:t.length-a===1?w:k,isCubic:true}))}});if(C.length===0&&(t.length>0&&y.length===0||e.length>0&&y.length===0)){C.push(h({polylineFrom:e.slice(0),polylineTo:t.slice(0),isCubic:true}))}return function(e){var t=[];C.forEach(function(n){var r=n(e);p(t,r)});return t}}function l(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic,i=e.toOppositeScale;var a=t.length>n.length?t:n;var o=n.length===1;var s=t[0].id!==n[0].id;var u=Boolean(s^o);return function(e){var t=(r?b:y)({t:e,polyline:a,decreasing:o,rightToLeft:u});if(o===u){t.shift()}else{t.pop()}var n=t.map(i);var s=g(n,t,o?1-e:e);s.forEach(function(e){return e.positionIsBeingChanged=true});return s}}function c(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic;var i=t.length;var a=n.length;if(a!==i){var o=a<i;var s=o?n:t;var u=o?t:n;var l=(r?w:x)({smallerPolyline:s,biggerPolyline:u,decreasing:o});var c=u.slice(1,u.length-1);var f=l.slice(1,l.length-1);return function(e){var t=g(f,c,o?1-e:e);t.forEach(function(e){return e.positionIsBeingChanged=true});return t}}else{var d=t.slice(1,t.length-1);var h=n.slice(1,n.length-1);return function(e){var t=g(d,h,e);t.forEach(function(e){return e.positionIsBeingChanged=true});return t}}}function f(e){var t=e.pointFrom,n=e.pointTo;return function(e){return[m(t,n,e)]}}function d(e){var t=e.polylineFrom,n=e.polylineTo;return function(e){return g(t.slice(1,3),n.slice(1,3),e)}}function h(e){var t=e.polylineFrom,n=e.polylineTo,r=e.isCubic;var i=n.length===0;var a=i;var o=i?t:n;return function(e){var t=(r?b:y)({t:e,polyline:o,decreasing:i,rightToLeft:a});t.forEach(function(e,t){if(t>0){e.positionIsBeingChanged=true}});return t}}function p(e,t){return Array.prototype.push.apply(e,t)}function v(e,t,n){if(t===undefined){return e}if(typeof t==="number"){return e+n*(t-e)}return t}function m(e,t,n){if(e===t){return t}var r={};var i=Object.keys(e);i.forEach(function(i){return r[i]=v(e[i],t[i],n)});if(t.id!==undefined){r.id=t.id}return r}function g(e,t,n){var r=e.map(function(e,r){return m(e,t[r],n)});return r}function y(e){var t=e.t,n=e.polyline,r=e.decreasing,a=e.rightToLeft;var o=Boolean(r)!==Boolean(a);var s=function e(t,n){var r=0;if(t>0){var a=[0];var o=0;for(var s=1,u,l,c,f,d;s<n.length;s++){c=n[s-1].x;f=n[s-1].y;u=n[s].x;l=n[s].y;d=Math.sqrt((u-c)*(u-c)+(l-f)*(l-f));o+=d;a.push(o)}var h=t*o;for(s=1;s<a.length;s++){if(h<=a[s]){r=Math.min(1,(s-1+(h-a[s-1])/(a[s]-a[s-1]))/(n.length-1));break}}}var v=Math.floor((n.length-1)*r)+1;var g=n.length-v;var y=v;var b=n.slice(0,v);if(r<1){var x=r*(n.length-1)%1;var w=m(n[v-1],n[v],x);p(b,i.utils.range(g).map(function(e){return Object.assign({},w,{id:n[y+e].id,isInterpolated:true})}))}return b}(r?1-t:t,o?n.slice(0).reverse():n);if(o){s.reverse()}return s}function b(e){var t=e.t,n=e.polyline,r=e.decreasing,a=e.rightToLeft;var o=Boolean(r)!==Boolean(a);var s=function e(t,n){var r=(n.length-1)/3+1;var a=0;if(t>0){var o=[0];var s=0;for(var u=1,l,c,f,d,h,v,m,g,y;u<r;u++){f=n[u*3-3].x;d=n[u*3-3].y;h=n[u*3-2].x;v=n[u*3-2].y;m=n[u*3-1].x;g=n[u*3-1].y;l=n[u*3].x;c=n[u*3].y;y=(k(f,d,h,v)+k(h,v,m,g)+k(m,g,l,c)+k(l,c,f,d))/2;s+=y;o.push(s)}var b=t*s;for(u=1;u<o.length;u++){if(b<=o[u]){a=Math.min(1,(u-1+(b-o[u-1])/(o[u]-o[u-1]))/(r-1));break}}}var x=Math.floor((r-1)*a)+1;var w=r-x;var _=x*3;var T=n.slice(0,(x-1)*3+1);if(a<1){var S=a*(r-1)%1;var E=C(S,n.slice((x-1)*3,x*3+1));var A=E.slice(1,4);A.forEach(function(e){return e.isInterpolated=true});A[2].id=n[_].id;p(T,A);i.utils.range(1,w).forEach(function(e){p(T,[{x:A[2].x,y:A[2].y,isCubicControl:true,isInterpolated:true},{x:A[2].x,y:A[2].y,isCubicControl:true,isInterpolated:true},Object.assign({},A[2],{id:n[_+e*3].id,isInterpolated:true})])})}return T}(r?1-t:t,o?n.slice(0).reverse():n);if(o){s.reverse()}return s}function x(e){var t=e.smallerPolyline,n=e.biggerPolyline,r=e.decreasing;var a=t.length-1;var o=n.length-1;var s=Math.floor(o/a)+1;var u=o%a;var l=i.utils.range(a).map(function(e){return s+Number(e<u)});var c=[t[0]];var f=1;l.forEach(function(e){i.utils.range(1,e).forEach(function(i){var a;if(i===e-1){a=Object.assign({},t[f]);if(!r){a.id=n[c.length].id}}else{a=m(t[f-1],t[f],i/(e-1));a.id=n[c.length].id;if(r){a.isInterpolated=true}}c.push(a)});f++});return c}function w(e){var t=e.smallerPolyline,n=e.biggerPolyline,r=e.decreasing;var a=(t.length-1)/3;var o=(n.length-1)/3;var s=Math.floor(o/a)+1;var u=o%a;var l=i.utils.range(a).map(function(e){return s+Number(e<u)});var c=[t[0]];var f=3;l.forEach(function(e){if(e>2){var a=T(i.utils.range(1,e-1).map(function(t){return t/(e-1)}),t.slice(f-3,f+1));i.utils.range(e-2).forEach(function(e){return a[(e+1)*3].id=n[c.length-1+e*3].id});if(r){a.forEach(function(e,t){if(t>0&&t<a.length-1){e.isInterpolated=true}})}p(c,a.slice(1))}else{var o=Object.assign({},t[f-2]);var s=Object.assign({},t[f-1]);var u=Object.assign({},t[f]);if(!r){u.id=n[c.length+2].id}c.push(o,s,u)}f+=3});return c}function _(e,t){var n=[];var r=[];var i,a,o,s,u=0;var l=e.length;var c=t.length;for(i=0;i<l;i++){o=e[i];for(a=u;a<c;a++){s=t[a];if(o.id===s.id){u=a+1;n.push(o);r.push(s);break}}}if(n.length<1||r.length<1){return function(e){return e}}var f=Object.keys(n[0]).filter(function(e){return typeof n[0][e]==="number"}).filter(function(e){return e!=="id"});var d={};var h=function e(t,n,r,i){return function(e){return i+(e-n)*(i-r)/(n-t)}};var p=function e(t,n){return function(e){return e-t+n}};f.forEach(function(e){var t=n[0][e];var i=r[0][e];for(var a=n.length-1,o,s;a>0;a--){o=n[a][e];if(o!==t){s=r[a][e];d[e]=h(t,o,i,s);return}}d[e]=p(t,i)});return function(e){var t=Object.assign({},e);f.forEach(function(n){t[n]=d[n](e[n])});return t}}function k(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function C(e,t){var n=r(t,4),i=n[0],o=n[1],s=n[2],u=n[3];var l=a.splitCubicSegment(e,i,o,s,u);[l[1],l[2],l[4],l[5]].forEach(function(e){return e.isCubicControl=true});Object.keys(u).forEach(function(t){if(t!=="x"&&t!=="y"&&t!=="id"){l[3][t]=v(i[t],u[t],e)}});return l}function T(e,t){var n=[t[0]];for(var r=0,i,a;r<e.length;r++){i=r===0?e[0]:e[r]/(1-e[r-1]);a=C(i,t);p(n,a.slice(1,4));t=a.slice(3)}p(n,t.slice(1));return n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bezier=r;t.getBezierPoint=i;t.splitCubicSegment=a;function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function r(e){if((arguments.length<=1?0:arguments.length-1)===2){return(arguments.length<=1?undefined:arguments[1])*(1-e)+(arguments.length<=2?undefined:arguments[2])*e}if((arguments.length<=1?0:arguments.length-1)===3){return(arguments.length<=1?undefined:arguments[1])*(1-e)*(1-e)+2*(arguments.length<=2?undefined:arguments[2])*(1-e)*e+(arguments.length<=3?undefined:arguments[3])*e*e}return(arguments.length<=1?undefined:arguments[1])*(1-e)*(1-e)*(1-e)+3*(arguments.length<=2?undefined:arguments[2])*(1-e)*(1-e)*e+3*(arguments.length<=3?undefined:arguments[3])*(1-e)*e*e+(arguments.length<=4?undefined:arguments[4])*e*e*e}function i(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++){i[a-1]=arguments[a]}var o=i.map(function(e){return e.x});var s=i.map(function(e){return e.y});o.unshift(e);s.unshift(e);return{x:r.apply(undefined,n(o)),y:r.apply(undefined,n(s))}}function a(e,t,n,r,a){var o=i(e,t,n);var s=i(e,t,n,r);var u=i(e,n,r,a);var l=i(e,r,a);var c=i(e,s,u);return[t,o,s,c,u,l,a]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLineInterpolator=s;t.getInterpolatorSplineType=u;var r=n(14);var i=n(15);var a={linear:function e(t){return t},step:i.getStepLine,"step-before":i.getStepBeforeLine,"step-after":i.getStepAfterLine};var o={smooth:r.getCurve,"smooth-keep-extremum":r.getCurveKeepingExtremums};function s(e){return a[e]||o[e]}function u(e){if(o[e]!==undefined){return"cubic"}return"polyline"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getCurve=i;t.getCurveKeepingExtremums=a;var r=n(12);function i(e){return o(e,false)}function a(e){return o(e,true)}function o(e,t){if(e.length<2){return e.slice(0)}if(e.length===2){return[e[0],{x:s(e[0].x,e[1].x,1/3),y:s(e[0].y,e[1].y,1/3)},{x:s(e[0].x,e[1].x,2/3),y:s(e[0].y,e[1].y,2/3)},e[1]]}var n=new Array((e.length-1)*3+1);var i,a,o,u,l,c,f,d,h,p,v,m,g,y;for(var b=0;b<e.length;b++){n[b*3]=e[b];if(b>0){n[b*3-2]=r.getBezierPoint(1/3,e[b-1],e[b]);n[b*3-1]=r.getBezierPoint(2/3,e[b-1],e[b])}}var x=n.slice(0);for(var w=0,_;w<3;w++){for(b=6;b<x.length;b+=3){i=x[b-5];a=x[b-3];o=x[b-1];if((a.x-i.x)*(o.x-a.x)*1e12<1){u=s(i.x,a.x,.5);c=s(a.x,o.x,.5);l=s(i.y,a.y,.5);f=s(a.y,o.y,.5)}else{p=(a.x-i.x)/(o.x-i.x);d=(a.x-i.x*(1-p)*(1-p)-o.x*p*p)/(2*(1-p)*p);h=(a.y-i.y*(1-p)*(1-p)-o.y*p*p)/(2*(1-p)*p);u=s(i.x,d,p);c=s(d,o.x,p);l=s(i.y,h,p);f=s(h,o.y,p);if(t){m=a.x-u;g=c-a.x;v=(f-a.y)/g;if((a.y-i.y)*(o.y-a.y)<=0){v=0}else{if(a.y>i.y===f>o.y){y=(o.y-a.y)/(f-a.y);g=s(g*y,g,1/(1+Math.abs(y)));v=(o.y-a.y)/g}if(a.y>i.y===l<i.y){y=(a.y-i.y)/(a.y-l);m=s(m*y,m,1/(1+Math.abs(y)));v=(a.y-i.y)/m}}u=a.x-m;c=a.x+g;l=a.y-v*m;f=a.y+v*g}}n[b-4]={x:u,y:l};n[b-2]={x:c,y:f}}n[1]={x:s(n[0].x,n[3].x,1/3),y:s(n[0].y,s(n[3].y,n[2].y,3/2),2/3)};_=n.length-1;n[_-1]={x:s(n[_].x,n[_-3].x,1/3),y:s(n[_].y,s(n[_-3].y,n[_-2].y,3/2),2/3)};x=n.slice(0)}return x}function s(e,t,n){return e+n*(t-e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getStepLine=n;t.getStepBeforeLine=r;t.getStepAfterLine=i;function n(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s,u;i<e.length;i++){a=e[i-1];o=e[i];s={x:(a.x+o.x)/2,y:a.y};u={x:(a.x+o.x)/2,y:o.y};if(n){s.id=a.id+"-"+o.id+"-1";u.id=a.id+"-"+o.id+"-2"}if(r){s.size=a.size;u.size=o.size}if(i===1){t.push(a)}t.push(s,u,o)}return t}function r(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s;i<e.length;i++){a=e[i-1];o=e[i];s={x:a.x,y:o.y};if(n){s.id=a.id+"-"+o.id}if(r){s.size=o.size}if(i===1){t.push(a)}t.push(s,o)}return t}function i(e){var t=[];var n=e[0].id!==undefined;var r=e[0].size!==undefined;for(var i=1,a,o,s;i<e.length;i++){a=e[i-1];o=e[i];s={x:o.x,y:a.y};if(n){s.id=a.id+"-"+o.id}if(r){s.size=a.size}if(i===1){t.push(a)}t.push(s,o)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GPL=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(6);var a=n(3);var o=n(17);var s=n(19);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=function e(t){return a.utils.isDate(t)?t.getTime():t};var h=function e(t){var n=this;Object.keys(t).forEach(function(e){return n[e]=t[e]})};var p=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.assign(new h(t),n)};var v=function e(t,n,r){return t.map(function(e){return typeof e==="string"?r.get(e):e}).filter(function(e){return e}).reduce(function(e,t){return p(e,t(e,{}))},n)};var m=t.GPL=function(e){f(t,e);function t(e,n,r,i){l(this,t);var o=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.utils.defaults(e.scales,{size_null:{type:"size",source:"?"},split_null:{type:"value",source:"?"},label_null:{type:"value",source:"?"},color_null:{type:"color",source:"?"},identity_null:{type:"identity",source:"?"},"size:default":{type:"size",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"},"label:default":{type:"value",source:"?"},"identity:default":{type:"identity",source:"?"}});e.settings=e.settings||{};o.config=e;o.sources=e.sources;o.scales=e.scales;o.unitSet=r;o.grammarRules=i;o.scalesHub=n;o.transformations=Object.assign(e.transformations||{},{where:function e(t,n){var r=Object.keys(n||{}).map(function(e){return function(t){return d(t[e])===n[e]}});return t.filter(function(e){return r.every(function(t){return t(e)})})}});return o}r(t,[{key:"unfoldStructure",value:function e(){this.root=this._expandUnitsStructure(this.config.unit);return this.config}},{key:"getDrawScenarioQueue",value:function e(t){var n=this;var r=this.grammarRules;var i=this._flattenDrawScenario(t,function(e,t,i){var a=t.expression.inherit===false?null:i;var o=n._createFrameScalesFactoryMethod(a);var s=n.unitSet.create(t.type,Object.assign({},t,{options:e.allocateRect(i.key)}));var u=new h(s.defineGrammarModel(o));var l=v(s.getGrammarRules(),u,r);v(s.getAdjustScalesRules(),l,r);s.node().screenModel=s.createScreenModel(l);return s});var a=function e(){Object.keys(n.scales).forEach(function(e){return n.scalesHub.createScaleInfo(n.scales[e]).commit()})};var o=this._flattenDrawScenario(t,function(e,t,i){var a=t.expression.inherit===false?null:i;var o=n._createFrameScalesFactoryMethod(a);var s=n.unitSet.create(t.type,Object.assign({},t,{options:e.allocateRect(i.key)}));var u=new h(s.defineGrammarModel(o));var l=v(s.getGrammarRules(),u,r);s.node().screenModel=s.createScreenModel(l);s.parentUnit=e;s.addInteraction();return s});return i.concat(a).concat(o)}},{key:"_flattenDrawScenario",value:function e(n,r){var i={};var o=[];var s=[n];var u=function e(t){return s.unshift(t)};var l=function e(){return s.shift()};var c=function e(){return s[0]};var f=t.traverseSpec({unit:this.root},function(e,t,n){e.uid=function(){var r=a.utils.generateHash((t?t.uid+"/":"")+JSON.stringify(Object.keys(e).filter(function(t){return typeof e[t]==="string"}).reduce(function(t,n){return t[n]=e[n],t},{}))+("-"+JSON.stringify(n.pipe)));if(r in i){r+="-"+ ++i[r]}else{i[r]=0}return r}();e.guide=a.utils.clone(e.guide);var s=r(c(),e,n);o.push(s);if(e.type.indexOf("COORDS.")===0){u(s)}},function(e){if(e.type.indexOf("COORDS.")===0){l()}},null,this._datify({source:this.root.expression.source,pipe:[]}));f.push(function(){return o});return f}},{key:"_expandUnitsStructure",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=this;if(t.expression.operator===false){t.frames=t.frames.map(function(e){return i._datify(e)})}else{var o=this._parseExpression(t.expression,r,t.guide);t.transformation=t.transformation||[];t.frames=o.exec().map(function(e){var n=o.inherit?r:[];var s=n.concat([{type:"where",args:e}]).concat(t.transformation);return i._datify({key:e,pipe:s,source:o.source,units:t.units?t.units.map(function(e){var t=a.utils.clone(e);t.guide=e.guide;return t}):[]})})}t.frames.forEach(function(e){return e.units.forEach(function(t){return n._expandUnitsStructure(t,e.pipe)})});return t}},{key:"_createFrameScalesFactoryMethod",value:function e(t){var n=this;return function(e,r,i){var a=r||e+":default";return n.scalesHub.createScaleInfo(n.scales[a],t).create(i)}}},{key:"_datify",value:function e(t){return new s.DataFrame(t,this.sources[t.source].data,this.transformations)}},{key:"_parseExpression",value:function e(t,n,r){var i=this;var a=t.operator||"none";var s=t.source;var l=t.inherit!==false;var c=t.params;var f={source:s,pipe:l?n:[]};var d=function e(){return i._datify(f).part()};var h=o.FramesAlgebra[a];if(!h){throw new Error(a+" operator is not supported")}return{source:s,inherit:l,func:h,args:c,exec:function e(){return h.apply(undefined,[d].concat(u(c||[]),[r]))}}}}],[{key:"traverseSpec",value:function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var o=[];var s=function e(t,n,r,i,a){o.push(function(){n(t,i,a)});if(t.frames){t.frames.forEach(function(i){(i.units||[]).map(function(a){return e(a,n,r,t,i)})})}o.push(function(){return r(t,i,a)})};s(t.unit,n,r,i,a);return o}}]);return t}(i.Emitter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FramesAlgebra=undefined;var r=n(3);var i=n(18);function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}var s=function e(t){return r.utils.isDate(t)?t.getTime():t};var u={cross:function e(t,n,i){var a=t();var o=r.utils.unique(a.map(function(e){return e[n]}),s);var u=r.utils.unique(a.map(function(e){return e[i]}),s);var l=o.length===0?[null]:o;var c=u.length===0?[null]:u;return c.reduce(function(e,t){return e.concat(l.map(function(e){var r={};if(n){r[n]=s(e)}if(i){r[i]=s(t)}return r}))},[])},cross_period:function e(t,n,a,u,l,c){var f=t();var d=c?c.utcTime:false;var h=r.utils.unique(f.map(function(e){return e[n]}),s);var p=r.utils.unique(f.map(function(e){return e[a]}),s);var v=h.length===0?[null]:h;var m=p.length===0?[null]:p;if(u){v=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,o(h)),Math.max.apply(Math,o(h)),u,{utc:d})}if(l){m=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,o(p)),Math.max.apply(Math,o(p)),l,{utc:d})}return m.reduce(function(e,t){return e.concat(v.map(function(e){var r={};if(n){r[n]=s(e)}if(a){r[a]=s(t)}return r}))},[])},groupBy:function e(t,n){var i=t();var o=r.utils.unique(i.map(function(e){return e[n]}),s);return o.map(function(e){return a({},n,s(e))})},none:function e(){return[null]}};t.FramesAlgebra=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n={day:{cast:function e(t){var n=new Date(t);return new Date(n.setHours(0,0,0,0))},next:function e(t){var n=new Date(t);var e=new Date(n.setDate(n.getDate()+1));return this.cast(e)}},week:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));return new Date(n.setDate(n.getDate()-n.getDay()))},next:function e(t){var n=new Date(t);var e=new Date(n.setDate(n.getDate()+7));return this.cast(e)}},month:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setMonth(n.getMonth()+1));return this.cast(e)}},quarter:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));var r=n.getMonth();var i=r-r%3;return new Date(n.setMonth(i))},next:function e(t){var n=new Date(t);var e=new Date(n.setMonth(n.getMonth()+3));return this.cast(e)}},year:{cast:function e(t){var n=new Date(t);n=new Date(n.setHours(0,0,0,0));n=new Date(n.setDate(1));n=new Date(n.setMonth(0));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setFullYear(n.getFullYear()+1));return this.cast(e)}}};var r={day:{cast:function e(t){var n=new Date(t);return new Date(n.setUTCHours(0,0,0,0))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCDate(n.getUTCDate()+1));return this.cast(e)}},week:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));return new Date(n.setUTCDate(n.getUTCDate()-n.getUTCDay()))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCDate(n.getUTCDate()+7));return this.cast(e)}},month:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCMonth(n.getUTCMonth()+1));return this.cast(e)}},quarter:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));var r=n.getUTCMonth();var i=r-r%3;return new Date(n.setUTCMonth(i))},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCMonth(n.getUTCMonth()+3));return this.cast(e)}},year:{cast:function e(t){var n=new Date(t);n=new Date(n.setUTCHours(0,0,0,0));n=new Date(n.setUTCDate(1));n=new Date(n.setUTCMonth(0));return n},next:function e(t){var n=new Date(t);var e=new Date(n.setUTCFullYear(n.getUTCFullYear()+1));return this.cast(e)}}};var i={add:function e(t,i){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{utc:false},o=a.utc;(o?r:n)[t.toLowerCase()]=i;return this},get:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{utc:false},a=i.utc;var o=t||"";return(a?r:n)[o.toLowerCase()]||null},generate:function e(t,n,r){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{utc:false},o=a.utc;var s=[];var u=i.get(r,{utc:o});if(u){var l=u.cast(new Date(n));var c=u.cast(new Date(t));s.push(c);while((c=u.next(new Date(c)))<=l){s.push(c)}}return s}};t.UnitDomainPeriodGenerator=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataFrame=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.DataFrame=function(){function e(t,n){var r=t.key,i=t.pipe,o=t.source,s=t.units;var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};a(this,e);this.key=r;this.pipe=i||[];this.source=o;this.units=s;this._frame={key:r,source:o,pipe:this.pipe};this._data=n;this._pipeReducer=function(e,t){return u[t.type](e,t.args)}}r(e,[{key:"hash",value:function e(){var t=[this._frame.pipe,this._frame.key,this._frame.source].map(JSON.stringify).join("");return i.utils.generateHash(t)}},{key:"full",value:function e(){return this._data}},{key:"part",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(e){return e};return this._frame.pipe.map(t).reduce(this._pipeReducer,this._data)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Plot=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=function e(t,n,r){if(t===null){t=Function.prototype}var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var a=n(21);var o=n(6);var s=n(24);var u=n(3);var l=n(1);var c=n(9);var f=n(7);var d=n(25);var h=n(26);var p=n(27);var v=n(28);var m=n(29);var g=n(30);var y=n(31);var b=n(33);var x=n(35);var w=n(36);var _=n(22);var k=n(16);var C=n(2);var T=A(C);var S=n(37);var E=A(S);function A(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function M(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var N=l.utilsDom.selectOrAppend;var R=l.utilsDom.selectImmediate;var D=t.Plot=function(e){M(t,e);function t(e){P(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._nodes=[];n._svg=null;n._filtersStore={filters:{},tick:0};n._layout=m.getLayout();var r=0;e.settings=t.setupSettings(u.utils.defaults(e.settings||{},{references:new WeakMap,refCounter:function e(){return++r}}));if(["sources","scales"].filter(function(t){return e.hasOwnProperty(t)}).length===2){n.configGPL=e}else{n.configGPL=new g.SpecConverter(n.setupConfig(e)).convert()}n.configGPL=t.setupPeriodData(n.configGPL);var i=e.plugins||[];n.transformers=[x.SpecTransformApplyRatio,y.SpecTransformAutoLayout];n.onUnitsStructureExpandedTransformers=[w.SpecTransformExtractAxes,b.SpecTransformCalcSize];n._originData=Object.assign({},n.configGPL.sources);n._chartDataModel=function(e){return e};n._liveSpec=n.configGPL;n._plugins=new s.Plugins(i,n);n._reportProgress=null;n._taskRunner=null;n._renderingPhase=null;return n}r(t,[{key:"destroy",value:function e(){this.destroyNodes();T.default.select(this._svg).remove();T.default.select(this._layout.layout).remove();this._cancelRendering();i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setupChartSourceModel",value:function e(t){this._chartDataModel=t}},{key:"setupConfig",value:function e(n){if(!n.spec||!n.spec.unit){throw new Error("Provide spec for plot")}var r=u.utils.defaults(n,{spec:{},data:[],plugins:[],settings:{}});this._emptyContainer=n.emptyContainer||"";r.spec.dimensions=t.setupMetaInfo(r.spec.dimensions,r.data);var i=r.settings.log;if(r.settings.excludeNull){this.addFilter({tag:"default",src:"/",predicate:v.DataProcessor.excludeNullValues(r.spec.dimensions,function(e){return i([e,"point was excluded, because it has undefined values."],"WARN")})})}return r}},{key:"insertToLeftSidebar",value:function e(t){return l.utilsDom.appendTo(t,this._layout.leftSidebar)}},{key:"insertToRightSidebar",value:function e(t){return l.utilsDom.appendTo(t,this._layout.rightSidebar)}},{key:"insertToFooter",value:function e(t){return l.utilsDom.appendTo(t,this._layout.footer)}},{key:"insertToHeader",value:function e(t){return l.utilsDom.appendTo(t,this._layout.header)}},{key:"addBalloon",value:function e(t){return new a.Tooltip("",t||{})}},{key:"destroyNodes",value:function e(){this._nodes.forEach(function(e){return e.destroy()});this._nodes=[];this._renderedItems=[]}},{key:"onUnitDraw",value:function e(t){var n=this;this._nodes.push(t);this.fire("unitdraw",t);["click","mouseover","mouseout"].forEach(function(e){return t.on(e,function(t,r){n.fire("element"+e,{element:t,data:r.data,event:r.event})})})}},{key:"onUnitsStructureExpanded",value:function e(t){var n=this;this.onUnitsStructureExpandedTransformers.forEach(function(e){return new e(t).transform(n)});this.fire(["units","structure","expanded"].join(""),t)}},{key:"_getClosestElementPerUnit",value:function e(t,n){return this._renderedItems.filter(function(e){return e.getClosestElement}).map(function(e){var r=e.getClosestElement(t,n);var i=e.node();return{unit:i,closest:r}})}},{key:"disablePointerEvents",value:function e(){this._layout.layout.style.pointerEvents="none"}},{key:"enablePointerEvents",value:function e(){this._layout.layout.style.pointerEvents=""}},{key:"_handlePointerEvent",value:function e(t){var n=this._svg.getBoundingClientRect();var r=t.clientX-n.left;var i=t.clientY-n.top;var a=t.type;var o=a==="click";var s=o?"data-click":"data-hover";var u=null;var l=null;var c=this._getClosestElementPerUnit(r,i);var f=c.filter(function(e){return e.closest}).sort(function(e,t){return e.closest.distance===t.closest.distance?e.closest.secondaryDistance-t.closest.secondaryDistance:e.closest.distance-t.closest.distance});if(f.length>0){var d=f.findIndex(function(e){return e.closest.distance!==f[0].closest.distance||e.closest.secondaryDistance!==f[0].closest.secondaryDistance});var h=d<0?f:f.slice(0,d);if(h.length===1){u=h[0].closest.data;l=h[0].closest.node}else{var p=h.reduce(function(e,t){return e+t.closest.x},0)/h.length;var v=h.reduce(function(e,t){return e+t.closest.y},0)/h.length;var m=Math.atan2(v-i,p-r)+Math.PI;var g=h[Math.round((h.length-1)*m/2/Math.PI)].closest;u=g.data;l=g.node}}c.forEach(function(e){return e.unit.fire(s,{event:t,data:u,node:l})})}},{key:"_initPointerEvents",value:function e(){var t=this;if(!this._liveSpec.settings.syncPointerEvents){this._pointerAnimationFrameId=null}var n=T.default.select(this._svg);var r=this._liveSpec.settings.syncPointerEvents?function(e){return function(){return e(T.default.event)}}:function(e){return function(){var n=T.default.event;if(t._pointerAnimationFrameId&&n.type!=="mousemove"){t._cancelPointerAnimationFrame()}if(!t._pointerAnimationFrameId){t._pointerAnimationFrameId=requestAnimationFrame(function(){t._pointerAnimationFrameId=null;e(n)})}}};var i=function e(n){return t._handlePointerEvent(n)};n.on("mousemove",r(i));n.on("click",r(i));n.on("mouseleave",r(function(e){if(window.getComputedStyle(t._svg).pointerEvents!=="none"){t.select(function(){return true}).forEach(function(t){return t.fire("data-hover",{event:e,data:null,node:null})})}}))}},{key:"_cancelPointerAnimationFrame",value:function e(){cancelAnimationFrame(this._pointerAnimationFrameId);this._pointerAnimationFrameId=null}},{key:"_setupTaskRunner",value:function e(t){var n=this;this._resetTaskRunner();this._taskRunner=new E.default({timeout:t.settings.renderingTimeout||Number.MAX_SAFE_INTEGER,syncInterval:t.settings.asyncRendering?t.settings.syncRenderingInterval:Number.MAX_SAFE_INTEGER,callbacks:{done:function e(){n._completeRendering();n._renderingPhase=null},timeout:function e(t,r){n._displayTimeoutWarning({timeout:t,proceed:function e(){n.disablePointerEvents();r.setTimeout(Number.MAX_SAFE_INTEGER);r.run()},cancel:function e(){n._cancelRendering()}});n.enablePointerEvents();n.fire("renderingtimeout")},progress:function e(t){var r={spec:0,draw:1};var i=r[n._renderingPhase]/2+t/2;n._reportProgress(i)},error:t.settings.handleRenderingErrors?function(e){n._cancelRendering();n._displayRenderingError(e);n.fire("renderingerror",e);t.settings.log(["An error occured during chart rendering.",'Set "handleRenderingErrors: false" in chart settings to debug.',"Error message: "+e.message].join(" "),"ERROR")}:null}});return this._taskRunner}},{key:"_resetTaskRunner",value:function e(){if(this._taskRunner&&this._taskRunner.isRunning()){this._taskRunner.stop();this._taskRunner=null}}},{key:"renderTo",value:function e(t,n){this._resetProgressLayout();var r=this._createLiveSpec(t,n);if(!r){this._svg=null;this._layout.content.innerHTML=this._emptyContainer;this.enablePointerEvents();return}var i=this._createGPL(r);var a=this._setupTaskRunner(r);this._scheduleDrawScenario(a,i);this._scheduleDrawing(a,i);a.run()}},{key:"_createLiveSpec",value:function e(t,n){var r=this;this.disablePointerEvents();this._target=t;this._defaultSize=Object.assign({},n);var i=T.default.select(t).node();if(i===null){throw new Error("Target element not found")}if(this._layout.layout.parentNode!==i){i.appendChild(this._layout.layout)}var a=this._layout.content;var o=l.utilsDom.getScrollbarSize(this._layout.contentContainer);this._layout.contentContainer.style.padding="0 "+o.width+"px "+o.height+"px 0";l.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical");var s=Object.assign({},n)||{};if(!s.width||!s.height){var c=a.parentElement,f=c.scrollLeft,d=c.scrollTop;a.style.display="none";s=u.utils.defaults(s,l.utilsDom.getContainerSize(a.parentNode));a.style.display="";a.parentElement.scrollLeft=f;a.parentElement.scrollTop=d;if(!s.height){s.height=l.utilsDom.getContainerSize(this._layout.layout).height}}this.configGPL.settings.size=s;this._liveSpec=u.utils.clone(u.utils.omit(this.configGPL,"plugins"));this._liveSpec.sources=this.getDataSources();this._liveSpec.settings=this.configGPL.settings;this._experimentalSetupAnimationSpeed(this._liveSpec);if(this.isEmptySources(this._liveSpec.sources)){return null}this._liveSpec=this.transformers.reduce(function(e,t){return new t(e).transform(r)},this._liveSpec);this.destroyNodes();this.fire("specready",this._liveSpec);return this._liveSpec}},{key:"_experimentalSetupAnimationSpeed",value:function e(t){t.settings.initialAnimationSpeed=t.settings.initialAnimationSpeed||t.settings.animationSpeed;var n=t.settings.experimentalShouldAnimate(t)?t.settings.initialAnimationSpeed:0;t.settings.animationSpeed=n;var r=function e(t){t.guide=t.guide||{};t.guide.animationSpeed=n;if(t.units){t.units.forEach(e)}};r(t.unit)}},{key:"_createGPL",value:function e(t){var n=new k.GPL(t,this.getScaleFactory(),d.unitsRegistry,f.GrammarRegistry);var r=n.unfoldStructure();this.onUnitsStructureExpanded(r);return n}},{key:"_scheduleDrawScenario",value:function e(t,n){var r=this;var i=T.default.select(this._layout.content);var a=n.config.settings.size;t.addTask(function(){return r._renderingPhase="spec"});n.getDrawScenarioQueue({allocateRect:function e(){return{slot:function e(t){return i.selectAll(".uid_"+t)},frameId:"root",left:0,top:0,width:a.width,containerWidth:a.width,height:a.height,containerHeight:a.height}}}).forEach(function(e){return t.addTask(e)})}},{key:"_scheduleDrawing",value:function e(t,n){var r=this;var i=n.config.settings.size;t.addTask(function(e){r._renderingPhase="draw";r._renderRoot({scenario:e,newSize:i});r._cancelPointerAnimationFrame();r._scheduleRenderScenario(e)})}},{key:"_resetProgressLayout",value:function e(){this._createProgressBar();this._clearRenderingError();this._clearTimeoutWarning()}},{key:"_renderRoot",value:function e(t){var n=this;var r=t.scenario,i=t.newSize;var a=T.default.select(this._layout.content);var o=r[0].config.uid;var s=N(a,"svg").attr({width:Math.floor(i.width),height:Math.floor(i.height)});if(!s.attr("class")){s.attr("class",_.CSS_PREFIX+"svg")}this._svg=s.node();this._initPointerEvents();this.fire("beforerender",this._svg);var u=s.selectAll("g.frame-root").data([o],function(e){return e});u.enter().append("g").classed(_.CSS_PREFIX+"cell cell frame-root uid_"+o,true);u.call(function(e){e.classed("tau-active",true);c.d3_transition(e,n.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1)});u.exit().call(function(e){e.classed("tau-active",false);c.d3_transition(e,n.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1e-6).remove()})}},{key:"_scheduleRenderScenario",value:function e(t){var n=this;t.forEach(function(e){n._taskRunner.addTask(function(){e.draw();n.onUnitDraw(e.node());n._renderedItems.push(e)})})}},{key:"_completeRendering",value:function e(){l.utilsDom.setScrollPadding(this._layout.contentContainer);this._layout.rightSidebar.style.maxHeight=this._liveSpec.settings.size.height+"px";this.enablePointerEvents();if(this._svg){this.fire("render",this._svg)}l.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical")}},{key:"_cancelRendering",value:function e(){this.enablePointerEvents();this._resetTaskRunner();this._cancelPointerAnimationFrame()}},{key:"_createProgressBar",value:function e(){var t=T.default.select(this._layout.header);var n=N(t,"div."+_.CSS_PREFIX+"progress");n.select("div."+_.CSS_PREFIX+"progress__value").remove();var r=n.append("div").classed(_.CSS_PREFIX+"progress__value",true).style("width",0);this._reportProgress=function(e){requestAnimationFrame(function(){n.classed(_.CSS_PREFIX+"progress_active",e<1);r.style("width",e*100+"%")})}}},{key:"_displayRenderingError",value:function e(){this._layout.layout.classList.add(_.CSS_PREFIX+"layout_rendering-error")}},{key:"_clearRenderingError",value:function e(){this._layout.layout.classList.remove(_.CSS_PREFIX+"layout_rendering-error")}},{key:"getScaleFactory",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return new p.ScalesFactory(h.scalesRegistry.instance(this._liveSpec.settings),t||this._liveSpec.sources,this._liveSpec.scales)}},{key:"getScaleInfo",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.getScaleFactory().createScaleInfoByName(t,n)}},{key:"getSourceFiltersIterator",value:function e(t){var n=this;var r=u.utils.flatten(Object.keys(this._filtersStore.filters).map(function(e){return n._filtersStore.filters[e]})).filter(function(e){return!t(e)}).map(function(e){return e.predicate});return function(e){return r.reduce(function(t,n){return t&&n(e)},true)}}},{key:"getDataSources",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=function e(t){return function(e){return n.excludeFilter&&n.excludeFilter.indexOf(e.tag)!==-1||e.src!==t}};var i=this._chartDataModel(this._originData);return Object.keys(i).filter(function(e){return e!=="?"}).reduce(function(e,n){var a=i[n];var o=t.getSourceFiltersIterator(r(n));e[n]={dims:a.dims,data:a.data.filter(o)};return e},{"?":i["?"]})}},{key:"isEmptySources",value:function e(t){return!Object.keys(t).filter(function(e){return e!=="?"}).filter(function(e){return t[e].data.length>0}).length}},{key:"getChartModelData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";var r=this.getDataSources(t);return r[n].data}},{key:"getDataDims",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";return this._originData[t].dims}},{key:"getData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";return this._originData[t].data}},{key:"setData",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";this._originData[n].data=t;this.refresh()}},{key:"getSVG",value:function e(){return this._svg}},{key:"addFilter",value:function e(t){t.src=t.src||"/";var n=t.tag;var r=this._filtersStore.filters[n]=this._filtersStore.filters[n]||[];var i=this._filtersStore.tick++;t.id=i;r.push(t);return i}},{key:"removeFilter",value:function e(t){var n=this;Object.keys(this._filtersStore.filters).map(function(e){n._filtersStore.filters[e]=n._filtersStore.filters[e].filter(function(e){return e.id!==t})});return this}},{key:"refresh",value:function e(){if(this._target){this.renderTo(this._target,this._defaultSize)}}},{key:"resize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.renderTo(this._target,t)}},{key:"select",value:function e(t){return this._nodes.filter(t)}},{key:"traverseSpec",value:function e(t,n){var r=function e(t,n,r,i){n(t,r,i);if(t.frames){t.frames.forEach(function(r){(r.units||[]).map(function(i){return e(i,n,t,r)})})}else{(t.units||[]).map(function(r){return e(r,n,t,null)})}};r(t.unit,n,null,null)}},{key:"getSpec",value:function e(){return this._liveSpec}},{key:"getLayout",value:function e(){return this._layout}},{key:"_displayTimeoutWarning",value:function e(t){var n=this;var r=t.proceed,i=t.cancel,a=t.timeout;var o=200;var s=100;var u=3;var l=1.5;var c=o/2;var f=Math.round(s/u/l);var d=function e(t){return Math.round(s/u/l*t)};this._layout.content.style.height="100%";this._layout.content.insertAdjacentHTML("beforeend",'\n            <div class="'+_.CSS_PREFIX+'rendering-timeout-warning">\n            <svg\n                viewBox="0 0 '+o+" "+s+'">\n                <text\n                    text-anchor="middle"\n                    font-size="'+f+'">\n                    <tspan x="'+c+'" y="'+d(1)+'">Rendering took more than '+Math.round(a)/1e3+'s</tspan>\n                    <tspan x="'+c+'" y="'+d(2)+'">Would you like to continue?</tspan>\n                </text>\n                <text\n                    class="'+_.CSS_PREFIX+'rendering-timeout-continue-btn"\n                    text-anchor="end"\n                    font-size="'+f+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(c-f/3)+'"\n                    y="'+d(3)+'">\n                    Continue\n                </text>\n                <text\n                    class="'+_.CSS_PREFIX+'rendering-timeout-cancel-btn"\n                    text-anchor="start"\n                    font-size="'+f+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(c+f/3)+'"\n                    y="'+d(3)+'">\n                    Cancel\n                </text>\n            </svg>\n            </div>\n        ');this._layout.content.querySelector("."+_.CSS_PREFIX+"rendering-timeout-continue-btn").addEventListener("click",function(){n._clearTimeoutWarning();r.call(n)});this._layout.content.querySelector("."+_.CSS_PREFIX+"rendering-timeout-cancel-btn").addEventListener("click",function(){n._clearTimeoutWarning();i.call(n)})}},{key:"_clearTimeoutWarning",value:function e(){var t=R(this._layout.content,"."+_.CSS_PREFIX+"rendering-timeout-warning");if(t){this._layout.content.removeChild(t);this._layout.content.style.height=""}}}],[{key:"setupPeriodData",value:function e(n){var r=t.__api__.tickPeriod;var i=n.settings.log;var a=Object.keys(n.scales).map(function(e){return n.scales[e]});var o=a.filter(function(e){return e.type==="period"}).reduce(function(e,t){var a=r.get(t.period,{utc:n.settings.utcTime});if(a){e.push({source:t.source,dim:t.dim,period:a})}else{i(['Unknown period "'+t.period+'".',"Docs: http://api.taucharts.com/plugins/customticks.html#how-to-add-custom-tick-period"],"WARN");t.period=null}return e},[]);var s=function e(t){return t===null||t===undefined};var u=function e(t,n){t[n.source].data=t[n.source].data.map(function(e){var t=e[n.dim];if(!s(t)){e[n.dim]=n.period.cast(t)}return e});return t};n.sources=o.reduce(u,n.sources);return n}},{key:"setupMetaInfo",value:function e(t,n){var r=t?t:v.DataProcessor.autoDetectDimTypes(n);return v.DataProcessor.autoAssignScales(r)}},{key:"setupSettings",value:function e(n){var r=t.globalSettings;var i=Object.keys(r).reduce(function(e,t){e[t]=typeof r[t]==="function"?r[t]:u.utils.clone(r[t]);return e},{});var a=u.utils.defaults(n||{},i);if(!Array.isArray(a.specEngine)){a.specEngine=[{width:Number.MAX_VALUE,name:a.specEngine}]}return a}}]);return t}(o.Emitter)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Tooltip=undefined;var r=n(22);var i=n(23);i.Tooltip.defaults.baseClass=r.CSS_PREFIX+"tooltip";t.Tooltip=i.Tooltip},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.CSS_PREFIX="graphical-report__"},function(e,t,n){var r,i,a;(function n(o,s){{!(i=[],r=s,a=typeof r==="function"?r.apply(t,i):r,a!==undefined&&(e.exports=a))}})(this,function(){return function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={exports:{},id:r,loaded:false};e[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=e;n.c=t;n.p="";return n(0)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(t){return{add:function e(n){t.classList.add(n)},remove:function e(n){t.classList.remove(n)}}};var r=function e(t,n){return t.indexOf(n)};var i=window;var a=i.document;var o=a.documentElement;var s=["top","bottom"];function u(e,t){for(var n in t){e[n]=t[n]}return e}function l(e){return e&&e.setInterval!=null}function c(e){var t=i.pageYOffset||o.scrollTop;var n=i.pageXOffset||o.scrollLeft;var r={left:0,right:0,top:0,bottom:0,width:0,height:0};if(l(e)){r.width=i.innerWidth||o.clientWidth;r.height=i.innerHeight||o.clientHeight}else if(o.contains(e)&&e.getBoundingClientRect!=null){u(r,e.getBoundingClientRect());r.width=r.right-r.left;r.height=r.bottom-r.top}else{return r}r.top=r.top+t-o.clientTop;r.left=r.left+n-o.clientLeft;r.right=r.left+r.width;r.bottom=r.top+r.height;return r}function f(e){return 0|Math.round(String(e).replace(/[^\-0-9.]/g,""))}var d=i.getComputedStyle;function h(e){var t=String(d(e,h.propName));var n=t.match(/([0-9.]+)([ms]{1,2})/);if(n){t=Number(n[1]);if(n[2]==="s"){t*=1e3}}return 0|t}h.propName=function(){var e=a.createElement("div");var t=["transitionDuration","webkitTransitionDuration"];var n="1s";for(var r=0;r<t.length;r++){e.style[t[r]]=n;if(e.style[t[r]]===n){return t[r]}}}();var p=Object.create;function v(e,t){if(!(this instanceof v)){return new v(e,t)}this.hidden=1;this.options=u(p(v.defaults),t);this._createElement();if(e){this.content(e)}}v.prototype._createElement=function(){this.element=a.createElement("div");this.classes=n(this.element);this.classes.add(this.options.baseClass);var e;for(var t=0;t<v.classTypes.length;t++){e=v.classTypes[t]+"Class";if(this.options[e]){this.classes.add(this.options[e])}}};v.prototype.type=function(e){return this.changeClassType("type",e)};v.prototype.effect=function(e){return this.changeClassType("effect",e)};v.prototype.changeClassType=function(e,t){e+="Class";if(this.options[e]){this.classes.remove(this.options[e])}this.options[e]=t;if(t){this.classes.add(t)}return this};v.prototype.updateSize=function(){if(this.hidden){this.element.style.visibility="hidden";a.body.appendChild(this.element)}this.width=this.element.offsetWidth;this.height=this.element.offsetHeight;if(this.spacing==null){this.spacing=this.options.spacing!=null?this.options.spacing:f(d(this.element,"top"))}if(this.hidden){a.body.removeChild(this.element);this.element.style.visibility=""}else{this.position()}return this};v.prototype.content=function(e){if(typeof e==="object"){this.element.innerHTML="";this.element.appendChild(e)}else{this.element.innerHTML=e}this.updateSize();return this};v.prototype.place=function(e){this.options.place=e;if(!this.hidden){this.position()}return this};v.prototype.attach=function(e){this.attachedTo=e;if(!this.hidden){this.position()}return this};v.prototype.detach=function(){this.hide();this.attachedTo=null;return this};v.prototype._pickPlace=function(e){if(!this.options.auto){return this.options.place}var t=c(i);var n=this.options.place.split("-");var a=this.spacing;if(r(s,n[0])!==-1){if(e.top-this.height-a<=t.top){n[0]="bottom"}else if(e.bottom+this.height+a>=t.bottom){n[0]="top"}switch(n[1]){case"left":if(e.right-this.width<=t.left){n[1]="right"}break;case"right":if(e.left+this.width>=t.right){n[1]="left"}break;default:if(e.left+e.width/2+this.width/2>=t.right){n[1]="left"}else if(e.right-e.width/2-this.width/2<=t.left){n[1]="right"}}}else{if(e.left-this.width-a<=t.left){n[0]="right"}else if(e.right+this.width+a>=t.right){n[0]="left"}switch(n[1]){case"top":if(e.bottom-this.height<=t.top){n[1]="bottom"}break;case"bottom":if(e.top+this.height>=t.bottom){n[1]="top"}break;default:if(e.top+e.height/2+this.height/2>=t.bottom){n[1]="top"}else if(e.bottom-e.height/2-this.height/2<=t.top){n[1]="bottom"}}}return n.join("-")};v.prototype.position=function(e,t){if(this.attachedTo){e=this.attachedTo}if(e==null&&this._p){e=this._p[0];t=this._p[1]}else{this._p=arguments}var n=typeof e==="number"?{left:0|e,right:0|e,top:0|t,bottom:0|t,width:0,height:0}:c(e);var r=this.spacing;var i=this._pickPlace(n);if(i!==this.curPlace){if(this.curPlace){this.classes.remove(this.curPlace)}this.classes.add(i);this.curPlace=i}var a,o;switch(this.curPlace){case"top":a=n.top-this.height-r;o=n.left+n.width/2-this.width/2;break;case"top-left":a=n.top-this.height-r;o=n.right-this.width;break;case"top-right":a=n.top-this.height-r;o=n.left;break;case"bottom":a=n.bottom+r;o=n.left+n.width/2-this.width/2;break;case"bottom-left":a=n.bottom+r;o=n.right-this.width;break;case"bottom-right":a=n.bottom+r;o=n.left;break;case"left":a=n.top+n.height/2-this.height/2;o=n.left-this.width-r;break;case"left-top":a=n.bottom-this.height;o=n.left-this.width-r;break;case"left-bottom":a=n.top;o=n.left-this.width-r;break;case"right":a=n.top+n.height/2-this.height/2;o=n.right+r;break;case"right-top":a=n.bottom-this.height;o=n.right+r;break;case"right-bottom":a=n.top;o=n.right+r;break}this.element.style.top=Math.round(a)+"px";this.element.style.left=Math.round(o)+"px";return this};v.prototype.show=function(e,t){e=this.attachedTo?this.attachedTo:e;clearTimeout(this.aIndex);if(e!=null){this.position(e,t)}if(this.hidden){this.hidden=0;a.body.appendChild(this.element)}if(this.attachedTo){this._aware()}if(this.options.inClass){this.classes.add(this.options.inClass)}return this};v.prototype.getElement=function(){return this.element};v.prototype.hide=function(){if(this.hidden){return}var e=this;var t=0;if(this.options.inClass){this.classes.remove(this.options.inClass);if(this.options.effectClass){t=h(this.element)}}if(this.attachedTo){this._unaware()}clearTimeout(this.aIndex);this.aIndex=setTimeout(function(){e.aIndex=0;a.body.removeChild(e.element);e.hidden=1},t);return this};v.prototype.toggle=function(e,t){return this[this.hidden?"show":"hide"](e,t)};v.prototype.destroy=function(){clearTimeout(this.aIndex);this._unaware();if(!this.hidden){a.body.removeChild(this.element)}this.element=this.options=null};v.prototype._aware=function(){var e=r(v.winAware,this);if(e===-1){v.winAware.push(this)}};v.prototype._unaware=function(){var e=r(v.winAware,this);if(e!==-1){v.winAware.splice(e,1)}};v.reposition=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,17)};var t;function n(){if(t||!v.winAware.length){return}t=e(r)}function r(){t=0;var e;for(var n=0,r=v.winAware.length;n<r;n++){e=v.winAware[n];e.position()}}return n}();v.winAware=[];window.addEventListener("resize",v.reposition);window.addEventListener("scroll",v.reposition);v.classTypes=["type","effect"];v.defaults={baseClass:"tooltip",typeClass:null,effectClass:null,inClass:"in",place:"top",spacing:null,auto:0};t.Tooltip=v}])})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t,n){r(this,e);this.chart=n;this._plugins=t.map(this.initPlugin,this)}n(e,[{key:"initPlugin",value:function e(t){var n=this;if(t.init){t.init(this.chart)}var r=function e(){};this.chart.on("destroy",t.destroy&&t.destroy.bind(t)||r);Object.keys(t).forEach(function(e){if(e.indexOf("on")===0){var r=e.substr(2);n.chart.on(r.toLowerCase(),t[e].bind(t))}})}}]);return e}();t.Plugins=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.unitsRegistry=undefined;var r=n(8);var i={};var a={};var o={reg:function e(t,n,r){if(r){a[t]=r;i[t]=function(e,t){this.___tauchartsseed___=new t(this.init(e))};i[t].prototype=Object.assign({init:function e(t){return t},defineGrammarModel:function e(t){return this.node().defineGrammarModel(t)},getGrammarRules:function e(t){return this.node().getGrammarRules(t)},getAdjustScalesRules:function e(t){return this.node().getAdjustScalesRules(t)},createScreenModel:function e(t){return this.node().createScreenModel(t)},addInteraction:function e(){this.node().addInteraction()},node:function e(){return this.___tauchartsseed___},draw:function e(){this.node().draw()}},n)}else{i[t]=n}return this},get:function e(t){if(!i.hasOwnProperty(t)){throw new r.TauChartError("Unknown unit type: "+t,r.errorCodes.UNKNOWN_UNIT_TYPE)}return i[t]},create:function e(t,n){var r=this.get(t);var i;if(a[t]){var o=this.get(a[t]);i=new r(n,o)}else{i=new r(n)}return i}};t.unitsRegistry=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i={};var a={};var o=t.scalesRegistry=function(){function e(){r(this,e)}n(e,null,[{key:"reg",value:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(e){return e};i[t]=n;a[t]=r;return this}},{key:"get",value:function e(t){return i[t]}},{key:"instance",value:function t(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{create:function t(r,i,o){var s=e.get(r);var u=a[r];return new s(i,u(o,n))}}}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScalesFactory=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(19);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.ScalesFactory=function(){function e(t,n,r){a(this,e);this.registry=t;this.sources=n;this.scales=r}r(e,[{key:"createScaleInfo",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=t.dim;var a=t.source;var o=(this.sources[a].dims[r]||{}).type;var s=this.sources[a].data;var u=n||new i.DataFrame({source:a},s);t.dimType=o;return this.registry.create(t.type,u,t)}},{key:"createScaleInfoByName",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.createScaleInfo(this.scales[t],n)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataProcessor=undefined;var r=n(3);var i={isYFunctionOfX:function e(t,n,i){var a=true;var o=null;try{t.reduce(function(e,t){var a=function e(n,i){var a=t[i];var o=r.utils.isObject(a)?JSON.stringify(a):a;n.push(o);return n};var s=n.reduce(a,[]).join("/");var u=i.reduce(a,[]).join("/");if(!e.hasOwnProperty(s)){e[s]=u}else{var l=e[s];if(l!==u){o={type:"RelationIsNotAFunction",keyX:n.join("/"),keyY:i.join("/"),valX:s,errY:[l,u]};throw new Error("RelationIsNotAFunction")}}return e},{})}catch(e){if(e.message!=="RelationIsNotAFunction"){throw e}a=false}return{result:a,error:o}},excludeNullValues:function e(t,n){var r=Object.keys(t).reduce(function(e,n){var r=t[n];if((!r.hasOwnProperty("hasNull")||r.hasNull)&&(r.type==="measure"||r.scale==="period")){e.push(n)}return e},[]);return function(e){var t=!r.some(function(t){return!(t in e)||e[t]===null});if(!t){n(e)}return t}},autoAssignScales:function e(t){var n="category";var r={category:"ordinal",order:"ordinal",measure:"linear"};var i={};Object.keys(t).forEach(function(e){var a=t[e];var o=(a.type||n).toLowerCase();i[e]=Object.assign({},a,{type:o,scale:a.scale||r[o],value:a.value})});return i},autoDetectDimTypes:function e(t){var n={type:"category",scale:"ordinal"};var i=function e(t,n){var i=n;if(r.utils.isDate(t)){i.type="measure";i.scale="time"}else if(r.utils.isObject(t)){i.type="order";i.scale="ordinal"}else if(Number.isFinite(t)){i.type="measure";i.scale="linear"}return i};var a=function e(t,a){Object.keys(a).forEach(function(e){var o=a.hasOwnProperty(e)?a[e]:null;t[e]=t[e]||{type:null,hasNull:false};if(o===null){t[e].hasNull=true}else{var s=i(o,r.utils.clone(n));var u=s.type;var l=s.scale;var c=t[e].type!==null&&t[e].type!==u;t[e].type=c?n.type:u;t[e].scale=c?n.scale:l}});return t};return t.reduce(a,{})},sortByDim:function e(t,n,r){var i=t;var a=["period","time"].indexOf(r.scale)>=0?function(e){return new Date(e)}:function(e){return e};if(r.type==="measure"||r.scale==="period"){i=t.map(function(e){return e}).sort(function(e,t){return a(e[n])-a(t[n])})}else if(r.order){var o=r.order.reduce(function(e,t,n){e[t]=n;return e},{});var s=r.order.length;var u="(___"+n+"___)";i=t.map(function(e){var t=o[e[n]];t=t>=0?t:s;e[u]=t;return e}).sort(function(e,t){return e[u]-t[u]}).map(function(e){delete e[u];return e})}return i}};t.DataProcessor=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLayout=undefined;var r=n(22);var i=function e(t,n){var i="div";var a=document.createElement(i);a.classList.add(r.CSS_PREFIX+t);if(n){n.appendChild(a)}return a};var a=function e(){var t=i("layout");var n=i("layout__header",t);var r=i("layout__container",t);var a=i("layout__sidebar",r);var o=i("layout__content",r);var s=i("layout__content__wrap",o);var u=i("layout__sidebar-right",r);var l=i("layout__sidebar-right__wrap",u);var c=i("layout__footer",t);return{layout:t,header:n,content:s,contentContainer:o,leftSidebar:a,rightSidebar:l,rightSidebarContainer:u,footer:c}};t.getLayout=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecConverter=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecConverter=function(){function e(t){a(this,e);this.spec=t;this.dist={sources:{"?":{dims:{},data:[{}]},"/":{dims:{},data:[]}},scales:{x_null:{type:"ordinal",source:"?"},y_null:{type:"ordinal",source:"?"},size_null:{type:"size",source:"?"},color_null:{type:"color",source:"?"},split_null:{type:"value",source:"?"},"pos:default":{type:"ordinal",source:"?"},"size:default":{type:"size",source:"?"},"label:default":{type:"value",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"}},settings:t.settings}}r(e,[{key:"convert",value:function e(){var t=this.spec;var n=this.dist;this.ruleAssignSourceDims(t,n);this.ruleAssignStructure(t,n);this.ruleAssignSourceData(t,n);this.ruleApplyDefaults(n);return n}},{key:"ruleApplyDefaults",value:function e(t){var n=t.settings||{};var r=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};var a=function e(t,r){t.namespace="chart";t.guide=i.utils.defaults(t.guide||{},{animationSpeed:n.animationSpeed||0,utcTime:n.utcTime||false});if(r&&!t.hasOwnProperty("units")){t=i.utils.defaults(t,{x:r.x,y:r.y});var a=i.utils.clone(r.guide)||{};t.guide.x=i.utils.defaults(t.guide.x||{},a.x);t.guide.y=i.utils.defaults(t.guide.y||{},a.y);t.expression.inherit=r.expression.inherit}return t};r(t.unit,a,null)}},{key:"ruleAssignSourceData",value:function e(t,n){var r=t.spec.dimensions||{};var a=n.sources["/"].dims;var o=function e(t,n){var r=t[n];if(i.utils.isObject(r)&&!i.utils.isDate(r)){Object.keys(r).forEach(function(e){return t[n+"."+e]=r[e]})}return t};n.sources["/"].data=t.data.map(function(e){var t=Object.keys(e).reduce(o,e);return Object.keys(a).reduce(function(e,t){if(!e.hasOwnProperty(t)){e[t]=null}if(e[t]!==null&&r[t]&&["period","time"].indexOf(r[t].scale)>=0){e[t]=new Date(e[t])}return e},t)})}},{key:"ruleAssignSourceDims",value:function e(t,n){var r=t.spec.dimensions;n.sources["/"].dims=Object.keys(r).reduce(function(e,t){e[t]={type:r[t].type};return e},{})}},{key:"ruleAssignStructure",value:function e(t,n){var r=this;var a=function e(t){var n=i.utils.clone(i.utils.omit(t,"unit"));r.ruleCreateScales(t,n);n.expression=r.ruleInferExpression(t);if(t.unit){n.units=t.unit.map(e)}return n};var o=a(t.spec.unit);o.expression.inherit=false;n.unit=o}},{key:"ruleCreateScales",value:function e(t,n){var r=this;var i=t.guide||{};["identity","color","size","label","x","y","split"].forEach(function(e){if(t.hasOwnProperty(e)){n[e]=r.scalesPool(e,t[e],i[e]||{})}})}},{key:"ruleInferDim",value:function e(t,n){var r=t;var i=this.spec.spec.dimensions;if(!i.hasOwnProperty(r)){return r}if(n.hasOwnProperty("tickLabel")){r=t+"."+n.tickLabel}else if(i[t].value){r=t+"."+i[t].value}var a=this.dist.sources["/"].dims;if(!a.hasOwnProperty(r)){a[r]={type:a[t].type};delete a[t]}return r}},{key:"scalesPool",value:function e(t,n,r){var i=t+"_"+n;if(this.dist.scales.hasOwnProperty(i)){return i}var a=this.spec.spec.dimensions;var o={};if(t==="color"&&n!==null){o={type:"color",source:"/",dim:this.ruleInferDim(n,r)};if(r.hasOwnProperty("brewer")){o.brewer=r.brewer}if(a[n]&&a[n].hasOwnProperty("order")){o.order=a[n].order}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("nice")){o.nice=r.nice}}if(t==="size"&&n!==null){o={type:"size",source:"/",dim:this.ruleInferDim(n,r)};if(r.hasOwnProperty("func")){o.func=r.func}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("minSize")){o.minSize=r.minSize}if(r.hasOwnProperty("maxSize")){o.maxSize=r.maxSize}}if(t==="label"&&n!==null){o={type:"value",source:"/",dim:this.ruleInferDim(n,r)}}if(t==="split"&&n!==null){o={type:"value",source:"/",dim:this.ruleInferDim(n,r)}}if(t==="identity"&&n!==null){o={type:"identity",source:"/",dim:this.ruleInferDim(n,r)}}if(a.hasOwnProperty(n)&&(t==="x"||t==="y")){o={type:a[n].scale,source:"/",dim:this.ruleInferDim(n,r)};if(a[n].hasOwnProperty("order")){o.order=a[n].order}if(r.hasOwnProperty("min")){o.min=r.min}if(r.hasOwnProperty("max")){o.max=r.max}if(r.hasOwnProperty("autoScale")){o.autoScale=r.autoScale}else{o.autoScale=true}if(r.hasOwnProperty("nice")){o.nice=r.nice}else{o.nice=o.autoScale}if(r.hasOwnProperty("niceInterval")){o.niceInterval=r.niceInterval}else{o.niceInterval=null}if(r.hasOwnProperty("tickPeriod")){o.period=r.tickPeriod;o.type="period"}o.fitToFrameByDims=r.fitToFrameByDims;o.ratio=r.ratio}this.dist.scales[i]=o;return i}},{key:"getScaleConfig",value:function e(t,n){var r=t+"_"+n;return this.dist.scales[r]}},{key:"ruleInferExpression",value:function e(t){var n={operator:"none",params:[]};var r=t.guide||{};var i=r.x||{};var a=r.y||{};var o=this.getScaleConfig("x",t.x);var s=this.getScaleConfig("y",t.y);if(t.type.indexOf("ELEMENT.")===0){if(t.color){n={operator:"groupBy",params:[this.ruleInferDim(t.color,r.color||{})]}}}else if(t.type==="COORDS.RECT"){if(t.unit.length===1&&t.unit[0].type==="COORDS.RECT"){if(o.period||s.period){n={operator:"cross_period",params:[this.ruleInferDim(t.x,i),this.ruleInferDim(t.y,a),o.period,s.period]}}else{n={operator:"cross",params:[this.ruleInferDim(t.x,i),this.ruleInferDim(t.y,a)]}}}}return Object.assign({inherit:true,source:"/"},n)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformAutoLayout=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);var a=n(32);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function e(t){return t.reduce(function(e,t){return e+t},0)};function f(e,t,n,r){var i=e.hasOwnProperty(n)?e[n]:{};i=i||{};r.forEach(function(e){Object.assign(t.guide[n][e],i[e])})}var d=function e(t,n){var r=n.guide||{};var i={x:["label"],y:["label"],size:["label"],color:["label"],padding:[]};Object.keys(i).forEach(function(e){var n=i[e];f(r,t,e,n)});Object.assign(t.guide,Object.keys(r).reduce(function(e,t){if(!i.hasOwnProperty(t)){e[t]=r[t]}return e},{}));return t};var h=function e(t,n,r){t[n]=i.utils.defaults(t[n]||{},{label:""});t[n].label=i.utils.isObject(t[n].label)?t[n].label:{text:t[n].label};t[n].label=i.utils.defaults(t[n].label,r||{},{padding:32,rotate:0,textAnchor:"middle",cssClass:"label",dock:null});return t[n]};var p=function e(t,n,r){t[n]=i.utils.defaults(t[n],r||{},{padding:0,density:30,rotate:0,tickPeriod:null,tickFormat:null,autoScale:true});t[n].tickFormat=t[n].tickFormat||t[n].tickPeriod;t[n].nice=t[n].hasOwnProperty("nice")?t[n].nice:t[n].autoScale;return t[n]};var v=function e(t){t.options=t.options||{};t.guide=t.guide||{};t.guide.padding=i.utils.defaults(t.guide.padding||{},{l:0,b:0,r:0,t:0});t.guide.x=h(t.guide,"x");t.guide.x=p(t.guide,"x",{cssClass:"x axis",scaleOrient:"bottom",textAnchor:"middle"});t.guide.y=h(t.guide,"y",{rotate:-90});t.guide.y=p(t.guide,"y",{cssClass:"y axis",scaleOrient:"left",textAnchor:"end"});t.guide.size=h(t.guide,"size");t.guide.color=h(t.guide,"color");return t};var m=function e(t,n){t.guide=t.guide||{};t.guide.padding=t.guide.padding||{l:0,t:0,r:0,b:0};if(!t.hasOwnProperty("units")){t=i.utils.defaults(t,n);t.guide=i.utils.defaults(t.guide,i.utils.clone(n.guide));t.guide.x=i.utils.defaults(t.guide.x,i.utils.clone(n.guide.x));t.guide.y=i.utils.defaults(t.guide.y,i.utils.clone(n.guide.y))}return t};var g=function e(t){var n=t.units||[];var r=!t.hasOwnProperty("units");var i=!n.some(function(e){return e.hasOwnProperty("units")});return{type:t.type,isLeaf:r,isLeafParent:!r&&i}};var y=function e(t,n,r,i){if(t.length===0){return{width:0,height:0}}if(n===null){var a=r("TauChart Library");a.width=i*.625;return a}if(t.every(function(e){return typeof e==="number"})){t=s.default.scale.linear().domain(t).ticks()}var o=t.reduce(function(e,t){var r=n(t).toString().length;if(!e.computed||r>e.computed){return{value:t,computed:r}}return e},{}).value;return r(n(o))};var b=function e(t,n){var r=t.dimType;var i=t.scaleType;var a="*";var o=[r,i,a].join(":");var s=[r,i].join(":");return n[o]||n[s]||n[r]||null};var x=function e(t,n,r){return t.hasOwnProperty(n+":"+r)?t[n+":"+r]:t[""+n]};var w=function e(t,n){var r=["day","week","month"];if(r.indexOf(t)>=0){t+="-short"+(n?"-utc":"")}return t};var _=function e(t,n){var r=t.width,a=t.height;var o=Math.abs(i.utils.toRadian(n));return{width:Math.max(Math.cos(o)*r,a),height:Math.max(Math.sin(o)*r,a)}};var k=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"x";var r=i.utils.normalizeAngle(t);var a=n==="x"?[[0,45,"middle"],[45,135,"start"],[135,225,"middle"],[225,315,"end"],[315,360,"middle"]]:[[0,90,"end"],[90,135,"middle"],[135,225,"start"],[225,315,"middle"],[315,360,"end"]];var o=a.findIndex(function(e){return r>=e[0]&&r<e[1]});return a[o][2]};var C=function e(t,n,r){var i=Math.ceil(t.width/n);var a=Math.min(i,r);return{height:a*t.height,width:n}};var T=function e(t,n,r,i,o){var s=r.values;var u=i.values;var l=r.isEmpty||t.x.hideTicks;var f=i.isEmpty||t.y.hideTicks;var d=y(s,a.FormatterRegistry.get(t.x.tickFormat,t.x.tickFormatNullAlias),n.getAxisTickLabelSize,n.xAxisTickLabelLimit);var h=y(u,a.FormatterRegistry.get(t.y.tickFormat,t.y.tickFormatNullAlias),n.getAxisTickLabelSize,n.yAxisTickLabelLimit);var p=d;var v=h;if(d.width>n.xAxisTickLabelLimit){t.x.tickFormatWordWrap=true;t.x.tickFormatWordWrapLines=n.xTickWordWrapLinesLimit;p=C(d,n.xAxisTickLabelLimit,n.xTickWordWrapLinesLimit)}if(h.width>n.yAxisTickLabelLimit){t.y.tickFormatWordWrap=true;t.y.tickFormatWordWrapLines=n.yTickWordWrapLinesLimit;v=C(h,n.yAxisTickLabelLimit,n.yTickWordWrapLinesLimit)}var m=l?0:1;var g=f?0:1;var b=t.x.label;var w=t.y.label;var k=b.text&&!b.hide?1:0;var T=w.text&&!w.hide?1:0;var S=_(p,t.x.rotate);var E=_(v,t.y.rotate);if(o){b.padding=(-n.xAxisPadding-n.xFontLabelHeight)/2+n.xFontLabelHeight;b.paddingNoTicks=b.padding;w.padding=(-n.yAxisPadding-n.yFontLabelHeight)/2;w.paddingNoTicks=w.padding;k=0;T=0}else{b.padding=c([m*(n.xTickWidth+S.height),k*(n.distToXAxisLabel+n.xFontLabelHeight)]);b.paddingNoTicks=k*(n.distToXAxisLabel+n.xFontLabelHeight);w.padding=c([g*(n.yTickWidth+E.width),T*n.distToYAxisLabel]);w.paddingNoTicks=T*n.distToYAxisLabel}var A=n.xFontLabelDescenderLineHeight;t.padding=Object.assign(t.padding,{b:t.x.hide?0:c([t.x.padding,m*(n.xTickWidth+S.height),k*(n.distToXAxisLabel+n.xFontLabelHeight+A)]),l:t.y.hide?0:c([t.y.padding,g*(n.yTickWidth+E.width),T*(n.distToYAxisLabel+n.yFontLabelHeight)])});t.paddingNoTicks=Object.assign({},t.paddingNoTicks,{b:t.x.hide?0:c([t.x.padding,k*(n.distToXAxisLabel+n.xFontLabelHeight+A)]),l:t.y.hide?0:c([t.y.padding,T*(n.distToYAxisLabel+n.yFontLabelHeight)])});t.x=Object.assign(t.x,{density:S.width+x(n,"xDensityPadding",r.dimType)*2,tickFontHeight:d.height,$minimalDomain:s.length,$maxTickTextW:p.width,$maxTickTextH:p.height,tickFormatWordWrapLimit:n.xAxisTickLabelLimit});t.y=Object.assign(t.y,{density:E.height+x(n,"yDensityPadding",i.dimType)*2,tickFontHeight:h.height,$minimalDomain:u.length,$maxTickTextW:v.width,$maxTickTextH:v.height,tickFormatWordWrapLimit:n.yAxisTickLabelLimit});return t};var S=function e(t){var n=t.unit,r=t.meta,i=t.settings,a=t.allowXVertical,o=t.allowYVertical,s=t.inlineLabels;var u=r.dimension(n.x);var l=r.dimension(n.y);var c=r.scaleMeta(n.x,n.guide.x);var f=r.scaleMeta(n.y,n.guide.y);var d=c.isEmpty;var h=f.isEmpty;n.guide.x.tickFormat=w(n.guide.x.tickFormat||b(u,i.defaultFormats),i.utcTime);n.guide.y.tickFormat=w(n.guide.y.tickFormat||b(l,i.defaultFormats),i.utcTime);var p=a?!(u.dimType==="measure"):false;var v=o?!(l.dimType==="measure"):false;n.guide.x.padding=d?0:i.xAxisPadding;n.guide.x.paddingNoTicks=n.guide.x.padding;n.guide.y.padding=h?0:i.yAxisPadding;n.guide.y.paddingNoTicks=n.guide.y.padding;n.guide.x.rotate=p?-90:0;n.guide.x.textAnchor=k(n.guide.x.rotate,"x");n.guide.y.rotate=v?-90:0;n.guide.y.textAnchor=k(n.guide.y.rotate,"y");n.guide=T(n.guide,i,c,f,s);if(s){var m=n.guide.x.label;var g=n.guide.y.label;m.cssClass+=" inline";m.dock="right";m.textAnchor="end";g.cssClass+=" inline";g.dock="right";g.textAnchor="end"}return n};var E={NONE:function e(t,n,r){var a=i.utils.clone(t);A(i.utils.clone(a.unit),a.unit,function(e,t){t.guide.x.tickFontHeight=r.getAxisTickLabelSize("X").height;t.guide.y.tickFontHeight=r.getAxisTickLabelSize("Y").height;t.guide.x.tickFormatWordWrapLimit=r.xAxisTickLabelLimit;t.guide.y.tickFormatWordWrapLimit=r.yAxisTickLabelLimit;return t});return a},"BUILD-LABELS":function e(t,n){var r=i.utils.clone(t);var a=[];var o=[];var s=null;var u=null;i.utils.traverseJSON(r.unit,"units",g,function(e,t){if(e.isLeaf){return t}if(!s&&t.x){s=t}if(!u&&t.y){u=t}t.guide=t.guide||{};t.guide.x=t.guide.x||{label:""};t.guide.y=t.guide.y||{label:""};t.guide.x.label=i.utils.isObject(t.guide.x.label)?t.guide.x.label:{text:t.guide.x.label};t.guide.y.label=i.utils.isObject(t.guide.y.label)?t.guide.y.label:{text:t.guide.y.label};if(t.x){t.guide.x.label.text=t.guide.x.label.text||n.dimension(t.x).dimName}if(t.y){t.guide.y.label.text=t.guide.y.label.text||n.dimension(t.y).dimName}var r=t.guide.x.label.text;if(r){a.push(r);t.guide.x.tickFormatNullAlias=t.guide.x.hasOwnProperty("tickFormatNullAlias")?t.guide.x.tickFormatNullAlias:"No "+r;t.guide.x.label.text="";t.guide.x.label._original_text=r}var l=t.guide.y.label.text;if(l){o.push(l);t.guide.y.tickFormatNullAlias=t.guide.y.hasOwnProperty("tickFormatNullAlias")?t.guide.y.tickFormatNullAlias:"No "+l;t.guide.y.label.text="";t.guide.y.label._original_text=l}return t});var l=" ‚Üí ";if(s){s.guide.x.label.text=s.guide.x.label.hide?"":a.join(l)}if(u){u.guide.y.label.text=u.guide.y.label.hide?"":o.join(l)}return r},"BUILD-GUIDE":function e(t,n,r){var a=i.utils.clone(t);A(i.utils.clone(a.unit),a.unit,function(e,t){if(e.isLeaf){return t}var a=!e.isLeaf&&!e.isLeafParent;var o=n.scaleMeta(t.x,t.guide.x);var s=n.scaleMeta(t.y,t.guide.y);var u=!a&&Boolean(o.dimType)&&o.dimType!=="measure";t.guide.x.rotate=u?-90:0;t.guide.x.textAnchor=k(t.guide.x.rotate);t.guide.x.tickFormat=t.guide.x.tickFormat||b(o,r.defaultFormats);t.guide.y.tickFormat=t.guide.y.tickFormat||b(s,r.defaultFormats);t.guide.x.padding=a?0:r.xAxisPadding;t.guide.x.paddingNoTicks=t.guide.x.padding;t.guide.y.padding=a?0:r.yAxisPadding;t.guide.y.paddingNoTicks=t.guide.y.padding;t.guide=T(t.guide,i.utils.defaults({distToXAxisLabel:o.isEmpty?r.xTickWidth:r.distToXAxisLabel,distToYAxisLabel:s.isEmpty?r.yTickWidth:r.distToYAxisLabel},r),o,s);t.guide.x=Object.assign(t.guide.x,{cssClass:a?t.guide.x.cssClass+" facet-axis":t.guide.x.cssClass,avoidCollisions:a?true:t.guide.x.avoidCollisions});t.guide.y=Object.assign(t.guide.y,{cssClass:a?t.guide.y.cssClass+" facet-axis":t.guide.y.cssClass,avoidCollisions:a?false:t.guide.y.avoidCollisions});t.guide=Object.assign(t.guide,{showGridLines:t.guide.hasOwnProperty("showGridLines")?t.guide.showGridLines:e.isLeafParent?"xy":""});return t});return a},"BUILD-COMPACT":function e(t,n,r){var a=i.utils.clone(t);A(i.utils.clone(a.unit),a.unit,function(e,t){if(e.isLeaf){return t}if(!t.guide.hasOwnProperty("showGridLines")){t.guide.showGridLines=e.isLeafParent?"xy":""}if(e.isLeafParent){return S({unit:t,meta:n,settings:i.utils.defaults({xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},r),allowXVertical:true,allowYVertical:false,inlineLabels:true})}t.guide.x.cssClass+=" facet-axis compact";t.guide.x.avoidCollisions=true;t.guide.y.cssClass+=" facet-axis compact";t.guide.y.avoidCollisions=true;return S({unit:t,meta:n,settings:i.utils.defaults({xAxisPadding:0,yAxisPadding:0,distToXAxisLabel:0,distToYAxisLabel:0,xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},r),allowXVertical:false,allowYVertical:true,inlineLabels:false})});return a}};E.AUTO=function(e,t,n){return["BUILD-LABELS","BUILD-GUIDE"].reduce(function(e,r){return E[r](e,t,n)},e)};E.COMPACT=function(e,t,n){return["BUILD-LABELS","BUILD-COMPACT"].reduce(function(e,r){return E[r](e,t,n)},e)};var A=function e(t,n,r){var a=v(n);a=r(g(a),a);a=d(a,t);var o=i.utils.omit(a,"units");(a.units||[]).forEach(function(t){return e(i.utils.clone(t),m(t,o),r)});return a};var P={get:function e(t,n,r,a){var o=E[t]||E.NONE;var s={dimension:function e(t){var n=r.scales[t];var i=r.sources[n.source].dims[n.dim]||{};return{dimName:n.dim,dimType:i.type,scaleType:n.type}},scaleMeta:function e(t){var n=a("pos",t);var i=n.domain();var o=r.scales[t];var s=r.sources[o.source].dims[o.dim]||{};return{dimName:o.dim,dimType:s.type,scaleType:o.type,values:i,isEmpty:s.type==null}}};var u={unit:i.utils.clone(r.unit)};var l=o(u,s,n);r.unit=l.unit;return r}};var O=t.SpecTransformAutoLayout=function(){function e(t){l(this,e);this.spec=t;this.isApplicable=i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}var r=n.settings.size;var i=n.settings.specEngine.find(function(e){return r.width<=e.width||r.height<=e.height});return P.get(i.name,n.settings,n,function(e,n){return t.getScaleInfo(n||e+":default")})}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FormatterRegistry=undefined;var r=n(3);var i=n(2);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default.format(".4s");var u=a.default.format(".2r");var l=a.default.format(".1e");var c=function(){var e=/\.0+([^\d].*)?$/;var t=/(\.\d+?)0+([^\d].*)?$/;return function(n){return n.replace(e,"$1").replace(t,"$1$2")}}();var f={"x-num-auto":function e(t){var n=Math.abs(t);var r=c(n<1?n===0?"0":n<1e-6?l(t):u(t):s(t));return r},percent:function e(t){var n=parseFloat((t*100).toFixed(2));return n.toString()+"%"},day:a.default.time.format("%d-%b-%Y"),"day-utc":a.default.time.format.utc("%d-%b-%Y"),"day-short":a.default.time.format("%d-%b"),"day-short-utc":a.default.time.format.utc("%d-%b"),week:a.default.time.format("%d-%b-%Y"),"week-utc":a.default.time.format.utc("%d-%b-%Y"),"week-short":a.default.time.format("%d-%b"),"week-short-utc":a.default.time.format.utc("%d-%b"),month:function e(t){var n=new Date(t);var r=n.getMonth();var i=r===0?"%B, %Y":"%B";return a.default.time.format(i)(t)},"month-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=r===0?"%B, %Y":"%B";return a.default.time.format.utc(i)(t)},"month-short":function e(t){var n=new Date(t);var r=n.getMonth();var i=r===0?"%b '%y":"%b";return a.default.time.format(i)(t)},"month-short-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=r===0?"%b '%y":"%b";return a.default.time.format.utc(i)(t)},"month-year":a.default.time.format("%B, %Y"),"month-year-utc":a.default.time.format.utc("%B, %Y"),quarter:function e(t){var n=new Date(t);var r=n.getMonth();var i=(r-r%3)/3;return"Q"+(i+1)+" "+n.getFullYear()},"quarter-utc":function e(t){var n=new Date(t);var r=n.getUTCMonth();var i=(r-r%3)/3;return"Q"+(i+1)+" "+n.getUTCFullYear()},year:a.default.time.format("%Y"),"year-utc":a.default.time.format.utc("%Y"),"x-time-auto":null};var d={get:function e(t,n){var i=n||"";var o=function e(t){return(t===null||typeof t==="undefined"?i:t).toString()};var s=f.hasOwnProperty(t);var u=s?f[t]:o;if(s){u=f[t]}if(!s&&t){u=function e(n){var i=r.utils.isDate(n)?a.default.time.format(t):a.default.format(t);return i(n)}}if(!s&&!t){u=o}return u},add:function e(t,n){f[t]=n}};t.FormatterRegistry=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformCalcSize=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);var a=n(34);function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function e(t){return t.$maxTickTextW};var l=function e(t){return t.rotate==0?t.$maxTickTextW:t.$maxTickTextH};var c=function e(t){return t.density};var f=function e(t){var n=[];var r=[];var i=function e(t){if(t.type==="COORDS.RECT"&&t.units&&t.units[0]&&t.units[0].type==="COORDS.RECT"){var i=t.x.replace(/^x_/,"");var a=t.y.replace(/^y_/,"");if(i!=="null"){n.push(i)}if(a!=="null"){r.push(a)}t.units.forEach(e)}};i(t.unit);var a={};var o={};var s=function e(t){if(t.type==="COORDS.RECT"){t.frames.forEach(function(t){if(t.key){var i=Object.keys(t.key);i.forEach(function(e){if(n.indexOf(e)>=0){if(!(e in a)){a[e]=[]}if(a[e].indexOf(t.key[e])<0){a[e].push(t.key[e])}}if(r.indexOf(e)>=0){if(!(e in o)){o[e]=[]}if(o[e].indexOf(t.key[e])<0){o[e].push(t.key[e])}}});if(t.units){t.units.forEach(e)}}})}};s(t.unit);return{xFacetCount:Object.keys(a).reduce(function(e,t){return e*a[t].length},1),yFacetCount:Object.keys(o).reduce(function(e,t){return e*o[t].length},1)}};var d={"entire-view":function e(t,n,r,i){var o=r.unit.guide;var s=f(r),d=s.xFacetCount,h=s.yFacetCount;var p=o.paddingNoTicks?o.padding.l-o.paddingNoTicks.l:0;var v=o.paddingNoTicks?o.padding.b-o.paddingNoTicks.b:0;var m=o.paddingNoTicks&&t.height-v<r.settings.minChartHeight||h*r.settings.minFacetHeight+v>t.height||d*r.settings.minFacetWidth+p>t.width;var g=o.paddingNoTicks&&t.width-p<r.settings.minChartWidth||h*r.settings.minFacetHeight+v>t.height||d*r.settings.minFacetWidth+p>t.width;if(m){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}if(g){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var y=t.width;var b=n("x",r.unit,u);if(b<=t.width){i(r.unit,r.settings)}else{var x=n("x",r.unit,l);if(x>t.width){var w=Math.max(t.width,n("x",r.unit,c));y=Math.min(x,w)}}var _=Math.max(t.height,n("y",r.unit,c));if(!m&&y>t.width){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}if(!g&&_>t.height){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var k=t.width;var C=t.height;return{newW:k,newH:C}},minimal:function e(t,n,r){var i=n("x",r.unit,c);var a=n("y",r.unit,c);return{newW:i,newH:a}},normal:function e(t,n,r,i){var o=r.unit.guide;if(o.paddingNoTicks){if(t.width-o.padding.l+o.paddingNoTicks.l<r.settings.minChartWidth){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}if(t.height-o.padding.b+o.paddingNoTicks.b<r.settings.minChartHeight){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}}var s=t.width;var f=n("x",r.unit,u);if(f<=t.width){i(r.unit,r.settings)}else{var d=n("x",r.unit,l);if(d>t.width){var h=Math.max(t.width,n("x",r.unit,c));s=Math.min(d,h)}}var p=Math.max(t.height,n("y",r.unit,c));return{newW:s,newH:p}},"fit-width":function e(t,n,r,i){var o=r.unit.guide;var s=o.paddingNoTicks?o.padding.l-o.paddingNoTicks.l:0;if(o.paddingNoTicks&&t.width-s<r.settings.minChartWidth||f(r).xFacetCount*r.settings.minFacetWidth+s>t.width){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"y")}var l=n("x",r.unit,u);if(l<=t.width){i(r.unit,r.settings)}var d=t.width;var h=n("y",r.unit,c);return{newW:d,newH:h}},"fit-height":function e(t,n,r){var i=r.unit.guide;var o=i.paddingNoTicks?i.padding.b-i.paddingNoTicks.b:0;if(i.paddingNoTicks&&t.height-o<r.settings.minChartHeight||f(r).yFacetCount*r.settings.minFacetHeight+o>t.height){a.SpecTransformOptimize.hideAxisTicks(r.unit,r.settings,"x")}var s=n("x",r.unit,c);var u=t.height;return{newW:s,newH:u}}};var h=t.SpecTransformCalcSize=function(){function e(t){s(this,e);this.spec=t;this.isApplicable=i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}var r=n.settings.fitModel;if(!r){return n}var i=n.scales;var s=function e(t,n){return t.reduce(function(e,t){var r=t.key||{};var i=r[n];e[i]=e[i]||[];e[i].push(t);return e},{})};var u=function e(t,n){var r=0;if(t.discrete){r=n*t.domain().length}else{r=n*4}return r};var l=function e(n,r,a){var l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var c=n==="x"?r.x:r.y;var f=n==="x"?r.y:r.x;var d=r.guide;var h=n==="x"?a(d.x):a(d.y);var p=n==="x"?d.padding.l+d.padding.r:d.padding.b+d.padding.t;if(r.units[0].type==="ELEMENT.INTERVAL"&&n==="y"===Boolean(r.units[0].flip)&&r.units[0].label&&!t.getScaleInfo(r.units[0].label,l).isEmpty()){var v=d.label&&d.label.fontSize?d.label.fontSize:10;var m=r.frames.reduce(function(e,t){return t.full().length*v},0);var g=u(t.getScaleInfo(c,l),h);return p+Math.max(m,g)}else if(r.units[0].type!=="COORDS.RECT"){var y=t.getScaleInfo(c,l);return p+u(y,h)}else{var b=s(r.frames,i[f].dim);var x=Object.keys(b).map(function(t){return b[t].map(function(t){return e(n,t.units[0],a,t)}).reduce(function(e,t){return e+t},0)});var w=Math.max.apply(Math,o(x));return p+w}};var c=n.settings.size;var f=c.width;var h=c.height;var p=d[r];if(p){var v=p(c,l,n,a.SpecTransformOptimize.optimizeXAxisLabel);f=v.newW;h=v.newH}var m=function e(r,i,a){var o=n.settings.getScrollbarSize(t.getLayout().contentContainer);var s=i.width>r.width&&i.width<=r.width*a?r.width:i.width;var u=i.height>r.height&&i.height<=r.height*a?r.height:i.height;var l=r.width-s;var c=r.height-u;var f=c>=0?0:o.width;var d=l>=0?0:o.height;return{height:u-d,width:s-f}};n.settings.size=m(c,{width:f,height:h},n.settings.avoidScrollAtRatio);return n}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=t.SpecTransformOptimize=function(){function e(){r(this,e)}n(e,null,[{key:"optimizeXAxisLabel",value:function e(t,n){var r=n.xAxisTickLabelLimit;var i=function e(t){if(!t.guide.x.hide&&!t.guide.x.hideTicks&&t.guide.x.rotate!==0){t.guide.x.rotate=0;t.guide.x.textAnchor="middle";var n=Math.min(r,t.guide.x.$maxTickTextW);var i=0-n+t.guide.x.$maxTickTextH;a(t,i)}(t.units||[]).filter(function(e){return e.type==="COORDS.RECT"}).forEach(function(t){return e(t)})};var a=function e(n,r){if(t!==n&&n.guide.autoLayout==="extract-axes"){t.guide.x.padding+=r;t.guide.padding.b+=r}else{n.guide.x.label.padding+=n.guide.x.label.padding>0?r:0;n.guide.padding.b+=n.guide.padding.b>0?r:0}};i(t)}},{key:"hideAxisTicks",value:function e(t,n,r){var i=function e(t){var n=r==="x"?"b":"l";var i=t.guide;if(!i[r].hide&&!i[r].hideTicks){i[r].hideTicks=true;var a=i[r].label.text&&!i[r].label.hide;i.padding[n]=i.paddingNoTicks?i.paddingNoTicks[n]:0;i[r].padding=i[r].paddingNoTicks||0;i[r].label.padding=a?i[r].label.paddingNoTicks:0}(t.units||[]).filter(function(e){return e.type==="COORDS.RECT"}).forEach(function(t){return e(t)})};i(t)}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformApplyRatio=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecTransformApplyRatio=function(){function e(t){a(this,e);this.spec=t;this.isApplicable=t.settings.autoRatio&&i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(t){var n=this.spec;if(!this.isApplicable){return n}try{this.ruleApplyRatio(n,t)}catch(e){if(e.message!=="Not applicable"){throw e}}return n}},{key:"ruleApplyRatio",value:function e(t,n){var r=function e(t){return t.type==="COORDS.RECT"||t.type==="RECT"};var a=function e(t){return t.type.indexOf("ELEMENT.")===0};var o=function e(t,n,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var a=n(t,i);if(a){(t.units||[]).map(function(t){return e(t,n,r,i+1)})}r(t,i)};var s=[];var u=[];var l=function e(t,n){if(n>1||!r(t)){throw new Error("Not applicable")}s.push(t.x);u.push(t.y);var i=t.units||[];var o=i.map(function(e){if(!(r(e)||a(e))){throw new Error("Not applicable")}return e}).filter(r);return o.length===1};o(t.unit,l,function(){return 0});var c=function e(n){return t.scales[n]};var f=function e(t){return t.source==="/"&&!t.ratio&&!t.fitToFrameByDims};var d=function e(t){return t.type==="ordinal"||t.type==="period"&&!t.period};var h=s.map(c).filter(f);var p=u.map(c).filter(f);var v=2;if([h.length,p.length].some(function(e){return e===v})){var m=function e(t){return t.dim};var g=function e(t,n,r){return t.fitToFrameByDims=r.slice(0,n).map(m)};var y=function e(t,r){if(r.filter(d).length===v){r.forEach(g);r[0].ratio=i.utils.generateRatioFunction(t,r.map(m),n)}};y("x",h);y("y",p)}}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SpecTransformExtractAxes=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.SpecTransformExtractAxes=function(){function e(t){a(this,e);this.spec=t;this.isApplicable=t.settings.layoutEngine==="EXTRACT"&&i.utils.isSpecRectCoordsOnly(t.unit)}r(e,[{key:"transform",value:function e(){var t=this.spec;if(!this.isApplicable){return t}try{this.ruleExtractAxes(t)}catch(e){if(e.message==="Not applicable"){console.log("[TauCharts]: can't extract axes for the given chart specification")}else{throw e}}return t}},{key:"ruleExtractAxes",value:function e(t){var n=function e(t){return t.type==="COORDS.RECT"||t.type==="RECT"};var r=function e(t){return t.type.indexOf("ELEMENT.")===0};var a=function e(t){return t?10:0};var o={l:0,r:10,t:10,b:0};var s={l:0,b:0};var u=[];var l=[];var c=function e(t,i){if(i>1||!n(t)){throw new Error("Not applicable")}t.guide=t.guide||{};var a=t.guide;var c=a.padding||{l:0,r:0,t:0,b:0};var f=a.paddingNoTicks||{l:0,b:0};o.l+=c.l;o.r+=c.r;o.t+=c.t;o.b+=c.b;s.l+=f.l;s.b+=f.b;u.push(Object.assign({},o));l.push(Object.assign({},s));var d=t.units||[];var h=d.map(function(e){if(!(n(e)||r(e))){throw new Error("Not applicable")}return e}).filter(n);return h.length===1};var f=function e(t){var n=u.pop();var r=l.pop();var i=t.guide||{};i.x=i.x||{};i.x.padding=i.x.padding||0;i.x.paddingNoTicks=i.x.paddingNoTicks||0;i.y=i.y||{};i.y.padding=i.y.padding||0;i.y.paddingNoTicks=i.y.paddingNoTicks||0;i.padding={l:a(t.y),r:a(1),t:a(1),b:a(t.x)};i.paddingNoTicks={l:0,b:0};i.autoLayout="extract-axes";i.x.padding+=o.b-n.b;i.y.padding+=o.l-n.l;i.x.paddingNoTicks+=s.b-r.b;i.y.paddingNoTicks+=s.l-r.l};i.utils.traverseSpec(t.unit,c,f);t.unit.guide.padding=o;t.unit.guide.paddingNoTicks=s}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.src,r=n===undefined?null:n,a=t.timeout,o=a===undefined?Number.MAX_SAFE_INTEGER:a,s=t.syncInterval,u=s===undefined?Number.MAX_SAFE_INTEGER:s,l=t.callbacks,c=l===undefined?{}:l;i(this,e);this.setTimeout(o);this.setSyncInterval(u);this.setCallbacks(c);this._running=false;this._queue=[];this._result=r;this._syncDuration=0;this._asyncDuration=0;this._lastCall=null;this._requestedFrameId=null;this._tasksCount=0;this._finishedTasksCount=0}r(e,[{key:"setTimeout",value:function t(n){e.checkType(n,"number","timeout");this._timeout=n}},{key:"setSyncInterval",value:function t(n){e.checkType(n,"number","syncInterval");this._syncInterval=n}},{key:"setCallbacks",value:function t(n){e.checkType(n,"object","callbacks");this._callbacks=Object.assign(this._callbacks||{},n)}},{key:"addTask",value:function e(t){this._queue.push(t);this._tasksCount++;return this}},{key:"run",value:function t(){if(this._running){throw new Error("Task Runner is already running")}this._running=true;e.runnersInProgress++;this._loopTasks()}},{key:"isRunning",value:function e(){return this._running}},{key:"_loopTasks",value:function t(){var n;var r;var i=0;var a;var o;var s=this._syncInterval/e.runnersInProgress;while(this._running&&!(a=this._asyncDuration>this._timeout)&&!(o=i>s)&&(n=this._queue.shift())){r=this._runTask(n);if(r===null){return}this._syncDuration+=r;this._asyncDuration+=r;i+=r}if(a&&this._queue.length>0){this.stop();if(this._callbacks.timeout){this._callbacks.timeout.call(null,this._asyncDuration,this)}}if(!a&&o&&this._queue.length>0){this._requestFrame()}if(this._queue.length===0){this.stop();if(this._callbacks.done){this._callbacks.done.call(null,this._result,this)}}}},{key:"_runTask",value:function e(t){var n=performance.now();if(this._callbacks.error){try{this._result=t.call(null,this._result,this)}catch(e){this.stop();this._callbacks.error.call(null,e,this);return null}}else{this._result=t.call(null,this._result,this)}var r=performance.now();var i=r-n;this._finishedTasksCount++;if(this._callbacks.progress){this._callbacks.progress.call(null,this._finishedTasksCount/this._tasksCount,this)}return i}},{key:"_requestFrame",value:function e(){var t=this;var n=performance.now();this._requestedFrameId=requestAnimationFrame(function(){t._requestedFrameId=null;var e=performance.now();t._asyncDuration+=e-n;t._loopTasks()})}},{key:"stop",value:function t(){if(!this._running){throw new Error("Task Runner is already stopped")}this._running=false;e.runnersInProgress--;if(this._requestedFrameId){cancelAnimationFrame(this._requestedFrameId);this._requestedFrameId=null}}}],[{key:"checkType",value:function e(t,r,i){if((typeof t==="undefined"?"undefined":n(t))!==r){throw new Error('Task Runner "'+i+'" property is not "'+r+'"')}}}]);return e}();t.default=a;a.runnersInProgress=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Chart=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=function e(t,n,r){if(t===null){t=Function.prototype}var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var a=n(20);var o=n(3);var s=n(39);function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var f=function(e){c(t,e);function t(e){u(this,t);var n=s.chartTypesRegistry.validate(e.type,e);if(n.length>0){throw new Error(n[0])}var r=s.chartTypesRegistry.get(e.type);e=o.utils.defaults(e,{autoResize:true});e.settings=a.Plot.setupSettings(e.settings);e.dimensions=a.Plot.setupMetaInfo(e.dimensions,e.data);var i=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r(e)));if(e.autoResize){t.winAware.push(i)}return i}r(t,[{key:"destroy",value:function e(){var n=t.winAware.indexOf(this);if(n!==-1){t.winAware.splice(n,1)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]);return t}(a.Plot);f.winAware=[];f.resizeOnWindowEvent=function(){var e=void 0;function t(){if(e||!f.winAware.length){return}e=window.requestAnimationFrame(n)}function n(){e=0;for(var t=0,n=f.winAware.length;t<n;t++){f.winAware[t].resize()}}return t}();window.addEventListener("resize",f.resizeOnWindowEvent);t.Chart=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.chartTypesRegistry=undefined;var r=n(8);var i={};var a={};var o=function e(t){var n="Chart type "+t+" is not supported.";console.log(n);console.log("Use one of "+Object.keys(i).join(", ")+".");throw new r.TauChartError(n,r.errorCodes.NOT_SUPPORTED_TYPE_CHART)};var s={validate:function e(t,n){if(!a.hasOwnProperty(t)){o(t)}return a[t].reduce(function(e,t){return e.concat(t(n)||[])},[])},get:function e(t){var n=i[t];if(typeof n!=="function"){o(t)}return n},add:function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];i[t]=n;a[t]=r;return this},getAllRegisteredTypes:function e(){return i}};t.chartTypesRegistry=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Cartesian=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=h(i);var o=n(5);var s=n(1);var u=n(10);var l=n(3);var c=n(22);var f=n(32);var d=n(9);function h(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var y=s.utilsDom.selectOrAppend;var b=function e(t){var n=20;var r=t<=n?1:.75;return Math.max(2,Math.round(t*r))};var x=t.Cartesian=function(e){g(t,e);function t(e){v(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=l.utils.defaults(n.config.guide||{},{showGridLines:"xy",padding:{l:50,r:0,t:0,b:50}});n.config.guide.x=n.config.guide.x||{};n.config.guide.x=l.utils.defaults(n.config.guide.x,{cssClass:"x axis",textAnchor:"middle",padding:10,hide:false,scaleOrient:"bottom",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100});if(typeof n.config.guide.x.label==="string"){n.config.guide.x.label={text:n.config.guide.x.label}}n.config.guide.x.label=l.utils.defaults(n.config.guide.x.label,{text:"X",rotate:0,padding:40,textAnchor:"middle"});n.config.guide.y=n.config.guide.y||{};n.config.guide.y=l.utils.defaults(n.config.guide.y,{cssClass:"y axis",textAnchor:"start",padding:10,hide:false,scaleOrient:"left",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100});if(typeof n.config.guide.y.label==="string"){n.config.guide.y.label={text:n.config.guide.y.label}}n.config.guide.y.label=l.utils.defaults(n.config.guide.y.label,{text:"Y",rotate:-90,padding:20,textAnchor:"middle"});var r=n.config;var i=r.guide;if(i.autoLayout==="extract-axes"){var a=r.options.containerHeight;var o=a-(r.options.top+r.options.height);i.x.hide=Math.floor(o)>0;i.y.hide=Math.floor(r.options.left)>0}var s=n.config.options;var u=n.config.guide.padding;n.L=s.left+u.l;n.T=s.top+u.t;n.W=s.width-(u.l+u.r);n.H=s.height-(u.t+u.b);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.W;var r=this.H;this.xScale=t("pos",this.config.x,[0,n]);this.yScale=t("pos",this.config.y,[r,0]);this.regScale("x",this.xScale).regScale("y",this.yScale);return{scaleX:this.xScale,scaleY:this.yScale,xi:function e(){return n/2},yi:function e(){return r/2},sizeX:function e(){return n},sizeY:function e(){return r}}}},{key:"getGrammarRules",value:function e(){return[function(e){var t=e.scaleX;var n=e.scaleY;return{xi:function n(r){return!r?e.xi(r):t(r[t.dim])},yi:function t(r){return!r?e.yi(r):n(r[n.dim])},sizeX:function n(r){return!r?e.sizeX(r):t.stepSize(r[t.dim])},sizeY:function t(r){return!r?e.sizeY(r):n.stepSize(r[n.dim])}}}]}},{key:"createScreenModel",value:function e(t){return t}},{key:"allocateRect",value:function e(t){var n=this;var r=this.screenModel;return{slot:function e(t){return n.config.options.container.selectAll(".uid_"+t)},left:r.xi(t)-r.sizeX(t)/2,top:r.yi(t)-r.sizeY(t)/2,width:r.sizeX(t),height:r.sizeY(t),containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function e(t){var n=Object.assign({},this.config);var r=n.options;var i=this.W;var a=this.H;n.x=this.xScale;n.y=this.yScale;n.x.scaleObj=this.xScale;n.y.scaleObj=this.yScale;n.x.guide=n.guide.x;n.y.guide=n.guide.y;n.x.guide.label.size=i;n.y.guide.label.size=a;(r.container.attr("transform")?d.d3_transition(r.container,this.config.guide.animationSpeed,"cartesianContainerTransform"):r.container).attr("transform",u.utilsDraw.translate(this.L,this.T));if(!n.x.guide.hide){var o=n.x.guide.scaleOrient;var s=o==="top"?[0,0-n.guide.x.padding]:[0,a+n.guide.x.padding];this._drawDimAxis(r.container,n.x,s,i)}else{this._removeDimAxis(r.container,n.x)}if(!n.y.guide.hide){var l=n.y.guide.scaleOrient;var f=l==="right"?[i+n.guide.y.padding,0]:[0-n.guide.y.padding,0];this._drawDimAxis(r.container,n.y,f,a)}else{this._removeDimAxis(r.container,n.y)}var h=t.reduce(function(e,t){return e.concat((t.units||[]).map(function(e){return e.uid}))},[]);var p=this._drawGrid(r.container,n,i,a,r);var v=d.d3_selectAllImmediate(p,".cell").data(h,function(e){return e});v.enter().append("g").attr("class",function(e){return c.CSS_PREFIX+"cell cell uid_"+e});d.d3_transition(v.classed("tau-active",true),this.config.guide.animationSpeed).attr("opacity",1);d.d3_transition(v.exit().classed("tau-active",false),this.config.guide.animationSpeed).attr("opacity",1e-6).remove()}},{key:"_drawDimAxis",value:function e(t,n,r,i){var o=this;var s=a.default.svg.axis().scale(n.scaleObj).orient(n.guide.scaleOrient);var l=f.FormatterRegistry.get(n.guide.tickFormat,n.guide.tickFormatNullAlias);if(l!==null){s.ticks(b(i/n.guide.density));s.tickFormat(l)}var c=this.config.guide.animationSpeed;y(t,this._getAxisSelector(n)).classed("tau-active",true).classed(n.guide.cssClass,true).call(function(e){var t=d.d3_transition(e,c,"axisTransition");var a=e.attr("transform");var l=u.utilsDraw.translate.apply(u.utilsDraw,p(r));if(l!==a){(a?t:e).attr("transform",u.utilsDraw.translate.apply(u.utilsDraw,p(r)))}t.call(s);t.attr("opacity",1);var f=u.utilsDraw.getOrientation(n.guide.scaleOrient)==="h";var h=n.scaleType==="ordinal"||n.scaleType==="period";if(h&&!n.guide.hideTicks){d.d3_decorator_prettify_categorical_axis_ticks(t,n,f,c)}if(n.scaleType==="linear"){d.d3_decorator_highlightZeroTick(e,n.scaleObj)}d.d3_decorator_wrap_tick_label(e,c,n.guide,f,n);if(!n.guide.label.hide){d.d3_decorator_prettify_axis_label(e,n.guide.label,f,i,c)}if(n.guide.hideTicks){e.selectAll(".tick").remove();e.selectAll(".domain").remove();return}var v=n.scaleObj.ticks?n.scaleObj.ticks():n.scaleObj.domain();var m=function t(){if(h&&n.guide.avoidCollisions){d.d3_decorator_avoidLabelsCollisions(e,f,v)}if(f&&n.scaleType==="time"){d.d3_decorator_fixHorizontalAxisTicksOverflow(e,v)}};var g=function t(){if(f&&(n.scaleType==="time"||n.scaleType==="linear")){d.d3_decorator_fixEdgeAxisTicksOverflow(e,v)}};var y=function e(){m();g()};m();var b="_transitionEndTimeout_"+(f?"h":"v");clearTimeout(o[b]);if(c>0){o[b]=setTimeout(y,c*1.5)}else{g()}})}},{key:"_removeDimAxis",value:function e(t,n){var r=d.d3_selectAllImmediate(t,this._getAxisSelector(n)).classed("tau-active",false);d.d3_transition(r,this.config.guide.animationSpeed,"axisTransition").attr("opacity",1e-6).remove()}},{key:"_getAxisSelector",value:function e(t){var n=u.utilsDraw.getOrientation(t.guide.scaleOrient)==="h";return"g."+(n?"x":"y")+".axis"}},{key:"_drawGrid",value:function e(t,n,r,i){var o=this;var s=y(t,"g.grid").attr("transform",u.utilsDraw.translate(0,0)).call(function(e){var t=e;var s=o.config.guide.animationSpeed;var l=(n.guide.showGridLines||"").toLowerCase();if(l.length>0){var c=y(t,"g.grid-lines");if(l.indexOf("x")>-1){var h=n.x;var p=h.guide.scaleOrient==="top"?-1:1;var v=a.default.svg.axis().scale(h.scaleObj).orient(h.guide.scaleOrient).tickSize(p*i);var m=f.FormatterRegistry.get(h.guide.tickFormat);if(m!==null){v.ticks(b(r/h.guide.density));v.tickFormat(m)}var g=y(c,"g.grid-lines-x");var x=d.d3_transition(g,s).call(v);var w=u.utilsDraw.getOrientation(h.guide.scaleOrient)==="h";var _=h.scaleType==="ordinal"||h.scaleType==="period";if(_){d.d3_decorator_prettify_categorical_axis_ticks(x,h,w,s)}if(h.scaleType==="linear"&&!h.guide.hideTicks){d.d3_decorator_highlightZeroTick(g,h.scaleObj)}var k=y(c,"g.tau-extraGridLines");d.d3_decorator_fix_axis_start_line(k,w,r,i,s);if(h.guide.hideTicks){g.selectAll(".tick").filter(function(e){return e!=0}).remove()}}if(l.indexOf("y")>-1){var C=n.y;var T=C.guide.scaleOrient==="right"?1:-1;var S=a.default.svg.axis().scale(C.scaleObj).orient(C.guide.scaleOrient).tickSize(T*r);var E=f.FormatterRegistry.get(C.guide.tickFormat);if(E!==null){S.ticks(b(i/C.guide.density));S.tickFormat(E)}var A=y(c,"g.grid-lines-y");var P=d.d3_transition(A,s).call(S);var O=u.utilsDraw.getOrientation(C.guide.scaleOrient)==="h";var M=C.scaleType==="ordinal"||C.scaleType==="period";if(M){d.d3_decorator_prettify_categorical_axis_ticks(P,C,O,s)}if(C.scaleType==="linear"&&!C.guide.hideTicks){d.d3_decorator_highlightZeroTick(A,C.scaleObj)}var N=["time","ordinal","period"];var R=N.indexOf(C.scaleType)!==-1;if(R){var D=y(c,"g.tau-extraGridLines");d.d3_decorator_fix_axis_start_line(D,O,r,i,s)}if(C.guide.hideTicks){A.selectAll(".tick").filter(function(e){return e!=0}).remove()}}c.selectAll("text").remove()}});return s}}]);return t}(o.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Parallel=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=f(i);var o=n(5);var s=n(10);var u=n(3);var l=n(22);var c=n(32);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var m=t.Parallel=function(e){v(t,e);function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=u.utils.defaults(n.config.guide||{},{padding:{l:50,r:50,t:50,b:50},enableBrushing:false});n.columnsBrushes={};n.on("force-brush",function(e,t){return n._forceBrushing(t)});var r=n.config.options;var i=n.config.guide.padding;n.L=r.left+i.l;n.T=r.top+i.t;n.W=r.width-(i.l+i.r);n.H=r.height-(i.t+i.b);return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=this.W;var i=this.H;this.columnsScalesMap=n.columns.reduce(function(e,n){e[n]=t("pos",n,[i,0]);return e},{});var a=r/(n.columns.length-1);var o=n.columns.reduce(function(e,t,n){e[t]=n*a;return e},{});this.xBase=function(e){return o[e]};this.regScale("columns",this.columnsScalesMap);return{}}},{key:"allocateRect",value:function e(){var t=this;return{slot:function e(n){return t.config.options.container.selectAll(".uid_"+n)},left:0,top:0,width:this.W,height:this.H,containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function e(t){var n=this;var r=Object.assign({},this.config);var i=r.options;var o=function e(t,n,r){var i=n.selectAll(".layer_"+t).data(r.units,function(e){return e.uid});i.exit().remove();i.enter().append("g").attr("class",function(e){return"layer_"+t+" uid_"+e.uid})};var s=function e(t){o(i.frameId,a.default.select(this),t)};var u=this._fnDrawGrid(i.container,r,i.frameId,Object.keys(this.columnsScalesMap).reduce(function(e,t){return e.concat([n.columnsScalesMap[t].getHash()])},[]).join("_"));var c=u.selectAll(".parent-frame-"+i.frameId).data(t,function(e){return e.hash()});c.exit().remove();c.each(s);c.enter().append("g").attr("class",function(e){return l.CSS_PREFIX+"cell cell parent-frame-"+i.frameId+" frame-"+e.hash()}).each(s);var f=this._fnDrawColumns(u,r);if(r.guide.enableBrushing){this._enableBrushing(f)}}},{key:"_fnDrawGrid",value:function e(t,n,r,i){var a=t.selectAll(".grid_"+r).data([i],function(e){return e});a.exit().remove();a.enter().append("g").attr("class","grid grid_"+r).attr("transform",s.utilsDraw.translate(this.L,this.T));return a}},{key:"_fnDrawColumns",value:function e(t,n){var r=n.guide.columns||{};var i=this.xBase;var o=this.columnsScalesMap;var u=a.default.svg.axis().orient("left");var l=t.selectAll(".column").data(n.columns,function(e){return e});l.exit().remove();l.enter().append("g").attr("class","column").attr("transform",function(e){return s.utilsDraw.translate(i(e),0)}).call(function(){this.append("g").attr("class","y axis").each(function(e){var t=o[e].dim;var n=u.scale(o[e]);var i=r[t]||{};var s=c.FormatterRegistry.get(i.tickFormat,i.tickFormatNullAlias);if(s!==null){n.tickFormat(s)}a.default.select(this).call(n)}).append("text").attr("class","label").attr("text-anchor","middle").attr("y",-9).text(function(e){return((r[e]||{}).label||{}).text||o[e].dim})});return l}},{key:"_enableBrushing",value:function e(t){var n=this;var r=16;var i=this.columnsScalesMap;var o=this.columnsBrushes;var s=function e(t){return t};var l=function e(t){return t};var c=function e(){var t=Object.keys(o).filter(function(e){return!o[e].empty()}).map(function(e){var t=o[e].extent();var n=[];if(i[e].discrete){n=i[e].domain().filter(function(n){var r=i[e](n);return t[0]<=r&&t[1]>=r})}else{n=[t[0],t[1]]}return{dim:i[e].dim,func:i[e].discrete?"inset":"between",args:n}});n.fire("brush",t)};t.selectAll(".brush").remove();t.append("g").attr("class","brush").each(function(e){o[e]=a.default.svg.brush().y(i[e]).on("brushstart",s).on("brush",c).on("brushend",l);a.default.select(this).classed("brush-"+u.utils.generateHash(e),true).call(o[e])}).selectAll("rect").attr("x",r/2*-1).attr("width",r);return t}},{key:"_forceBrushing",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=this.columnsBrushes;var r=this.columnsScalesMap;Object.keys(t).filter(function(e){return n[e]&&r[e]&&t[e]}).forEach(function(e){var i=t[e];var o=[];if(r[e].discrete){var s=i.map(r[e]).filter(function(e){return e>=0});var l=r[e].stepSize()/2;o=[Math.min.apply(Math,d(s))-l,Math.max.apply(Math,d(s))+l]}else{o=[i[0],i[1]]}var c=u.utils.generateHash(e);n[e].extent(o);n[e](a.default.select(".brush-"+c));n[e].event(a.default.select(".brush-"+c))})}}]);return t}(o.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoMap=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(2);var a=f(i);var o=n(3);var s=n(43);var u=f(s);var l=n(44);var c=n(5);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}a.default.labeler=l.d3Labeler;var v=5.5;var m=10;var g=.5;var y=["land","continents","georegions","countries","regions","subunits","states","counties"];var b=t.GeoMap=function(e){p(t,e);function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=o.utils.defaults(n.config.guide||{},{defaultFill:"rgba(128,128,128,0.25)",padding:{l:0,r:0,t:0,b:0},showNames:true});n.contourToFill=null;n.on("highlight-area",function(e,t){return n._highlightArea(t)});n.on("highlight-point",function(e,t){return n._highlightPoint(t)});n.on("highlight",function(e,t){return n._highlightPoint(t)});return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=n.options;var i=n.guide.padding;var a=r.width-(i.l+i.r);var o=r.height-(i.t+i.b);this.latScale=t("pos",n.latitude,[0,o]);this.lonScale=t("pos",n.longitude,[a,0]);this.sizeScale=t("size",n.size);this.colorScale=t("color",n.color);this.codeScale=t("value",n.code);this.fillScale=t("fill",n.fill);this.W=a;this.H=o;this.regScale("latitude",this.latScale).regScale("longitude",this.lonScale).regScale("size",this.sizeScale).regScale("color",this.colorScale).regScale("code",this.codeScale).regScale("fill",this.fillScale);return{}}},{key:"drawFrames",value:function e(t){var n=this;var r=this.config.guide;if(typeof r.sourcemap==="string"){a.default.json(r.sourcemap,function(e,r){if(e){throw e}n._drawMap(t,r)})}else{this._drawMap(t,r.sourcemap)}}},{key:"_calcLabels",value:function e(t,n,r){var i=this.W;var o=this.H;var s={};n.forEach(function(e){var n=u.default.feature(t,t.objects[e]).features||[];var l=n.map(function(t){var n=t.properties||{};var a=r.centroid(t);var o=r.bounds(t);var s=a[0];var u=a[1];var l=o[1][0];var c=o[0][0];var f=l-c;var d=n.name||"";var h=n.abbr||d;var p=f<d.length*v;var m=p?h:d;var g=f<2.5*v;var y=g?i-s-3*v:0;return{id:e+"-"+t.id,sx:s,sy:u,x:s+y,y:u,width:m.length*v,height:10,name:m,r:y,isRef:g}}).filter(function(e){return!Number.isNaN(e.x)&&!Number.isNaN(e.y)});var c=l.map(function(e){return{x:e.sx,y:e.sy,r:e.r}});a.default.labeler().label(l).anchor(c).width(i).height(o).start(m);l.filter(function(e){return!e.isRef}).map(function(e){e.x=e.sx;e.y=e.sy;return e}).reduce(function(e,t){e[t.id]=t;return e},s);var f=l.filter(function(e){return e.isRef});if(f.length<6){f.reduce(function(e,t){e[t.id]=t;return e},s)}});return s}},{key:"_drawMap",value:function e(t,n){var r=this;var i=this;var o=this.config.guide;var s=this.config.options;var l=this.config.options.container;var c=this.latScale;var f=this.lonScale;var d=this.sizeScale;var h=this.colorScale;var p=this.codeScale;var m=this.fillScale;var b=this.W;var x=this.H;var w=y.filter(function(e){return(n.objects||{}).hasOwnProperty(e)});if(w.length===0){throw new Error("Invalid map: should contain some contours")}var _;if(!m.dim){_=w[w.length-1]}else if(p.georole){if(w.indexOf(p.georole)===-1){console.log('There is no contour for georole "'+p.georole+'"');console.log("Available contours are: "+w.join(" | "));throw new Error("Invalid [georole]")}_=p.georole}else{console.log("Specify [georole] for code scale");throw new Error("[georole] is missing")}this.contourToFill=_;var k;if(c.dim&&f.dim){var C=a.default.extent(c.domain());var T=a.default.extent(f.domain());k=[(T[1]+T[0])/2,(C[1]+C[0])/2]}var S=this._createProjection(n,w[0],k);var E=a.default.geo.path().projection(S);var A=l.selectAll(".map-container").data([""+b+x+k+w.join("-")],function(e){return e});A.exit().remove();A.enter().append("g").call(function(){var e=this;e.attr("class","map-container");var t={};var r=w.reduceRight(function(e,t){return e.concat(t)},[]);if(o.showNames){t=i._calcLabels(n,r,E)}r.forEach(function(r,i){var a=function e(n){return t[r+"-"+n.id]};e.selectAll(".map-contour-"+r).data(u.default.feature(n,n.objects[r]).features||[]).enter().append("g").call(function(){var e=this;e.attr("class","map-contour-"+r+" map-contour-level map-contour-level-"+i).attr("fill","none");e.append("title").text(function(e){return(e.properties||{}).name});e.append("path").attr("d",E);e.append("text").attr("class","place-label-"+r).attr("transform",function(e){var t=a(e);return t?"translate("+[t.x,t.y]+")":""}).text(function(e){var t=a(e);return t?t.name:""});e.append("line").attr("class","place-label-link-"+r).attr("stroke","gray").attr("stroke-width",.25).attr("x1",function(e){var t=a(e);return t&&t.isRef?t.sx:0}).attr("y1",function(e){var t=a(e);return t&&t.isRef?t.sy:0}).attr("x2",function(e){var t=a(e);return t&&t.isRef?t.x-t.name.length*.6*v:0}).attr("y2",function(e){var t=a(e);return t&&t.isRef?t.y-3.5:0})})});if(n.objects.hasOwnProperty("places")){var s=u.default.feature(n,n.objects.places);var l=s.features.map(function(e){var t=S(e.geometry.coordinates);return{x:t[0]+3.5,y:t[1]+3.5,width:e.properties.name.length*v,height:12,name:e.properties.name}});var c=s.features.map(function(e){var t=S(e.geometry.coordinates);return{x:t[0],y:t[1],r:2.5}});a.default.labeler().label(l).anchor(c).width(b).height(x).start(100);e.selectAll(".place").data(c).enter().append("circle").attr("class","place").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("r",function(e){return e.r+"px"});e.selectAll(".place-label").data(l).enter().append("text").attr("class","place-label").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).text(function(e){return e.name})}});this.groupByCode=t.reduce(function(e,t){return t.part().reduce(function(e,t){var n=(t[p.dim]||"").toLowerCase();e[n]=t;return e},e)},{});var P=this._resolveFeature.bind(this);A.selectAll(".map-contour-"+_).data(u.default.feature(n,n.objects[_]).features).call(function(){this.classed("map-contour",true).attr("fill",function(e){var t=P(e);return t===null?o.defaultFill:m(t[m.dim])})}).on("mouseover",function(e){return r.fire("area-mouseover",{data:P(e),event:a.default.event})}).on("mouseout",function(e){return r.fire("area-mouseout",{data:P(e),event:a.default.event})}).on("click",function(e){return r.fire("area-click",{data:P(e),event:a.default.event})});if(!c.dim||!f.dim){return[]}var O=function e(){return this.attr({r:function e(t){var n=t.data;return d(n[d.dim])},transform:function e(t){var n=t.data;return"translate("+S([n[f.dim],n[c.dim]])+")"},class:function e(t){var n=t.data;return h(n[h.dim])},opacity:g}).on("mouseover",function(e){var t=e.data;return i.fire("point-mouseover",{data:t,event:a.default.event})}).on("mouseout",function(e){var t=e.data;return i.fire("point-mouseout",{data:t,event:a.default.event})}).on("click",function(e){var t=e.data;return i.fire("point-click",{data:t,event:a.default.event})})};var M=function e(){this.attr("class",function(e){return"frame frame-"+e.hash}).call(function(){var e=this.selectAll("circle").data(function(e){return e.data.map(function(e){return{data:e,uid:s.uid}})});e.exit().remove();e.call(O);e.enter().append("circle").call(O)})};var N=function e(t){return{tags:t.key||{},hash:t.hash(),data:t.part()}};var R=A.selectAll(".frame").data(t.map(N),function(e){return e.hash});R.exit().remove();R.call(M);R.enter().append("g").call(M);return[]}},{key:"_resolveFeature",value:function e(t){var n=this.groupByCode;var r=t.properties;var i=["c1","c2","c3","abbr","name"].filter(function(e){return r.hasOwnProperty(e)&&r[e]&&n.hasOwnProperty(r[e].toLowerCase())});var a;if(i.length===0){a=null}else if(i.length>0){var o=r[i[0]].toLowerCase();a=n[o]}return a}},{key:"_highlightArea",value:function e(t){var n=this;var r=this.config.options.container;var i=this.contourToFill;r.selectAll(".map-contour-"+i).classed("map-contour-highlighted",function(e){return t(n._resolveFeature(e))})}},{key:"_highlightPoint",value:function e(t){this.config.options.container.selectAll("circle").classed("map-point-highlighted",function(e){var n=e.data;return t(n)}).attr("opacity",function(e){var n=e.data;return t(n)?g:.1})}},{key:"_createProjection",value:function e(t,n,r){var i=this.W;var o=this.H;var s=this.config.guide;var l=100;var c=[i/2,o/2];var f=r||t.center;var d=s.projection||t.projection||"mercator";var h=this._createD3Projection(d,f,l,c);var p=a.default.geo.path().projection(h);var v=p.bounds(u.default.feature(t,t.objects[n]));var m=l*i/(v[1][0]-v[0][0]);var g=l*o/(v[1][1]-v[0][1]);l=m<g?m:g;c=[i-(v[0][0]+v[1][0])/2,o-(v[0][1]+v[1][1])/2];return this._createD3Projection(d,f,l,c)}},{key:"_createD3Projection",value:function e(t,n,r,i){var o=a.default.geo[t];if(!o){console.log('Unknown projection "'+t+'"');console.log("See available projection types here: https://github.com/mbostock/d3/wiki/Geo-Projections");throw new Error('Invalid map: unknown projection "'+t+'"')}var s=o();var u=[{method:"scale",args:r},{method:"center",args:n},{method:"translate",args:i}].filter(function(e){return e.args});return u.reduce(function(e,t){if(e[t.method]){e=e[t.method](t.args)}return e},s)}}]);return t}(c.Element)},function(e,t,n){(function(e,n){n(t)})(this,function(e){"use strict";function t(){}function n(e){if(!e){return t}var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t){n=r=0}e[0]=(n+=e[0])*i+o;e[1]=(r+=e[1])*a+s}}function r(e){if(!e){return t}var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t){n=r=0}var u=(e[0]-o)/i|0,l=(e[1]-s)/a|0;e[0]=u-n;e[1]=l-r;n=u;r=l}}function i(e,t){var n,r=e.length,i=r-t;while(i<--r){n=e[i],e[i++]=e[r],e[r]=n}}function a(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;if(e[i]<t){n=i+1}else{r=i}}return n}function o(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:u(e,t)};if(t.id==null){delete n.id}return n}function u(e,t){var r=n(e.transform),a=e.arcs;function o(e,t){if(t.length){t.pop()}for(var n=a[e<0?~e:e],o=0,s=n.length,u;o<s;++o){t.push(u=n[o].slice());r(u,o)}if(e<0){i(t,s)}}function s(e){e=e.slice();r(e,0);return e}function u(e){var t=[];for(var n=0,r=e.length;n<r;++n){o(e[n],t)}if(t.length<2){t.push(t[0].slice())}return t}function l(e){var t=u(e);while(t.length<4){t.push(t[0].slice())}return t}function c(e){return e.map(l)}function f(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(f)}:t in d?{type:t,coordinates:d[t](e)}:null}var d={Point:function(e){return s(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(s)},LineString:function(e){return u(e.arcs)},MultiLineString:function(e){return e.arcs.map(u)},Polygon:function(e){return c(e.arcs)},MultiPolygon:function(e){return e.arcs.map(c)}};return f(t)}function l(e,t){var n={},r={},i={},a=[],o=-1;t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],a;if(i.length<3&&!i[1][0]&&!i[1][1]){a=t[++o],t[o]=n,t[r]=a}});t.forEach(function(e){var t=s(e),n=t[0],a=t[1],o,u;if(o=i[n]){delete i[o.end];o.push(e);o.end=a;if(u=r[a]){delete r[u.start];var l=u===o?o:o.concat(u);r[l.start=o.start]=i[l.end=u.end]=l}else{r[o.start]=i[o.end]=o}}else if(o=r[a]){delete r[o.start];o.unshift(e);o.start=n;if(u=i[n]){delete i[u.end];var c=u===o?o:u.concat(o);r[c.start=u.start]=i[c.end=o.end]=c}else{r[o.start]=i[o.end]=o}}else{o=[e];r[o.start=n]=i[o.end=a]=o}});function s(t){var n=e.arcs[t<0?~t:t],r=n[0],i;if(e.transform){i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})}else{i=n[n.length-1]}return t<0?[i,r]:[r,i]}function u(e,t){for(var r in e){var i=e[r];delete t[i.start];delete i.start;delete i.end;i.forEach(function(e){n[e<0?~e:e]=1});a.push(i)}}u(i,r);u(r,i);t.forEach(function(e){if(!n[e<0?~e:e]){a.push([e])}});return a}function c(e){return u(e,f.apply(this,arguments))}function f(e,t,n){var r=[];function i(e){var t=e<0?~e:e;(u[t]||(u[t]=[])).push({i:e,g:c})}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){if(e.type==="GeometryCollection"){e.geometries.forEach(s)}else if(e.type in f){c=e,f[e.type](e.arcs)}}if(arguments.length>1){var u=[],c;var f={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};s(t);u.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){if(n(e[0].g,e[e.length-1].g)){r.push(e[0].i)}})}else{for(var d=0,h=e.arcs.length;d<h;++d){r.push(d)}}return{type:"MultiLineString",arcs:l(e,r)}}function d(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function h(e){var t=-1,n=e.length,r,i=e[n-1],a=0;while(++t<n){r=i;i=e[t];a+=r[0]*i[1]-r[1]*i[0]}return a/2}function p(e){return u(e,v.apply(this,arguments))}function v(e,t){var n={},r=[],i=[];t.forEach(function(e){if(e.type==="Polygon"){a(e.arcs)}else if(e.type==="MultiPolygon"){e.arcs.forEach(a)}});function a(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})});r.push(e)}function o(t){return h(u(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}r.forEach(function(e){if(!e._){var t=[],r=[e];e._=1;i.push(t);while(e=r.pop()){t.push(e);e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){if(!e._){e._=1;r.push(e)}})})})}}});r.forEach(function(e){delete e._});return{type:"MultiPolygon",arcs:i.map(function(t){var r=[],i;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){if(n[e<0?~e:e].length<2){r.push(e)}})})});r=l(e,r);if((i=r.length)>1){var a=o(t[0][0]);for(var s=0,u;s<i;++s){if(a===o(r[s])){u=r[0],r[0]=r[s],r[s]=u;break}}}return r})}}function m(e){var t={},n=e.map(function(){return[]});function r(e,n){e.forEach(function(e){if(e<0){e=~e}var r=t[e];if(r){r.push(n)}else{t[e]=[n]}})}function i(e,t){e.forEach(function(e){r(e,t)})}function o(e,t){if(e.type==="GeometryCollection"){e.geometries.forEach(function(e){o(e,t)})}else if(e.type in s){s[e.type](e.arcs,t)}}var s={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(o);for(var u in t){for(var l=t[u],c=l.length,f=0;f<c;++f){for(var d=f+1;d<c;++d){var h=l[f],p=l[d],v;if((v=n[h])[u=a(v,p)]!==p){v.splice(u,0,p)}if((v=n[p])[u=a(v,h)]!==h){v.splice(u,0,h)}}}}return n}function g(e,t){return e[1][2]-t[1][2]}function y(){var e={},t=[],n=0;e.push=function(e){r(t[e._=n]=e,n++);return n};e.pop=function(){if(n<=0){return}var e=t[0],r;if(--n>0){r=t[n],i(t[r._=0]=r,0)}return e};e.remove=function(e){var a=e._,o;if(t[a]!==e){return}if(a!==--n){o=t[n],(g(o,e)<0?r:i)(t[o._=a]=o,a)}return a};function r(e,n){while(n>0){var r=(n+1>>1)-1,i=t[r];if(g(e,i)>=0){break}t[i._=n]=i;t[e._=n=r]=e}}function i(e,r){while(true){var i=r+1<<1,a=i-1,o=r,s=t[o];if(a<n&&g(t[a],s)<0){s=t[o=a]}if(i<n&&g(t[i],s)<0){s=t[o=i]}if(o===r){break}t[s._=r]=s;t[e._=r=o]=e}}return e}function b(e,t){var i=n(e.transform),a=r(e.transform),o=y();if(!t){t=d}e.arcs.forEach(function(e){var n=[],r=0,u,l,c,f;for(l=0,c=e.length;l<c;++l){f=e[l];i(e[l]=[f[0],f[1],Infinity],l)}for(l=1,c=e.length-1;l<c;++l){u=e.slice(l-1,l+2);u[1][2]=t(u);n.push(u);o.push(u)}for(l=0,c=n.length;l<c;++l){u=n[l];u.previous=n[l-1];u.next=n[l+1]}while(u=o.pop()){var d=u.previous,h=u.next;if(u[1][2]<r){u[1][2]=r}else{r=u[1][2]}if(d){d.next=h;d[2]=u[2];s(d)}if(h){h.previous=d;h[0]=u[0];s(h)}}e.forEach(a)});function s(e){o.remove(e);e[1][2]=t(e);o.push(e)}return e}var x="1.6.24";e.version=x;e.mesh=c;e.meshArcs=f;e.merge=p;e.mergeArcs=v;e.feature=o;e.neighbors=m;e.presimplify=b})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(){var t=[],n=[],r=1,i=1,a={};var o=5,s=.5;var u=.2,l=1,c=30,f=30,d=3;var h=false;var p;var v=function e(r){var i=t.length,a=0,o=t[r].x-n[r].x,s=n[r].y-t[r].y,h=Math.sqrt(o*o+s*s),p=true;if(h>0){a+=h*u}o/=h;s/=h;if(o>0&&s>0){a+=0*d}else if(o<0&&s>0){a+=1*d}else if(o<0&&s<0){a+=2*d}else{a+=3*d}var v=t[r].x,m=t[r].y-t[r].height+2,g=t[r].x+t[r].width,b=t[r].y+2;var x,w,_,k,C,T,S;for(var E=0;E<i;E++){if(E!=r){p=y(n[r].x,t[r].x,n[E].x,t[E].x,n[r].y,t[r].y,n[E].y,t[E].y);if(p){a+=l}x=t[E].x;_=t[E].y-t[E].height+2;w=t[E].x+t[E].width;k=t[E].y+2;C=Math.max(0,Math.min(w,g)-Math.max(x,v));T=Math.max(0,Math.min(k,b)-Math.max(_,m));S=C*T;a+=S*c}x=n[E].x-n[E].r;_=n[E].y-n[E].r;w=n[E].x+n[E].r;k=n[E].y+n[E].r;C=Math.max(0,Math.min(w,g)-Math.max(x,v));T=Math.max(0,Math.min(k,b)-Math.max(_,m));S=C*T;a+=S*f}return a};var m=function e(a){var s=Math.floor(Math.random()*t.length);var u=t[s].x;var l=t[s].y;var c;if(h){c=p(s,t,n)}else{c=v(s)}t[s].x+=(Math.random()-.5)*o;t[s].y+=(Math.random()-.5)*o;if(t[s].x>r){t[s].x=u}if(t[s].x<0){t[s].x=u}if(t[s].y>i){t[s].y=l}if(t[s].y<0){t[s].y=l}var f;if(h){f=p(s,t,n)}else{f=v(s)}var d=f-c;if(Math.random()<Math.exp(-d/a)){}else{t[s].x=u;t[s].y=l}};var g=function e(a){var o=Math.floor(Math.random()*t.length);var u=t[o].x;var l=t[o].y;var c;if(h){c=p(o,t,n)}else{c=v(o)}var f=(Math.random()-.5)*s;var d=Math.sin(f);var m=Math.cos(f);t[o].x-=n[o].x;t[o].y-=n[o].y;var g=t[o].x*m-t[o].y*d,y=t[o].x*d+t[o].y*m;t[o].x=g+n[o].x;t[o].y=y+n[o].y;if(t[o].x>r){t[o].x=u}if(t[o].x<0){t[o].x=u}if(t[o].y>i){t[o].y=l}if(t[o].y<0){t[o].y=l}var b;if(h){b=p(o,t,n)}else{b=v(o)}var x=b-c;if(Math.random()<Math.exp(-x/a)){}else{t[o].x=u;t[o].y=l}};var y=function e(t,n,r,i,a,o,s,u){var l,c;var f,d,h;f=(u-s)*(n-t)-(i-r)*(o-a);d=(i-r)*(a-s)-(u-s)*(t-r);h=(n-t)*(a-s)-(o-a)*(t-r);l=d/f;c=h/f;if(!(l<0||l>1||c<0||c>1)){return true}return false};var b=function e(t,n,r){return t-n/r};a.start=function(e){var n=t.length,r=1,i=1;for(var a=0;a<e;a++){for(var o=0;o<n;o++){if(Math.random()<.5){m(r)}else{g(r)}}r=b(r,i,e)}};a.width=function(e){if(!arguments.length){return r}r=e;return a};a.height=function(e){if(!arguments.length){return i}i=e;return a};a.label=function(e){if(!arguments.length){return t}t=e;return a};a.anchor=function(e){if(!arguments.length){return n}n=e;return a};a.alt_energy=function(e){if(!arguments.length){return v}p=e;h=true;return a};a.alt_schedule=function(){if(!arguments.length){return b}return a};return a};t.d3Labeler=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Point=undefined;var r=n(22);var i=n(7);var a=n(46);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var p={init:function e(t){var n=Object.assign({},t);n.guide=s.utils.defaults(n.guide||{},{animationSpeed:0,avoidScalesOverflow:true,enableColorToBarPosition:false,maxHighlightDistance:32});n.guide.size=n.guide.size||{};n.guide.label=s.utils.defaults(n.guide.label||{},{position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-anchor-overlap"]});var r=n.guide.avoidScalesOverflow;var a=n.guide.enableColorToBarPosition;n.transformRules=[function(e){var t=[e.scaleX,e.scaleY].sort(function(e,t){var n=e.discrete?1:0;var r=t.discrete?1:0;return r*t.domain().length-n*e.domain().length})[0];var n=e.scaleY===t;return n?i.GrammarRegistry.get("flip")(e):i.GrammarRegistry.get("identity")(e)},n.stack&&i.GrammarRegistry.get("stack"),a&&i.GrammarRegistry.get("positioningByColor")].filter(function(e){return e});n.adjustRules=[n.stack&&i.GrammarRegistry.get("adjustYScale"),function(e,t){var r=e.scaleSize.isEmptyScale();var a=s.utils.defaults(n.guide.size,{defMinSize:10,defMaxSize:r?10:40,enableDistributeEvenly:!r});var o=Object.assign({},t,{defMin:a.defMinSize,defMax:a.defMaxSize,minLimit:a.minSize,maxLimit:a.maxSize});var u=a.enableDistributeEvenly?i.GrammarRegistry.get("adjustSigmaSizeScale"):i.GrammarRegistry.get("adjustStaticSizeScale");return u(e,o)},r&&function(e,t){var n=Object.assign({},t,{sizeDirection:"xy"});return i.GrammarRegistry.get("avoidScalesOverflow")(e,n)}].filter(function(e){return e});return n},addInteraction:function e(){var t=this;var n=this.node();var r=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("data-hover",function(e,n){return t.highlight(r(n.data,null))})},draw:function e(){var t=this.node();var n=t.config;var i=n.options;i.container=i.slot(n.uid);var s=function e(t){return o.d3_transition(t,n.guide.animationSpeed)};var u=r.CSS_PREFIX+"dot dot i-role-element i-role-datum";var l=t.screenModel;var c=1e4;var f={fill:function e(t){return l.color(t)},class:function e(t){return u+" "+l.class(t)}};var d={r:function e(t){return Math.round(c*l.size(t)/2)/c},cx:function e(t){return l.x(t)},cy:function e(t){return l.y(t)}};var h=function e(){this.attr("class","frame").call(function(){var e=this.selectAll("circle").data(function(e){return e},l.id);s(e.enter().append("circle").attr(f)).attr(d);s(e.attr(f)).attr(d);s(e.exit()).attr({r:0}).remove();t.subscribe(e)});s(this).attr("opacity",1)};var p=l.toFibers();this._getGroupOrder=function(){var e=p.reduce(function(e,t,n){e.set(t,n);return e},new Map);return function(t){return e.get(t)}}();var v=i.container.selectAll(".frame").data(p,function(e){return l.group(e[0])});v.enter().append("g").attr("opacity",0).call(h);v.call(h);this._boundsInfo=this._getBoundsInfo(v.selectAll(".dot").reduce(function(e,t){return e.concat(t)},[]));s(v.exit()).attr("opacity",0).remove().selectAll("circle").attr("r",0);t.subscribe(new a.LayerLabels(l.model,l.flip,n.guide.label,i).draw(p))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.y(t);var a=n.size(t)/2;return{node:e,data:t,x:r,y:i,r:a}}).filter(function(e){return!isNaN(e.x)&&!isNaN(e.y)});var i=r.reduce(function(e,t){var n=t.x,r=t.y;e.left=Math.min(n,e.left);e.right=Math.max(n,e.right);e.top=Math.min(r,e.top);e.bottom=Math.max(r,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var a=r.reduce(function(e,t){var n=t.x+","+t.y;if(!e[n]){e[n]=[]}e[n].push(t);return e},{});var o=f.default.geom.quadtree().x(function(e){return e[0].x}).y(function(e){return e[0].y})(Object.keys(a).map(function(e){return a[e]}));return{bounds:i,tree:o}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=l.utilsDraw.getDeepTransformTranslate(o.node());var u=t-s.x;var c=n-s.y;var f=this.node().config.guide.maxHighlightDistance;if(u<i.left-f||u>i.right+f||c<i.top-f||c>i.bottom+f){return null}var d=(a.find([u,c])||[]).map(function(e){var t=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(c-e.y,2));if(t>f){return null}var n=t<e.r?e.r-t:t;return{node:e.node,data:e.data,x:e.x,y:e.y,distance:t,secondaryDistance:n}}).filter(function(e){return e}).sort(function(e,t){return e.secondaryDistance-t.secondaryDistance});var h=d.findIndex(function(e){return e.distance!==d[0].distance||e.secondaryDistance!==d[0].secondaryDistance});var p=h<0?d:d.slice(0,h);if(p.length===1){return p[0]}var v=p.reduce(function(e,t){return e+t.x},0)/p.length;var m=p.reduce(function(e,t){return e+t.y},0)/p.length;var g=Math.atan2(m-c,v-u)+Math.PI;var y=p[Math.round((p.length-1)*g/2/Math.PI)];return y},highlight:function e(t){var n;var r="graphical-report__highlighted";var i="graphical-report__dimmed";var a=this.node().config.options.container;var o=(n={},h(n,r,function(e){return t(e)===true}),h(n,i,function(e){return t(e)===false}),n);a.selectAll(".dot").classed(o);a.selectAll(".i-role-label").classed(o);this._sortElements(t)},_sortElements:function e(t){var n=this;var r=this.node().config.options.container;var i=new Map;var a=new Map;r.selectAll(".frame").each(function(e){i.set(this,e.some(t));a.set(this,e)});var o=s.utils.createMultiSorter(function(e,t){return i.get(e)-i.get(t)},function(e,t){return n._getGroupOrder(a.get(e))-n._getGroupOrder(a.get(t))});u.utilsDom.sortChildren(r.node(),function(e,t){if(e.tagName==="g"&&t.tagName==="g"){return o(e,t)}return e.tagName.localeCompare(t.tagName)});l.utilsDraw.raiseElements(r,".dot",t)}};t.Point=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabels=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(10);var a=n(1);var o=n(3);var s=n(47);var u=n(48);var l=n(49);var c=n(50);var f=n(32);function d(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var p=function e(t,n,r,a,o,s,u,l){return i.utilsDraw.isIntersect(t,o,n,s,r,u,a,l)};var v=t.LayerLabels=function(){function e(t,n,r,i){var a=i.width,s=i.height,u=i.container;h(this,e);this.container=u;this.model=t;this.flip=n;this.w=a;this.h=s;this.guide=o.utils.defaults(r||{},{fontFamily:"Helvetica Neue, Segoe UI, Open Sans, Ubuntu, sans-serif",fontWeight:"normal",fontSize:10,fontColor:"#000",hideEqualLabels:false,position:[],tickFormat:null,tickFormatNullAlias:""})}r(e,[{key:"draw",value:function e(t){var n=this;var r=this.model;var i=this.guide;var o=s.LayerLabelsModel.seed(r,{fontSize:i.fontSize,fontColor:i.fontColor,flip:n.flip,formatter:f.FormatterRegistry.get(i.tickFormat,i.tickFormatNullAlias),labelRectSize:function e(t){return a.utilsDom.getLabelSize(t,i)}});var l={maxWidth:n.w,maxHeight:n.h,data:t.reduce(function(e,t){return e.concat(t)},[])};var c=i.position.filter(function(e){return e.indexOf("auto:")===-1});var h=c.map(u.LayerLabelsRules.getRule).reduce(function(e,t){return s.LayerLabelsModel.compose(e,t(e,l))},o);var p=function e(t,n){var r=t.length-1;var i=[];for(var a=0;a<=r;a++){var o=a===0?a:a-1;var s=a;var u=a===r?a:a+1;i.push(n(t[o],t[s],t[u]))}return i};var v=t.reduce(function(e,t){var n=t.map(function(e){return{data:e,x:h.x(e)+h.dx(e),y:h.y(e)+h.dy(e),w:h.w(e),h:h.h(e,l),hide:h.hide(e),extr:null,size:h.model.size(e),angle:h.angle(e),label:h.label(e),color:h.color(e)}});e.text=e.text.concat(n);e.edges=e.edges.concat(p(n,function(e,t,n){if(t.y===Math.max(t.y,e.y,n.y)){t.extr="min"}else if(t.y===Math.min(t.y,e.y,n.y)){t.extr="max"}else{t.extr="norm"}return{x0:e.x,x1:t.x,y0:e.y,y1:t.y}}));return e},{text:[],edges:[]});v.text=v.text.filter(function(e){return e.label}).map(function(e,t){return Object.assign(e,{i:t})});var m=this.guide.position.filter(function(e){return e.indexOf("auto:avoid")===0});v=v.text.length>0&&m.length>0?this.autoPosition(v,m):v;var g=this.guide.position.reduce(function(e,t){return Object.assign(e,d({},t,true))},{});v.text=v.text=g["auto:adjust-on-label-overflow"]?this.adjustOnOverflow(v.text,l):v.text;v.text=g["auto:hide-on-label-edges-overlap"]?this.hideOnLabelEdgesOverlap(v.text,v.edges):v.text;v.text=g["auto:hide-on-label-label-overlap"]?this.hideOnLabelLabelOverlap(v.text):v.text;v.text=g["auto:hide-on-label-anchor-overlap"]?this.hideOnLabelAnchorOverlap(v.text):v.text;var y=v.text;var b=function e(t){return function(e,n){return y[n][t]}};var x=b("x");var w=b("y");var _=b("angle");var k=b("color");var C=b("label");var T=function e(){this.style("fill",k).style("font-size",n.guide.fontSize+"px").style("display",function(e,t){return y[t].hide?"none":null}).attr("class","i-role-label").attr("text-anchor","middle").attr("transform",function(e,t){return"translate("+x(e,t)+","+w(e,t)+") rotate("+_(e,t)+")"}).text(C)};if(i.hideEqualLabels){y.filter(function(e){return!e.hide}).filter(function(e,t,n){return t<n.length-1&&e.label===n[t+1].label}).forEach(function(e){return e.hide=true})}var S=this.container.selectAll(".i-role-label").data(y.map(function(e){return e.data}));S.exit().remove();S.call(T);S.enter().append("text").call(T);return S}},{key:"autoPosition",value:function e(t,n){var r=function e(t,n){var r=4;var i=2;var a=r+(t.size+t.w)/2;var o=i+(t.size+t.h)/2;return{x:a*Math.cos(n),y:o*Math.sin(n)}};var i=t.edges;var a=t.text.map(function(e){var t={max:-Math.PI/2,min:Math.PI/2,norm:Math.random()*Math.PI*2};var n=r(e,t[e.extr]);return{i:e.i,x0:e.x,y0:e.y,x:e.x+n.x,y:e.y+n.y,w:e.w,h:e.h,size:e.size,hide:e.hide,extr:e.extr}}).filter(function(e){return!e.hide});var o=new l.AnnealingSimulator({items:a,transactor:function e(t){var n=t.x;var i=t.y;return{modify:function e(){var n={max:-Math.PI,min:Math.PI,norm:Math.PI*2};var i=4;var a=n[t.extr];var o=a/i+Math.random()*(a*(i-2))/i;var s=r(t,o);t.x=t.x0+s.x;t.y=t.y0+s.y;return t},revert:function e(){t.x=n;t.y=i;return t}}},penalties:n.map(function(e){return c.LayerLabelsPenalties.get(e)}).filter(function(e){return e}).map(function(e){return e(a,i)})});var s=o.start(5);t.text=s.reduce(function(e,t){var n=e[t.i];n.x=t.x;n.y=t.y;return e},t.text);return t}},{key:"hideOnLabelEdgesOverlap",value:function e(t,n){var r=this;var i=function e(t,n){var i=r.getLabelRect(t);return n.reduce(function(e,t){var n=p(i.x0,i.x1,t.x0,t.x1,i.y0,i.y1,t.y0,t.y1);var r=p(i.x0,i.x1,t.x0,t.x1,i.y1,i.y0,t.y0,t.y1);return e+(n+r)*2},0)};t.filter(function(e){return!e.hide}).forEach(function(e){if(i(e,n)>0){e.hide=true}});return t}},{key:"hideOnLabelLabelOverlap",value:function e(t){var n=this;var r={min:0,max:1,norm:2};var i={"min/min":function e(t,n){return n.y-t.y},"max/max":function e(t,n){return t.y-n.y},"min/max":function e(){return-1},"min/norm":function e(){return-1},"max/norm":function e(){return-1},"norm/norm":function e(t,n){return t.y-n.y}};var a=function e(t,a){var o=n.getLabelRect(t);var s=n.getLabelRect(a);var u=!t.hide&&!a.hide;var l=u*Math.max(0,Math.min(s.x1,o.x1)-Math.max(o.x0,s.x0));var c=u*Math.max(0,Math.min(s.y1,o.y1)-Math.max(o.y0,s.y0));if(l*c>0){var f=[t,a];f.sort(function(e,t){return r[e.extr]-r[t.extr]});var d=i[f[0].extr+"/"+f[1].extr](f[0],f[1])<0?f[0]:f[1];d.hide=true}};t.filter(function(e){return!e.hide}).sort(function(e,t){return r[e.extr]-r[t.extr]}).forEach(function(e){t.forEach(function(t){if(e.i!==t.i){a(e,t)}})});return t}},{key:"getLabelRect",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x0:t.x-t.w/2-n,x1:t.x+t.w/2+n,y0:t.y-t.h/2-n,y1:t.y+t.h/2+n}}},{key:"getPointRect",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x0:t.x-t.size/2-n,x1:t.x+t.size/2+n,y0:t.y-t.size/2-n,y1:t.y+t.size/2+n}}},{key:"hideOnLabelAnchorOverlap",value:function e(t){var n=this;var r=function e(t,r){var i=n.getLabelRect(t,2);var a=n.getPointRect(r,2);var o=Math.max(0,Math.min(a.x1,i.x1)-Math.max(a.x0,i.x0));var s=Math.max(0,Math.min(a.y1,i.y1)-Math.max(a.y0,i.y0));return o*s>.001};t.filter(function(e){return!e.hide}).forEach(function(e){var n=t.length;for(var i=0;i<n;i++){var a=t[i];if(e.i!==a.i&&r(e,a)){e.hide=true;break}}});return t}},{key:"adjustOnOverflow",value:function e(t,n){var r=n.maxWidth,i=n.maxHeight;return t.map(function(e){if(!e.hide){e.x=Math.min(Math.max(e.x,e.w/2),r-e.w/2);e.y=Math.max(Math.min(e.y,i-e.h/2),e.h/2)}return e})}}]);return e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function e(t){return function(){return t}};var a=t.LayerLabelsModel=function(){function e(t){r(this,e);this.model=t.model;this.x=t.x||i(0);this.y=t.y||i(0);this.dx=t.dx||i(0);this.dy=t.dy||i(0);this.w=t.w||i(0);this.h=t.h||i(0);this.hide=t.hide||i(false);this.label=t.label||i("");this.color=t.color||i("");this.angle=t.angle||i(0)}n(e,null,[{key:"seed",value:function t(n,r){var i=r.fontColor,a=r.flip,o=r.formatter,s=r.labelRectSize,u=r.paddingKoeff,l=u===undefined?.5:u;var c=a?n.yi:n.xi;var f=a?n.xi:n.yi;var d=function e(t){return o(n.label(t))};return new e({model:n,x:function e(t){return c(t)},y:function e(t){return f(t)},dy:function e(t){return s(d(t)).height*l},w:function e(t){return s(d(t)).width},h:function e(t){return s(d(t)).height},label:d,color:function e(){return i},angle:function e(){return 0}})}},{key:"compose",value:function t(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.keys(r).reduce(function(e,t){e[t]=r[t];return e},new e(n))}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabelsRules=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(47);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o={};var s=t.LayerLabelsRules=function(){function e(){a(this,e)}r(e,null,[{key:"regRule",value:function e(t,n){o[t]=n;return this}},{key:"getRule",value:function e(t){return o[t]}}]);return e}();var u=function e(t,n,r){return r<n?Math.max(1,Math.floor(r*t.length/n))-1:t.length};var l=function e(t,n){return n===0?"":t.slice(0,n).replace(/\.+$/g,"")+"‚Ä¶"};var c=function e(t,n){return t.discrete||!t.discrete&&n[t.dim]>=0};var f=function e(t,n){return!t.discrete&&n[t.dim]<0};var d=function e(t,n){return t.w(n)/2+Math.floor(t.model.size(n)/5)};var h=function e(t,n){return t.h(n)/2+Math.floor(t.model.size(n)/5)};var p=function e(t){return function(e){return{dx:function n(r){var i=e.model.scaleY;if(t[2]==="+"&&!c(i,r)){return e.dx(r)}if(t[2]==="-"&&!f(i,r)){return e.dx(r)}var a=t[1];var o=t[0]===t[0].toUpperCase()?1:0;return e.dx(r)+a*o*e.model.size(r)/2+a*d(e,r)}}}};var v=function e(t){return function(e){return{dy:function n(r){var i=e.model.scaleY;if(t[2]==="+"&&!c(i,r)){return e.dy(r)}if(t[2]==="-"&&!f(i,r)){return e.dy(r)}var a=t[1];var o=t[0]===t[0].toUpperCase()?1:0;return e.dy(r)+a*o*e.model.size(r)/2+a*h(e,r)}}}};s.regRule("l",p(["l",-1,null])).regRule("L",p(["L",-1,null])).regRule("l+",p(["l",-1,"+"])).regRule("l-",p(["l",-1,"-"])).regRule("L+",p(["L",-1,"+"])).regRule("L-",p(["L",-1,"-"])).regRule("r",p(["r",1,null])).regRule("R",p(["R",1,null])).regRule("r+",p(["r",1,"+"])).regRule("r-",p(["r",1,"-"])).regRule("R+",p(["R",1,"+"])).regRule("R-",p(["R",1,"-"])).regRule("t",v(["t",-1,null])).regRule("T",v(["T",-1,null])).regRule("t+",v(["t",-1,"+"])).regRule("t-",v(["t",-1,"-"])).regRule("T+",v(["T",-1,"+"])).regRule("T-",v(["T",-1,"-"])).regRule("b",v(["b",1,null])).regRule("B",v(["B",1,null])).regRule("b+",v(["b",1,"+"])).regRule("b-",v(["b",1,"-"])).regRule("B+",v(["B",1,"+"])).regRule("B-",v(["B",1,"-"])).regRule("rotate-on-size-overflow",function(e,t){var n=t.data;var r=function t(n){return e.model.size(n)<e.w(n)};var i=n.reduce(function(e,t){return e+(r(t)?1:0)},0);var a=i/n.length>.5;var o={};if(a){var s=.5;o={angle:function e(){return-90},w:function t(n){return e.h(n)},h:function t(n){return e.w(n)},dx:function t(n){return e.h(n)*s-2},dy:function e(){return 0}}}return o}).regRule("hide-by-label-height-vertical",function(e){return{hide:function t(n){var r=void 0;var i=void 0;if(e.angle(n)===0){i=e.h(n);r=Math.abs(e.model.y0(n)-e.model.yi(n))}else{i=e.w(n);r=e.model.size(n)}if(i>r){return true}return e.hide(n)}}}).regRule("cut-label-vertical",function(e){return{h:function t(n){var r=e.h(n);if(Math.abs(e.angle(n))>0){var i=e.label(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(i,r,a);return o<i.length?a:r}return r},w:function t(n){var r=e.w(n);if(e.angle(n)===0){var i=e.label(n);var a=e.model.size(n);var o=u(i,r,a);return o<i.length?a:r}return r},label:function t(n){var r=void 0;var i=void 0;if(e.angle(n)===0){r=e.w(n);i=e.model.size(n)}else{r=e.h(n);i=Math.abs(e.model.y0(n)-e.model.yi(n))}var a=e.label(n);var o=u(a,r,i);return o<a.length?l(a,o):a},dy:function t(n){var r=e.dy(n);if(e.angle(n)!==0){var i=e.h(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=e.label(n);var s=u(o,i,a);return s<o.length?a*r/i:r}return r}}}).regRule("cut-outer-label-vertical",function(e){return{h:function t(n,r){var i=e.h(n);if(Math.abs(e.angle(n))>0){var a=e.label(n);var o=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n);var s=u(a,i,o);return s<a.length?o:i}return i},w:function t(n){var r=e.w(n);if(e.angle(n)===0){var i=e.label(n);var a=e.model.size(n);var o=u(i,r,a);return o<i.length?a:r}return r},label:function t(n,r){var i=void 0;var a=void 0;if(e.angle(n)===0){i=e.w(n);a=e.model.size(n)}else{i=e.h(n);a=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n)}var o=e.label(n);var s=u(o,i,a);return s<o.length?l(o,s):o},dy:function t(n,r){var i=e.dy(n);if(e.angle(n)!==0){var a=e.h(n);var o=e.model.y0(n)<e.model.yi(n)?r.maxHeight-e.model.yi(n):e.model.yi(n);var s=e.label(n);var l=u(s,a,o);return l<s.length?o*i/a:i}return i}}}).regRule("from-beginning",function(e){var t=function t(n){return e.model.y0(n)};return e.model.flip?{x:t}:{y:t}}).regRule("to-end",function(e){var t=function t(n){return e.model.yi(n)};return e.model.flip?{x:t}:{y:t}}).regRule("towards",function(e){var t=function e(t,n){return t.model.yi(n)-t.model.y0(n)>=0?1:-1};var n=e.model.flip?d:h;var r=function r(i){return t(e,i)*n(e,i)};return e.model.flip?{dx:r}:{dy:r}}).regRule("inside-start-then-outside-end-horizontal",function(e,t){var n=[s.getRule("from-beginning"),s.getRule("towards"),s.getRule("cut-label-horizontal")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=[s.getRule("to-end"),s.getRule("towards"),s.getRule("cut-outer-label-horizontal")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?n:r)[t](e)};return e},{}))}).regRule("inside-start-then-outside-end-vertical",function(e,t){var n=[s.getRule("from-beginning"),s.getRule("towards"),s.getRule("cut-label-vertical")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=[s.getRule("to-end"),s.getRule("towards"),s.getRule("cut-outer-label-vertical")].reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?n:r)[t](e)};return e},{}))}).regRule("outside-then-inside-horizontal",function(e,t){var n=["r+","l-","cut-outer-label-horizontal"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(t){return r.label(t).length>n.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(e,t){e[t]=function(e){return(a(e)?r:n)[t](e)};return e},{}))}).regRule("outside-then-inside-vertical",function(e,t){var n=["t+","b-","cut-outer-label-vertical"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var r=["t-","b+","hide-by-label-height-vertical","cut-label-vertical"].map(s.getRule).reduce(function(e,n){return i.LayerLabelsModel.compose(e,n(e,t))},e);var a=function e(i){return r.label(i,t).length>n.label(i,t).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(e,i){e[i]=function(e){return(a(e)?r:n)[i](e,t)};return e},{}))}).regRule("hide-by-label-height-horizontal",function(e){return{hide:function t(n){if(e.model.size(n)<e.h(n)){return true}return e.hide(n)}}}).regRule("cut-label-horizontal",function(e){return{dx:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);var s=e.dx(n);return o<r.length?a*s/i:s},w:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);return o<r.length?a:i},label:function t(n){var r=e.label(n);var i=e.w(n);var a=Math.abs(e.model.y0(n)-e.model.yi(n));var o=u(r,i,a);return o<r.length?l(r,o):r}}}).regRule("cut-outer-label-horizontal",function(e,t){return{dx:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);var l=e.dx(r);return s<i.length?o*l/a:l},w:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);return s<i.length?o:a},label:function n(r){var i=e.label(r);var a=e.w(r);var o=e.model.y0(r)<e.model.yi(r)?t.maxWidth-e.model.yi(r):e.model.yi(r);var s=u(i,a,o);return s<i.length?l(i,s):i}}}).regRule("keep-within-diameter-or-top",function(e){return{dy:function t(n){if(e.model.size(n)/e.w(n)<1){return e.dy(n)-e.h(n)/2-e.model.size(n)/2}return e.dy(n)}}}).regRule("keep-in-box",function(e,t){var n=t.maxWidth,r=t.maxHeight;return{dx:function t(r){var t=e.dx(r);var i=e.x(r)+t;var a=e.w(r);var o=i-a/2;var s=i+a/2;var u=0-o;if(u>0){return t+u}var l=s-n;if(l>0){return t-l}return t},dy:function t(n){var t=e.dy(n);var i=e.y(n)+t;var a=e.h(n);var o=i-a/2;var s=i+a/2;var u=0-o;if(u>0){return 0}var l=s-r;if(l>0){return t-l}return t}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=t.AnnealingSimulator=function(){function e(t){r(this,e);this.minError=Number.MAX_VALUE;this.items=t.items;this.revision=this.items.map(function(e){return{i:e.i,x:e.x,y:e.y}});this.penalties=t.penalties;this.transactor=t.transactor;this.cooling_schedule=t.cooling_schedule||function(e,t,n){return e-t/n}}n(e,[{key:"energy",value:function e(t){return this.penalties.reduce(function(e,n){return e+n(t)},0)}},{key:"move",value:function e(t){var n=Math.floor(Math.random()*this.items.length);var r=this.transactor(this.items[n]);var i=this.energy(n);this.items[n]=r.modify();var a=this.energy(n);var o=a-i;var s=o<0?1:Math.exp(-o/t);if(Math.random()>=s){this.items[n]=r.revert()}else if(a<this.minError){this.minError=a;this.revision=this.items.map(function(e){return{i:e.i,x:e.x,y:e.y}})}}},{key:"start",value:function e(t){var n=1;var r=1;var i=this.items.length;e:{for(var a=0;a<t;a++){for(var o=0;o<i;o++){this.move(n);if(this.minError<=10){break e}}n=this.cooling_schedule(n,r,t)}}return this.revision}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerLabelsPenalties=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(10);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(t,n,r,a,o,s,u,l){return i.utilsDraw.isIntersect(t,o,n,s,r,u,a,l)};var s={};var u=t.LayerLabelsPenalties=function(){function e(){a(this,e)}r(e,null,[{key:"reg",value:function e(t,n){s[t]=n;return this}},{key:"get",value:function e(t){return s[t]}}]);return e}();u.reg("auto:avoid-label-label-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(t){var r=e[t].x;var i=e[t].y-e[t].h+2;var a=e[t].x+e[t].w;var o=e[t].y+2;return e.reduce(function(e,s,u){var l=u!==t;var c=s.x;var f=s.y-s.h+2;var d=s.x+s.w;var h=s.y+2;var p=Math.max(0,Math.min(d,a)-Math.max(c,r));var v=Math.max(0,Math.min(h,o)-Math.max(f,i));var m=p*v;return e+l*(m*n)},0)}}).reg("auto:avoid-label-anchor-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(t){var r=e[t];var i=r.x-r.w/2;var a=r.x+r.w/2;var o=r.y-r.h/2+2;var s=r.y+r.h/2+2;return e.reduce(function(e,t){var r=t.x0-t.size/2;var u=t.x0+t.size/2;var l=t.y0-t.size/2;var c=t.y0+t.size/2;var f=Math.max(0,Math.min(u,a)-Math.max(r,i));var d=Math.max(0,Math.min(c,s)-Math.max(l,o));var h=f*d;return e+h*n},0)}}).reg("auto:avoid-label-edges-overlap",function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return function(r){var i=e[r];var a=i.x-i.w/2;var s=i.x+i.w/2;var u=i.y-i.h/2;var l=i.y+i.h/2;return t.reduce(function(e,t){var r=o(a,s,t.x0,t.x1,u,l,t.y0,t.y1);var i=o(a,s,t.x0,t.x1,l,u,t.y0,t.y1);return e+(r+i)*n},0)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Area=undefined;var r=n(2);var i=h(r);var a=n(22);var o=n(3);var s=n(52);var u=n(53);var l=n(7);var c=n(9);var f=n(13);var d=n(54);function h(e){return e&&e.__esModule?e:{default:e}}var p={draw:s.BasePath.draw,getClosestElement:s.BasePath.getClosestElement,highlight:s.BasePath.highlight,highlightDataPoints:s.BasePath.highlightDataPoints,addInteraction:s.BasePath.addInteraction,_getBoundsInfo:s.BasePath._getBoundsInfo,_sortElements:s.BasePath._sortElements,init:function e(t){var n=s.BasePath.init(t);var r=n.stack;n.transformRules=[n.flip&&l.GrammarRegistry.get("flip"),!r&&l.GrammarRegistry.get("groupOrderByAvg"),r&&s.BasePath.grammarRuleFillGaps,r&&l.GrammarRegistry.get("stack")];n.adjustRules=[function(e,t){var r=e.scaleSize.isEmptyScale();var i=o.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:r?6:40});var a=Object.assign({},t,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return l.GrammarRegistry.get("adjustStaticSizeScale")(e,a)}];return n},buildModel:function e(t){var n=s.BasePath.baseModel(t);var r=this.node().config.guide;var o=u.getLineClassesByCount(t.model.scaleColor.domain().length);var l=a.CSS_PREFIX+"area area i-role-path "+o+" "+r.cssClass+" ";n.groupAttributes={class:function e(t){return l+" "+n.class(t[0])+" frame"}};var h=function e(r){return{id:t.id(r),x:n.x(r),y:n.y(r)}};var p=function e(r){return{id:t.id(r),x:n.x0(r),y:n.y0(r)}};var v={fill:function e(t){return n.color(t[0])},stroke:function e(t){var r=n.color(t[0]);if(r.length>0){r=i.default.rgb(r).darker(1)}return r}};n.pathAttributesEnterInit=v;n.pathAttributesUpdateDone=v;var m=f.getInterpolatorSplineType(r.interpolate)==="polyline";n.pathElement=m?"polygon":"path";n.pathTween={attr:m?"points":"d",fn:c.d3_createPathTween(m?"points":"d",m?d.getAreaPolygon:d.getSmoothAreaPath,[h,p],t.id,r.interpolate)};return n}};t.Area=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BasePath=undefined;var r=function(){function e(e,t){var n=[];var r=true;var i=false;var a=undefined;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t){break}}}catch(e){i=true;a=e}finally{try{if(!r&&o["return"]){o["return"]()}}finally{if(i){throw a}}}return n}return function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,n)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var i=n(46);var a=n(22);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function p(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v="taucharts_synthetic_record";var m=function e(t){return t[v]!==true};var g={grammarRuleFillGaps:function e(t){var n=t.data();var r=s.utils.groupBy(n,t.group);var i=Object.keys(r).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(e,t){return e.concat([r[t]])},[]);var a=t.scaleX.dim;var o=t.scaleY.dim;var u=t.scaleColor.dim;var l=t.scaleSplit.dim;var c=function e(t){return t[o]>=0?1:-1};var f=function e(n,r,i){var s;var c=[n,t.id(r),i].join(" ");return s={},p(s,a,n),p(s,o,i*1e-10),p(s,l,r[l]),p(s,u,r[u]),p(s,v,true),p(s,v+"id",c),s};var d=function e(t,n,r){var i=s.utils.groupBy(n,function(e){return e[a]});var o=n[0];return t.reduce(function(e,t){return e.concat(i[t]||f(t,o,r))},[])};var h=function e(t,n){return t-n};var m=s.utils.unique(i.reduce(function(e,t){return e.concat(t.map(function(e){return e[a]}))},[])).sort(h);var g=i.map(function(e){return e.sort(function(e,n){return t.xi(e)-t.xi(n)})}).reduce(function(e,t){var n=s.utils.groupBy(t,c);return Object.keys(n).reduce(function(e,t){return e.concat(d(m,n[t],t))},e)},[]);return{data:function e(){return g},id:function e(n){return n[v]?n[v+"id"]:t.id(n)}}},init:function e(t){var n=t;n.guide=s.utils.defaults(n.guide||{},{animationSpeed:0,cssClass:"",maxHighlightDistance:32,widthCssClass:"",color:{},label:{}});n.guide.label=s.utils.defaults(n.guide.label,{fontSize:11,hideEqualLabels:true,position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:avoid-label-edges-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-edges-overlap"]});n.guide.color=s.utils.defaults(n.guide.color||{},{fill:null});if(["never","hover","always"].indexOf(n.guide.showAnchors)<0){n.guide.showAnchors="hover"}n.transformRules=[];n.adjustRules=[];return n},baseModel:function e(t){var n="i-role-datum";var r=a.CSS_PREFIX+"dot-line dot-line i-role-dot "+n+" "+a.CSS_PREFIX+"dot ";var i=1e4;var e={gog:t.model,x:t.x,y:t.y,x0:t.x0,y0:t.y0,size:t.size,group:t.group,order:t.order,color:t.color,class:t.class,groupAttributes:{},pathAttributesUpdateInit:{},pathAttributesUpdateDone:{},pathAttributesEnterInit:{},pathAttributesEnterDone:{},pathElement:null,dotAttributes:{r:function t(n){return Math.round(i*e.size(n)/2)/i},cx:function t(n){return e.x(n)},cy:function t(n){return e.y(n)},fill:function t(n){return e.color(n)},class:function t(n){return r+" "+e.class(n)}},dotAttributesDefault:{r:0,cy:function t(n){return e.y0(n)}}};return e},addInteraction:function e(){var t=this;var n=this.node();var r=this.node().config;var i=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("highlight-data-points",function(e,n){return t.highlightDataPoints(n)});if(r.guide.showAnchors!=="never"){n.on("data-hover",function(e,n){return t.highlightDataPoints(i(n.data,null))})}},draw:function e(){var t=this.node();var n=t.config;var a=n.guide;var s=n.options;s.container=s.slot(n.uid);var u=t.screenModel;var l=this.buildModel(u);var c=o.d3_animationInterceptor;var d=function e(){this.attr(l.groupAttributes);var r=this.selectAll("circle").data(function(e){return e.length<=1?e:[]},u.id);r.exit().call(c(a.animationSpeed,null,{r:0},function(e){return f.default.select(e).remove()}));r.call(c(a.animationSpeed,null,l.dotAttributes));r.enter().append("circle").call(c(a.animationSpeed,l.dotAttributesDefault,l.dotAttributes));t.subscribe(r);var i=function e(t){if(n.guide.animationSpeed>0){t.attr(l.pathTween.attr,function(e){return l.pathTween.fn.call(this,e)(0)});o.d3_transition(t,n.guide.animationSpeed,"pathTransition").attrTween(l.pathTween.attr,l.pathTween.fn)}else{t.attr(l.pathTween.attr,function(e){return l.pathTween.fn.call(this,e)(1)})}};var s=this.selectAll(l.pathElement).data(function(e){return e.length>1?[e]:[]},y);s.exit().remove();s.call(c(a.animationSpeed,l.pathAttributesUpdateInit,l.pathAttributesUpdateDone,l.afterPathUpdate)).call(i);s.enter().append(l.pathElement).call(c(a.animationSpeed,l.pathAttributesEnterInit,l.pathAttributesEnterDone,l.afterPathUpdate)).call(i);t.subscribe(s);if(a.showAnchors!=="never"){var d="i-data-anchor";var h={r:a.showAnchors==="hover"?0:function(e){return u.size(e)/2},cx:function e(t){return l.x(t)},cy:function e(t){return l.y(t)},opacity:a.showAnchors==="hover"?0:1,fill:function e(t){return u.color(t)},class:d};var p=this.selectAll("."+d).data(function(e){return e.filter(m)},u.id);p.exit().remove();p.call(c(a.animationSpeed,null,h));p.enter().append("circle").call(c(a.animationSpeed,{r:0},h));t.subscribe(p)}};var p=u.toFibers();var v=p.map(function(e){return e.filter(m)});var g=s.container.selectAll(".frame");var y=function(){var e=g.empty()?[]:g.data();var t=new Map;g.each(function(e){t.set(e,Number(this.getAttribute("data-id")))});var n=e.reduce(function(e,t){e.set(t,t.map(u.id));return e},new Map);var i=new Map;var a=Math.max.apply(Math,[0].concat(h(Array.from(t.values()))));return function(e){if(i.has(e)){return i.get(e)}var o=e.map(function(e){return u.id(e)});var s=(Array.from(n.entries()).find(function(e){var t=r(e,2),n=t[1];return o.some(function(e){return n.some(function(t){return t===e})})})||[null])[0];var l;if(s){l=t.get(s)}else{++a;l=a}i.set(e,l);return l}}();this._getDataSetId=y;var b=g.data(p,y);b.exit().remove();b.call(d);b.enter().append("g").attr("data-id",y).call(d);b.order();this._boundsInfo=this._getBoundsInfo(s.container.selectAll(".i-data-anchor")[0]);t.subscribe(new i.LayerLabels(u.model,n.flip,n.guide.label,s).draw(v))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=this.node().config.flip;var i=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.y(t);return{node:e,data:t,x:r,y:i}}).filter(function(e){return!isNaN(e.x)&&!isNaN(e.y)});var a=i.reduce(function(e,t){var n=t.x,r=t.y;e.left=Math.min(n,e.left);e.right=Math.max(n,e.right);e.top=Math.min(r,e.top);e.bottom=Math.max(r,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var o=s.utils.unique(i.map(r?function(e){return e.y}:function(e){return e.x})).sort(function(e,t){return e-t});var u=o.reduce(function(e,t){return e[t]=[],e},{});i.forEach(function(e){var t=o.find(r?function(t){return e.y===t}:function(t){return e.x===t});u[t].push(e)});var l=function e(t){if(t.length===1){return u[t]}var n=Math.ceil(t.length/2);var r=(t[n-1]+t[n])/2;return{middle:r,lower:e(t.slice(0,n)),greater:e(t.slice(n))}};var c=l(o);return{bounds:a,tree:c}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=this.node().config.flip;var u=l.utilsDraw.getDeepTransformTranslate(o.node());var c=this.node().config.guide.maxHighlightDistance;if(t<i.left+u.x-c||t>i.right+u.x+c||n<i.top+u.y-c||n>i.bottom+u.y+c){return null}var f=s?n-u.y:t-u.x;var d=function e(t){if(Array.isArray(t)){return t}return e(f>t.middle?t.greater:t.lower)}(a).map(function(e){var r=e.x+u.x;var i=e.y+u.y;var a=Math.abs(s?n-i:t-r);var o=Math.abs(s?t-r:n-i);return{node:e.node,data:e.data,distance:a,secondaryDistance:o,x:r,y:i}}).sort(function(e,t){return e.distance===t.distance?e.secondaryDistance-t.secondaryDistance:e.distance-t.distance});var h=d.findIndex(function(e){return e.distance!==d[0].distance||e.secondaryDistance!==d[0].secondaryDistance});var p=h<0?d:d.slice(0,h);if(p.length===1){return p[0]}var v=p.reduce(function(e,t){return e+t.x},0)/p.length;var m=p.reduce(function(e,t){return e+t.y},0)/p.length;var g=Math.atan2(m-n,v-t)+Math.PI;var y=p[Math.round((p.length-1)*g/2/Math.PI)];return y},highlight:function e(t){var n,r;var i=this.node().config.options.container;var a="graphical-report__highlighted";var o="graphical-report__dimmed";var s=i.selectAll(".i-role-path");var u=s.data().filter(function(e){return e.filter(m).some(t)});var l=u.length>0;s.classed((n={},p(n,a,function(e){return l&&u.indexOf(e)>=0}),p(n,o,function(e){return l&&u.indexOf(e)<0}),n));var c=(r={},p(r,a,function(e){return t(e)===true}),p(r,o,function(e){return t(e)===false}),r);i.selectAll(".i-role-dot").classed(c);i.selectAll(".i-role-label").classed(c);this._sortElements(t)},highlightDataPoints:function e(t){var n="i-data-anchor";var r=this.node().screenModel;var i=this.node().config.guide.showAnchors==="hover";var o=4;var s=1.25;var l=this.node();var c=l.config.options.container;var f=c.selectAll("."+n).attr({r:i?function(e){return t(e)?Math.max(o,r.size(e)/2):0}:function(e){var n=r.size(e)/2;if(t(e)){n=Math.max(o,Math.ceil(n*s))}return n},opacity:i?function(e){return t(e)?1:0}:1,fill:function e(t){return r.color(t)},class:function e(t){return u.utilsDom.classes(n,r.class(t))}}).classed(a.CSS_PREFIX+"highlighted",t);var d=l.config.flip;var h=f.filter(t);var p=c.select(".cursor-line");if(h.empty()){p.remove()}else{if(p.empty()){p=c.append("line")}var v=l.screenModel.model;var m=v.xi(h.data()[0]);var g=v.xi(h.data()[0]);var y=v.scaleY.domain();var b=v.scaleY(y[0]);var x=v.scaleY(y[1]);p.attr("class","cursor-line").attr("x1",d?b:m).attr("y1",d?m:b).attr("x2",d?x:g).attr("y2",d?g:x)}this._sortElements(t)},_sortElements:function e(t){var n=this.node().config.options.container;var r=new Map;var i=new Map;var a=this._getDataSetId;n.selectAll(".i-role-path").each(function(e){r.set(this,a(e));i.set(this,e.filter(m).some(t))});var o=s.utils.createMultiSorter(function(e,t){return i.get(e)-i.get(t)},function(e,t){return r.get(e)-r.get(t)});var l={line:0,g:1,text:2};u.utilsDom.sortChildren(n.node(),function(e,t){if(e.tagName==="g"&&t.tagName==="g"){return o(e,t)}return l[e.tagName]-l[t.tagName]})}};t.BasePath=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLineClassesByCount=t.getLineClassesByWidth=undefined;var r=n(22);var i=[1,2,3,4,5];var a=i.map(function(e){return r.CSS_PREFIX+"line-opacity-"+e});var o=i.map(function(e){return r.CSS_PREFIX+"line-width-"+e});function s(e){return a[e-1]||a[4]}function u(e){var t=0;if(e>=160&&e<320){t=1}else if(e>=320&&e<480){t=2}else if(e>=480&&e<640){t=3}else if(e>=640){t=4}return o[t]}t.getLineClassesByWidth=u;t.getLineClassesByCount=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getAreaPolygon=n;t.getSmoothAreaPath=r;function n(e,t){if(e.length<2){return""}var n=String.prototype.concat.apply("",e.concat(t.slice().reverse()).map(function(e,t){return""+(t===0?"":" ")+e.x+","+e.y}));return n}function r(e,t){if(e.length<2){return""}var n=function e(t){var n=t.map(function(e,t){var n=(t-1)%3===0?"C":"";return""+n+e.x+","+e.y+" "});return String.prototype.concat.apply("",n)};var r=n(e);var i=n(t.slice().reverse());var a="M"+r+"L"+i+"Z";return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Path=undefined;var r=n(22);var i=n(7);var a=n(52);var o=n(3);var s=n(53);var u=n(9);var l={draw:a.BasePath.draw,getClosestElement:a.BasePath.getClosestElement,highlight:a.BasePath.highlight,highlightDataPoints:a.BasePath.highlightDataPoints,addInteraction:a.BasePath.addInteraction,_getBoundsInfo:a.BasePath._getBoundsInfo,_sortElements:a.BasePath._sortElements,init:function e(t){var n=a.BasePath.init(t);n.transformRules=[n.flip&&i.GrammarRegistry.get("flip")];n.adjustRules=[function(e,t){var r=e.scaleSize.isEmptyScale();var a=o.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:r?6:40});var s=Object.assign({},t,{defMin:a.defMinSize,defMax:a.defMaxSize,minLimit:a.minSize,maxLimit:a.maxSize});return i.GrammarRegistry.get("adjustStaticSizeScale")(e,s)}];return n},buildModel:function e(t){var n=a.BasePath.baseModel(t);var i=this.node().config.guide;var o=s.getLineClassesByCount(t.model.scaleColor.domain().length);var l=r.CSS_PREFIX+"area area i-role-path "+o+" "+i.cssClass+" ";n.groupAttributes={class:function e(t){return l+" "+n.class(t[0])+" frame"}};var c=function e(r){return{id:t.id(r),x:n.x(r),y:n.y(r)}};var f=function e(t,n){return function(e){return e.map(function(e){return[t(e),n(e)].join(",")}).join(" ")}};var d={fill:function e(t){return n.color(t[0])},stroke:function e(t){return n.color(t[0])}};n.pathAttributesEnterInit=d;n.pathAttributesUpdateDone=d;n.pathElement="polygon";n.pathTween={attr:"points",fn:u.d3_createPathTween("points",f(function(e){return e.x},function(e){return e.y}),[c],t.id)};return n}};t.Path=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Line=undefined;var r=n(22);var i=n(52);var a=n(7);var o=n(53);var s=n(3);var u=n(9);var l=n(13);var c=n(57);var f=n(58);var d={draw:i.BasePath.draw,getClosestElement:i.BasePath.getClosestElement,highlight:i.BasePath.highlight,highlightDataPoints:i.BasePath.highlightDataPoints,addInteraction:i.BasePath.addInteraction,_getBoundsInfo:i.BasePath._getBoundsInfo,_sortElements:i.BasePath._sortElements,init:function e(t){var n=i.BasePath.init(t);var r=n.stack;n.guide=s.utils.defaults(n.guide||{},{avoidScalesOverflow:true,interpolate:"linear"});n.transformRules=[n.flip&&a.GrammarRegistry.get("flip"),!r&&a.GrammarRegistry.get("groupOrderByAvg"),r&&i.BasePath.grammarRuleFillGaps,r&&a.GrammarRegistry.get("stack")];var o=n.guide.avoidScalesOverflow;var u=function e(t){return t.scaleSize.isEmptyScale()};n.adjustRules=[function(e,t){var r=s.utils.defaults(n.guide.size||{},{defMinSize:2,defMaxSize:u(e)?6:40});var i=Object.assign({},t,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return a.GrammarRegistry.get("adjustStaticSizeScale")(e,i)},o&&function(e,t){if(u(e)){return function(){return{}}}var n=Object.assign({},t,{sizeDirection:"xy"});return a.GrammarRegistry.get("avoidScalesOverflow")(e,n)}].filter(function(e){return e});return n},buildModel:function e(t){var n=this.node().config;var a=n.guide;var s=n.options;var d=!t.model.scaleSize.dim;var h=d?a.widthCssClass||o.getLineClassesByWidth(s.width):"";var p=o.getLineClassesByCount(t.model.scaleColor.domain().length);var v=d?"line":"area";var m=""+r.CSS_PREFIX+v+" "+v+" i-role-path "+h+" "+p+" "+a.cssClass+" ";var g=d?{stroke:function e(t){return b.color(t[0])},class:"i-role-datum"}:{fill:function e(t){return b.color(t[0])}};var y=l.getInterpolatorSplineType(a.interpolate)==="cubic"?d?f.getCurve:c.getBrushCurve:d?f.getPolyline:c.getBrushLine;var b=i.BasePath.baseModel(t);var x=d?function(e){return{id:t.id(e),x:b.x(e),y:b.y(e)}}:function(e){return{id:t.id(e),x:b.x(e),y:b.y(e),size:b.size(e)}};b.groupAttributes={class:function e(t){return m+" "+b.class(t[0])+" frame"}};b.pathElement="path";b.pathAttributesEnterInit=g;b.pathAttributesUpdateDone=g;b.pathTween={attr:"d",fn:u.d3_createPathTween("d",y,[x],t.id,a.interpolate)};return b}};t.Line=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBrushLine=a;t.getBrushCurve=o;var r=n(12);function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function a(e){if(e.length===0){return""}if(e.length===1){return s(e[0])}var t=[];for(var n=1;n<e.length;n++){t.push(u(e[n-1],e[n]))}return t.join(" ")}function o(e){if(e.length===0){return""}if(e.length===1){return s(e[0])}var t=[];for(var n=3;n<e.length;n+=3){t.push(l(e[n-3],e[n-2],e[n-1],e[n]))}return t.join(" ")}function s(e){var t=e.size/2;return["M"+e.x+","+(e.y-t),"A"+t+","+t+" 0 0 1",e.x+","+(e.y+t),"A"+t+","+t+" 0 0 1",e.x+","+(e.y-t),"Z"].join(" ")}function u(e,t){var n=m(e,t);if(!n){return s(e.size>t.size?e:t)}return["M"+n.left[0].x+","+n.left[0].y,"L"+n.left[1].x+","+n.left[1].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(e.size<t.size)+" 1",n.right[1].x+","+n.right[1].y,"L"+n.right[0].x+","+n.right[0].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(e.size>t.size)+" 1",n.left[0].x+","+n.left[0].y,"Z"].join(" ")}function l(e,t,n,r){var i=g(e,t,n,r);if(!i){return u(e,r)}var a=f(c(e,i.right[0]),c(e,i.left[0]));var o=f(c(r,i.right[1]),c(r,i.left[1]));return["M"+i.left[0].x+","+i.left[0].y,"C"+i.left[1].x+","+i.left[1].y,i.left[2].x+","+i.left[2].y,i.left[3].x+","+i.left[3].y,"A"+r.size/2+","+r.size/2+" 0 "+Number(a>Math.PI)+" 1",i.right[3].x+","+i.right[3].y,"C"+i.right[2].x+","+i.right[2].y,i.right[1].x+","+i.right[1].y,i.right[0].x+","+i.right[0].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(o>Math.PI)+" 1",i.left[0].x+","+i.left[0].y,"Z"].join(" ")}function c(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function f(e,t){if(t<e){t+=2*Math.PI}return t-e}function d(){var e=0;for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}for(var i=1;i<n.length;i++){e+=Math.sqrt((n[i].x-n[i-1].x)*(n[i].x-n[i-1].x)+(n[i].y-n[i-1].y)*(n[i].y-n[i-1].y))}return e}function h(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}function p(e,t,n,i,a){var o=r.splitCubicSegment(e,t,n,i,a);var s=1/(1+d(o[3],o[4],o[5],o[6],o[3])/d(o[0],o[1],o[2],o[3],o[0]));o[3].size=t.size*(1-s)+a.size*s;return o}function v(e,t,n){var i=r.getBezierPoint(d(e,t)/d(e,t,n),e,n);var a=r.getBezierPoint(2,i,t);return[e,a,n]}function m(e,t){var n=d(e,t);if(n===0||n+e.size/2<=t.size/2||n+t.size/2<=e.size/2){return null}var r=c(e,t);var i=Math.asin((e.size-t.size)/n/2);var a=r-Math.PI/2+i;var o=r+Math.PI/2-i;return{left:[h(e,e.size/2,a),h(t,t.size/2,a)],right:[h(e,e.size/2,o),h(t,t.size/2,o)]}}function g(e,t,n,a){var o=d(e,a);if(o===0||o+e.size/2<=a.size/2||o+a.size/2<=e.size/2){return null}var s=1/12;var u=function o(u){var l=u?[a,n,t,e]:[e,t,n,a];var c=p.apply(undefined,[2*s].concat(l));var f=p.apply(undefined,[.5].concat(i(c.slice(0,4))));var d=f[3];var h=f[6];var g=m(l[0],d);var y=m(d,h);var b=[g.left[0],r.getBezierPoint(.5,g.left[1],y.left[0]),y.left[1]];var x=[g.right[0],r.getBezierPoint(.5,g.right[1],y.right[0]),y.right[1]];var w=v.apply(undefined,b)[1];var _=v.apply(undefined,x)[1];var k=r.getBezierPoint(1/3/s,g.left[0],w);var C=r.getBezierPoint(1/3/s,g.right[0],_);return{left:u?[C,x[0]]:[b[0],k],right:u?[k,b[0]]:[x[0],C]}};var l=u(false);var c=u(true);return{left:[].concat(i(l.left),i(c.left)),right:[].concat(i(l.right),i(c.right))}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getPolyline=n;t.getCurve=r;function n(e){if(e.length<2){return""}var t="";for(var n=0;n<e.length;n++){t+=""+(n===0?"M":" L")+e[n].x+","+e[n].y}return t}function r(e){if(e.length<4){return""}var t="M"+e[0].x+","+e[0].y;for(var n=3;n<e.length;n+=3){t+=" C"+e[n-2].x+","+e[n-2].y+" "+e[n-1].x+","+e[n-1].y+" "+e[n].x+","+e[n].y}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Interval=undefined;var r=n(22);var i=n(7);var a=n(46);var o=n(9);var s=n(3);var u=n(1);var l=n(10);var c=n(2);var f=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var p=function e(t){return f.default.select(t).data()[0]};var v={init:function e(t){var n=Object.assign({},t);n.guide=n.guide||{};n.guide=s.utils.defaults(n.guide,{animationSpeed:0,avoidScalesOverflow:true,maxHighlightDistance:32,prettify:true,sortByBarHeight:true,enableColorToBarPosition:n.guide.enableColorToBarPosition!=null?n.guide.enableColorToBarPosition:!n.stack});n.guide.size=s.utils.defaults(n.guide.size||{},{enableDistributeEvenly:true});n.guide.label=s.utils.defaults(n.guide.label||{},{position:n.flip?n.stack?["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"]:["outside-then-inside-horizontal","auto:hide-on-label-label-overlap"]:n.stack?["rotate-on-size-overflow","t-","b+","hide-by-label-height-vertical","cut-label-vertical","auto:hide-on-label-label-overlap"]:["rotate-on-size-overflow","outside-then-inside-vertical","auto:hide-on-label-label-overlap"]});var r=n.guide.avoidScalesOverflow;var a=n.guide.enableColorToBarPosition;var o=n.guide.size.enableDistributeEvenly;n.transformRules=[n.flip&&i.GrammarRegistry.get("flip"),n.stack&&i.GrammarRegistry.get("stack"),a&&i.GrammarRegistry.get("positioningByColor")].filter(function(e){return e});n.adjustRules=[o&&function(e,t){var r=s.utils.defaults(n.guide.size||{},{defMinSize:n.guide.prettify?3:0,defMaxSize:n.guide.prettify?40:Number.MAX_VALUE});var a=Object.assign({},t,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return i.GrammarRegistry.get("size_distribute_evenly")(e,a)},r&&o&&function(e,t){var n=Object.assign({},t,{sizeDirection:"x"});return i.GrammarRegistry.get("avoidScalesOverflow")(e,n)},n.stack&&i.GrammarRegistry.get("adjustYScale")].filter(function(e){return e});return n},addInteraction:function e(){var t=this;var n=this.node();var r=function e(t,n){return function(e){return e===t?true:n}};n.on("highlight",function(e,n){return t.highlight(n)});n.on("data-hover",function(e,n){return t.highlight(r(n.data,null))})},draw:function e(){var t,n;var i=this.node();var u=i.config;var l=u.options;l.container=l.slot(u.uid);var c=u.guide.prettify;var d="i-role-element i-role-datum bar "+r.CSS_PREFIX+"bar";var v=i.screenModel;var m=this.buildModel(v,{prettify:c,minBarH:1,minBarW:1,baseCssClass:d});var g=o.d3_animationInterceptor;var y=u.flip?"y":"x";var b=u.flip?"x":"y";var x=u.flip?"width":"height";var w=u.flip?"height":"width";var _=v.toFibers();var k=_.reduce(function(e,t){return e.concat(t)},[]);var C=m.class;var T=s.utils.omit(m,"class");var S=l.container.selectAll(".bar").data(k,v.id);S.exit().classed("tau-removing",true).call(g(u.guide.animationSpeed,null,(t={},h(t,y,function(){var e=f.default.select(this);var t=e.attr(y)-0;var n=e.attr(w)-0;return t+n/2}),h(t,b,function(){return this.getAttribute("data-zero")}),h(t,w,0),h(t,x,0),t),function(e){var t=f.default.select(e);if(t.classed("tau-removing")){t.remove()}}));S.call(g(u.guide.animationSpeed,null,T)).attr("class",C).attr("data-zero",v[b+"0"]);S.enter().append("rect").call(g(u.guide.animationSpeed,(n={},h(n,b,v[b+"0"]),h(n,x,0),n),T)).attr("class",C).attr("data-zero",v[b+"0"]);i.subscribe(new a.LayerLabels(v.model,v.model.flip,u.guide.label,l).draw(_));var E=function e(t,n){var r=p(t);var i=p(n);var a=m.width(r);var o=m.width(i);if(a===o){var s=m.y(r);var u=m.y(i);if(s===u){return P(t,n)}return s-u}return o-a};var A=function e(t,n){var r=p(t);var i=p(n);var a=m.height(r);var o=m.height(i);if(a===o){var s=m.x(r);var u=m.x(i);if(s===u){return P(t,n)}return s-u}return o-a};var P=function(){var e=k.reduce(function(e,t,n){e.set(t,n+1);return e},new Map);return function(t,n){var r=e.get(p(t))||-1;var i=e.get(p(n))||-1;return r-i}}();this._barsSorter=u.guide.sortByBarHeight?u.flip?E:A:P;var O={rect:0,text:1};this._typeSorter=function(e,t){return O[e.tagName]-O[t.tagName]};this._sortElements(this._typeSorter,this._barsSorter);i.subscribe(S);this._boundsInfo=this._getBoundsInfo(S[0])},buildModel:function e(t,n){var r=n.prettify,i=n.minBarH,a=n.minBarW,o=n.baseCssClass;var s=function e(n){var i=t.size(n);if(r){i=Math.max(a,i)}return i};var u;var l=function e(n){return n[t.model.scaleY.dim]};if(t.flip){var c=function e(n){return Math.abs(t.x(n)-t.x0(n))};u={y:function e(n){return t.y(n)-s(n)*.5},x:function e(n){var e=Math.min(t.x0(n),t.x(n));if(r){var a=c(n);var o=l(n);var s=0;if(o===0){s=0}if(o>0){s=a}if(o<0){s=0-i}var u=a<i;return u?e+s:e}else{return e}},height:function e(t){return s(t)},width:function e(t){var n=c(t);if(r){return l(t)===0?n:Math.max(i,n)}return n}}}else{var f=function e(n){return Math.abs(t.y(n)-t.y0(n))};u={x:function e(n){return t.x(n)-s(n)*.5},y:function e(n){var e=Math.min(t.y0(n),t.y(n));if(r){var a=f(n);var o=a<i;e=o&&l(n)>0?e-i:e}return e},width:function e(t){return s(t)},height:function e(t){var n=f(t);if(r){n=l(t)===0?n:Math.max(i,n)}return n}}}return Object.assign(u,{class:function e(n){return o+" "+t.class(n)},fill:function e(n){return t.color(n)}})},_sortElements:function e(){var t=this.node().config.options.container.node();u.utilsDom.sortChildren(t,s.utils.createMultiSorter.apply(s.utils,arguments))},_getBoundsInfo:function e(t){if(t.length===0){return null}var n=this.node().screenModel;var r=this.node().config.flip;var i=t.map(function(e){var t=f.default.select(e).data()[0];var r=n.x(t);var i=n.x0(t);var a=n.y(t);var o=n.y0(t);var s=Math.abs(r-i);var u=Math.abs(a-o);var l=(r+i)/2;var c=(a+o)/2;var d=a>o;var h={top:c-u/2,right:l+s/2,bottom:c+u/2,left:l-s/2};return{node:e,data:t,cx:l,cy:c,box:h,invert:d}});var a=i.reduce(function(e,t){var n=t.box;e.left=Math.min(n.left,e.left);e.right=Math.max(n.right,e.right);e.top=Math.min(n.top,e.top);e.bottom=Math.max(n.bottom,e.bottom);return e},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE});var o=s.utils.unique(i.map(r?function(e){return e.cy}:function(e){return e.cx})).sort(function(e,t){return e-t});var u=o.reduce(function(e,t){return e[t]=[],e},{});i.forEach(function(e){var t=o.find(r?function(t){return e.cy===t}:function(t){return e.cx===t});u[t].push(e)});var l=function e(t){if(t.length===1){return u[t]}var n=Math.ceil(t.length/2);var r=(t[n-1]+t[n])/2;return{middle:r,lower:e(t.slice(0,n)),greater:e(t.slice(n))}};var c=l(o);return{bounds:a,tree:c}},getClosestElement:function e(t,n){if(!this._boundsInfo){return null}var r=this._boundsInfo,i=r.bounds,a=r.tree;var o=this.node().config.options.container;var s=this.node().config.flip;var u=l.utilsDraw.getDeepTransformTranslate(o.node());var c=t-u.x;var f=n-u.y;var d=this.node().config.guide.maxHighlightDistance;if(c<i.left-d||c>i.right+d||f<i.top-d||f>i.bottom+d){return null}var h=s?f:c;var p=s?c:f;var v=function e(t,n,r){return t>=n&&t<=r};var m=function e(t){if(Array.isArray(t)){return t}return e(h>t.middle?t.greater:t.lower)}(a).map(function(e){var t=s?e.box.left:e.box.top;var n=s?e.box.right:e.box.bottom;var r=v(p,t,n);if(!r&&Math.abs(p-t)>d&&Math.abs(p-n)>d){return null}var i=Math.abs(p-(e.invert!==s?n:t));return Object.assign(e,{distToValue:i,cursorInside:r})}).filter(function(e){return e}).sort(function(e,t){if(e.cursorInside!==t.cursorInside){return t.cursorInside-e.cursorInside}return Math.abs(e.distToValue)-Math.abs(t.distToValue)}).map(function(e){var t=e.cx;var n=e.cy;var r=Math.abs(s?f-n:c-t);var i=Math.abs(s?c-t:f-n);return{node:e.node,data:e.data,distance:r,secondaryDistance:i,x:t,y:n}});return m[0]||null},highlight:function e(t){var n;var r="graphical-report__highlighted";var i="graphical-report__dimmed";var a=this.node().config.options.container;var o=(n={},h(n,r,function(e){return t(e)===true}),h(n,i,function(e){return t(e)===false}),n);a.selectAll(".bar").classed(o);a.selectAll(".i-role-label").classed(o);this._sortElements(function(e,n){return t(p(e))-t(p(n))},this._typeSorter,this._barsSorter)}};t.Interval=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ParallelLine=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(22);var a=n(5);var o=n(3);var s=n(2);var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.ParallelLine=function(e){d(t,e);function t(e){c(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=e;n.config.guide=o.utils.defaults(n.config.guide||{},{});n.on("highlight",function(e,t){return n.highlight(t)});return n}r(t,[{key:"defineGrammarModel",value:function e(t){var n=this.config;var r=n.options;this.color=t("color",n.color,{});this.scalesMap=n.columns.reduce(function(e,n){e[n]=t("pos",n,[r.height,0]);return e},{});var i=r.width/(n.columns.length-1);var a=n.columns.reduce(function(e,t,n){e[t]=n*i;return e},{});this.xBase=function(e){return a[e]};this.regScale("columns",this.scalesMap).regScale("color",this.color);return{}}},{key:"drawFrames",value:function e(t){var n=this.config;var r=this.config.options;var a=this.scalesMap;var o=this.xBase;var s=this.color;var l=u.default.svg.line();var c=function e(){this.attr({d:function e(t){return l(n.columns.map(function(e){return[o(e),a[e](t[a[e].dim])]}))}})};var f=function e(){this.attr({stroke:function e(t){return s.toColor(s(t[s.dim]))},class:function e(t){return i.CSS_PREFIX+"__line line "+s.toClass(s(t[s.dim]))+" foreground"}})};var d=function e(){var t=this.selectAll(".background").data(function(e){return e.part()});t.exit().remove();t.call(c);t.enter().append("path").attr("class","background line").call(c);var n=this.selectAll(".foreground").data(function(e){return e.part()});n.exit().remove();n.call(function(){c.call(this);f.call(this)});n.enter().append("path").call(function(){c.call(this);f.call(this)})};var h=r.container.selectAll(".lines-frame").data(t,function(e){return e.hash()});h.exit().remove();h.call(d);h.enter().append("g").attr("class","lines-frame").call(d);this.subscribe(r.container.selectAll(".lines-frame .foreground"))}},{key:"highlight",value:function e(t){this.config.options.container.selectAll(".lines-frame .foreground").style("visibility",function(e){return t(e)?"":"hidden"})}}]);return t}(a.Element)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IdentityScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var u=t.IdentityScale=function(e){s(t,e);function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r._references=n.references;r._refCounter=n.refCounter;r.addField("scaleType","identity");return r}r(t,[{key:"create",value:function e(){var t=this._references;var n=this._refCounter;return this.toBaseScale(function(e,r){if(e==null){var i=t.get(r);if(i==null){i=n();t.set(r,i)}}else{i=e}return i})}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(3);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(t){return t==="date"?function(e){return new Date(e).getTime()}:function(e){return e}};var s=function e(t,n){return i.utils.generateHash([t,n].map(JSON.stringify).join(""))};var u=t.BaseScale=function(){function e(t,n){var r=this;a(this,e);this._fields={};var o;if(Array.isArray(n.fitToFrameByDims)&&n.fitToFrameByDims.length){var s=function e(t){var r={};if(t.type==="where"&&t.args){r.type=t.type;r.args=n.fitToFrameByDims.reduce(function(e,n){if(t.args.hasOwnProperty(n)){e[n]=t.args[n]}return e},{})}else{r=t}return r};o=t.part(s)}else{o=t.full()}var u=this.getVarSet(o,n);if(n.order){u=i.utils.union(i.utils.intersection(n.order,u),u)}this.vars=u;var l=u.map(function(e){return e});this.scaleConfig=n;this.scaleConfig.nice=this.scaleConfig.hasOwnProperty("nice")?this.scaleConfig.nice:this.scaleConfig.autoScale;this.addField("dim",this.scaleConfig.dim).addField("scaleDim",this.scaleConfig.dim).addField("scaleType",this.scaleConfig.type).addField("source",this.scaleConfig.source).addField("domain",function(){return r.vars}).addField("isInteger",l.every(Number.isInteger)).addField("originalSeries",function(){return l}).addField("isContains",function(e){return r.isInDomain(e)}).addField("isEmptyScale",function(e){return r.isEmpty(e)}).addField("fixup",function(e){var t=r.scaleConfig;t.__fixup__=t.__fixup__||{};t.__fixup__=Object.assign(t.__fixup__,e(Object.assign({},t,t.__fixup__)))}).addField("commit",function(){r.scaleConfig=Object.assign(r.scaleConfig,r.scaleConfig.__fixup__);delete r.scaleConfig.__fixup__})}r(e,[{key:"isInDomain",value:function e(t){return this.domain().indexOf(t)>=0}},{key:"addField",value:function e(t,n){this._fields[t]=n;this[t]=n;return this}},{key:"getField",value:function e(t){return this._fields[t]}},{key:"isEmpty",value:function e(){return!Boolean(this._fields.dim)}},{key:"toBaseScale",value:function e(t){var n=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=Object.keys(this._fields).reduce(function(e,t){e[t]=n._fields[t];return e},t);i.getHash=function(){return s(n.vars,r)};i.value=i;return i}},{key:"getVarSet",value:function e(t,n){var r=n.hasOwnProperty("series")?n.series:t.map(function(e){return e[n.dim]});return i.utils.unique(r,o(n.dimType))}}]);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.ColorScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=n.dimType!=="measure";var o=r.scaleConfig.brewer||(i?a.utils.range(20).map(function(e){return"color20-"+(1+e)}):["#eee","#000"]);var u=r.scaleConfig;if(!i){var d=s.default.extent(r.vars);var h=function e(t){return Number.isFinite(t)||a.utils.isDate(t)};var p=h(u.min)?u.min:d[0];var v=h(u.max)?u.max:d[1];var m=[p,d[0]].filter(h);var g=[v,d[1]].filter(h);d=[m.sort(function(e,t){return e-t})[0],g.sort(function(e,t){return t-e})[0]];if(u.nice){if(d[0]<0&&d[1]>0){var y=Math.max.apply(Math,l(d.map(Math.abs)));d=[-y,y]}}r.vars=d}r.addField("scaleType","color").addField("discrete",i).addField("brewer",o).addField("toColor",a.utils.extRGBColor).addField("toClass",a.utils.extCSSClass);return r}r(t,[{key:"create",value:function e(){var t=this.discrete;var n=this.vars;var r=this.getField("brewer");var i=t?this.createDiscreteScale(n,r):this.createContinuesScale(n,r);return this.toBaseScale(i)}},{key:"createDiscreteScale",value:function e(t,n){var r=function e(){return"color-default"};var i=function e(t,n){var r=t.map(function(e){return String(e).toString()});return s.default.scale.ordinal().range(n).domain(r)};var o=function e(t,n){var r=Object.keys(t);var i=r.map(function(e){return t[e]});var a=s.default.scale.ordinal().range(i).domain(r);return function(e){return t.hasOwnProperty(e)?a(e):n(e)}};var u=function e(t){return function(e){return t(String(e).toString())}};var l;if(Array.isArray(n)){l=u(i(t,n))}else if(typeof n==="function"){l=function e(r){return n(r,u(i(t,a.utils.range(20).map(function(e){return"color20-"+(1+e)}))))}}else if(a.utils.isObject(n)){l=o(n,r)}else{throw new Error("This brewer is not supported")}return l}},{key:"createContinuesScale",value:function e(t,n){var r;if(Array.isArray(n)){r=s.default.scale.linear().domain(a.utils.splitEvenly(t.map(function(e){return e-0}),n.length)).range(n)}else{throw new Error("This brewer is not supported")}return r}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SizeScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h={sqrt:function e(t){return Math.sqrt(t)},linear:function e(t){return t}};var p=t.SizeScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=s.default.extent(r.vars);var o=Number.isFinite(i.min)?i.min:a[0];var u=Number.isFinite(i.max)?i.max:a[1];r.vars=[Math.min.apply(Math,l([o,a[0]].filter(Number.isFinite))),Math.max.apply(Math,l([u,a[1]].filter(Number.isFinite)))];r.addField("scaleType","size");r.addField("funcType",n.func||"sqrt");return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain().sort();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(){var t=this.scaleConfig;var n=this.vars;var r=a.utils.defaults({},t,{func:"sqrt",minSize:0,maxSize:1});var i=r.func;var o=r.minSize;var s=r.maxSize;var u=h[i];var c=n.filter(function(e){return Number.isFinite(Number(e))});var f;if(c.length===0){f=function e(){return s}}else{var d=1;var p=0;var v=Math.min.apply(Math,l(c));var m=Math.max.apply(Math,l(c));var g=u(Math.max(Math.abs(v),Math.abs(m),m-v));p=v<0?v:0;d=g===0?1:(s-o)/g;f=function e(t){var n=t!==null?parseFloat(t):0;if(!Number.isFinite(n)){return s}var r=n-p;return o+u(r)*d}}return this.toBaseScale(f)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrdinalScale=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var a=n(62);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.OrdinalScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.addField("scaleType","ordinal").addField("discrete",true);return r}i(t,[{key:"create",value:function e(t){var n=this.scaleConfig;var i=this.vars;var a=s.default.scale.ordinal().domain(i);var o=a.rangePoints(t,1);var u=Math.max.apply(Math,l(t));var c=function e(t){var a=r(n.ratio);if(a==="function"){return n.ratio(t,u,i)}else if(a==="object"){return n.ratio[t]}else{return 1/i.length}};var f=function e(t){var r;if(!n.ratio){r=o(t)}else{r=u-i.slice(i.indexOf(t)+1).reduce(function(e,t){return e+u*c(t)},u*c(t)*.5)}return r};Object.keys(o).forEach(function(e){return f[e]=o[e]});f.stepSize=function(e){return c(e)*u};return this.toBaseScale(f,t)}}]);return t}(a.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PeriodScale=undefined;var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var a=n(62);var o=n(18);var s=n(3);var u=n(2);var l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var v=t.PeriodScale=function(e){p(t,e);function t(e,n){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=r.vars;var u=l.default.extent(a);var c=i.min===null||i.min===undefined?u[0]:new Date(i.min).getTime();var f=i.max===null||i.max===undefined?u[1]:new Date(i.max).getTime();var p=[new Date(Math.min(c,u[0])),new Date(Math.max(f,u[1]))];var v=o.UnitDomainPeriodGenerator.get(i.period,{utc:i.utcTime});if(i.fitToFrameByDims||v===null){r.vars=s.utils.unique(a.map(function(e){return new Date(e)}),function(e){return e.getTime()}).sort(function(e,t){return t-e})}else{r.vars=o.UnitDomainPeriodGenerator.generate(p[0],p[1],i.period,{utc:i.utcTime})}r.addField("scaleType","period").addField("period",r.scaleConfig.period).addField("discrete",true);return r}i(t,[{key:"isInDomain",value:function e(t){var n=o.UnitDomainPeriodGenerator.get(this.scaleConfig.period,{utc:this.scaleConfig.utcTime});var r=n.cast(new Date(t)).getTime();return this.domain().map(function(e){return e.getTime()}).indexOf(r)>=0}},{key:"create",value:function e(t){var n=this.vars;var i=this.vars.map(function(e){return e.getTime()});var a=this.scaleConfig;var o=l.default.scale.ordinal().domain(n);var s=o.rangePoints(t,1);var u=l.default.scale.ordinal().domain(i.map(String));var c=u.rangePoints(t,1);var d=Math.max.apply(Math,f(t));var h=function e(t){var o=new Date(t).getTime();var s=r(a.ratio);if(s==="function"){return a.ratio(o,d,i)}else if(s==="object"){return a.ratio[o]}else{return 1/n.length}};var p=function e(t){var n;var r=new Date(t);var o=r.getTime();if(!a.ratio){n=c(String(o))}else{n=d-i.slice(i.indexOf(o)+1).reduce(function(e,t){return e+d*h(t)},d*h(t)*.5)}return n};Object.keys(s).forEach(function(e){return p[e]=s[e]});p.stepSize=function(e){return h(e)*d};return this.toBaseScale(p,t)}}]);return t}(a.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(2);var o=u(a);var s=n(3);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.TimeScale=function(e){f(t,e);function t(e,n){l(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=r.vars;var u=o.default.extent(a).map(function(e){return new Date(e)});var f=i.min===null||i.min===undefined?u[0]:new Date(i.min).getTime();var d=i.max===null||i.max===undefined?u[1]:new Date(i.max).getTime();a=[new Date(Math.min(f,u[0])),new Date(Math.max(d,u[1]))];r.niceIntervalFn=null;if(i.nice){var h=i.niceInterval;var p=h&&o.default.time[h]?i.utcTime?o.default.time[h].utc:o.default.time[h]:null;if(p){r.niceIntervalFn=p}else{r.niceIntervalFn=null}r.vars=s.utils.niceTimeDomain(a,r.niceIntervalFn,{utc:i.utcTime})}else{r.vars=a}r.addField("scaleType","time");return r}r(t,[{key:"isInDomain",value:function e(t){var n=new Date(t);var r=this.domain();var i=r[0];var a=r[r.length-1];return!Number.isNaN(i)&&!Number.isNaN(a)&&n<=a&&n>=i}},{key:"create",value:function e(t){var n=this.vars;var r=this.scaleConfig.utcTime;var i=r?o.default.time.scale.utc:o.default.time.scale;var a=i().domain(this.scaleConfig.nice?s.utils.niceTimeDomain(n,this.niceIntervalFn,{utc:r}):n);var u=a.range(t);var l=function e(t){var r=n[0];var i=n[1];if(t>i){t=i}if(t<r){t=r}return u(new Date(t))};Object.keys(u).forEach(function(e){return l[e]=u[e]});l.stepSize=function(){return 0};return this.toBaseScale(l,t)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LinearScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.LinearScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var o=s.default.extent(r.vars);var u=Number.isFinite(i.min)?i.min:o[0];var d=Number.isFinite(i.max)?i.max:o[1];o=[Math.min.apply(Math,l([u,o[0]].filter(Number.isFinite))),Math.max.apply(Math,l([d,o[1]].filter(Number.isFinite)))];r.vars=i.nice?a.utils.niceZeroBased(o):s.default.extent(o);if(r.vars[0]===r.vars[1]){var h=Math.pow(10,Math.floor(Math.log(r.vars[0])/Math.LN10));r.vars[0]-=h;r.vars[1]+=h||10}r.addField("scaleType","linear").addField("discrete",false);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(t){var n=this.vars;var r=this.extendScale(s.default.scale.linear());r.domain(n).range(t).clamp(true);return this.toBaseScale(r,t)}},{key:"extendScale",value:function e(t){var n=this;var r=t.copy;var i=t.ticks;Object.assign(t,{stepSize:function e(){return 0},copy:function e(){return n.extendScale(r.call(t))},ticks:this.getField("isInteger")?function(e){return i.call(t,e).filter(Number.isInteger)}:t.ticks});return t}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LogarithmicScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(8);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var h=t.LogarithmicScale=function(e){d(t,e);function t(e,n){c(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var a=s.default.extent(r.vars);var o=Number.isFinite(i.min)?i.min:a[0];var u=Number.isFinite(i.max)?i.max:a[1];a=[Math.min.apply(Math,l([o,a[0]].filter(Number.isFinite))),Math.max.apply(Math,l([u,a[1]].filter(Number.isFinite)))];v(a);if(i.nice){a=g(a)}r.vars=a;r.addField("scaleType","logarithmic").addField("discrete",false);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(t){var n=this.vars;v(n);var r=m(s.default.scale.log()).domain(n).range(t);r.stepSize=function(){return 0};return this.toBaseScale(r,t)}}]);return t}(i.BaseScale);function p(e){return Math.log(e)/Math.LN10}function v(e){if(e[0]*e[1]<=0){throw new a.TauChartError("Logarithmic scale domain cannot cross zero.",a.errorCodes.INVALID_LOG_DOMAIN)}}function m(e){var t=e.copy;e.ticks=function(t){var n=10;var r=[];var i=s.default.extent(e.domain());var a=Math.floor(p(i[0]));var o=Math.ceil(p(i[1]));var u=Math.ceil((o-a)*n/(Math.ceil(t/n)*n));for(var l=a;l<=o;l+=u){for(var c=1;c<=n;c++){var f=Math.pow(c,u)*Math.pow(10,l);f=parseFloat(f.toExponential(0));if(f>=i[0]&&f<=i[1]){r.push(f)}}}return r};e.copy=function(){var n=t.call(e);m(n);return n};return e}function g(e){var t=e[0]>0;var n=e.map(function(e){return Math.abs(e)});var r=Math.max.apply(Math,l(n));var i=Math.min.apply(Math,l(n));var a=i.toExponential().split("e");var o=r.toExponential().split("e");var s=parseFloat(Math.floor(a[0])+"e"+a[1]);var u=parseFloat(Math.ceil(o[0])+"e"+o[1]);return t?[s,u]:[-u,-s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ValueScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var u=t.ValueScale=function(e){s(t,e);function t(e,n){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.addField("scaleType","value").addField("georole",n.georole);return r}r(t,[{key:"create",value:function e(){return this.toBaseScale(function(e){return e})}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FillScale=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(62);var a=n(3);var o=n(2);var s=u(o);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t){Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}}var d=t.FillScale=function(e){f(t,e);function t(e,n){l(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));var i=r.scaleConfig;var o=s.default.extent(r.vars);var u=Number.isFinite(i.min)?i.min:o[0];var f=Number.isFinite(i.max)?i.max:o[1];o=[Math.min(u,o[0]),Math.max(f,o[1])];r.vars=i.nice?a.utils.niceZeroBased(o):s.default.extent(o);var d=(1-.2)/9;var h=a.utils.range(10).map(function(e){return"rgba(90,180,90,"+(.2+e*d).toFixed(2)+")"});var p=i.brewer||h;r.addField("scaleType","fill").addField("brewer",p);return r}r(t,[{key:"isInDomain",value:function e(t){var n=this.domain();var r=n[0];var i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&t<=i&&t>=r}},{key:"create",value:function e(){var t=this.vars;var n=this.getField("brewer");if(!Array.isArray(n)){throw new Error("This brewer is not supported")}var r=n.length;var i=(t[1]-t[0])/r;var o=a.utils.range(r-1).map(function(e){return e+1}).reduce(function(e,n){return e.concat([t[0]+n*i])},[]);var u=s.default.scale.threshold().domain(o).range(n);return this.toBaseScale(u)}}]);return t}(i.BaseScale)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartMap=undefined;var r=n(3);var i=function e(t){var n=Object.assign({sourcemap:t.settings.defaultSourceMap},t.guide||{});n.size=r.utils.defaults(n.size||{},{min:1,max:10});n.code=r.utils.defaults(n.code||{},{georole:"countries"});var i={};var a=function e(t,n){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a;var o=n;var s;if(!n){a=t+":default";s="?"}else{a=t+"_"+n;s="/"}if(!i.hasOwnProperty(a)){i[a]=Object.assign({type:t,source:s,dim:o},r)}return a};return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){e[n]={type:t.dimensions[n].type};return e},{}),data:t.data}},scales:i,unit:{type:"COORDS.MAP",expression:{operator:"none",source:"/"},code:a("value",t.code,n.code),fill:a("fill",t.fill,n.fill),size:a("size",t.size,n.size),color:a("color",t.color,n.color),latitude:a("linear",t.latitude,{nice:false}),longitude:a("linear",t.longitude,{nice:false}),guide:n},plugins:t.plugins||[]}};t.ChartMap=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartInterval=undefined;var r=n(74);var i=function e(t){var n=t.flip?t.y:t.x;var r=n.indexOf(t.color)>=0;var i=t.guide[t.guide.length-1];if(r&&!i.hasOwnProperty("enableColorToBarPosition")){i.enableColorToBarPosition=false}return t};var a=function e(t){var n=r.normalizeConfig(t);n=i(n);return r.transformConfig("ELEMENT.INTERVAL",n)};t.ChartInterval=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.transformConfig=t.normalizeConfig=undefined;var r;var i=n(3);function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var o=function e(t){return!t?null:t};var s=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return!Array.isArray(t)?[t]:t.length===0?[n]:t};var u=function e(t,n){return{type:t,x:n.x,y:n.y,identity:n.identity,size:n.size,color:n.color,split:n.split,label:n.label,guide:{color:n.colorGuide,size:n.sizeGuide},flip:n.flip,stack:n.stack}};var l={SUCCESS:"SUCCESS",WARNING:"WARNING",FAIL:"FAIL"};var c=(r={},a(r,l.SUCCESS,function(e){return e}),a(r,l.FAIL,function(e,t){throw new Error((t.messages||[]).join("\n")||"This configuration is not supported, See http://api.taucharts.com/basic/facet.html#easy-approach-for-creating-facet-chart")}),a(r,l.WARNING,function(e,t,n){var r=t.axis;var i=t.indexMeasureAxis[0];var a=e[i];var o=e.filter(function(e){return e!==a});o.push(a);var s=n[i][r]||{};var u=n[n.length-1][r]||{};n[n.length-1][r]=s;n[i][r]=u;return o}),r);function f(e,t,n){return t.reduce(function(t,r,i){var a=e[r];if(!a){t.status=l.FAIL;if(r){t.messages.push('"'+r+'" dimension is undefined for "'+n+'" axis')}else{t.messages.push('"'+n+'" axis should be specified')}}else if(t.status!=l.FAIL){if(a.type==="measure"){t.countMeasureAxis++;t.indexMeasureAxis.push(i)}if(a.type!=="measure"&&t.countMeasureAxis===1){t.status=l.WARNING}else if(t.countMeasureAxis>1){t.status=l.FAIL;t.messages.push('There is more than one measure dimension for "'+n+'" axis')}}return t},{status:l.SUCCESS,countMeasureAxis:0,indexMeasureAxis:[],messages:[],axis:n})}function d(e){var t=s(e.x);var n=s(e.y);var r=Math.max(t.length,n.length);var i=s(e.guide||{},{});var a=r-i.length;for(var o=0;o<a;o++){i.push({})}i=i.slice(0,r);var u=f(e.dimensions,t,"x");var l=f(e.dimensions,n,"y");t=c[u.status](t,u,i);n=c[l.status](n,l,i);return Object.assign({},e,{x:t,y:n,guide:i})}function h(e,t){var n=t.x;var r=t.y;var a=t.guide;var s=Math.max(n.length,r.length);var l={type:"COORDS.RECT",unit:[]};var c=[].concat(n);var f=[].concat(r);var d=[].concat(a);for(var h=s;h>0;h--){var p=c.pop();var v=f.pop();var m=d.pop()||{};if(h===s){l.x=p;l.y=v;l.unit.push(u(e,{x:o(p),y:o(v),identity:t.identity,split:t.split,color:t.color,label:t.label,size:t.size,flip:t.flip,stack:t.stack,colorGuide:m.color,sizeGuide:m.size}));l.guide=i.utils.defaults(m,{x:{label:p},y:{label:v}})}else{l={type:"COORDS.RECT",x:o(p),y:o(v),unit:[l],guide:i.utils.defaults(m,{x:{label:p},y:{label:v}})}}}t.spec={dimensions:t.dimensions,unit:l};return t}t.normalizeConfig=d;t.transformConfig=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartScatterplot=undefined;var r=n(74);var i=function e(t){var n=r.normalizeConfig(t);return r.transformConfig("ELEMENT.POINT",n)};t.ChartScatterplot=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartLine=undefined;var r=n(28);var i=n(74);var a=function e(t){var n=i.normalizeConfig(t);var a=n.data;var o=n.settings.log;var s={none:function e(){return null},horizontal:function e(t){return t.x[t.x.length-1]},vertical:function e(t){return t.y[t.y.length-1]},auto:function e(t){var n=t.x;var i=t.y;var s=n[n.length-1];var u=n.slice(0,n.length-1);var l=i[i.length-1];var c=i.slice(0,i.length-1);var f=t.color;var d=u.concat(c).concat([f]).filter(function(e){return e!==null});var h=-1;var p=[[[s].concat(d),l],[[l].concat(d),s]];var v=p.some(function(e,t){var n=e[0];var i=e[1];var s=r.DataProcessor.isYFunctionOfX(a,n,[i]);if(s.result){h=t}else{o(["Attempt to find a functional relation between",e[0]+" and "+e[1]+" is failed.","There are several "+s.error.keyY+" values (e.g. "+s.error.errY.join(",")+")","for ("+s.error.keyX+" = "+s.error.valX+")."].join(" "))}return s.result});var m;if(v){m=p[h][0][0]}else{o(["All attempts are failed.","Will orient line horizontally by default.","NOTE: the [scatterplot] chart is more convenient for that data."].join(" "));m=s}return m}};var u=(n.lineOrientation||"").toLowerCase();var l=s.hasOwnProperty(u)?s[u]:s.auto;var c=l(n);if(c!==null){n.data=r.DataProcessor.sortByDim(a,c,n.dimensions[c])}return i.transformConfig("ELEMENT.LINE",n)};t.ChartLine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChartArea=undefined;var r=n(28);var i=n(74);var a=function e(t){var n=i.normalizeConfig(t);var a=n.data;var o=n.settings.log;var s={horizontal:function e(t){return{prop:t.x[t.x.length-1],flip:false}},vertical:function e(t){return{prop:t.y[t.y.length-1],flip:true}},auto:function e(t){var n=t.x;var i=t.y;var s=n[n.length-1];var u=n.slice(0,n.length-1);var l=i[i.length-1];var c=i.slice(0,i.length-1);var f=t.color;var d=u.concat(c).concat([f]).filter(function(e){return e!==null});var h=-1;var p=[[[s].concat(d),l],[[l].concat(d),s]];var v=p.some(function(e,t){var n=e[0];var i=e[1];var s=r.DataProcessor.isYFunctionOfX(a,n,[i]);if(s.result){h=t}else{o(["Attempt to find a functional relation between",e[0]+" and "+e[1]+" is failed.","There are several "+s.error.keyY+" values (e.g. "+s.error.errY.join(",")+")","for ("+s.error.keyX+" = "+s.error.valX+")."].join(" "))}return s.result});var m;var g=null;if(v){m=p[h][0][0];g=h!==0}else{o("All attempts are failed. Gonna transform AREA to general PATH.");m=null}return{prop:m,flip:g}}};var u=typeof n.flip!=="boolean"?"auto":n.flip?"vertical":"horizontal";var l=s[u];var c=l(n);var f="ELEMENT.AREA";if(c.prop!==null){n.data=r.DataProcessor.sortByDim(a,c.prop,n.dimensions[c.prop]);n.flip=c.flip}return i.transformConfig(f,n)};t.ChartArea=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function e(t){var n=Object.assign({columns:{}},t.guide||{});var r={};var i=function e(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var a;var o=n;var s;if(!n){a=t+":default";s="?"}else{a=t+"_"+n;s="/"}if(!r.hasOwnProperty(a)){r[a]=Object.assign({type:t,source:s,dim:o},i)}return a};var a=t.columns.map(function(e){return i(t.dimensions[e].scale,e,n.columns[e])});return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){e[n]={type:t.dimensions[n].type};return e},{}),data:t.data}},scales:r,unit:{type:"COORDS.PARALLEL",expression:{operator:"none",source:"/"},columns:a,guide:n,units:[{type:"PARALLEL/ELEMENT.LINE",color:i("color",t.color,n.color),columns:a,expression:{operator:"none",source:"/"}}]},plugins:t.plugins||[]}};t.ChartParallel=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PluginsSDK=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(32);var a=n(80);var o=n(81);function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u={};var l=function(){function e(){s(this,e)}r(e,null,[{key:"unit",value:function e(t){return new a.Unit(t)}},{key:"spec",value:function e(t){return new o.Spec(t)}},{key:"cloneObject",value:function e(t){return JSON.parse(JSON.stringify(t))}},{key:"depthFirstSearch",value:function t(n,r){if(r(n)){return n}var i=n.hasOwnProperty("frames")?n.frames:[{units:n.units}];for(var a=0;a<i.length;a++){var o=i[a].units||[];for(var s=0;s<o.length;s++){var u=e.depthFirstSearch(o[s],r);if(u){return u}}}}},{key:"traverseSpec",value:function e(t,n){var r=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};r(t.unit,n,null)}},{key:"extractFieldsFormatInfo",value:function t(n){var r=n.scales;var a=function e(t){return!r[t].dim};var o=function e(t,n,i){var a=n.guide||{};var o=r[n[i]];var s=a[i]||{};t[o.dim]=t[o.dim]||{label:[],format:[],nullAlias:[],tickLabel:[]};var u=s.label;var l=s.label||{};t[o.dim].label.push(typeof u==="string"?u:l._original_text||l.text);var c=s.tickFormat||s.tickPeriod;t[o.dim].format.push(c);t[o.dim].nullAlias.push(s.tickFormatNullAlias);t[o.dim].tickLabel.push(s.tickLabel)};var s=[];e.traverseSpec(n,function(e){s.push(e)});var u=s.reduce(function(e,t){if(t.type==="COORDS.RECT"&&t.hasOwnProperty("x")&&!a(t.x)){o(e,t,"x")}if(t.type==="COORDS.RECT"&&t.hasOwnProperty("y")&&!a(t.y)){o(e,t,"y")}if(t.hasOwnProperty("color")&&!a(t.color)){o(e,t,"color")}if(t.hasOwnProperty("size")&&!a(t.size)){o(e,t,"size")}if(t.hasOwnProperty("label")&&!a(t.label)){o(e,t,"label")}return e},{});var l=function e(t,n){return t.filter(function(e){return e})[0]||n};return Object.keys(u).reduce(function(e,t){e[t].label=l(e[t].label,t);e[t].format=l(e[t].format,null);e[t].nullAlias=l(e[t].nullAlias,"No "+e[t].label);e[t].tickLabel=l(e[t].tickLabel,null);var r=e[t].format==="x-time-auto"?n.settings.utcTime?"day-utc":"day":e[t].format;var a=e[t].nullAlias;var o=r?i.FormatterRegistry.get(r,a):function(e){return e===null?a:e};e[t].format=o;if(e[t].tickLabel){var s=t.replace("."+e[t].tickLabel,"");e[s]={label:e[t].label,nullAlias:e[t].nullAlias,tickLabel:e[t].tickLabel,format:function t(n){return o(n&&n[e[s].tickLabel])},isComplexField:true};e[t].parentField=s}return e},u)}},{key:"tokens",value:function e(){return{reg:function e(t,n){u[t]=n;return this},get:function e(t){return u[t]||t}}}},{key:"getParentUnit",value:function e(t,n){var r=null;var i=function e(t,i){if(t.uid===n.uid){r=i;return true}if(t.frames){t.frames.some(function(n){return(n.units||[]).some(function(n){return e(n,t)})})}else{(t.units||[]).some(function(n){return e(n,t)})}return false};i(t.unit,null);return r}}]);return e}();t.PluginsSDK=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t){r(this,e);this.unitRef=t}n(e,[{key:"value",value:function e(){return this.unitRef}},{key:"clone",value:function e(){return JSON.parse(JSON.stringify(this.unitRef))}},{key:"traverse",value:function e(t){var n=function e(t,n,r){n(t,r);(t.units||[]).map(function(r){return e(r,n,t)})};n(this.unitRef,t,null);return this}},{key:"reduce",value:function e(t,n){var r=n;this.traverse(function(e,n){return r=t(r,e,n)});return r}},{key:"addFrame",value:function e(t){this.unitRef.frames=this.unitRef.frames||[];t.key.__layerid__=["L",(new Date).getTime(),this.unitRef.frames.length].join("");t.source=t.hasOwnProperty("source")?t.source:this.unitRef.expression.source;t.pipe=t.pipe||[];this.unitRef.frames.push(t);return this}},{key:"addTransformation",value:function e(t,n){this.unitRef.transformation=this.unitRef.transformation||[];this.unitRef.transformation.push({type:t,args:n});return this}},{key:"isCoordinates",value:function e(){return(this.unitRef.type||"").toUpperCase().indexOf("COORDS.")===0}},{key:"isElementOf",value:function e(t){if(this.isCoordinates()){return false}var n=this.unitRef.type||"";var r=n.split("/");if(r.length===1){r.unshift("RECT")}return r[0].toUpperCase()===t.toUpperCase()}}]);return e}();t.Unit=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Spec=undefined;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r){r.writable=true}Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n){e(t.prototype,n)}if(r){e(t,r)}return t}}();var i=n(80);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(t){a(this,e);this.specRef=t}r(e,[{key:"value",value:function e(){return this.specRef}},{key:"unit",value:function e(t){if(t){this.specRef.unit=t}return new i.Unit(this.specRef.unit)}},{key:"addTransformation",value:function e(t,n){this.specRef.transformations=this.specRef.transformations||{};this.specRef.transformations[t]=n;return this}},{key:"getSettings",value:function e(t){return this.specRef.settings[t]}},{key:"setSettings",value:function e(t,n){this.specRef.settings=this.specRef.settings||{};this.specRef.settings[t]=n;return this}},{key:"getScale",value:function e(t){return this.specRef.scales[t]}},{key:"addScale",value:function e(t,n){this.specRef.scales[t]=n;return this}},{key:"regSource",value:function e(t,n){this.specRef.sources[t]=n;return this}},{key:"getSourceData",value:function e(t){var n=this.specRef.sources[t]||{data:[]};return n.data}},{key:"getSourceDim",value:function e(t,n){var r=this.specRef.sources[t]||{dims:{}};return r.dims[n]||{}}}]);return e}();t.Spec=o},function(e,t){"use strict";if(!window.requestAnimationFrame){(function(){var e=0;window.requestAnimationFrame=function(t){var n=Date.now();var r=Math.max(0,16-n+e);e=n+r;return setTimeout(function(){t.call(null,n+r)},r)};window.cancelAnimationFrame=function(e){clearTimeout(e)}})()}if(!Number.isFinite){Object.defineProperty(Number,"isFinite",{value:function e(t){return typeof t==="number"&&isFinite(t)},configurable:true,enumerable:false,writable:true})}if(!Number.isNaN){Object.defineProperty(Number,"isNaN",{value:function e(t){return typeof t==="number"&&isNaN(t)},configurable:true,enumerable:false,writable:true})}if(!Number.isInteger){Object.defineProperty(Number,"isInteger",{value:function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t},configurable:true,enumerable:false,writable:true})}if(!Number.MAX_SAFE_INTEGER){Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:9007199254740991,configurable:false,enumerable:false,writable:false})}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function e(t){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var r=n.length>>>0;var i=arguments[1];var e;for(var a=0;a<r;a++){e=n[a];if(t.call(i,e,a,n)){return e}}return undefined},configurable:true,enumerable:false,writable:true})}if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function e(t){if(this==null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var r=n.length>>>0;var i=arguments[1];var e;for(var a=0;a<r;a++){e=n[a];if(t.call(i,e,a,n)){return a}}return-1},configurable:true,enumerable:false,writable:true})}if(!Array.from){Object.defineProperty(Array,"from",{value:function(){var e=Object.prototype.toString;var t=function t(n){return typeof n==="function"||e.call(n)==="[object Function]"};var n=function e(t){var n=Number(t);if(isNaN(n)){return 0}if(n===0||!isFinite(n)){return n}return(n>0?1:-1)*Math.floor(Math.abs(n))};var r=Math.pow(2,53)-1;var i=function e(t){var i=n(t);return Math.min(Math.max(i,0),r)};return function e(n){var r=this;var a=Object(n);if(n==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var o=arguments.length>1?arguments[1]:undefined;var s;if(typeof o!=="undefined"){if(!t(o)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){s=arguments[2]}}var u=i(a.length);var l=t(r)?Object(new r(u)):new Array(u);var c=0;var f;while(c<u){f=a[c];if(o){l[c]=typeof s==="undefined"?o(f,c):o.call(s,f,c)}else{l[c]=f}c+=1}l.length=u;return l}}(),configurable:true,enumerable:false,writable:true});var n=Map.prototype.set;Object.defineProperty(Map.prototype,"set",{value:function e(){n.apply(this,arguments);return this},configurable:true,enumerable:false,writable:true});Object.defineProperty(Map.prototype,"values",{value:function e(){var t={};var n=0;this.forEach(function(e){return t[String(n++)]=e});t.length=n;return t},configurable:true,enumerable:false,writable:true});Object.defineProperty(Map.prototype,"entries",{value:function e(){var t={};var n=0;this.forEach(function(e,r){return t[String(n++)]=[r,e]});t.length=n;return t},configurable:true,enumerable:false,writable:true})}if(!Object.assign){Object.defineProperty(Object,"assign",{value:function e(t){if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var n=Object(t);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i!==undefined&&i!==null){for(var a in i){if(i.hasOwnProperty(a)){n[a]=i[a]}}}}return n},configurable:true,enumerable:false,writable:true})}if(!Element.prototype.matches){Object.defineProperty(Element.prototype,"matches",{value:Element.prototype.msMatchesSelector,configurable:true,enumerable:true,writable:true})}}])})});var ef=t(Qc);var tf=n(function(e){(function(t){if(typeof undefined==="function"&&undefined.amd){undefined(["taucharts"],function(e){return t(e)})}else if("object"==="object"&&e.exports){var n=Qc;e.exports=t(n)}else{t(this.tauCharts)}})(function(e){var t=e.api.d3;var n=e.api.utils;var r=e.api.pluginsSDK;var i="graphical-report__tooltip-target";var a=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};function o(o){var s=n.defaults(o||{},{align:"bottom-right",escapeHtml:true,fields:null,formatters:{},dockToData:false,aggregationGroupFields:[],onRevealAggregation:function(e,t){console.log("Setup [onRevealAggregation] callback and filter original data by the following criteria: ",JSON.stringify(e,null,2))},spacing:24});var u={init:function(e){this._chart=e;this._metaInfo={};this._skipInfo={};Object.assign(this,n.omit(s,"fields","getFields"));this._tooltip=this._chart.addBalloon({spacing:s.spacing,auto:true,effectClass:"fade"});var t=s.aggregationGroupFields.length>0?this.templateRevealAggregation:"";var r=n.template(this.template);var i=this.getTooltipNode();this._tooltip.content(r({revealTemplate:t,excludeTemplate:this.templateExclude}));i.addEventListener("click",function(e){var t=e.target;while(t!==e.currentTarget&&t!==null){if(t.classList.contains("i-role-exclude")){this._exclude();this.setState({highlight:null,isStuck:false})}if(t.classList.contains("i-role-reveal")){this._reveal();this.setState({highlight:null,isStuck:false})}t=t.parentNode}}.bind(this),false);this._scrollHandler=function(){this.setState({highlight:null,isStuck:false})}.bind(this);window.addEventListener("scroll",this._scrollHandler,true);this._outerClickHandler=function(e){var t=this.getTooltipNode().getBoundingClientRect();if(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom){this.setState({highlight:null,isStuck:false})}}.bind(this);this.setState(this.state);this.afterInit(i)},getTooltipNode:function(){return this._tooltip.getElement()},state:{highlight:null,isStuck:false},setState:function(e){var t=this.state;var n=this.state=Object.assign({},t,e);t.highlight=t.highlight||{data:null,cursor:null,unit:null};n.highlight=n.highlight||{data:null,cursor:null,unit:null};if(n.isStuck&&t.highlight.data){n.highlight=t.highlight}if(n.highlight.data!==t.highlight.data){if(n.highlight.data){this.hideTooltip();this.showTooltip(n.highlight.data,n.highlight.cursor);this._setTargetSvgClass(true);requestAnimationFrame(function(){this._setTargetSvgClass(true)}.bind(this))}else if(!n.isStuck&&t.highlight.data&&!n.highlight.data){this._removeFocus();this.hideTooltip();this._setTargetSvgClass(false)}}if(n.highlight.data&&(!t.highlight.cursor||n.highlight.cursor.x!==t.highlight.cursor.x||n.highlight.cursor.y!==t.highlight.cursor.y)){this._tooltip.position(n.highlight.cursor.x,n.highlight.cursor.y)}var r=this.getTooltipNode();if(n.isStuck!==t.isStuck){if(n.isStuck){window.addEventListener("click",this._outerClickHandler,true);r.classList.add("stuck");this._setTargetEventsEnabled(false);this._accentFocus(n.highlight.data);this._tooltip.updateSize()}else{window.removeEventListener("click",this._outerClickHandler,true);r.classList.remove("stuck");requestAnimationFrame(function(){this._setTargetEventsEnabled(true)}.bind(this))}}},showTooltip:function(e,t){var n=this.getTooltipNode().querySelectorAll(".i-role-content")[0];if(n){var r=s.fields||typeof s.getFields==="function"&&s.getFields(this._chart)||Object.keys(e);n.innerHTML=this.render(e,r)}this._tooltip.position(t.x,t.y).place(s.align).show().updateSize()},hideTooltip:function(e){window.removeEventListener("click",this._outerClickHandler,true);this._tooltip.hide()},destroy:function(){window.removeEventListener("scroll",this._scrollHandler,true);this._setTargetSvgClass(false);this.setState({highlight:null,isStuck:false});this._tooltip.destroy()},_subscribeToHover:function(){var e=["ELEMENT.LINE","ELEMENT.AREA","ELEMENT.PATH","ELEMENT.INTERVAL","ELEMENT.INTERVAL.STACKED","ELEMENT.POINT"];this._chart.select(function(t){return e.indexOf(t.config.type)>=0}).forEach(function(e){e.on("data-hover",function(e,t){var n=document.body.getBoundingClientRect();this.setState({highlight:t.data?{data:t.data,cursor:{x:t.event.clientX-n.left,y:t.event.clientY-n.top},unit:e}:null})}.bind(this));e.on("data-click",function(e,t){var n=document.body.getBoundingClientRect();this.setState(t.data?{highlight:{data:t.data,cursor:{x:t.event.clientX-n.left,y:t.event.clientY-n.top},unit:e},isStuck:true}:{highlight:null,isStuck:null})}.bind(this))},this)},afterInit:function(e){},render:function(e,t){var n=this;return t.filter(function(e){var t=e.split(".");var r=t.length===2&&n._skipInfo[t[0]];return!r}).map(function(t){var r=t;var i=e[t];return n.renderItem(n._getLabel(r),n._getFormat(r)(i),r,i)}).join("")},renderItem:function(e,t,n,r){return this.itemTemplate({label:s.escapeHtml?a(e):e,value:s.escapeHtml?a(t):t})},_getFormat:function(e){var t=this._metaInfo[e]||{format:function(e){return String(e)}};return t.format},_getLabel:function(e){var t=this._metaInfo[e]||{label:e};return t.label},_accentFocus:function(e){var t=function(t){return t===e};this._chart.select(function(){return true}).forEach(function(e){e.fire("highlight",t)})},_removeFocus:function(){var e=function(){return null};this._chart.select(function(){return true}).forEach(function(t){t.fire("highlight",e);t.fire("highlight-data-points",e)})},_reveal:function(){var e=this.state.highlight.data;var t=s.aggregationGroupFields||[];var n=t.reduce(function(t,n){if(e.hasOwnProperty(n)){t[n]=e[n]}return t},{});s.onRevealAggregation(n,e)},_exclude:function(){this._chart.addFilter({tag:"exclude",predicate:function(e){return function(t){return JSON.stringify(t)!==JSON.stringify(e)}}(this.state.highlight.data)});this._chart.refresh()},onRender:function(){var e=this._getFormatters();this._metaInfo=e.meta;this._skipInfo=e.skip;this._subscribeToHover();this.setState({highlight:null,isStuck:false})},_setTargetSvgClass:function(e){t.select(this._chart.getSVG()).classed(i,e)},_setTargetEventsEnabled:function(e){if(e){this._chart.enablePointerEvents()}else{this._chart.disablePointerEvents()}},templateRevealAggregation:['<div class="i-role-reveal graphical-report__tooltip__vertical">','   <div class="graphical-report__tooltip__vertical__wrap">',"       Reveal","   </div>","</div>"].join(""),templateExclude:['<div class="i-role-exclude graphical-report__tooltip__exclude">','   <div class="graphical-report__tooltip__exclude__wrap">','       <span class="tau-icon-close-gray"></span>',"       Exclude","   </div>","</div>"].join(""),template:['<div class="i-role-content graphical-report__tooltip__content"></div>',"<%= revealTemplate %>","<%= excludeTemplate %>"].join(""),itemTemplate:n.template(['<div class="graphical-report__tooltip__list__item">','<div class="graphical-report__tooltip__list__elem"><%=label%></div>','<div class="graphical-report__tooltip__list__elem"><%=value%></div>',"</div>"].join("")),_getFormatters:function(){var t=r.extractFieldsFormatInfo(this._chart.getSpec());var i={};Object.keys(t).forEach(function(e){if(t[e].isComplexField){i[e]=true}if(t[e].parentField){delete t[e]}});var a=function(e){var t={};if(typeof e==="function"||typeof e==="string"){t={format:e}}else if(n.isObject(e)){t=n.pick(e,"label","format","nullAlias")}return t};Object.keys(s.formatters).forEach(function(r){var i=a(s.formatters[r]);t[r]=Object.assign({label:r,nullAlias:"No "+r},t[r]||{},n.pick(i,"label","nullAlias"));if(i.hasOwnProperty("format")){t[r].format=typeof i.format==="function"?i.format:e.api.tickFormat.get(i.format,t[r].nullAlias)}else{t[r].format=t[r].hasOwnProperty("format")?t[r].format:e.api.tickFormat.get(null,t[r].nullAlias)}});return{meta:t,skip:i}}};return u}e.api.plugins.add("tooltip",o);return o})});var nf=function(){const e=this.riotx.get();const t=()=>{const e={};switch(this.opts.def.style){case"graph-scatterplot":e.type="scatterplot";break;case"graph-line":e.type="line";e.guide={interpolate:"smooth"};break;case"graph-bar":e.type="bar";break;case"graph-horizontal-bar":e.type="horizontalBar";break;case"graph-stacked-bar":e.type="stacked-bar";break;case"graph-horizontal-stacked-bar":e.type="horizontal-stacked-bar";break;case"graph-stacked-area":e.type="stacked-area";break;default:e.type="scatterplot";break}return to({plugins:[ef.api.plugins.get("tooltip")()]},e)};const n=()=>{const e=this.refs.canvas;if(!e){return}const n=this.data;new ef.Chart(to(t(),n)).renderTo(e)};const r=()=>{return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def)])).then(()=>{this.isLoading=false;this.update()}).then(()=>{n()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const i=e=>{if(!xo(e)){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}return null};this.data=null;this.isLoading=true;this.error=null;this.autoRefreshSec=null;let a=null;const o=()=>{if(!this.autoRefreshSec){return}if(a){return}a=window.setInterval(()=>{r()},this.autoRefreshSec*1e3)};const s=()=>{window.clearInterval(a);a=null};this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.error=i(this.data);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);o();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const t=e.getter("util.components_refresh");if(this.refreshId!==t){this.refreshId=t;r()}});this.on("mount",()=>{r()}).on("unmount",()=>{s();e.action("components.remove",this.opts.id)})};i.tag2("viron-components-page-chart",'<div class="ComponentsPage_Card_Chart__head"> <div class="ComponentsPage_Card_Chart__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Chart__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Chart__progress"> <viron-icon-reload></viron-icon-reload> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Chart__error">{error}</div> </virtual> <virtual if="{!error}"> <div class="ComponentsPage_Card_Chart__canvas" ref="canvas" id="{_riot_id}"></div> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Chart__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Chart"',function(e){this.external(nf)});function rf(e){if(typeof e==="number"){return e}if(!e){return 0}if(typeof e==="string"){return parseFloat(e)}if(lu(e)){return NaN}return Number(e)}var af=rf;function of(e,t,n,r){e=af(e);t=t==null?2:t;n=n==null?".":n;r=r==null?",":r;var i=e.toFixed(t),a=new RegExp("^(-?\\d{1,3})((?:\\d{3})+)(\\.(\\d{"+t+"}))?$").exec(i);if(a){return a[1]+a[2].replace(/\d{3}/g,r+"$&")+(a[4]?n+a[4]:"")}else{return i.replace(".",n)}}var sf=of;var uf=function(){const e=this.riotx.get();const t=()=>{return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def)])).then(()=>{this.isLoading=false;this.update()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const n=e=>{if(!e){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}if(!ul(e.value)){return"valueÂÄ§„ÅåÊï∞ÂÄ§„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}return null};this.data=null;this.isLoading=true;this.error=null;this.autoRefreshSec=null;let r=null;const i=()=>{if(!this.autoRefreshSec){return}if(r){return}r=window.setInterval(()=>{t()},this.autoRefreshSec*1e3)};const a=()=>{window.clearInterval(r);r=null};this.getValue=(()=>{return sf(this.data.value,0)});this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.error=n(this.data);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);i();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const n=e.getter("util.components_refresh");if(this.refreshId!==n){this.refreshId=n;t()}});this.on("mount",()=>{t()}).on("unmount",()=>{a();e.action("components.remove",this.opts.id)})};i.tag2("viron-components-page-number",'<div class="ComponentsPage_Card_Number__head"> <div class="ComponentsPage_Card_Number__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Number__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Number__progress"> <viron-icon-reload></viron-icon-reload> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Number__error">{error}</div> </virtual> <virtual if="{!error}"> <div class="ComponentsPage_Card_Number__valueWrapper"> <div class="ComponentsPage_Card_Number__value">{getValue()}</div> <div class="ComponentsPage_Card_Number__unit" if="{!!data.unit}">{data.unit}</div> </div> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Number__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Number"',function(e){this.external(uf)});i.tag2("viron-icon-edit",'<svg viewbox="-3404.002 14060.125 15.979 15.873"> <path d="M1816-16708.127a.946.946,0,0,1-1-1v-12a.946.946,0,0,1,1-1h9.5l-2.6,2.6h-5.3v8.8h8.8v-5.2l2.6-2.6v9.4a.942.942,0,0,1-1,1Zm5.3-5.9c-.1,0-.1,0-.1-.1-.2,0-.2-.1-.2-.1v-1.9c0-.1.1-.2.3-.2a.1.1,0,0,1,.1.1l1.8,1.795c.1.1,0,.2,0,.3l-.1.1Zm2.5-1-1.8-1.9a.189.189,0,0,1,0-.3l4.7-4.7a.2.2,0,0,1,.3,0l1.8,1.8a.189.189,0,0,1,0,.3l-4.7,4.8Zm5.7-5.7-1.8-1.8a.194.194,0,0,1,0-.3l1.1-1.1a.19.19,0,0,1,.3,0l1.8,1.8a.189.189,0,0,1,0,.3l-1.1,1.1a.219.219,0,0,1-.151.072A.219.219,0,0,1,1829.5-16720.723Z" transform="translate(-5219 30784.125)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconEdit {opts.class}"',function(e){});i.tag2("viron-icon-file",'<svg viewbox="3093.704 22727.934 46.089 60.576"> <path d="M78.81,0H54.481a6.457,6.457,0,0,0-6.447,6.447V54.128a6.454,6.454,0,0,0,6.447,6.447h33.2a6.454,6.454,0,0,0,6.445-6.447V15.259Zm8.867,56.627h-33.2a2.5,2.5,0,0,1-2.5-2.5V51.239s0-20.952,0-44.792a2.5,2.5,0,0,1,2.5-2.495l22.852-.024v8.447A4.473,4.473,0,0,0,81.8,16.847l8.275-.024.093,37.305A2.5,2.5,0,0,1,87.678,56.627Z" transform="translate(3045.671 22727.934)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFile {opts.class}"',function(e){});i.tag2("viron-icon-filter",'<svg viewbox="-1832 11377 16.002 16"> <g transform="translate(-2104 11230)"> <rect width="12" height="1.5" rx="0.4" transform="translate(276 154.25)"></rect> <rect width="6" height="1.5" rx="0.4" transform="translate(282 148.75)"></rect> <rect width="12" height="1.5" rx="0.4" transform="translate(284 161.25) rotate(180)"></rect> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4426 19745.5)"></path> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4415 19751)"></path> <path d="M4700.5-19588a2.5,2.5,0,0,1-2.5-2.5,2.5,2.5,0,0,1,2.5-2.5,2.506,2.506,0,0,1,2.5,2.5A2.5,2.5,0,0,1,4700.5-19588Zm0-3a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5A.5.5,0,0,0,4700.5-19591Z" transform="translate(-4420.501 19740)"></path> <rect width="7" height="1.5" rx="0.4" transform="translate(272 148.75)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFilter {opts.class}"',function(e){});i.tag2("viron-icon-plus",'<svg viewbox="-2612 10790 16 16"> <g transform="translate(-3874 10766)"> <rect width="16" height="3" rx="0.2" transform="translate(1262 30.5)"></rect> <rect width="16" height="3" rx="0.2" transform="translate(1271.5 24) rotate(90)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlus {opts.class}"',function(e){});i.tag2("viron-icon-plus-thin",'<svg viewbox="-7753.249 2039.999 15.999 16.002"> <path d="M11622.45-705a.2.2,0,0,1-.2-.2v-7.049h-7.05a.2.2,0,0,1-.2-.2v-1.1a.2.2,0,0,1,.2-.2h7.05V-720.8a.2.2,0,0,1,.2-.2h1.1a.2.2,0,0,1,.2.2v7.049h7.05a.2.2,0,0,1,.2.2v1.1a.2.2,0,0,1-.2.2h-7.05v7.049a.2.2,0,0,1-.2.2Z" transform="translate(-19368.25 2761)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlusThin {opts.class}"',function(e){});i.tag2("viron-icon-remove",'<svg viewbox="-7714 1990 16 16"> <g transform="translate(-8037 1850)"> <rect width="16" height="2" rx="0.2" transform="translate(323 142)"></rect> <rect width="4" height="2.5" rx="0.2" transform="translate(329 140)"></rect> <path d="M2945.8-10677h-9.6a.2.2,0,0,1-.2-.2l-1-10.6a.2.2,0,0,1,.2-.2h11.6a.2.2,0,0,1,.2.2l-1,10.6A.2.2,0,0,1,2945.8-10677Zm-4.852-9.661a.2.2,0,0,0-.2.2v7.824a.2.2,0,0,0,.2.2h.351a.2.2,0,0,0,.2-.2v-7.824a.2.2,0,0,0-.2-.2Zm2.5,0a.2.2,0,0,0-.2.2v7.1a.2.2,0,0,0,.2.2h.351a.2.2,0,0,0,.2-.2v-7.1a.2.2,0,0,0-.2-.2Zm-5.25,0a.189.189,0,0,0-.2.182v7.136a.191.191,0,0,0,.2.182h.352a.191.191,0,0,0,.2-.182v-7.136a.189.189,0,0,0-.2-.182Z" transform="translate(-2610 10833)"></path> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconRemove {opts.class}"',function(e){});i.tag2("viron-icon-setting",'<svg viewbox="-3464 14060 16 16.001"> <path d="M15.953,7.112a.521.521,0,0,0-.514-.394,1.767,1.767,0,0,1-1.209-3.075.444.444,0,0,0,.049-.6A7.916,7.916,0,0,0,13.01,1.76a.445.445,0,0,0-.608.049,1.844,1.844,0,0,1-2,.448A1.777,1.777,0,0,1,9.327.521.444.444,0,0,0,8.934.053a7.987,7.987,0,0,0-1.8,0,.445.445,0,0,0-.4.458,1.78,1.78,0,0,1-1.1,1.707,1.849,1.849,0,0,1-1.98-.451.446.446,0,0,0-.6-.051,7.946,7.946,0,0,0-1.294,1.28.445.445,0,0,0,.048.608,1.773,1.773,0,0,1,.447,2A1.85,1.85,0,0,1,.518,6.677a.435.435,0,0,0-.462.393,8.014,8.014,0,0,0,0,1.819.529.529,0,0,0,.525.393,1.755,1.755,0,0,1,1.646,1.1,1.779,1.779,0,0,1-.447,1.978.445.445,0,0,0-.049.6,7.945,7.945,0,0,0,1.266,1.28.445.445,0,0,0,.609-.048A1.841,1.841,0,0,1,5.6,13.743,1.774,1.774,0,0,1,6.679,15.48a.444.444,0,0,0,.393.467,7.962,7.962,0,0,0,1.8,0,.445.445,0,0,0,.4-.458,1.778,1.778,0,0,1,1.095-1.706,1.846,1.846,0,0,1,1.981.451.447.447,0,0,0,.6.05,7.965,7.965,0,0,0,1.294-1.28.444.444,0,0,0-.048-.608,1.773,1.773,0,0,1-.448-2,1.791,1.791,0,0,1,1.637-1.085l.1,0a.445.445,0,0,0,.468-.392A8.007,8.007,0,0,0,15.953,7.112ZM8.015,10.686a2.669,2.669,0,1,1,2.668-2.669A2.671,2.671,0,0,1,8.015,10.686Z" transform="translate(-3464.003 14060)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSetting {opts.class}"',function(e){});i.tag2("viron-icon-arrow-left",'<svg viewbox="-3581 14060.002 10.04 16.002"> <path d="M1793.942-16723.971l-7.4-7.4-.018-.023-.385-.385a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.84a.2.2,0,0,1,0,.281l-5.82,5.82,5.82,5.816a.2.2,0,0,1,0,.287l-1.84,1.84a.2.2,0,0,1-.141.057A.2.2,0,0,1,1793.942-16723.971Z" transform="translate(-5367.083 30799.918)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowLeft {opts.class}"',function(e){});i.tag2("viron-icon-arrow-right",'<svg viewbox="-3551.038 14059.998 10.039 16.002"> <path d="M1763.979-16723.969l-7.394-7.4a.291.291,0,0,1-.022-.025l-.381-.383a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.286,0l1.836,1.84a.191.191,0,0,1,0,.277l-5.819,5.822,5.819,5.818a.2.2,0,0,1,0,.287l-1.836,1.84a.21.21,0,0,1-.143.057A.21.21,0,0,1,1763.979-16723.969Z" transform="translate(-1784.878 -2663.914) rotate(180)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowRight {opts.class}"',function(e){});i.tag2("viron-icon-dots",'<svg viewbox="-3614 14066 16 4"> <g transform="translate(-3894 14025)"> <circle cx="2" cy="2" r="2" transform="translate(280 41)"></circle> <circle cx="2" cy="2" r="2" transform="translate(286 41)"></circle> <circle cx="2" cy="2" r="2" transform="translate(292 41)"></circle> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconDots {opts.class}"',function(e){});function lf(e,t,n){var r=-1;while(++r<e){if(t.call(n,r)===false){break}}}var cf=lf;var ff=function(){this.getIsSimpleMode=(()=>{return this.opts.max<=this.opts.size});this.getBasePages=(()=>{const e=this.opts.size;const t=this.opts.current;const n=this.opts.max;if(this.getIsSimpleMode()){const e=[];cf(n,n=>{n=n+1;e.push({num:n,isSelected:n===t})});return e}let r=t-Math.floor(e/2);let i=t+Math.floor(e/2)-(e%2?0:1);if(r<1){i=i+Math.abs(r+1);r=1}if(i>n){r=r-(i-n);i=n}const a=[];for(let e=r;e<=i;e++){a.push({num:e,isSelected:e===t})}return a});this.handlePrevButtonTap=(()=>{if(!this.opts.onchange){return}if(this.opts.current===1){return}let e=this.opts.current-1;if(e<1){e=1}this.opts.onchange(e)});this.handleFirstPageButtonTap=(()=>{if(!this.opts.onchange){return}this.opts.onchange(1)});this.handleRecedeButtonTap=(()=>{if(!this.opts.onchange){return}let e=this.opts.current-this.opts.size;if(e<1){e=1}this.opts.onchange(e)});this.handlePageButtonTap=(e=>{if(!this.opts.onchange){return}const t=e.item.page.num;this.opts.onchange(t)});this.handleProceedButtonTap=(()=>{if(!this.opts.onchange){return}let e=this.opts.current+this.opts.size;if(e>this.opts.max){e=this.opts.max}this.opts.onchange(e)});this.handleLastPageButtonTap=(()=>{if(!this.opts.onchange){return}this.opts.onchange(this.opts.max)});this.handleNextButtonTap=(()=>{if(!this.opts.onchange){return}if(this.opts.current===this.opts.max){return}let e=this.opts.current+1;if(e>this.opts.max){e=this.opts.max}this.opts.onchange(e)})};i.tag2("viron-pagination",'<div class="Pagination__control"> <virtual if="{getIsSimpleMode()}"> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === 1}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Pagination__button {\'Pagination__button--selected\': page.isSelected}" each="{page in getBasePages()}" onclick="{getClickHandler(\'handlePageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageButtonTap\')}">{page.num}</div> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === opts.max}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-right></viron-icon-arrow-right> </div> </virtual> <virtual if="{!getIsSimpleMode()}"> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === 1}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> <div class="Pagination__button" if="{getBasePages()[0].num !== 1}" onclick="{getClickHandler(\'handleFirstPageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFirstPageButtonTap\')}">1</div> <div class="Pagination__button Pagination__button--moderate" if="{getBasePages()[0].num &gt;= 3}" onclick="{getClickHandler(\'handleRecedeButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRecedeButtonTap\')}"> <viron-icon-dots class="Pagination__dotsIcon"></viron-icon-dots> <viron-icon-arrow-left class="Pagination__arrowIcon"></viron-icon-arrow-left> </div> <div class="Pagination__button {\'Pagination__button--selected\': page.isSelected}" each="{page in getBasePages()}" onclick="{getClickHandler(\'handlePageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageButtonTap\')}">{page.num}</div> <div class="Pagination__button Pagination__button--moderate" if="{getBasePages()[getBasePages().length - 1].num &lt;= opts.max - 2}" onclick="{getClickHandler(\'handleProceedButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleProceedButtonTap\')}"> <viron-icon-dots class="Pagination__dotsIcon"></viron-icon-dots> <viron-icon-arrow-right class="Pagination__arrowIcon"></viron-icon-arrow-right> </div> <div class="Pagination__button" if="{getBasePages()[getBasePages().length - 1].num !== opts.max}" onclick="{getClickHandler(\'handleLastPageButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleLastPageButtonTap\')}">{opts.max}</div> <div class="Pagination__button {\'Pagination__button--disabled\': opts.current === opts.max}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-right></viron-icon-arrow-right> </div> </virtual> </div>',"",'class="Pagination {opts.class}"',function(e){this.external(ff)});function df(e){return yo(e,"Boolean")}var hf=df;function pf(e){return e===null}var vf=pf;function mf(e){return yo(e,"String")}var gf=mf;var yf;function bf(e){return e===yf}var xf=bf;var wf=function(){this.isText=false;this.isImage=false;this.isBase64=false;this.mimeType=null;this.isVideo=false;this.videoType=null;this.value=(()=>{const e=this.opts.data;const t=this.opts.column;if(vf(e)){this.isText=true;return"null"}if(hf(e)){this.isText=true;return e?"true":"false"}if(ul(e)){this.isText=true;return String(e)}if(lu(e)){this.isText=true;return"[...]"}if(xo(e)){this.isText=true;return"{...}"}if(gf(e)){if(t.format==="base64"){this.isBase64=true;this.mimeType=t["x-mime-type"]||"image/png";switch(this.mimeType){case"image/png":case"image/gif":case"image/jpeg":this.isImage=true;break;default:break}return e}const n=e.split(".");if(n.length<2){this.isText=true;return e}const r=n[n.length-1];if(ql(["png","jpg","jpeg","gif"],r)){this.isImage=true;return e}if(ql(["mp4","ogv","webm"],r)){this.isVideo=true;this.videoType=r;return e}this.isText=true;return e}if(xf(e)){this.isText=true;return""}this.isText=true;return String(e)})();this.isEmphasised=(()=>{const e=this.opts.column["x-emphasis"]||[];if(!e.length){return false}return ql(e,this.value)})()};i.tag2("viron-components-page-table-cell",'<virtual if="{isText}"> <div class="ComponentsPage_Card_Table_Cell__string {\'ComponentsPage_Card_Table_Cell__string--emphasised\': isEmphasised}">{value}</div> </virtual> <virtual if="{isImage}"> <virtual if="{!isBase64}"> <div class="ComponentsPage_Card_Table_Cell__image" riot-style="background-image:url({value});"></div> </virtual> <virtual if="{isBase64}"> <div class="ComponentsPage_Card_Table_Cell__image" riot-style="background-image:url(data:{mimeType};base64,{value});"></div> </virtual> </virtual> <virtual if="{isVideo}"> <componentspage_card_table_cell__video>TODO</ComponentsPage_Card_Table_Cell__video> </virtual>',"",'class="ComponentsPage_Card_Table_Cell"',function(e){this.external(wf)});i.tag2("viron-icon-close",'<svg viewbox="-3644.002 14060.002 16.001 16.002"> <path d="M1859.9-16723.971l-5.819-5.822-5.818,5.818a.2.2,0,0,1-.281,0l-1.84-1.842a.2.2,0,0,1,0-.281l5.818-5.816-5.818-5.82a.2.2,0,0,1,0-.281l1.84-1.84a.2.2,0,0,1,.281,0l5.818,5.818,5.82-5.818a.2.2,0,0,1,.286,0l1.84,1.84a.2.2,0,0,1,0,.281l-5.823,5.82,5.819,5.82a.2.2,0,0,1,0,.283l-1.836,1.84a.21.21,0,0,1-.143.057A.21.21,0,0,1,1859.9-16723.971Z" transform="translate(-5490.083 30799.918)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconClose {opts.class}"',function(e){});var _f=function(){this.handleTap=(()=>{if(this.opts.isdisabled){return}if(!this.opts.onselect){return}this.opts.onselect()})};i.tag2("viron-button",'<div class="Button__label">{opts.label}</div>',"",'class="Button Button--{opts.theme || \'primary\'} {\'Button--disabled\' : opts.isdisabled} {opts.class}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(_f)});i.tag2("viron-icon-check",'<svg viewbox="-2582 10792 15.997 11.266"> <g transform="translate(-2935 10688)"> <g transform="translate(122.702 -49.51)"> <rect width="12.32" height="2.989" rx="0.2" transform="translate(235.47 162.221) rotate(-45)"></rect> <rect width="9.682" height="2.989" rx="0.2" transform="translate(232.412 155.815) rotate(45)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconCheck {opts.class}"',function(e){});var kf=function(){this.handleTap=(()=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(!this.opts.ischecked,this.opts.id)});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-checkbox",'<div class="Checkbox__content"> <div class="Checkbox__mark"> <viron-icon-check></viron-icon-check> </div> <div class="Checkbox__label" if="{!!opts.label}">{opts.label}</div> </div> <div class="Checkbox__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Checkbox {'Checkbox--checked': opts.ischecked, 'Checkbox--preview': opts.ispreview, 'Checkbox--error': opts.iserror, 'Checkbox--disabled': opts.isdisabled} Checkbox--{opts.theme}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(kf)});var Cf=function(){const e=this.riotx.get();this.isApplyButtonDisabled=false;const t=this.opts.selectedColumnKeys;this.columns=Gu(Al(this.opts.columns),e=>{let n;if(!t||ql(t,e.key)){n=true}return to(e,{isSelected:n})});this.isAllSelected=!t||t.length===this.columns.length;this.layoutType=e.getter("layout.type");this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isMobile=e.getter("layout.isMobile");this.update()});this.handleCloseButtonTap=(()=>{this.close()});this.handleAllSelectChange=(e=>{this.isAllSelected=e;Gu(this.columns,t=>{t.isSelected=e;return t});if(!qu(this.columns,e=>{return e.isSelected})){this.isApplyButtonDisabled=true}else{this.isApplyButtonDisabled=false}this.update()});this.handleItemChange=((e,t)=>{const n=qu(this.columns,e=>{return e.key===t});if(!!n){n.isSelected=e}if(!qu(this.columns,e=>{return e.isSelected})){this.isApplyButtonDisabled=true}else{this.isApplyButtonDisabled=false}if(qu(this.columns,e=>{return!e.isSelected})){this.isAllSelected=false}else{this.isAllSelected=true}this.update()});this.handleApplyButtonTap=(()=>{if(!this.opts.onChange){return}let e=Gu(rl(this.columns,e=>{return e.isSelected}),e=>{return e.key});if(e.length===this.columns.length){e=null}this.opts.onChange(e);if(this.isMobile){this.close()}})};i.tag2("viron-components-page-filter",'<div class="ComponentsPage_Filter__head"> <div class="ComponentsPage_Filter__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="ComponentsPage_Filter__title">Ë°®Á§∫È†ÖÁõÆ„Éï„Ç£„É´„Çø„Éº</div> <div class="ComponentsPage_Filter__description">„ÉÜ„Éº„Éñ„É´„Å´Ë°®Á§∫„Åô„ÇãÈ†ÖÁõÆ„ÇíÈÅ∏Êäû„Åß„Åç„Åæ„Åô„ÄÇË°®Á§∫„Åï„Åõ„Åü„ÅÑÈ†ÖÁõÆ„ÇíON„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div> <div class="ComponentsPage_Filter__control"> <div class="ComponentsPage_Filter__item"> <viron-checkbox label="ÂÖ®„Å¶ÈÅ∏Êäû„Åô„Çã" ischecked="{isAllSelected}" theme="ghost" onchange="{handleAllSelectChange}"></viron-checkbox> </div> </div> </div> <div class="ComponentsPage_Filter__body"> <div class="ComponentsPage_Filter__item" each="{column in columns}"> <viron-checkbox id="{column.key}" label="{column.description || column.key}" ischecked="{column.isSelected}" theme="ghost" onchange="{handleItemChange}"></viron-checkbox> </div> </div> <div class="ComponentsPage_Filter__tail"> <viron-button label="ÈÅ©Áî®„Åô„Çã" isdisabled="{isApplyButtonDisabled}" onselect="{handleApplyButtonTap}"></viron-button> </div>',"",'class="ComponentsPage_Filter ComponentsPage_Filter--{layoutType}"',function(e){this.external(Cf)});var Tf=n(function(e){(function(t,n){{e.exports=n()}})("clipboard",function(){if(typeof document==="undefined"||!document.addEventListener){return null}var t={};t.copy=function(){var e=false;var t=null;var n=false;function r(){e=false;t=null;if(n){window.getSelection().removeAllRanges()}n=false}document.addEventListener("copy",function(n){if(e){for(var r in t){n.clipboardData.setData(r,t[r])}n.preventDefault()}});function i(){var e=document.getSelection();if(!document.queryCommandEnabled("copy")&&e.isCollapsed){var t=document.createRange();t.selectNodeContents(document.body);e.removeAllRanges();e.addRange(t);n=true}}return function(n){return new Promise(function(a,o){e=true;if(typeof n==="string"){t={"text/plain":n}}else if(n instanceof Node){t={"text/html":(new XMLSerializer).serializeToString(n)}}else if(n instanceof Object){t=n}else{o("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.")}function s(e){try{if(document.execCommand("copy")){r();a()}else{if(!e){i();s(true)}else{r();throw new Error("Unable to copy. Perhaps it's not available in your browser?")}}}catch(e){r();o(e)}}s(false)})}}();t.paste=function(){var e=false;var t;var n;document.addEventListener("paste",function(r){if(e){e=false;r.preventDefault();var i=t;t=null;i(r.clipboardData.getData(n))}});return function(r){return new Promise(function(i,a){e=true;t=i;n=r||"text/plain";try{if(!document.execCommand("paste")){e=false;a(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment."))}}catch(t){e=false;a(new Error(t))}})}}();if(typeof ClipboardEvent==="undefined"&&typeof window.clipboardData!=="undefined"&&typeof window.clipboardData.setData!=="undefined"){(function(t){function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof e){throw new TypeError("not a function")}this._state=null,this._value=null,this._deferreds=[],l(e,n(a,this),n(o,this))}function i(e){var t=this;return null===this._state?void this._deferreds.push(e):void c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n){return void(t._state?e.resolve:e.reject)(t._value)}var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function a(e){try{if(e===this){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t){return void l(n(t,e),n(a,this),n(o,this))}}this._state=!0,this._value=e,s.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++){i.call(this,this._deferreds[e])}this._deferreds=null}function u(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r){return}r=!0,n(e)}}var c=r.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r(function(r,a){i.call(n,new u(e,t,r,a))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&f(arguments[0])?arguments[0]:arguments);return new r(function(t,n){function r(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s){return void s.call(o,function(e){r(a,e)},n)}}e[a]=o,0===--i&&t(e)}catch(e){n(e)}}if(0===e.length){return t([])}for(var i=e.length,a=0;a<e.length;a++){r(a,e[a])}})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,i=e.length;i>r;r++){e[r].then(t,n)}})},"undefined"!="object"&&e.exports?e.exports=r:t.Promise||(t.Promise=r)})(this);t.copy=function(e){return new Promise(function(t,n){if(typeof e!=="string"&&!("text/plain"in e)){throw new Error("You must provide a text/plain type.")}var r=typeof e==="string"?e:e["text/plain"];var i=window.clipboardData.setData("Text",r);if(i){t()}else{n(new Error("Copying was rejected."))}})};t.paste=function(){return new Promise(function(e,t){var n=window.clipboardData.getData("Text");if(n){e(n)}else{t(new Error("Pasting was rejected."))}})}}return t})});var Sf=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.options=[];const n=this.opts.config;const r=n.path;const i=n.field;const a=n.query||{};const o=t=>{if(vf(t)||xf(t)){return}Promise.resolve().then(()=>e.action("oas.getAutocomplete",r,to({},a,{[i]:t}))).then(e=>{this.options=e;this.update()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.normalizeValue=(e=>{if(ul(e)){return String(e)}if(xf(e)){return null}return e});this.on("mount",()=>{o(this.normalizeValue(this.refs.input.value))});this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(this.normalizeValue(this.opts.val),this.opts.id)});this.handleInputInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}o(this.normalizeValue(e.target.value));this.opts.onchange(this.normalizeValue(e.target.value),this.opts.id)});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return Tf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-autocomplete",'<div class="Autocomplete__label" if="{!!opts.label}">{opts.label}</div> <form onsubmit="{handleFormSubmit}"> <input class="Autocomplete__input" type="text" riot-value="{opts.val}" ref="input" list="{_riot_id}" disabled="{opts.isdisabled}" oninput="{handleInputInput}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <datalist id="{_riot_id}"> <option each="{opt in options}" riot-value="{opt.value}">{opt.name}</option> </datalist> <div class="Autocomplete__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Autocomplete {'Autocomplete--disabled': opts.isdisabled, 'Autocomplete--preview': opts.ispreview, 'Autocomplete--error': opts.iserror}\"",function(e){this.external(Sf)});var Ef=function(){const e=this.riotx.get();const t=this.opts.mimetype||"";this.isImage=false;if(t.indexOf("image")===0){this.isImage=true}this.handleBlockerTap=(t=>{t.stopPropagation();if(!this.opts.ispreview){return}e.action("mediapreviews.add",{path:`data:${this.mimeType};base64,${this.opts.val}`})})};i.tag2("viron-base64",'<virtual if="{isImage}"> <div class="Base64__content" riot-style="background-image:url(data:{mimeType};base64,{opts.val});"></div> </virtual> <div class="Base64__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"",'class="Base64"',function(e){this.external(Ef)});var Af=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=6)}([function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t,n){var r=n(3).mergeOpts;var i=n(0);var a=n(4).Output;var o=n(7).Tokenizer;function s(e,t){if(t.multiline_frame||t.mode===m.ForInitializer||t.mode===m.Conditional){return}var n=t.start_line_index;e.remove_indent(n)}function u(e,t){for(var n=0;n<t.length;n+=1){if(t[n]===e){return true}}return false}function l(e){return e.replace(/^\s+|\s+$/g,"")}function c(e){return e.replace(/^\s+/g,"")}function f(e){var t={};for(var n=0;n<e.length;n++){t[e[n].replace(/-/g,"_")]=e[n]}return t}function d(e){e=e||p.before_newline;if(!u(e,h)){throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+h+"\nYou passed in: '"+e+"'")}return e}var h=["before-newline","after-newline","preserve-newline"];var p=f(h);var v=[p.before_newline,p.preserve_newline];var m={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function g(e,t){"use strict";var n;var f=[],h;var g;var y;var b,x,w;var _,k,C;var T;var S,E;var A="";S={TK_START_EXPR:Z,TK_END_EXPR:J,TK_START_BLOCK:Q,TK_END_BLOCK:ee,TK_WORD:te,TK_RESERVED:te,TK_SEMICOLON:ne,TK_STRING:re,TK_EQUALS:ie,TK_OPERATOR:oe,TK_COMMA:ae,TK_BLOCK_COMMENT:se,TK_COMMENT:ue,TK_DOT:le,TK_UNKNOWN:ce,TK_EOF:fe};function P(e,t){var r=0;if(e){r=e.indentation_level;if(!n.just_added_newline()&&e.line_indent_level>r){r=e.line_indent_level}}var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:false,declaration_assignment:false,multiline_frame:false,inline_frame:false,if_block:false,else_block:false,do_block:false,do_while:false,import_block:false,in_case_statement:false,in_case:false,case_body:false,indentation_level:r,line_indent_level:e?e.line_indent_level:r,start_line_index:n.get_line_number(),ternary_depth:0};return i}t=t?t:{};t=r(t,"js");E={};if(t.brace_style==="expand-strict"){t.brace_style="expand"}else if(t.brace_style==="collapse-preserve-inline"){t.brace_style="collapse,preserve-inline"}else if(t.braces_on_own_line!==undefined){t.brace_style=t.braces_on_own_line?"expand":"collapse"}else if(!t.brace_style){t.brace_style="collapse"}var O=t.brace_style.split(/[^a-zA-Z0-9_\-]+/);E.brace_style=O[0];E.brace_preserve_inline=O[1]?O[1]:false;E.indent_size=t.indent_size?parseInt(t.indent_size,10):4;E.indent_char=t.indent_char?t.indent_char:" ";E.eol=t.eol?t.eol:"auto";E.preserve_newlines=t.preserve_newlines===undefined?true:t.preserve_newlines;E.unindent_chained_methods=t.unindent_chained_methods===undefined?false:t.unindent_chained_methods;E.break_chained_methods=t.break_chained_methods===undefined?false:t.break_chained_methods;E.max_preserve_newlines=t.max_preserve_newlines===undefined?0:parseInt(t.max_preserve_newlines,10);E.space_in_paren=t.space_in_paren===undefined?false:t.space_in_paren;E.space_in_empty_paren=t.space_in_empty_paren===undefined?false:t.space_in_empty_paren;E.jslint_happy=t.jslint_happy===undefined?false:t.jslint_happy;E.space_after_anon_function=t.space_after_anon_function===undefined?false:t.space_after_anon_function;E.keep_array_indentation=t.keep_array_indentation===undefined?false:t.keep_array_indentation;E.space_before_conditional=t.space_before_conditional===undefined?true:t.space_before_conditional;E.unescape_strings=t.unescape_strings===undefined?false:t.unescape_strings;E.wrap_line_length=t.wrap_line_length===undefined?0:parseInt(t.wrap_line_length,10);E.e4x=t.e4x===undefined?false:t.e4x;E.end_with_newline=t.end_with_newline===undefined?false:t.end_with_newline;E.comma_first=t.comma_first===undefined?false:t.comma_first;E.operator_position=d(t.operator_position);E.test_output_raw=t.test_output_raw===undefined?false:t.test_output_raw;if(E.jslint_happy){E.space_after_anon_function=true}if(t.indent_with_tabs){E.indent_char="\t";E.indent_size=1}if(E.eol==="auto"){E.eol="\n";if(e&&i.lineBreak.test(e||"")){E.eol=e.match(i.lineBreak)[0]}}E.eol=E.eol.replace(/\\r/,"\r").replace(/\\n/,"\n");w="";while(E.indent_size>0){w+=E.indent_char;E.indent_size-=1}var M=0;if(e&&e.length){while(e.charAt(M)===" "||e.charAt(M)==="\t"){M+=1}A=e.substring(0,M);e=e.substring(M)}b="TK_START_BLOCK";x="";n=new a(w,A);n.raw=E.test_output_raw;C=[];H(m.BlockStatement);this.beautify=function(){var t;g=new o(e,E,w);f=g.tokenize();h=0;y=X();while(y){S[y.type]();x=_.last_text;b=y.type;_.last_text=y.text;h+=1;y=X()}t=n.get_code(E.end_with_newline,E.eol);return t};function N(e,t){var n=e.newlines;var r=E.keep_array_indentation&&U(_.mode);var i=y;for(var a=0;a<e.comments_before.length;a++){y=e.comments_before[a];N(y,t);S[y.type](t)}y=i;if(r){for(var o=0;o<n;o+=1){L(o>0,t)}}else{if(E.max_preserve_newlines&&n>E.max_preserve_newlines){n=E.max_preserve_newlines}if(E.preserve_newlines){if(e.newlines>1){L(false,t);for(var s=1;s<n;s+=1){L(true,t)}}}}}function R(e){e=e.replace(i.allLineBreaks,"\n");var t=[],n=e.indexOf("\n");while(n!==-1){t.push(e.substring(0,n));e=e.substring(n+1);n=e.indexOf("\n")}if(e.length){t.push(e)}return t}var D=["break","continue","return","throw","yield"];function B(e){e=e===undefined?false:e;if(n.just_added_newline()){return}var t=E.preserve_newlines&&y.wanted_newline||e;var r=u(_.last_text,g.positionable_operators)||u(y.text,g.positionable_operators);if(r){var i=u(_.last_text,g.positionable_operators)&&u(E.operator_position,v)||u(y.text,g.positionable_operators);t=t&&i}if(t){L(false,true)}else if(E.wrap_line_length){if(b==="TK_RESERVED"&&u(_.last_text,D)){return}var a=n.current_line.get_character_count()+y.text.length+(n.space_before_token?1:0);if(a>=E.wrap_line_length){L(false,true)}}}function L(e,t){if(!t){if(_.last_text!==";"&&_.last_text!==","&&_.last_text!=="="&&b!=="TK_OPERATOR"){var r=X(1);while(_.mode===m.Statement&&!(_.if_block&&r&&r.type==="TK_RESERVED"&&r.text==="else")&&!_.do_block){V()}}}if(n.add_new_line(e)){_.multiline_frame=true}}function I(){if(n.just_added_newline()){if(E.keep_array_indentation&&U(_.mode)&&y.wanted_newline){n.current_line.push(y.whitespace_before);n.space_before_token=false}else if(n.set_indent(_.indentation_level)){_.line_indent_level=_.indentation_level}}}function F(e){if(n.raw){n.add_raw_token(y);return}if(E.comma_first&&b==="TK_COMMA"&&n.just_added_newline()){if(n.previous_line.last()===","){var t=n.previous_line.pop();if(n.previous_line.is_empty()){n.previous_line.push(t);n.trim(true);n.current_line.pop();n.trim()}I();n.add_token(",");n.space_before_token=true}}e=e||y.text;I();n.add_token(e)}function j(){_.indentation_level+=1}function z(){if(_.indentation_level>0&&(!_.parent||_.indentation_level>_.parent.indentation_level)){_.indentation_level-=1}}function H(e){if(_){C.push(_);k=_}else{k=P(null,e)}_=P(k,e)}function U(e){return e===m.ArrayLiteral}function W(e){return u(e,[m.Expression,m.ForInitializer,m.Conditional])}function V(){if(C.length>0){k=_;_=C.pop();if(k.mode===m.Statement&&!E.unindent_chained_methods){s(n,k)}}}function q(){return _.parent.mode===m.ObjectLiteral&&_.mode===m.Statement&&(_.last_text===":"&&_.ternary_depth===0||b==="TK_RESERVED"&&u(_.last_text,["get","set"]))}function K(){if(b==="TK_RESERVED"&&u(_.last_text,["var","let","const"])&&y.type==="TK_WORD"||b==="TK_RESERVED"&&_.last_text==="do"||b==="TK_RESERVED"&&u(_.last_text,D)&&!y.wanted_newline||b==="TK_RESERVED"&&_.last_text==="else"&&!(y.type==="TK_RESERVED"&&y.text==="if"&&!y.comments_before.length)||b==="TK_END_EXPR"&&(k.mode===m.ForInitializer||k.mode===m.Conditional)||b==="TK_WORD"&&_.mode===m.BlockStatement&&!_.in_case&&!(y.text==="--"||y.text==="++")&&x!=="function"&&y.type!=="TK_WORD"&&y.type!=="TK_RESERVED"||_.mode===m.ObjectLiteral&&(_.last_text===":"&&_.ternary_depth===0||b==="TK_RESERVED"&&u(_.last_text,["get","set"]))){H(m.Statement);if(!E.unindent_chained_methods){j()}N(y,true);if(!q()){B(y.type==="TK_RESERVED"&&u(y.text,["do","for","if","while"]))}return true}return false}function Y(e,t){for(var n=0;n<e.length;n++){var r=l(e[n]);if(r.charAt(0)!==t){return false}}return true}function $(e,t){var n=0,r=e.length,i;for(;n<r;n++){i=e[n];if(i&&i.indexOf(t)!==0){return false}}return true}function G(e){return u(e,["case","return","do","if","throw","else"])}function X(e){var t=h+(e||0);return t<0||t>=f.length?null:f[t]}function Z(){if(!K()){N(y)}var e=m.Expression;if(y.text==="["){if(b==="TK_WORD"||_.last_text===")"){if(b==="TK_RESERVED"&&u(_.last_text,g.line_starters)){n.space_before_token=true}H(e);F();j();if(E.space_in_paren){n.space_before_token=true}return}e=m.ArrayLiteral;if(U(_.mode)){if(_.last_text==="["||_.last_text===","&&(x==="]"||x==="}")){if(!E.keep_array_indentation){L()}}}}else{if(b==="TK_RESERVED"&&_.last_text==="for"){e=m.ForInitializer}else if(b==="TK_RESERVED"&&u(_.last_text,["if","while"])){e=m.Conditional}else{}}if(_.last_text===";"||b==="TK_START_BLOCK"){L()}else if(b==="TK_END_EXPR"||b==="TK_START_EXPR"||b==="TK_END_BLOCK"||_.last_text==="."){B(y.wanted_newline)}else if(!(b==="TK_RESERVED"&&y.text==="(")&&b!=="TK_WORD"&&b!=="TK_OPERATOR"){n.space_before_token=true}else if(b==="TK_RESERVED"&&(_.last_word==="function"||_.last_word==="typeof")||_.last_text==="*"&&(u(x,["function","yield"])||_.mode===m.ObjectLiteral&&u(x,["{",","]))){if(E.space_after_anon_function){n.space_before_token=true}}else if(b==="TK_RESERVED"&&(u(_.last_text,g.line_starters)||_.last_text==="catch")){if(E.space_before_conditional){n.space_before_token=true}}if(y.text==="("&&b==="TK_RESERVED"&&u(_.last_word,["await","async"])){n.space_before_token=true}if(y.text==="("){if(b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!q()){B()}}}if(y.text==="("&&b!=="TK_WORD"&&b!=="TK_RESERVED"){B()}H(e);F();if(E.space_in_paren){n.space_before_token=true}j()}function J(){while(_.mode===m.Statement){V()}N(y);if(_.multiline_frame){B(y.text==="]"&&U(_.mode)&&!E.keep_array_indentation)}if(E.space_in_paren){if(b==="TK_START_EXPR"&&!E.space_in_empty_paren){n.trim();n.space_before_token=false}else{n.space_before_token=true}}if(y.text==="]"&&E.keep_array_indentation){F();V()}else{V();F()}s(n,k);if(_.do_while&&k.mode===m.Conditional){k.mode=m.Expression;_.do_block=false;_.do_while=false}}function Q(){N(y);var e=X(1);var t=X(2);if(t&&(u(t.text,[":",","])&&u(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||u(e.text,["get","set","..."])&&u(t.type,["TK_WORD","TK_RESERVED"]))){if(!u(x,["class","interface"])){H(m.ObjectLiteral)}else{H(m.BlockStatement)}}else if(b==="TK_OPERATOR"&&_.last_text==="=>"){H(m.BlockStatement)}else if(u(b,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||b==="TK_RESERVED"&&u(_.last_text,["return","throw","import","default"])){H(m.ObjectLiteral)}else{H(m.BlockStatement)}var r=!e.comments_before.length&&e.text==="}";var i=r&&_.last_word==="function"&&b==="TK_END_EXPR";if(E.brace_preserve_inline){var a=0;var o=null;_.inline_frame=true;do{a+=1;o=X(a);if(o.wanted_newline){_.inline_frame=false;break}}while(o.type!=="TK_EOF"&&!(o.type==="TK_END_BLOCK"&&o.opened===y))}if((E.brace_style==="expand"||E.brace_style==="none"&&y.wanted_newline)&&!_.inline_frame){if(b!=="TK_OPERATOR"&&(i||b==="TK_EQUALS"||b==="TK_RESERVED"&&G(_.last_text)&&_.last_text!=="else")){n.space_before_token=true}else{L(false,true)}}else{if(U(k.mode)&&(b==="TK_START_EXPR"||b==="TK_COMMA")){if(b==="TK_COMMA"||E.space_in_paren){n.space_before_token=true}if(b==="TK_COMMA"||b==="TK_START_EXPR"&&_.inline_frame){B();k.multiline_frame=k.multiline_frame||_.multiline_frame;_.multiline_frame=false}}if(b!=="TK_OPERATOR"&&b!=="TK_START_EXPR"){if(b==="TK_START_BLOCK"&&!_.inline_frame){L()}else{n.space_before_token=true}}}F();j()}function ee(){N(y);while(_.mode===m.Statement){V()}var e=b==="TK_START_BLOCK";if(_.inline_frame&&!e){n.space_before_token=true}else if(E.brace_style==="expand"){if(!e){L()}}else{if(!e){if(U(_.mode)&&E.keep_array_indentation){E.keep_array_indentation=false;L();E.keep_array_indentation=true}else{L()}}}V();F()}function te(){if(y.type==="TK_RESERVED"){if(u(y.text,["set","get"])&&_.mode!==m.ObjectLiteral){y.type="TK_WORD"}else if(u(y.text,["as","from"])&&!_.import_block){y.type="TK_WORD"}else if(_.mode===m.ObjectLiteral){var e=X(1);if(e.text===":"){y.type="TK_WORD"}}}if(K()){if(b==="TK_RESERVED"&&u(_.last_text,["var","let","const"])&&y.type==="TK_WORD"){_.declaration_statement=true}}else if(y.wanted_newline&&!W(_.mode)&&(b!=="TK_OPERATOR"||(_.last_text==="--"||_.last_text==="++"))&&b!=="TK_EQUALS"&&(E.preserve_newlines||!(b==="TK_RESERVED"&&u(_.last_text,["var","let","const","set","get"])))){N(y);L()}else{N(y)}if(_.do_block&&!_.do_while){if(y.type==="TK_RESERVED"&&y.text==="while"){n.space_before_token=true;F();n.space_before_token=true;_.do_while=true;return}else{L();_.do_block=false}}if(_.if_block){if(!_.else_block&&(y.type==="TK_RESERVED"&&y.text==="else")){_.else_block=true}else{while(_.mode===m.Statement){V()}_.if_block=false;_.else_block=false}}if(y.type==="TK_RESERVED"&&(y.text==="case"||y.text==="default"&&_.in_case_statement)){L();if(_.case_body||E.jslint_happy){z();_.case_body=false}F();_.in_case=true;_.in_case_statement=true;return}if(b==="TK_COMMA"||b==="TK_START_EXPR"||b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!q()){B()}}if(y.type==="TK_RESERVED"&&y.text==="function"){if(u(_.last_text,["}",";"])||n.just_added_newline()&&!(u(_.last_text,["(","[","{",":","=",","])||b==="TK_OPERATOR")){if(!n.just_added_blankline()&&!y.comments_before.length){L();L(true)}}if(b==="TK_RESERVED"||b==="TK_WORD"){if(b==="TK_RESERVED"&&(u(_.last_text,["get","set","new","export","async"])||u(_.last_text,D))){n.space_before_token=true}else if(b==="TK_RESERVED"&&_.last_text==="default"&&x==="export"){n.space_before_token=true}else{L()}}else if(b==="TK_OPERATOR"||_.last_text==="="){n.space_before_token=true}else if(!_.multiline_frame&&(W(_.mode)||U(_.mode))){}else{L()}F();_.last_word=y.text;return}T="NONE";if(b==="TK_END_BLOCK"){if(k.inline_frame){T="SPACE"}else if(!(y.type==="TK_RESERVED"&&u(y.text,["else","catch","finally","from"]))){T="NEWLINE"}else{if(E.brace_style==="expand"||E.brace_style==="end-expand"||E.brace_style==="none"&&y.wanted_newline){T="NEWLINE"}else{T="SPACE";n.space_before_token=true}}}else if(b==="TK_SEMICOLON"&&_.mode===m.BlockStatement){T="NEWLINE"}else if(b==="TK_SEMICOLON"&&W(_.mode)){T="SPACE"}else if(b==="TK_STRING"){T="NEWLINE"}else if(b==="TK_RESERVED"||b==="TK_WORD"||_.last_text==="*"&&(u(x,["function","yield"])||_.mode===m.ObjectLiteral&&u(x,["{",","]))){T="SPACE"}else if(b==="TK_START_BLOCK"){if(_.inline_frame){T="SPACE"}else{T="NEWLINE"}}else if(b==="TK_END_EXPR"){n.space_before_token=true;T="NEWLINE"}if(y.type==="TK_RESERVED"&&u(y.text,g.line_starters)&&_.last_text!==")"){if(_.inline_frame||_.last_text==="else"||_.last_text==="export"){T="SPACE"}else{T="NEWLINE"}}if(y.type==="TK_RESERVED"&&u(y.text,["else","catch","finally"])){if((!(b==="TK_END_BLOCK"&&k.mode===m.BlockStatement)||E.brace_style==="expand"||E.brace_style==="end-expand"||E.brace_style==="none"&&y.wanted_newline)&&!_.inline_frame){L()}else{n.trim(true);var t=n.current_line;if(t.last()!=="}"){L()}n.space_before_token=true}}else if(T==="NEWLINE"){if(b==="TK_RESERVED"&&G(_.last_text)){n.space_before_token=true}else if(b!=="TK_END_EXPR"){if((b!=="TK_START_EXPR"||!(y.type==="TK_RESERVED"&&u(y.text,["var","let","const"])))&&_.last_text!==":"){if(y.type==="TK_RESERVED"&&y.text==="if"&&_.last_text==="else"){n.space_before_token=true}else{L()}}}else if(y.type==="TK_RESERVED"&&u(y.text,g.line_starters)&&_.last_text!==")"){L()}}else if(_.multiline_frame&&U(_.mode)&&_.last_text===","&&x==="}"){L()}else if(T==="SPACE"){n.space_before_token=true}F();_.last_word=y.text;if(y.type==="TK_RESERVED"){if(y.text==="do"){_.do_block=true}else if(y.text==="if"){_.if_block=true}else if(y.text==="import"){_.import_block=true}else if(_.import_block&&y.type==="TK_RESERVED"&&y.text==="from"){_.import_block=false}}}function ne(){if(K()){n.space_before_token=false}else{N(y)}var e=X(1);while(_.mode===m.Statement&&!(_.if_block&&e&&e.type==="TK_RESERVED"&&e.text==="else")&&!_.do_block){V()}if(_.import_block){_.import_block=false}F()}function re(){if(K()){n.space_before_token=true}else{N(y);if(b==="TK_RESERVED"||b==="TK_WORD"||_.inline_frame){n.space_before_token=true}else if(b==="TK_COMMA"||b==="TK_START_EXPR"||b==="TK_EQUALS"||b==="TK_OPERATOR"){if(!q()){B()}}else{L()}}F()}function ie(){if(K()){}else{N(y)}if(_.declaration_statement){_.declaration_assignment=true}n.space_before_token=true;F();n.space_before_token=true}function ae(){N(y,true);F();n.space_before_token=true;if(_.declaration_statement){if(W(_.parent.mode)){_.declaration_assignment=false}if(_.declaration_assignment){_.declaration_assignment=false;L(false,true)}else if(E.comma_first){B()}}else if(_.mode===m.ObjectLiteral||_.mode===m.Statement&&_.parent.mode===m.ObjectLiteral){if(_.mode===m.Statement){V()}if(!_.inline_frame){L()}}else if(E.comma_first){B()}}function oe(){var e=y.text==="*"&&(b==="TK_RESERVED"&&u(_.last_text,["function","yield"])||u(b,["TK_START_BLOCK","TK_COMMA","TK_END_BLOCK","TK_SEMICOLON"]));var t=u(y.text,["-","+"])&&(u(b,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||u(_.last_text,g.line_starters)||_.last_text===",");if(K()){}else{var r=!e;N(y,r)}if(b==="TK_RESERVED"&&G(_.last_text)){n.space_before_token=true;F();return}if(y.text==="*"&&b==="TK_DOT"){F();return}if(y.text==="::"){F();return}if(b==="TK_OPERATOR"&&u(E.operator_position,v)){B()}if(y.text===":"&&_.in_case){_.case_body=true;j();F();L();_.in_case=false;return}var i=true;var a=true;var o=false;if(y.text===":"){if(_.ternary_depth===0){i=false}else{_.ternary_depth-=1;o=true}}else if(y.text==="?"){_.ternary_depth+=1}if(!t&&!e&&E.preserve_newlines&&u(y.text,g.positionable_operators)){var s=y.text===":";var l=s&&o;var c=s&&!o;switch(E.operator_position){case p.before_newline:n.space_before_token=!c;F();if(!s||l){B()}n.space_before_token=true;return;case p.after_newline:n.space_before_token=true;if(!s||l){if(X(1).wanted_newline){L(false,true)}else{B()}}else{n.space_before_token=false}F();n.space_before_token=true;return;case p.preserve_newline:if(!c){B()}i=!(n.just_added_newline()||c);n.space_before_token=i;F();n.space_before_token=true;return}}if(e){B();i=false;var f=X(1);a=f&&u(f.type,["TK_WORD","TK_RESERVED"])}else if(y.text==="..."){B();i=b==="TK_START_BLOCK";a=false}else if(u(y.text,["--","++","!","~"])||t){i=false;a=false;if(y.wanted_newline&&(y.text==="--"||y.text==="++")){L(false,true)}if(_.last_text===";"&&W(_.mode)){i=true}if(b==="TK_RESERVED"){i=true}else if(b==="TK_END_EXPR"){i=!(_.last_text==="]"&&(y.text==="--"||y.text==="++"))}else if(b==="TK_OPERATOR"){i=u(y.text,["--","-","++","+"])&&u(_.last_text,["--","-","++","+"]);if(u(y.text,["+","-"])&&u(_.last_text,["--","++"])){a=true}}if((_.mode===m.BlockStatement&&!_.inline_frame||_.mode===m.Statement)&&(_.last_text==="{"||_.last_text===";")){L()}}n.space_before_token=n.space_before_token||i;F();n.space_before_token=a}function se(e){if(n.raw){n.add_raw_token(y);if(y.directives&&y.directives.preserve==="end"){n.raw=E.test_output_raw}return}if(y.directives){L(false,e);F();if(y.directives.preserve==="start"){n.raw=true}L(false,true);return}if(!i.newline.test(y.text)&&!y.wanted_newline){n.space_before_token=true;F();n.space_before_token=true;return}var t=R(y.text);var r;var a=false;var o=false;var s=y.whitespace_before;var u=s.length;L(false,e);if(t.length>1){a=Y(t.slice(1),"*");o=$(t.slice(1),s)}F(t[0]);for(r=1;r<t.length;r++){L(false,true);if(a){F(" "+c(t[r]))}else if(o&&t[r].length>u){F(t[r].substring(u))}else{n.add_token(t[r])}}L(false,e)}function ue(e){if(y.wanted_newline){L(false,e)}else{n.trim(true)}n.space_before_token=true;F();L(false,e)}function le(){if(K()){}else{N(y,true)}if(b==="TK_RESERVED"&&G(_.last_text)){n.space_before_token=true}else{B(_.last_text===")"&&E.break_chained_methods)}F()}function ce(e){F();if(y.text[y.text.length-1]==="\n"){L(false,e)}}function fe(){while(_.mode===m.Statement){V()}N(y)}}e.exports.Beautifier=g},function(e,t){function n(e){var t=e;var n=t.length;var r=0;this.back=function(){r-=1};this.hasNext=function(){return r<n};this.next=function(){var e=null;if(this.hasNext()){e=t.charAt(r);r+=1}return e};this.peek=function(e){var i=null;e=e||0;e+=r;if(e>=0&&e<n){i=t.charAt(e)}return i};this.peekCharCode=function(e){var i=0;e=e||0;e+=r;if(e>=0&&e<n){i=t.charCodeAt(e)}return i};this.test=function(e,n){n=n||0;e.lastIndex=r+n;return e.test(t)};this.testChar=function(e,t){var n=this.peek(t);return n!==null&&e.test(n)};this.match=function(e){e.lastIndex=r;var n=e.exec(t);if(n&&n.index===r){r+=n[0].length}else{n=null}return n}}e.exports.InputScanner=n},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t){function n(e){var t=0;var n=-1;var r=[];var i=true;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length;n=r};this.get_character_count=function(){return t};this.is_empty=function(){return i};this.last=function(){if(!this._empty){return r[r.length-1]}else{return null}};this.push=function(e){r.push(e);t+=e.length;i=false};this.pop=function(){var e=null;if(!i){e=r.pop();t-=e.length;i=r.length===0}return e};this.remove_indent=function(){if(n>0){n-=1;t-=e.indent_length}};this.trim=function(){while(this.last()===" "){r.pop();t-=1}i=r.length===0};this.toString=function(){var t="";if(!this._empty){if(n>=0){t=e.indent_cache[n]}t+=r.join("")}return t}}function r(e,t){t=t||"";this.indent_cache=[t];this.baseIndentLength=t.length;this.indent_length=e.length;this.raw=false;var r=[];this.baseIndentString=t;this.indent_string=e;this.previous_line=null;this.current_line=null;this.space_before_token=false;this.add_outputline=function(){this.previous_line=this.current_line;this.current_line=new n(this);r.push(this.current_line)};this.add_outputline();this.get_line_number=function(){return r.length};this.add_new_line=function(e){if(this.get_line_number()===1&&this.just_added_newline()){return false}if(e||!this.just_added_newline()){if(!this.raw){this.add_outputline()}return true}return false};this.get_code=function(e,t){var n=r.join("\n").replace(/[\r\n\t ]+$/,"");if(e){n+="\n"}if(t!=="\n"){n=n.replace(/[\n]/g,t)}return n};this.set_indent=function(e){if(r.length>1){while(e>=this.indent_cache.length){this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)}this.current_line.set_indent(e);return true}this.current_line.set_indent(0);return false};this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++){this.add_outputline()}this.current_line.push(e.whitespace_before);this.current_line.push(e.text);this.space_before_token=false};this.add_token=function(e){this.add_space_before_token();this.current_line.push(e)};this.add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){this.current_line.push(" ")}this.space_before_token=false};this.remove_indent=function(e){var t=r.length;while(e<t){r[e].remove_indent();e++}};this.trim=function(n){n=n===undefined?false:n;this.current_line.trim(e,t);while(n&&r.length>1&&this.current_line.is_empty()){r.pop();this.current_line=r[r.length-1];this.current_line.trim()}this.previous_line=r.length>1?r[r.length-2]:null};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){if(this.just_added_newline()){if(r.length===1){return true}var e=r[r.length-2];return e.is_empty()}return false}}e.exports.Output=r},function(e,t){function n(e,t,n,r,i){this.type=e;this.text=t;this.comments_before=[];this.comments_after=[];this.newlines=n||0;this.wanted_newline=n>0;this.whitespace_before=r||"";this.parent=i||null;this.opened=null;this.directives=null}e.exports.Token=n},function(e,t,n){var r=n(1).Beautifier;function i(e,t){var n=new r(e,t);return n.beautify()}e.exports=i},function(e,t,n){var r=n(2).InputScanner;var i=n(5).Token;var a=n(0);function o(e){return e.replace(/^\s+|\s+$/g,"")}function s(e,t){for(var n=0;n<t.length;n+=1){if(t[n]===e){return true}}return false}function u(e,t){var n="\n\r\t ".split("");var u=/[0-9]/;var l=/[01]/;var c=/[01234567]/;var f=/[0123456789abcdefABCDEF]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var d=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "));this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var h=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]);var p=/([\s\S]*?)((?:\*\/)|$)/g;var v=/([^\n\r\u2028\u2029]*)/g;var m=/\/\* beautify( \w+[:]\w+)+ \*\//g;var g=/ (\w+)[:](\w+)/g;var y=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g;var b=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;var x,w,_,k;var C;this.tokenize=function(){C=new r(e);_=false;k=[];var t,n;var a;var o=null;var s=[];var u=[];while(!(n&&n.type==="TK_EOF")){a=S();t=new i(a[1],a[0],x,w);while(t.type==="TK_COMMENT"||t.type==="TK_BLOCK_COMMENT"||t.type==="TK_UNKNOWN"){if(t.type==="TK_BLOCK_COMMENT"){t.directives=a[2]}u.push(t);a=S();t=new i(a[1],a[0],x,w)}if(u.length){t.comments_before=u;u=[]}if(t.type==="TK_START_BLOCK"||t.type==="TK_START_EXPR"){t.parent=n;s.push(o);o=t}else if((t.type==="TK_END_BLOCK"||t.type==="TK_END_EXPR")&&(o&&(t.text==="]"&&o.text==="["||t.text===")"&&o.text==="("||t.text==="}"&&o.text==="{"))){t.parent=o.parent;t.opened=o;o=s.pop()}k.push(t);n=t}return k};function T(e){if(!e.match(m)){return null}var t={};g.lastIndex=0;var n=g.exec(e);while(n){t[n[1]]=n[2];n=g.exec(e)}return t}function S(){var e;var r=[];x=0;w="";var m=C.next();if(m===null){return["","TK_EOF"]}var g;if(k.length){g=k[k.length-1]}else{g=new i("TK_START_BLOCK","{")}while(s(m,n)){if(a.newline.test(m)){if(!(m==="\n"&&C.peek(-2)==="\r")){x+=1;r=[]}}else{r.push(m)}m=C.next();if(m===null){return["","TK_EOF"]}}if(r.length){w=r.join("")}if(u.test(m)||m==="."&&C.testChar(u)){var S=true;var A=true;var P=u;if(m==="0"&&C.testChar(/[XxOoBb]/)){S=false;A=false;if(C.testChar(/[Bb]/)){P=l}else if(C.testChar(/[Oo]/)){P=c}else{P=f}m+=C.next()}else if(m==="."){S=false}else{m="";C.back()}while(C.testChar(P)){m+=C.next();if(S&&C.peek()==="."){m+=C.next();S=false}if(A&&C.testChar(/[Ee]/)){m+=C.next();if(C.testChar(/[+-]/)){m+=C.next()}A=false;S=false}}return[m,"TK_WORD"]}if(a.isIdentifierStart(C.peekCharCode(-1))){if(C.hasNext()){while(a.isIdentifierChar(C.peekCharCode())){m+=C.next();if(!C.hasNext()){break}}}if(!(g.type==="TK_DOT"||g.type==="TK_RESERVED"&&s(g.text,["set","get"]))&&s(m,h)){if(m==="in"||m==="of"){return[m,"TK_OPERATOR"]}return[m,"TK_RESERVED"]}return[m,"TK_WORD"]}if(m==="("||m==="["){return[m,"TK_START_EXPR"]}if(m===")"||m==="]"){return[m,"TK_END_EXPR"]}if(m==="{"){return[m,"TK_START_BLOCK"]}if(m==="}"){return[m,"TK_END_BLOCK"]}if(m===";"){return[m,"TK_SEMICOLON"]}if(m==="/"){var O="";var M;if(C.peek()==="*"){C.next();M=C.match(p);O="/*"+M[0];var N=T(O);if(N&&N.ignore==="start"){M=C.match(y);O+=M[0]}O=O.replace(a.allLineBreaks,"\n");return[O,"TK_BLOCK_COMMENT",N]}if(C.peek()==="/"){C.next();M=C.match(v);O="//"+M[0];return[O,"TK_COMMENT"]}}var R=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;if(m==="`"||m==="'"||m==='"'||(m==="/"||t.e4x&&m==="<"&&C.test(R,-1))&&(g.type==="TK_RESERVED"&&s(g.text,["return","case","throw","else","do","typeof","yield"])||g.type==="TK_END_EXPR"&&g.text===")"&&g.parent&&g.parent.type==="TK_RESERVED"&&s(g.parent.text,["if","while","for"])||s(g.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var D=m,B=false,L=false;e=m;if(D==="/"){var I=false;while(C.hasNext()&&((B||I||C.peek()!==D)&&!C.testChar(a.newline))){e+=C.peek();if(!B){B=C.peek()==="\\";if(C.peek()==="["){I=true}else if(C.peek()==="]"){I=false}}else{B=false}C.next()}}else if(t.e4x&&D==="<"){var F=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;C.back();var j="";var z=C.match(R);if(z){var H=z[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}");var U=H.indexOf("{")===0;var W=0;while(z){var V=!!z[1];var q=z[2];var K=!!z[z.length-1]||q.slice(0,8)==="![CDATA[";if(!K&&(q===H||U&&q.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))){if(V){--W}else{++W}}j+=z[0];if(W<=0){break}z=C.match(F)}if(!z){j+=C.match(/[\s\S]*/g)[0]}j=j.replace(a.allLineBreaks,"\n");return[j,"TK_STRING"]}}else{var Y=function(t,n,r){var i;while(C.hasNext()){i=C.peek();if(!(B||i!==t&&(n||!a.newline.test(i)))){break}if((B||n)&&a.newline.test(i)){if(i==="\r"&&C.peek(1)==="\n"){C.next();i=C.peek()}e+="\n"}else{e+=i}if(B){if(i==="x"||i==="u"){L=true}B=false}else{B=i==="\\"}C.next();if(r&&e.indexOf(r,e.length-r.length)!==-1){if(t==="`"){Y("}",n,"`")}else{Y("`",n,"${")}if(C.hasNext()){e+=C.next()}}}};if(D==="`"){Y("`",true,"${")}else{Y(D)}}if(L&&t.unescape_strings){e=E(e)}if(C.peek()===D){e+=D;C.next();if(D==="/"){while(C.hasNext()&&a.isIdentifierStart(C.peekCharCode())){e+=C.next()}}}return[e,"TK_STRING"]}if(m==="#"){if(k.length===0&&C.peek()==="!"){e=m;while(C.hasNext()&&m!=="\n"){m=C.next();e+=m}return[o(e)+"\n","TK_UNKNOWN"]}var $="#";if(C.hasNext()&&C.testChar(u)){do{m=C.next();$+=m}while(C.hasNext()&&m!=="#"&&m!=="=");if(m==="#"){}else if(C.peek()==="["&&C.peek(1)==="]"){$+="[]";C.next();C.next()}else if(C.peek()==="{"&&C.peek(1)==="}"){$+="{}";C.next();C.next()}return[$,"TK_WORD"]}}if(m==="<"&&(C.peek()==="?"||C.peek()==="%")){C.back();var G=C.match(b);if(G){m=G[0];m=m.replace(a.allLineBreaks,"\n");return[m,"TK_STRING"]}}if(m==="<"&&C.match(/\!--/g)){m="\x3c!--";while(C.hasNext()&&!C.testChar(a.newline)){m+=C.next()}_=true;return[m,"TK_COMMENT"]}if(m==="-"&&_&&C.match(/->/g)){_=false;return["--\x3e","TK_COMMENT"]}if(m==="."){if(C.peek()==="."&&C.peek(1)==="."){m+=C.next()+C.next();return[m,"TK_OPERATOR"]}return[m,"TK_DOT"]}if(s(m,d)){while(C.hasNext()&&s(m+C.peek(),d)){m+=C.next();if(!C.hasNext()){break}}if(m===","){return[m,"TK_COMMA"]}else if(m==="="){return[m,"TK_EQUALS"]}else{return[m,"TK_OPERATOR"]}}return[m,"TK_UNKNOWN"]}function E(e){var t="",n=0;var i=new r(e);var a=null;while(i.hasNext()){a=i.match(/([\s]|[^\\]|\\\\)+/g);if(a){t+=a[0]}if(i.peek()==="\\"){i.next();if(i.peek()==="x"){a=i.match(/x([0-9A-Fa-f]{2})/g)}else if(i.peek()==="u"){a=i.match(/u([0-9A-Fa-f]{4})/g)}else{t+="\\";if(i.hasNext()){t+=i.next()}continue}if(!a){return e}n=parseInt(a[1],16);if(n>126&&n<=255&&a[0].indexOf("x")===0){return e}else if(n>=0&&n<32){t+="\\"+a[0];continue}else if(n===34||n===39||n===92){t+="\\"+String.fromCharCode(n)}else{t+=String.fromCharCode(n)}}}return t}}e.exports.Tokenizer=u}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined([],function(){return{js_beautify:n}})}else{t.js_beautify=n}})()});t(Af);var Pf=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=4)}([function(e,t,n){var r=n(2).mergeOpts;var i=n(1);var a=n(3).Output;var o=i.lineBreak;var s=i.allLineBreaks;function u(e,t){t=t||{};t=r(t,"css");e=e||"";var n=0;var i=t.indent_size?parseInt(t.indent_size,10):4;var u=t.indent_char||" ";var l=t.preserve_newlines===undefined?false:t.preserve_newlines;var c=t.selector_separator_newline===undefined?true:t.selector_separator_newline;var f=t.end_with_newline===undefined?false:t.end_with_newline;var d=t.newline_between_rules===undefined?true:t.newline_between_rules;var h=t.space_around_combinator===undefined?false:t.space_around_combinator;h=h||(t.space_around_selector_separator===undefined?false:t.space_around_selector_separator);var p=t.eol?t.eol:"auto";if(t.indent_with_tabs){u="\t";i=1}if(p==="auto"){p="\n";if(e&&o.test(e||"")){p=e.match(o)[0]}}p=p.replace(/\\r/,"\r").replace(/\\n/,"\n");e=e.replace(s,"\n");var v=/^\s+$/;var m=-1,g;var y=0;function b(){g=e.charAt(++m);return g||""}function x(t){var n="";var r=m;if(t){k()}n=e.charAt(m+1)||"";m=r-1;b();return n}function w(t){var n=m;while(b()){if(g==="\\"){b()}else if(t.indexOf(g)!==-1){break}else if(g==="\n"){break}}return e.substring(n,m+1)}function _(e){var t=m;var n=w(e);m=t-1;b();return n}function k(e){var t=0;while(v.test(x())){b();if(g==="\n"&&e&&l){R.add_new_line(true);t++}}n=t;return t}function C(){var e="";if(g&&v.test(g)){e=g}while(v.test(b())){e+=g}return e}function T(){var t=m;var n=x()==="/";b();while(b()){if(!n&&g==="*"&&x()==="/"){b();break}else if(n&&g==="\n"){return e.substring(t,m)}}return e.substring(t,m)+g}function S(t){return e.substring(m-t.length,m).toLowerCase()===t}function E(){var t=0;for(var n=m+1;n<e.length;n++){var r=e.charAt(n);if(r==="{"){return true}else if(r==="("){t+=1}else if(r===")"){if(t===0){return false}t-=1}else if(r===";"||r==="}"){return false}}return false}var A="";var P=0;if(e&&e.length){while(e.charAt(P)===" "||e.charAt(P)==="\t"){P+=1}A=e.substring(0,P);js_source_text=e.substring(P)}var O=new Array(i+1).join(u);var M;var N;var R;function D(e){if(R.just_added_newline()){R.set_indent(M)}R.add_token(e)}function B(e){if(e){R.space_before_token=true}}function L(){M++}function I(){if(M>0){M--}}this.beautify=function(){R=new a(O,A);M=0;N=0;m=-1;g=null;y=0;var e=false;var t=false;var r=false;var i="";var o="";while(true){var s=C();var u=s!=="";var l=s.indexOf("\n")!==-1;o=i;i=g;if(!g){break}else if(g==="/"&&x()==="*"){var P=M===0;if(l||P){R.add_new_line()}D(T());R.add_new_line();if(P){R.add_new_line(true)}}else if(g==="/"&&x()==="/"){if(!l&&o!=="{"){R.trim(true)}R.space_before_token=true;D(T());R.add_new_line()}else if(g==="@"){B(u);if(x()==="{"){D(w("}"))}else{D(g);var F=_(": ,;{}()[]/='\"");if(F.match(/[ :]$/)){b();F=w(": ").replace(/\s$/,"");D(F);R.space_before_token=true}F=F.replace(/\s$/,"");if(F in this.NESTED_AT_RULE){N+=1;if(F in this.CONDITIONAL_GROUP_RULE){r=true}}}}else if(g==="#"&&x()==="{"){B(u);D(w("}"))}else if(g==="{"){if(x(true)==="}"){k();b();R.space_before_token=true;D("{}");if(!k(true)){R.add_new_line()}if(n<2&&d&&M===0){R.add_new_line(true)}}else{L();R.space_before_token=true;D(g);if(!k(true)){R.add_new_line()}if(r){r=false;e=M>N}else{e=M>=N}}}else if(g==="}"){I();R.add_new_line();D(g);e=false;t=false;if(N){N--}if(!k(true)){R.add_new_line()}if(n<2&&d&&M===0){R.add_new_line(true)}}else if(g===":"){k();if((e||r)&&!(S("&")||E())&&!S("(")){D(":");if(!t){t=true;R.space_before_token=true}}else{if(S(" ")){R.space_before_token=true}if(x()===":"){b();D("::")}else{D(":")}}}else if(g==='"'||g==="'"){B(u);D(w(g))}else if(g===";"){t=false;D(g);if(!k(true)){R.add_new_line()}}else if(g==="("){if(S("url")){D(g);k();if(b()){if(g!==")"&&g!=='"'&&g!=="'"){D(w(")"))}else{m--}}}else{y++;B(u);D(g);k()}}else if(g===")"){D(g);y--}else if(g===","){D(g);if(!k(true)&&c&&!t&&y<1){R.add_new_line()}else{R.space_before_token=true}}else if((g===">"||g==="+"||g==="~")&&!t&&y<1){if(h){R.space_before_token=true;D(g);R.space_before_token=true}else{D(g);k();if(g&&v.test(g)){g=""}}}else if(g==="]"){D(g)}else if(g==="["){B(u);D(g)}else if(g==="="){k();D("=");if(v.test(g)){g=""}}else{B(u);D(g)}}var j=R.get_code(f,p);return j};this.NESTED_AT_RULE={"@page":true,"@font-face":true,"@keyframes":true,"@media":true,"@supports":true,"@document":true};this.CONDITIONAL_GROUP_RULE={"@media":true,"@supports":true,"@document":true}}e.exports.Beautifier=u},function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t){function n(e){var t=0;var n=-1;var r=[];var i=true;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length;n=r};this.get_character_count=function(){return t};this.is_empty=function(){return i};this.last=function(){if(!this._empty){return r[r.length-1]}else{return null}};this.push=function(e){r.push(e);t+=e.length;i=false};this.pop=function(){var e=null;if(!i){e=r.pop();t-=e.length;i=r.length===0}return e};this.remove_indent=function(){if(n>0){n-=1;t-=e.indent_length}};this.trim=function(){while(this.last()===" "){r.pop();t-=1}i=r.length===0};this.toString=function(){var t="";if(!this._empty){if(n>=0){t=e.indent_cache[n]}t+=r.join("")}return t}}function r(e,t){t=t||"";this.indent_cache=[t];this.baseIndentLength=t.length;this.indent_length=e.length;this.raw=false;var r=[];this.baseIndentString=t;this.indent_string=e;this.previous_line=null;this.current_line=null;this.space_before_token=false;this.add_outputline=function(){this.previous_line=this.current_line;this.current_line=new n(this);r.push(this.current_line)};this.add_outputline();this.get_line_number=function(){return r.length};this.add_new_line=function(e){if(this.get_line_number()===1&&this.just_added_newline()){return false}if(e||!this.just_added_newline()){if(!this.raw){this.add_outputline()}return true}return false};this.get_code=function(e,t){var n=r.join("\n").replace(/[\r\n\t ]+$/,"");if(e){n+="\n"}if(t!=="\n"){n=n.replace(/[\n]/g,t)}return n};this.set_indent=function(e){if(r.length>1){while(e>=this.indent_cache.length){this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)}this.current_line.set_indent(e);return true}this.current_line.set_indent(0);return false};this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++){this.add_outputline()}this.current_line.push(e.whitespace_before);this.current_line.push(e.text);this.space_before_token=false};this.add_token=function(e){this.add_space_before_token();this.current_line.push(e)};this.add_space_before_token=function(){if(this.space_before_token&&!this.just_added_newline()){this.current_line.push(" ")}this.space_before_token=false};this.remove_indent=function(e){var t=r.length;while(e<t){r[e].remove_indent();e++}};this.trim=function(n){n=n===undefined?false:n;this.current_line.trim(e,t);while(n&&r.length>1&&this.current_line.is_empty()){r.pop();this.current_line=r[r.length-1];this.current_line.trim()}this.previous_line=r.length>1?r[r.length-2]:null};this.just_added_newline=function(){return this.current_line.is_empty()};this.just_added_blankline=function(){if(this.just_added_newline()){if(r.length===1){return true}var e=r[r.length-2];return e.is_empty()}return false}}e.exports.Output=r},function(e,t,n){var r=n(0).Beautifier;function i(e,t){var n=new r(e,t);return n.beautify()}e.exports=i}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined([],function(){return{css_beautify:n}})}else{t.css_beautify=n}})()});t(Pf);var Of=n(function(e,t){(function(){var e=function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.i=function(e){return e};n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=3)}([function(e,t,n){var r=n(2).mergeOpts;var i=n(1);var a=i.lineBreak;var o=i.allLineBreaks;function s(e){return e.replace(/^\s+/g,"")}function u(e){return e.replace(/\s+$/g,"")}function l(e,t,n,i){e=e||"";var l,c,f,d,h,p,v,m,g,y,b,x,w,_,k,C,T,S,E,A,P;t=t||{};t=r(t,"html");if((t.wrap_line_length===undefined||parseInt(t.wrap_line_length,10)===0)&&(t.max_char!==undefined&&parseInt(t.max_char,10)!==0)){t.wrap_line_length=t.max_char}c=t.indent_inner_html===undefined?false:t.indent_inner_html;f=t.indent_body_inner_html===undefined?true:t.indent_body_inner_html;d=t.indent_head_inner_html===undefined?true:t.indent_head_inner_html;h=t.indent_size===undefined?4:parseInt(t.indent_size,10);p=t.indent_char===undefined?" ":t.indent_char;m=t.brace_style===undefined?"collapse":t.brace_style;v=parseInt(t.wrap_line_length,10)===0?32786:parseInt(t.wrap_line_length||250,10);g=t.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"];y=t.content_unformatted||["pre"];b=t.preserve_newlines===undefined?true:t.preserve_newlines;x=b?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0;w=t.indent_handlebars===undefined?false:t.indent_handlebars;_=t.wrap_attributes===undefined?"auto":t.wrap_attributes;k=isNaN(parseInt(t.wrap_attributes_indent_size,10))?h:parseInt(t.wrap_attributes_indent_size,10);C=_.substr(0,"force".length)==="force";T=_==="force-expand-multiline";S=_==="force-aligned";E=t.end_with_newline===undefined?false:t.end_with_newline;A=typeof t.extra_liners==="object"&&t.extra_liners?t.extra_liners.concat():typeof t.extra_liners==="string"?t.extra_liners.split(","):"head,body,/html".split(",");P=t.eol?t.eol:"auto";if(t.indent_with_tabs){p="\t";h=1}if(P==="auto"){P="\n";if(e&&a.test(e||"")){P=e.match(a)[0]}}P=P.replace(/\\r/,"\r").replace(/\\n/,"\n");e=e.replace(o,"\n");function O(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.newlines=0;this.indent_content=c;this.indent_body_inner_html=f;this.indent_head_inner_html=d;this.Utils={whitespace:"\n\r\t ".split(""),single_token:t.void_elements||["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:A,in_array:function(e,t){for(var n=0;n<t.length;n++){if(e===t[n]){return true}}return false}};this.is_whitespace=function(e){for(var t=0;t<e.length;t++){if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace)){return false}}return true};this.traverse_whitespace=function(){var e="";e=this.input.charAt(this.pos);if(this.Utils.in_array(e,this.Utils.whitespace)){this.newlines=0;while(this.Utils.in_array(e,this.Utils.whitespace)){if(b&&e==="\n"&&this.newlines<=x){this.newlines+=1}this.pos++;e=this.input.charAt(this.pos)}return true}return false};this.space_or_wrap=function(e){if(this.line_char_count>=this.wrap_line_length){this.print_newline(false,e);this.print_indentation(e);return true}else{this.line_char_count++;e.push(" ");return false}};this.get_content=function(){var e="",t=[],n=0;while(this.input.charAt(this.pos)!=="<"||n===2){if(this.pos>=this.input.length){return t.length?t.join(""):["","TK_EOF"]}if(n<2&&this.traverse_whitespace()){this.space_or_wrap(t);continue}e=this.input.charAt(this.pos);if(w){if(e==="{"){n+=1}else if(n<2){n=0}if(e==="}"&&n>0){if(n--===0){break}}var r=this.input.substr(this.pos,3);if(r==="{{#"||r==="{{/"){break}else if(r==="{{!"){return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"]}else if(this.input.substr(this.pos,2)==="{{"){if(this.get_tag(true)==="{{else}}"){break}}}this.pos++;this.line_char_count++;t.push(e)}return t.length?t.join(""):""};this.get_contents_to=function(e){if(this.pos===this.input.length){return["","TK_EOF"]}var t="";var n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input);var i=r?r.index:this.input.length;if(this.pos<i){t=this.input.substring(this.pos,i);this.pos=i}return t};this.record_tag=function(e){if(this.tags[e+"count"]){this.tags[e+"count"]++;this.tags[e+this.tags[e+"count"]]=this.indent_level}else{this.tags[e+"count"]=1;this.tags[e+this.tags[e+"count"]]=this.indent_level}this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent;this.tags.parent=e+this.tags[e+"count"]};this.retrieve_tag=function(e){if(this.tags[e+"count"]){var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t){break}t=this.tags[t+"parent"]}if(t){this.indent_level=this.tags[e+this.tags[e+"count"]];this.tags.parent=this.tags[t+"parent"]}delete this.tags[e+this.tags[e+"count"]+"parent"];delete this.tags[e+this.tags[e+"count"]];if(this.tags[e+"count"]===1){delete this.tags[e+"count"]}else{this.tags[e+"count"]--}}};this.indent_to_tag=function(e){if(!this.tags[e+"count"]){return}var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t){break}t=this.tags[t+"parent"]}if(t){this.indent_level=this.tags[e+this.tags[e+"count"]]}};this.get_tag=function(e){var t="",n=[],r="",i=false,a=true,o=false,s,u,l,c=this.pos,f=this.line_char_count,d=false,h;e=e!==undefined?e:false;do{if(this.pos>=this.input.length){if(e){this.pos=c;this.line_char_count=f}return n.length?n.join(""):["","TK_EOF"]}t=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(t,this.Utils.whitespace)){i=true;continue}if(t==="'"||t==='"'){t+=this.get_unformatted(t);i=true}if(t==="="){i=false}h=this.input.substr(this.pos-1);if(T&&o&&!d&&(t===">"||t==="/")){if(h.match(/^\/?\s*>/)){i=false;d=true;this.print_newline(false,n);this.print_indentation(n)}}if(n.length&&n[n.length-1]!=="="&&t!==">"&&i){var p=this.space_or_wrap(n);var v=p&&t!=="/"&&!C;i=false;if(C&&t!=="/"){var m=false;if(T&&a){var b=h.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/)!==null;m=!b}if(!a||m){this.print_newline(false,n);this.print_indentation(n);v=true}}if(v){o=true;var x=k;if(S){x=n.indexOf(" ")+1}for(var _=0;_<x;_++){n.push(" ")}}if(a){for(var E=0;E<n.length;E++){if(n[E]===" "){a=false;break}}}}if(w&&l==="<"){if(t+this.input.charAt(this.pos)==="{{"){t+=this.get_unformatted("}}");if(n.length&&n[n.length-1]!==" "&&n[n.length-1]!=="<"){t=" "+t}i=true}}if(t==="<"&&!l){s=this.pos-1;l="<"}if(w&&!l){if(n.length>=2&&n[n.length-1]==="{"&&n[n.length-2]==="{"){if(t==="#"||t==="/"||t==="!"){s=this.pos-3}else{s=this.pos-2}l="{"}}this.line_char_count++;n.push(t);if(n[1]&&(n[1]==="!"||n[1]==="?"||n[1]==="%")){n=[this.get_comment(s)];break}if(w&&n[1]&&n[1]==="{"&&n[2]&&n[2]==="!"){n=[this.get_comment(s)];break}if(w&&l==="{"&&n.length>2&&n[n.length-2]==="}"&&n[n.length-1]==="}"){break}}while(t!==">");var A=n.join("");var P;var O;if(A.indexOf(" ")!==-1){P=A.indexOf(" ")}else if(A.indexOf("\n")!==-1){P=A.indexOf("\n")}else if(A.charAt(0)==="{"){P=A.indexOf("}")}else{P=A.indexOf(">")}if(A.charAt(0)==="<"||!w){O=1}else{O=A.charAt(2)==="#"?3:2}var M=A.substring(O,P).toLowerCase();if(A.charAt(A.length-2)==="/"||this.Utils.in_array(M,this.Utils.single_token)){if(!e){this.tag_type="SINGLE"}}else if(w&&A.charAt(0)==="{"&&M==="else"){if(!e){this.indent_to_tag("if");this.tag_type="HANDLEBARS_ELSE";this.indent_content=true;this.traverse_whitespace()}}else if(this.is_unformatted(M,g)||this.is_unformatted(M,y)){r=this.get_unformatted("</"+M+">",A);n.push(r);this.tag_type="SINGLE"}else if(M==="script"&&(A.search("type")===-1||A.search("type")>-1&&A.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)){if(!e){this.record_tag(M);this.tag_type="SCRIPT"}}else if(M==="style"&&(A.search("type")===-1||A.search("type")>-1&&A.search("text/css")>-1)){if(!e){this.record_tag(M);this.tag_type="STYLE"}}else if(M.charAt(0)==="!"){if(!e){this.tag_type="SINGLE";this.traverse_whitespace()}}else if(!e){if(M.charAt(0)==="/"){this.retrieve_tag(M.substring(1));this.tag_type="END"}else{this.record_tag(M);if(M.toLowerCase()!=="html"){this.indent_content=true}this.tag_type="START"}if(this.traverse_whitespace()){this.space_or_wrap(n)}if(this.Utils.in_array(M,this.Utils.extra_liners)){this.print_newline(false,this.output);if(this.output.length&&this.output[this.output.length-2]!=="\n"){this.print_newline(true,this.output)}}}if(e){this.pos=c;this.line_char_count=f}return n.join("")};this.get_comment=function(e){var t="",n=">",r=false;this.pos=e;var i=this.input.charAt(this.pos);this.pos++;while(this.pos<=this.input.length){t+=i;if(t.charAt(t.length-1)===n.charAt(n.length-1)&&t.indexOf(n)!==-1){break}if(!r&&t.length<10){if(t.indexOf("<![if")===0){n="<![endif]>";r=true}else if(t.indexOf("<![cdata[")===0){n="]]>";r=true}else if(t.indexOf("<![")===0){n="]>";r=true}else if(t.indexOf("\x3c!--")===0){n="--\x3e";r=true}else if(t.indexOf("{{!--")===0){n="--}}";r=true}else if(t.indexOf("{{!")===0){if(t.length===5&&t.indexOf("{{!--")===-1){n="}}";r=true}}else if(t.indexOf("<?")===0){n="?>";r=true}else if(t.indexOf("<%")===0){n="%>";r=true}}i=this.input.charAt(this.pos);this.pos++}return t};function e(e){var t="";var n=function(n){var r=t+n.toLowerCase();t=r.length<=e.length?r:r.substr(r.length-e.length,e.length)};var r=function(){return t.indexOf(e)===-1};return{add:n,doesNotMatch:r}}this.get_unformatted=function(t,n){if(n&&n.toLowerCase().indexOf(t)!==-1){return""}var r="";var i="";var a=true;var o=e(t);do{if(this.pos>=this.input.length){return i}r=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(r,this.Utils.whitespace)){if(!a){this.line_char_count--;continue}if(r==="\n"||r==="\r"){i+="\n";this.line_char_count=0;continue}}i+=r;o.add(r);this.line_char_count++;a=true;if(w&&r==="{"&&i.length&&i.charAt(i.length-2)==="{"){i+=this.get_unformatted("}}")}}while(o.doesNotMatch());return i};this.get_token=function(){var e;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var t=this.last_token.substr(7);e=this.get_contents_to(t);if(typeof e!=="string"){return e}return[e,"TK_"+t]}if(this.current_mode==="CONTENT"){e=this.get_content();if(typeof e!=="string"){return e}else{return[e,"TK_CONTENT"]}}if(this.current_mode==="TAG"){e=this.get_tag();if(typeof e!=="string"){return e}else{var n="TK_TAG_"+this.tag_type;return[e,n]}}};this.get_full_indent=function(e){e=this.indent_level+e||0;if(e<1){return""}return Array(e+1).join(this.indent_string)};this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t)){return false}if(e.toLowerCase()!=="a"||!this.Utils.in_array("a",t)){return true}var n=this.get_tag(true);var r=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);if(!r||this.Utils.in_array(r[1],t)){return true}else{return false}};this.printer=function(e,t,n,r,i){this.input=e||"";this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n");this.output=[];this.indent_character=t;this.indent_string="";this.indent_size=n;this.brace_style=i;this.indent_level=0;this.wrap_line_length=r;this.line_char_count=0;for(var a=0;a<this.indent_size;a++){this.indent_string+=this.indent_character}this.print_newline=function(e,t){this.line_char_count=0;if(!t||!t.length){return}if(e||t[t.length-1]!=="\n"){if(t[t.length-1]!=="\n"){t[t.length-1]=u(t[t.length-1])}t.push("\n")}};this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++){e.push(this.indent_string);this.line_char_count+=this.indent_string.length}};this.print_token=function(e){if(this.is_whitespace(e)&&!this.output.length){return}if(e||e!==""){if(this.output.length&&this.output[this.output.length-1]==="\n"){this.print_indentation(this.output);e=s(e)}}this.print_token_raw(e)};this.print_token_raw=function(e){if(this.newlines>0){e=u(e)}if(e&&e!==""){if(e.length>1&&e.charAt(e.length-1)==="\n"){this.output.push(e.slice(0,-1));this.print_newline(false,this.output)}else{this.output.push(e)}}for(var t=0;t<this.newlines;t++){this.print_newline(t>0,this.output)}this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0){this.indent_level--}}};return this}this.beautify=function(){l=new O;l.printer(e,p,h,v,m);while(true){var r=l.get_token();l.token_text=r[0];l.token_type=r[1];if(l.token_type==="TK_EOF"){break}switch(l.token_type){case"TK_TAG_START":l.print_newline(false,l.output);l.print_token(l.token_text);if(l.indent_content){if((l.indent_body_inner_html||!l.token_text.match(/<body(?:.*)>/))&&(l.indent_head_inner_html||!l.token_text.match(/<head(?:.*)>/))){l.indent()}l.indent_content=false}l.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":l.print_newline(false,l.output);l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_END":if(l.last_token==="TK_CONTENT"&&l.last_text===""){var a=(l.token_text.match(/\w+/)||[])[0];var o=null;if(l.output.length){o=l.output[l.output.length-1].match(/(?:<|{{#)\s*(\w+)/)}if(o===null||o[1]!==a&&!l.Utils.in_array(o[1],g)){l.print_newline(false,l.output)}}l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var s=l.token_text.match(/^\s*<([a-z-]+)/i);if(!s||!l.Utils.in_array(s[1],g)){l.print_newline(false,l.output)}l.print_token(l.token_text);l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":var u=false;for(var c=l.output.length-1;c>=0;c--){if(l.output[c]==="\n"){break}else{if(l.output[c].match(/{{#if/)){u=true;break}}}if(!u){l.print_newline(false,l.output)}l.print_token(l.token_text);if(l.indent_content){l.indent();l.indent_content=false}l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":l.print_token(l.token_text);l.current_mode="TAG";break;case"TK_CONTENT":l.print_token(l.token_text);l.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(l.token_text!==""){l.print_newline(false,l.output);var f=l.token_text,d,y=1;if(l.token_type==="TK_SCRIPT"){d=typeof n==="function"&&n}else if(l.token_type==="TK_STYLE"){d=typeof i==="function"&&i}if(t.indent_scripts==="keep"){y=0}else if(t.indent_scripts==="separate"){y=-l.indent_level}var b=l.get_full_indent(y);if(d){var x=function(){this.eol="\n"};x.prototype=t;var w=new x;f=d(f.replace(/^\s*/,b),w)}else{var _=f.match(/^\s*/)[0];var k=_.match(/[^\n\r]*$/)[0].split(l.indent_string).length-1;var C=l.get_full_indent(y-k);f=f.replace(/^\s*/,b).replace(/\r\n|\r|\n/g,"\n"+C).replace(/\s+$/,"")}if(f){l.print_token_raw(f);l.print_newline(true,l.output)}}l.current_mode="TAG";break;default:if(l.token_text!==""){l.print_token(l.token_text)}break}l.last_token=l.token_type;l.last_text=l.token_text}var T=l.output.join("").replace(/[\r\n\t ]+$/,"");if(E){T+="\n"}if(P!=="\n"){T=T.replace(/[\n]/g,P)}return T}}e.exports.Beautifier=l},function(e,t){var n="¬™¬µ¬∫√Ä-√ñ√ò-√∂√∏-ÀÅÀÜ-ÀëÀ†-À§À¨ÀÆÕ∞-Õ¥Õ∂Õ∑Õ∫-ÕΩŒÜŒà-ŒäŒåŒé-Œ°Œ£-œµœ∑-“Å“ä-‘ß‘±-’ñ’ô’°-÷á◊ê-◊™◊∞-◊≤ÿ†-ŸäŸÆŸØŸ±-€ì€ï€•€¶€Æ€Ø€∫-€º€ø‹ê‹í-‹Ø›ç-ﬁ•ﬁ±ﬂä-ﬂ™ﬂ¥ﬂµﬂ∫‡†Ä-‡†ï‡†ö‡†§‡†®‡°Ä-‡°ò‡¢†‡¢¢-‡¢¨‡§Ñ-‡§π‡§Ω‡•ê‡•ò-‡•°‡•±-‡•∑‡•π-‡•ø‡¶Ö-‡¶å‡¶è‡¶ê‡¶ì-‡¶®‡¶™-‡¶∞‡¶≤‡¶∂-‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü-‡ß°‡ß∞‡ß±‡®Ö-‡®ä‡®è‡®ê‡®ì-‡®®‡®™-‡®∞‡®≤‡®≥‡®µ‡®∂‡®∏‡®π‡©ô-‡©ú‡©û‡©≤-‡©¥‡™Ö-‡™ç‡™è-‡™ë‡™ì-‡™®‡™™-‡™∞‡™≤‡™≥‡™µ-‡™π‡™Ω‡´ê‡´†‡´°‡¨Ö-‡¨å‡¨è‡¨ê‡¨ì-‡¨®‡¨™-‡¨∞‡¨≤‡¨≥‡¨µ-‡¨π‡¨Ω‡≠ú‡≠ù‡≠ü-‡≠°‡≠±‡ÆÉ‡ÆÖ-‡Æä‡Æé-‡Æê‡Æí-‡Æï‡Æô‡Æö‡Æú‡Æû‡Æü‡Æ£‡Æ§‡Æ®-‡Æ™‡ÆÆ-‡Æπ‡Øê‡∞Ö-‡∞å‡∞é-‡∞ê‡∞í-‡∞®‡∞™-‡∞≥‡∞µ-‡∞π‡∞Ω‡±ò‡±ô‡±†‡±°‡≤Ö-‡≤å‡≤é-‡≤ê‡≤í-‡≤®‡≤™-‡≤≥‡≤µ-‡≤π‡≤Ω‡≥û‡≥†‡≥°‡≥±‡≥≤‡¥Ö-‡¥å‡¥é-‡¥ê‡¥í-‡¥∫‡¥Ω‡µé‡µ†‡µ°‡µ∫-‡µø‡∂Ö-‡∂ñ‡∂ö-‡∂±‡∂≥-‡∂ª‡∂Ω‡∑Ä-‡∑Ü‡∏Å-‡∏∞‡∏≤‡∏≥‡πÄ-‡πÜ‡∫Å‡∫Ç‡∫Ñ‡∫á‡∫à‡∫ä‡∫ç‡∫î-‡∫ó‡∫ô-‡∫ü‡∫°-‡∫£‡∫•‡∫ß‡∫™‡∫´‡∫≠-‡∫∞‡∫≤‡∫≥‡∫Ω‡ªÄ-‡ªÑ‡ªÜ‡ªú-‡ªü‡ºÄ‡ΩÄ-‡Ωá‡Ωâ-‡Ω¨‡æà-‡æå·ÄÄ-·Ä™·Äø·Åê-·Åï·Åö-·Åù·Å°·Å•·Å¶·ÅÆ-·Å∞·Åµ-·ÇÅ·Çé·Ç†-·ÉÖ·Éá·Éç·Éê-·É∫·Éº-·âà·âä-·âç·âê-·âñ·âò·âö-·âù·â†-·äà·ää-·äç·äê-·ä∞·ä≤-·äµ·ä∏-·äæ·ãÄ·ãÇ-·ãÖ·ãà-·ãñ·ãò-·åê·åí-·åï·åò-·çö·éÄ-·éè·é†-·è¥·êÅ-·ô¨·ôØ-·ôø·öÅ-·öö·ö†-·õ™·õÆ-·õ∞·úÄ-·úå·úé-·úë·ú†-·ú±·ùÄ-·ùë·ù†-·ù¨·ùÆ-·ù∞·ûÄ-·û≥·üó·üú·††-·°∑·¢Ä-·¢®·¢™·¢∞-·£µ·§Ä-·§ú·•ê-·•≠·•∞-·•¥·¶Ä-·¶´·ßÅ-·ßá·®Ä-·®ñ·®†-·©î·™ß·¨Ö-·¨≥·≠Ö-·≠ã·ÆÉ-·Æ†·ÆÆ·ÆØ·Æ∫-·Ø•·∞Ä-·∞£·±ç-·±è·±ö-·±Ω·≥©-·≥¨·≥Æ-·≥±·≥µ·≥∂·¥Ä-·∂ø·∏Ä-·ºï·ºò-·ºù·º†-·ΩÖ·Ωà-·Ωç·Ωê-·Ωó·Ωô·Ωõ·Ωù·Ωü-·ΩΩ·æÄ-·æ¥·æ∂-·æº·ææ·øÇ-·øÑ·øÜ-·øå·øê-·øì·øñ-·øõ·ø†-·ø¨·ø≤-·ø¥·ø∂-·øº‚Å±‚Åø‚Çê-‚Çú‚ÑÇ‚Ñá‚Ñä-‚Ñì‚Ñï‚Ñô-‚Ñù‚Ñ§‚Ñ¶‚Ñ®‚Ñ™-‚Ñ≠‚ÑØ-‚Ñπ‚Ñº-‚Ñø‚ÖÖ-‚Öâ‚Öé‚Ö†-‚Üà‚∞Ä-‚∞Æ‚∞∞-‚±û‚±†-‚≥§‚≥´-‚≥Æ‚≥≤‚≥≥‚¥Ä-‚¥•‚¥ß‚¥≠‚¥∞-‚µß‚µØ‚∂Ä-‚∂ñ‚∂†-‚∂¶‚∂®-‚∂Æ‚∂∞-‚∂∂‚∂∏-‚∂æ‚∑Ä-‚∑Ü‚∑à-‚∑é‚∑ê-‚∑ñ‚∑ò-‚∑û‚∏Ø„ÄÖ-„Äá„Ä°-„Ä©„Ä±-„Äµ„Ä∏-„Äº„ÅÅ-„Çñ„Çù-„Çü„Ç°-„É∫„Éº-„Éø„ÑÖ-„Ñ≠„Ñ±-„Üé„Ü†-„Ü∫„á∞-„áø„êÄ-‰∂µ‰∏Ä-ÈøåÍÄÄ-ÍíåÍìê-ÍìΩÍîÄ-ÍòåÍòê-ÍòüÍò™Íò´ÍôÄ-ÍôÆÍôø-ÍöóÍö†-ÍõØÍúó-ÍúüÍú¢-ÍûàÍûã-ÍûéÍûê-ÍûìÍû†-Íû™Íü∏-Í†ÅÍ†É-Í†ÖÍ†á-Í†äÍ†å-Í†¢Í°Ä-Í°≥Í¢Ç-Í¢≥Í£≤-Í£∑Í£ªÍ§ä-Í§•Í§∞-Í•ÜÍ•†-Í•ºÍ¶Ñ-Í¶≤ÍßèÍ®Ä-Í®®Í©Ä-Í©ÇÍ©Ñ-Í©ãÍ©†-Í©∂Í©∫Í™Ä-Í™ØÍ™±Í™µÍ™∂Í™π-Í™ΩÍ´ÄÍ´ÇÍ´õ-Í´ùÍ´†-Í´™Í´≤-Í´¥Í¨Å-Í¨ÜÍ¨â-Í¨éÍ¨ë-Í¨ñÍ¨†-Í¨¶Í¨®-Í¨ÆÍØÄ-ÍØ¢Í∞Ä-Ìû£Ìû∞-ÌüÜÌüã-ÌüªÔ§Ä-Ô©≠Ô©∞-Ô´ôÔ¨Ä-Ô¨ÜÔ¨ì-Ô¨óÔ¨ùÔ¨ü-Ô¨®Ô¨™-Ô¨∂Ô¨∏-Ô¨ºÔ¨æÔ≠ÄÔ≠ÅÔ≠ÉÔ≠ÑÔ≠Ü-ÔÆ±ÔØì-Ô¥ΩÔµê-Ô∂èÔ∂í-Ô∑áÔ∑∞-Ô∑ªÔπ∞-Ôπ¥Ôπ∂-ÔªºÔº°-Ôº∫ÔΩÅ-ÔΩöÔΩ¶-ÔææÔøÇ-ÔøáÔøä-ÔøèÔøí-ÔøóÔøö-Ôøú";var r="ÃÄ-ÕØ“É-“á÷ë-÷Ω÷ø◊Å◊Ç◊Ñ◊Ö◊áÿê-ÿöÿ†-ŸâŸ≤-€ì€ß-€®€ª-€º‹∞-›ä‡†Ä-‡†î‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°Ä-‡°ó‡£§-‡£æ‡§Ä-‡§É‡§∫-‡§º‡§æ-‡•è‡•ë-‡•ó‡•¢-‡•£‡•¶-‡•Ø‡¶Å-‡¶É‡¶º‡¶æ-‡ßÑ‡ßá‡ßà‡ßó‡ßü-‡ß†‡®Å-‡®É‡®º‡®æ-‡©Ç‡©á‡©à‡©ã-‡©ç‡©ë‡©¶-‡©±‡©µ‡™Å-‡™É‡™º‡™æ-‡´Ö‡´á-‡´â‡´ã-‡´ç‡´¢-‡´£‡´¶-‡´Ø‡¨Å-‡¨É‡¨º‡¨æ-‡≠Ñ‡≠á‡≠à‡≠ã-‡≠ç‡≠ñ‡≠ó‡≠ü-‡≠†‡≠¶-‡≠Ø‡ÆÇ‡Ææ-‡ØÇ‡ØÜ-‡Øà‡Øä-‡Øç‡Øó‡Ø¶-‡ØØ‡∞Å-‡∞É‡±Ü-‡±à‡±ä-‡±ç‡±ï‡±ñ‡±¢-‡±£‡±¶-‡±Ø‡≤Ç‡≤É‡≤º‡≤æ-‡≥Ñ‡≥Ü-‡≥à‡≥ä-‡≥ç‡≥ï‡≥ñ‡≥¢-‡≥£‡≥¶-‡≥Ø‡¥Ç‡¥É‡µÜ-‡µà‡µó‡µ¢-‡µ£‡µ¶-‡µØ‡∂Ç‡∂É‡∑ä‡∑è-‡∑î‡∑ñ‡∑ò-‡∑ü‡∑≤‡∑≥‡∏¥-‡∏∫‡πÄ-‡πÖ‡πê-‡πô‡∫¥-‡∫π‡ªà-‡ªç‡ªê-‡ªô‡ºò‡ºô‡º†-‡º©‡ºµ‡º∑‡ºπ‡ΩÅ-‡Ωá‡Ω±-‡æÑ‡æÜ-‡æá‡æç-‡æó‡æô-‡æº‡øÜ·ÄÄ-·Ä©·ÅÄ-·Åâ·Åß-·Å≠·Å±-·Å¥·ÇÇ-·Çç·Çè-·Çù·çù-·çü·úé-·úê·ú†-·ú∞·ùÄ-·ùê·ù≤·ù≥·ûÄ-·û≤·üù·ü†-·ü©·†ã-·†ç·†ê-·†ô·§†-·§´·§∞-·§ª·•ë-·•≠·¶∞-·ßÄ·ßà-·ßâ·ßê-·ßô·®Ä-·®ï·®†-·©ì·©†-·©º·©ø-·™â·™ê-·™ô·≠Ü-·≠ã·≠ê-·≠ô·≠´-·≠≥·Æ∞-·Æπ·Ø¶-·Ø≥·∞Ä-·∞¢·±Ä-·±â·±õ-·±Ω·≥ê-·≥í·¥Ä-·∂æ·∏Å-·ºï‚Äå‚Äç‚Äø‚ÅÄ‚Åî‚Éê-‚Éú‚É°‚É•-‚É∞‚∂Å-‚∂ñ‚∑†-‚∑ø„Ä°-„Ä®„Çô„ÇöÍôÄ-Íô≠Íô¥-ÍôΩÍöüÍõ∞-Íõ±Íü∏-Í†ÄÍ†ÜÍ†ãÍ†£-Í†ßÍ¢Ä-Í¢ÅÍ¢¥-Í£ÑÍ£ê-Í£ôÍ£≥-Í£∑Í§Ä-Í§âÍ§¶-Í§≠Í§∞-Í•ÖÍ¶Ä-Í¶ÉÍ¶≥-ÍßÄÍ®Ä-Í®ßÍ©Ä-Í©ÅÍ©å-Í©çÍ©ê-Í©ôÍ©ªÍ´†-Í´©Í´≤-Í´≥ÍØÄ-ÍØ°ÍØ¨ÍØ≠ÍØ∞-ÍØπÔ¨†-Ô¨®Ô∏Ä-Ô∏èÔ∏†-Ô∏¶Ô∏≥Ô∏¥Ôπç-ÔπèÔºê-ÔºôÔºø";var i=new RegExp("["+n+"]");var a=new RegExp("["+n+r+"]");t.newline=/[\n\r\u2028\u2029]/;t.lineBreak=new RegExp("\r\n|"+t.newline.source);t.allLineBreaks=new RegExp(t.lineBreak.source,"g");t.isIdentifierStart=function(e){if(e<65){return e===36||e===64}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&i.test(String.fromCharCode(e))};t.isIdentifierChar=function(e){if(e<48){return e===36}if(e<58){return true}if(e<65){return false}if(e<91){return true}if(e<97){return e===95}if(e<123){return true}return e>=170&&a.test(String.fromCharCode(e))}},function(e,t){function n(e,t){var n={};var r;for(r in e){if(r!==t){n[r]=e[r]}}if(t in e){for(r in e[t]){n[r]=e[t][r]}}return n}e.exports.mergeOpts=n},function(e,t,n){var r=n(0).Beautifier;function i(e,t,n,i){var a=new r(e,t,n,i);return a.beautify()}e.exports=i}]);var n=e;if(typeof undefined==="function"&&undefined.amd){undefined(["require","./beautify","./beautify-css"],function(e){var t=e("./beautify");var r=e("./beautify-css");return{html_beautify:function(e,i){return n(e,i,t.js_beautify,r.css_beautify)}}})}else{var r=Af;var i=Pf;t.html_beautify=function(e,t){return n(e,t,r.js_beautify,i.css_beautify)}}})()});t(Of);var Mf=n(function(e){function t(e,t,n){var r=function(t,n){return e.js_beautify(t,n)};r.js=e.js_beautify;r.css=t.css_beautify;r.html=n.html_beautify;r.js_beautify=e.js_beautify;r.css_beautify=t.css_beautify;r.html_beautify=n.html_beautify;return r}if(typeof undefined==="function"&&undefined.amd){undefined(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(e,n,r){return t(e,n,r)})}else{(function(e){var n=Af;var r=Pf;var i=Of;e.exports=t(n,r,i)})(e)}});"use strict";var Nf;var Rf=function e(t){return typeof t==="string"&&Df().test(t)};function Df(){return Nf||(Nf=new RegExp('^[\\s\t\n\v\f\r ¬†·öÄ·†é‚ÄÄ‚ÄÅ‚ÄÇ‚ÄÉ‚ÄÑ‚ÄÖ‚ÄÜ‚Äá‚Äà‚Äâ‚Ää‚ÄØ‚Åü„ÄÄ\u2028\u2029\ufeff"]+$'))}"use strict";var Bf=function e(t){return typeof t!=="undefined"&&t!==null&&(typeof t==="object"||typeof t==="function")};"use strict";var Lf=function e(t){if(!Bf(t)){t={}}var n=arguments.length;for(var r=1;r<n;r++){var i=arguments[r];if(Bf(i)){If(t,i)}}return t};function If(e,t){for(var n in t){if(Ff(t,n)){e[n]=t[n]}}}function Ff(e,t){return Object.prototype.hasOwnProperty.call(e,t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
var jf=function(e){return e!=null&&(zf(e)||Hf(e)||!!e._isBuffer)};function zf(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function Hf(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&zf(e.slice(0,0))}var Uf=Object.prototype.toString;var Wf=function e(t){if(typeof t==="undefined"){return"undefined"}if(t===null){return"null"}if(t===true||t===false||t instanceof Boolean){return"boolean"}if(typeof t==="string"||t instanceof String){return"string"}if(typeof t==="number"||t instanceof Number){return"number"}if(typeof t==="function"||t instanceof Function){return"function"}if(typeof Array.isArray!=="undefined"&&Array.isArray(t)){return"array"}if(t instanceof RegExp){return"regexp"}if(t instanceof Date){return"date"}var n=Uf.call(t);if(n==="[object RegExp]"){return"regexp"}if(n==="[object Date]"){return"date"}if(n==="[object Arguments]"){return"arguments"}if(n==="[object Error]"){return"error"}if(jf(t)){return"buffer"}if(n==="[object Set]"){return"set"}if(n==="[object WeakSet]"){return"weakset"}if(n==="[object Map]"){return"map"}if(n==="[object WeakMap]"){return"weakmap"}if(n==="[object Symbol]"){return"symbol"}if(n==="[object Int8Array]"){return"int8array"}if(n==="[object Uint8Array]"){return"uint8array"}if(n==="[object Uint8ClampedArray]"){return"uint8clampedarray"}if(n==="[object Int16Array]"){return"int16array"}if(n==="[object Uint16Array]"){return"uint16array"}if(n==="[object Int32Array]"){return"int32array"}if(n==="[object Uint32Array]"){return"uint32array"}if(n==="[object Float32Array]"){return"float32array"}if(n==="[object Float64Array]"){return"float64array"}return"object"};"use strict";var Vf=function(e,t){var n=Lf({},t);var r=n.sep||"\n\n";var i=n.min;var a;if(typeof i==="number"&&i!==2){a=new RegExp("(\\r\\n|\\n|\\u2424) {"+i+",}")}if(typeof a==="undefined"){a=n.regex||/(\r\n|\n|\u2424){2,}/g}if(n.keepWhitespace!==true){e=e.split("\n").map(function(e){return Rf(e)?e.trim():e}).join("\n")}e=qf(e,n);return e.replace(a,r)};function qf(e,t){var n=t.trailingNewline;if(n===false){return e}switch(Wf(n)){case"string":e=e.replace(/\s+$/,t.trailingNewline);break;case"function":e=t.trailingNewline(e);break;case"undefined":case"boolean":default:{e=e.replace(/\s+$/,"\n");break}}return e}"use strict";var Kf={unformatted:["code","pre","em","strong","span"],indent_inner_html:true,indent_char:" ",indent_size:2,sep:"\n"};var Yf=function e(t,n){var r=Lf({},Kf,n);t=Mf.html(t,r);if(r.ocd===true){if(r.newlines){r.sep=r.newlines}return $f(t,r)}return t};function $f(e,t){return Vf(e,t).replace(/^\s+/g,"").replace(/\s+$/g,"\n").replace(/(\s*<!--)/g,"\n$1").replace(/>(\s*)(?=<!--\s*\/)/g,"> ")}var Gf=function(){this.getBeautifiedHtml=(()=>{const e=this.opts.data;if(!e){return""}return Yf(e)})};i.tag2("viron-prettyhtml","<pre>{getBeautifiedHtml()}</pre>","",'class="Prettyhtml"',function(e){this.external(Gf)});var Xf=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.normalizeValue=(e=>{if(!gf(e)){return null}return e});this.handleTap=(()=>{if(this.opts.isdisabled){return}this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(this.opts.val);this.opts.onchange(t,this.opts.id)});this.handleTextareaChange=(e=>{e.stopPropagation()});this.handleTextareaInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleTextareaFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleTextareaBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return Tf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-textarea",'<div class="Textarea__label" if="{!!opts.label}">{opts.label}</div> <form class="Textarea__form" ref="form" onsubmit="{handleFormSubmit}"> <virtual if="{!opts.ispreview}"> <textarea class="Textarea__input" ref="input" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleTextareaInput}" onchange="{handleTextareaChange}" onfocus="{handleTextareaFocus}" onblur="{handleTextareaBlur}"></textarea> </virtual> <virtual if="{opts.ispreview}"> <pre class="Textarea__input Textarea__input--break">{normalizeValue(opts.val)}</pre> </virtual> </form> <div class="Textarea__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Textarea {'Textarea--disabled': opts.isdisabled, 'Textarea--preview': opts.ispreview, 'Textarea--error': opts.iserror}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(Xf)});var Zf=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.isEditorMode=true;this.isPreviewMode=false;this.on("mount",()=>{this.update()}).on("update",()=>{});this.handleEditorTabTap=(()=>{this.isEditorMode=true;this.isPreviewMode=false;this.update()});this.handlePreviewTabTap=(()=>{this.isEditorMode=false;this.isPreviewMode=true;this.update()});this.handleEditorChange=(e=>{if(!this.opts.onchange){return}this.opts.onchange(e)});this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return Tf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-html",'<div class="Html__tabs"> <div class="Html__tab {\'Html__tab--selected\': isEditorMode}" onclick="{getClickHandler(\'handleEditorTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleEditorTabTap\')}">„Ç®„Éá„Ç£„Çø</div> <div class="Html__tab {\'Html__tab--selected\': isPreviewMode}" onclick="{getClickHandler(\'handlePreviewTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePreviewTabTap\')}">„Éó„É¨„Éì„É•„Éº</div> </div> <div class="Html__body"> <div class="Html__editor" if="{isEditorMode}"> <viron-textarea val="{opts.val}" isdisabled="{opts.isdisabled}" onchange="{handleEditorChange}" onfocus="{handleEditorFocus}" onblur="{handleEditorBlur}"></viron-textarea> </div> <div class="Html__preview" if="{isPreviewMode}"> <viron-prettyhtml data="{opts.val}"></viron-prettyhtml> </div> </div> <div class="Html__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Html {'Html--disabled': opts.isdisabled, 'Html--error': opts.haserror}\"",function(e){this.external(Zf)});var Jf=function(){const e=this.riotx.get();this.handleBlockerTap=(t=>{t.stopPropagation();if(!this.opts.ispreview){return}e.action("mediapreviews.add",{path:this.opts.val})})};i.tag2("viron-image",'<div class="Image__content" riot-style="background-image:url({opts.val});"></div> <div class="Image__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"",'class="Image"',function(e){this.external(Jf)});function Qf(e){return typeof e==="number"&&e!=e}var ed=Qf;function td(e){return!ul(e)||ed(Number(e))}var nd=td;var rd=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");const n=e=>{if(nd(e)){return false}return ul(e)};this.normalizeValue=(e=>{if(vf(e)){return e}if(xf(e)){return null}if(gf(e)){e=e.replace(/[^-^0-9]/g,"");if(!e.length){return null}e=Number(e);if(nd(e)){return null}}return e});this.handleTap=(()=>{this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}const t=this.normalizeValue(this.opts.val);this.opts.onchange(t,this.opts.id)});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(e=>{if(!this.opts.onchange){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(r=>{r.stopPropagation();if(this.isMobile||!t||!n(this.opts.val)){return}Promise.resolve().then(()=>{return Tf.copy(String(this.opts.val))}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-numberinput",'<div class="Numberinput__label" if="{!!opts.label}">{opts.label}</div> <form class="Numberinput__form" ref="form" onsubmit="{handleFormSubmit}"> <input class="Numberinput__input" ref="input" type="text" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleInputInput}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <div class="Numberinput__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Numberinput {'Numberinput--disabled': opts.isdisabled, 'Numberinput--preview': opts.ispreview, 'Numberinput--error': opts.iserror} Numberinput--{opts.theme}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(rd)});var id=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.isEditorMode=true;this.isPreviewMode=false;this.on("mount",()=>{this.update()}).on("update",()=>{});this.handleEditorTabTap=(()=>{this.isEditorMode=true;this.isPreviewMode=false;this.update()});this.handlePreviewTabTap=(()=>{this.isEditorMode=false;this.isPreviewMode=true;this.update()});this.handleEditorChange=(e=>{if(!this.opts.onchange){return}this.opts.onchange(e)});this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return Tf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-pug",'<div class="Pug__tabs"> <div class="Pug__tab {\'Pug__tab--selected\': isEditorMode}" onclick="{getClickHandler(\'handleEditorTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleEditorTabTap\')}">„Ç®„Éá„Ç£„Çø</div> <div class="Pug__tab {\'Pug__tab--selected\': isPreviewMode}" onclick="{getClickHandler(\'handlePreviewTabTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePreviewTabTap\')}">„Éó„É¨„Éì„É•„Éº</div> </div> <div class="Pug__body"> <div class="Pug__editor" if="{isEditorMode}"> <viron-textarea val="{opts.val}" isdisabled="{opts.isdisabled}" onchange="{handleEditorChange}" onfocus="{handleEditorFocus}" onblur="{handleEditorBlur}"></viron-textarea> </div> <div class="Pug__preview" if="{isPreviewMode}"> <viron-prettyhtml data="{opts.val}"></viron-prettyhtml> </div> </div> <div class="Pug__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Pug {'Pug--disabled': opts.isdisabled, 'Pug--error': opts.haserror}\"",function(e){this.external(id)});i.tag2("viron-icon-arrow-down",'<svg viewbox="-3523.999 14062.964 16.004 10.037"> <path d="M1736.94-16726.932l-5.963-5.963-1.433-1.432-.019-.023-.384-.385a.2.2,0,0,1,0-.281l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.84a.2.2,0,0,1,0,.277l-5.82,5.824,5.82,5.818a.205.205,0,0,1,0,.283l-1.84,1.84a.2.2,0,0,1-.141.061A.2.2,0,0,1,1736.94-16726.932Z" transform="translate(13218.876 15802.083) rotate(-90)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowDown {opts.class}"',function(e){});var ad=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");const n=()=>{const e=this.refs.select.selectedIndex;const t=[];fu(this.opts.options,(n,r)=>{t.push(to({},n,{isSelected:r===e}))});return t};this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(n())});this.handleSelectInput=(()=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}this.opts.onchange(n())});this.handleSelectChange=(e=>{e.stopPropagation()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t){return}const r=qu(this.opts.options||[],{isSelected:true});const i=r&&r.value;if(xf(i)||vf(i)){return}Promise.resolve().then(()=>{return Tf.copy(String(i))}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-select",'<form class="Select__form" onsubmit="{handleFormSubmit}"> <select class="Select__select" ref="select" disabled="{opts.isdisabled}" oninput="{handleSelectInput}" onchange="{handleSelectChange}"> <option class="Select__option" each="{option in opts.options}" selected="{option.isSelected}">{option.label}</option> </select> <viron-icon-arrow-down class="Select__icon" if="{!opts.ispreview}"></viron-icon-arrow-down> </form> <div class="Select__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Select {'Select--disabled': opts.isdisabled, 'Select--preview': opts.ispreview, 'Select--error': opts.iserror}\"",function(e){this.external(ad)});var od=function(){const e=this.riotx.get();let t=true;this.isMobile=e.getter("layout.isMobile");this.normalizeValue=(e=>{if(!gf(e)){return null}return e});this.handleTap=(()=>{if(this.opts.isdisabled){return}this.refs.input.focus()});this.handleFormSubmit=(e=>{e.preventDefault();if(!this.opts.onchange){return}const t=this.normalizeValue(this.opts.val);this.opts.onchange(t,this.opts.id)});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(e=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}const t=this.normalizeValue(e.target.value);this.opts.onchange(t,this.opts.id)});this.handleInputFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleInputBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(n=>{n.stopPropagation();if(this.isMobile||!t||!this.opts.val){return}Promise.resolve().then(()=>{return Tf.copy(this.opts.val)}).then(()=>e.action("toasts.add",{message:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü„ÄÇ"})).catch(()=>{t=false;e.action("toasts.add",{type:"error",message:"„Åî‰ΩøÁî®‰∏≠„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å∏„Ç≥„Éî„ÉºÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"})})})};i.tag2("viron-textinput",'<div class="Textinput__label" if="{!!opts.label}">{opts.label}</div> <form class="Textinput__form" ref="form" onsubmit="{handleFormSubmit}"> <input class="Textinput__input" ref="input" type="{opts.type || \'text\'}" riot-value="{normalizeValue(opts.val)}" placeholder="{opts.placeholder}" disabled="{!!opts.isdisabled}" oninput="{handleInputInput}" onchange="{handleInputChange}" onfocus="{handleInputFocus}" onblur="{handleInputBlur}"> </form> <div class="Textinput__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Textinput {'Textinput--disabled': opts.isdisabled, 'Textinput--preview': opts.ispreview, 'Textinput--error': opts.iserror} Textinput--{opts.theme}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(od)});i.tag2("viron-icon-file-add",'<svg viewbox="2937 22889 57.219 64.002"> <g transform="translate(2863 22751)"> <g transform="translate(-347 -90)"> <g transform="translate(421 228)"> <path d="M6.449,56.554a2.5,2.5,0,0,1-2.5-2.5V6.449a2.5,2.5,0,0,1,2.5-2.482l22.825-.02v8.442a4.476,4.476,0,0,0,4.476,4.476l8.259-.02.041,19.509a13.014,13.014,0,0,1,1.79-.122,15.508,15.508,0,0,1,2.2.163V15.237L30.739,0H6.449A6.451,6.451,0,0,0,0,6.449V54.072a6.451,6.451,0,0,0,6.449,6.449H33.363a14.909,14.909,0,0,1-2.645-3.947H6.449Z"></path> </g> <g transform="translate(169.449 90.915)"> <g transform="translate(282 174.316)"> <path d="M-4190.615-7823.229A13.4,13.4,0,0,1-4204-7836.616,13.4,13.4,0,0,1-4190.615-7850a13.4,13.4,0,0,1,13.385,13.385A13.4,13.4,0,0,1-4190.615-7823.229Zm-6.292-14.64a.4.4,0,0,0-.4.4v1.71a.4.4,0,0,0,.4.4h5.038v5.038a.4.4,0,0,0,.4.4h1.71a.4.4,0,0,0,.4-.4v-5.038h5.038a.4.4,0,0,0,.4-.4v-1.71a.4.4,0,0,0-.4-.4h-5.038v-5.04a.4.4,0,0,0-.4-.4h-1.71a.4.4,0,0,0-.4.4v5.04Z" transform="translate(4204 7850)"></path> </g> </g> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFileAdd {opts.class}"',function(e){});i.tag2("viron-icon-file-csv",'<svg viewbox="3040.477 22887.934 49.316 60.576"> <path d="M42.872,60.575H9.675a6.454,6.454,0,0,1-6.448-6.447V51.24H2.6a2.6,2.6,0,0,1-2.6-2.6V32.886a2.6,2.6,0,0,1,2.6-2.6h.629V6.448A6.455,6.455,0,0,1,9.675,0H34L49.316,15.259v38.87A6.453,6.453,0,0,1,42.872,60.575ZM7.177,51.239v2.89a2.5,2.5,0,0,0,2.5,2.5h33.2a2.5,2.5,0,0,0,2.495-2.5l-.093-37.306L37,16.846a4.476,4.476,0,0,1-4.471-4.47V3.929L9.675,3.952a2.5,2.5,0,0,0-2.5,2.5v23.84H38.124a2.6,2.6,0,0,1,2.6,2.6V48.641a2.6,2.6,0,0,1-2.6,2.6H7.177Zm10.262-6.831a.6.6,0,0,0-.3.084.521.521,0,0,0-.28.48,1.662,1.662,0,0,0,.248.872,1.247,1.247,0,0,0,.664.553,6.509,6.509,0,0,0,2.256.352c2.749,0,4.144-1.131,4.144-3.361a3.17,3.17,0,0,0-.84-2.272,7.269,7.269,0,0,0-3-1.568c-1-.33-1.5-.884-1.5-1.648a1.3,1.3,0,0,1,.417-1.024,1.788,1.788,0,0,1,1.216-.368,6.72,6.72,0,0,1,2.384.448.691.691,0,0,0,.257.053.646.646,0,0,0,.35-.108.586.586,0,0,0,.288-.52,1.472,1.472,0,0,0-.256-.841,1.168,1.168,0,0,0-.672-.488,8.977,8.977,0,0,0-2.512-.3,4.058,4.058,0,0,0-2.736.849,2.907,2.907,0,0,0-.976,2.3,3.124,3.124,0,0,0,.856,2.208,6.7,6.7,0,0,0,2.776,1.552,3.284,3.284,0,0,1,1.3.728A1.453,1.453,0,0,1,21.9,43.42c0,1.019-.684,1.536-2.032,1.536a5.049,5.049,0,0,1-2.16-.481A.606.606,0,0,0,17.439,44.408Zm-5.713-9.66a5.161,5.161,0,0,0-4.008,1.577,6.368,6.368,0,0,0-1.432,4.424,6.228,6.228,0,0,0,1.48,4.44,5.282,5.282,0,0,0,4.008,1.561,11.7,11.7,0,0,0,2-.144,1.013,1.013,0,0,0,.671-.4,1.237,1.237,0,0,0,.256-.768.659.659,0,0,0-.288-.56.758.758,0,0,0-.449-.15.851.851,0,0,0-.191.023,7.671,7.671,0,0,1-1.76.208,3.134,3.134,0,0,1-2.5-1.1,4.656,4.656,0,0,1-.944-3.1,4.758,4.758,0,0,1,.9-3.1,3.075,3.075,0,0,1,2.488-1.088,7.264,7.264,0,0,1,1.728.193.865.865,0,0,0,.19.022.724.724,0,0,0,.442-.151.665.665,0,0,0,.28-.56,1.194,1.194,0,0,0-.272-.768,1.077,1.077,0,0,0-.688-.4A12.221,12.221,0,0,0,11.726,34.747Zm14.4.16a.857.857,0,0,0-.816,1.136l3.136,9.409a1.556,1.556,0,0,0,.6.823,1.665,1.665,0,0,0,.984.312,1.633,1.633,0,0,0,.976-.312,1.66,1.66,0,0,0,.608-.823l3.136-9.44a.838.838,0,0,0-.112-.76.778.778,0,0,0-.672-.344,1.559,1.559,0,0,0-1.488,1.12L30.062,44.38l-2.416-8.32a1.582,1.582,0,0,0-1.52-1.152Z" transform="translate(3040.477 22887.934)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconFileCSV {opts.class}"',function(e){});var sd=function(){this.inputId=`Uploader__input${this._riot_id}`;this.file=null;this.fileName=null;this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=false;this.blobURL=this.opts.initialbloburl||null;this.isDragWatching=false;this.isDroppable=false;this.reset=(()=>{window.URL.revokeObjectURL(this.blobURL);this.refs.form.reset();this.file=null;this.fileName=null;this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=false;this.blobURL=this.opts.initialbloburl||null;this.opts.onchange&&this.opts.onchange(this.file,this.blobURL)});this.handleChange=(e=>{e.stopPropagation()});this.handleFileChange=((e,t)=>{if(!this.opts.onchange){return}if(this.opts.isdisabled){return}let n;if(t){n=e.dataTransfer.files}else{n=e.target.files}if(!n.length){this.reset();return}const r=n[0];this.file=r;this.fileName=r.name;if(r.type.indexOf("image/")===0){this.isTypeOfImage=true;this.isTypeOfCsv=false;this.isTypeOfOther=false}else if(r.type.indexOf("text/csv")===0){this.isTypeOfImage=false;this.isTypeOfCsv=true;this.isTypeOfOther=false}else{this.isTypeOfImage=false;this.isTypeOfCsv=false;this.isTypeOfOther=true}this.blobURL=window.URL.createObjectURL(r);this.opts.onchange(this.file,this.blobURL)});this.handleHandlerDragEnter=(e=>{e.preventDefault();if(this.opts.isdisabled){return}this.isDragWatching=true;this.update()});this.handleHandlerDragOver=(e=>{e.preventDefault()});this.handleHandlerDragLeave=(()=>{if(this.opts.isdisabled){return}this.isDragWatching=false;this.update()});this.handleHandlerDrop=(e=>{e.preventDefault();if(this.opts.isdisabled){return}this.isDragWatching=false;this.update();this.handleFileChange(e,true)});this.handleResetButtonTap=(()=>{if(this.opts.isdisabled){return}this.reset()});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-uploader",'<form class="Uploader__form" ref="form"> <input class="Uploader__input" type="file" id="{inputId}" accept="{opts.accept || \'*\'}" disabled="{opts.isdisabled}" onchange="{handleFileChange}"> <label class="Uploader__label" for="{inputId}"> <virtual if="{!file || !blobURL}"> <div class="Uploader__icon"> <viron-icon-file-add></viron-icon-file-add> </div> </virtual> <virtual if="{!!file &amp;&amp; !!blobURL}"> <virtual if="{isTypeOfImage}"> <div class="Uploader__image" riot-style="background-image:url({blobURL});"></div> </virtual> <virtual if="{isTypeOfCsv}"> <div class="Uploader__icon"> <viron-icon-file-csv></viron-icon-file-csv> </div> </virtual> <virtual if="{isTypeOfOther}"> <div class="Uploader__icon"> <viron-icon-file></viron-icon-file> </div> </virtual> </virtual> <div class="Uploader__dragHandler" ondragenter="{handleHandlerDragEnter}" ondragover="{handleHandlerDragOver}" ondragleave="{handleHandlerDragLeave}" ondrop="{handleHandlerDrop}"></div> </label> </form> <div class="Uploader__reset" if="{!!file}" onclick="{getClickHandler(\'handleResetButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleResetButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="Uploader__fileName" if="{!!fileName}">{fileName}</div> <div class="Uploader__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Uploader {'Uploader--dragWatching' : isDragWatching, 'Uploader--disabled': opts.isdisabled, 'Uploader--error': opts.haserror}\" onchange=\"{handleChange}\"",function(e){this.external(sd)});function ud(){return ud.get()}ud.get=typeof Date.now==="function"?Date.now:function(){return+new Date};var ld=ud;function cd(e,t){var n,r,i,a,o,s=0;function u(){s=ld();r=null;i=e.apply(n,a)}function l(){n=this;a=arguments;o=t-(ld()-s);if(o<=0){clearTimeout(r);u()}else if(!r){r=setTimeout(u,o)}return i}l.cancel=function(){clearTimeout(r)};return l}var fd=cd;var dd=n(function(e){(function(){var t={};var n=function(e){var n=t[e];var r=n.deps;var a=n.defn;var o=r.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=i(r[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+e+"] returned undefined"}n.instance=l};var r=function(e,n,r){if(typeof e!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+e}else if(r===undefined){throw"no definition function for "+e}t[e]={deps:n,defn:r,instance:undefined}};var i=function(e){var r=t[e];if(r===undefined){throw"module ["+e+"] was undefined"}else if(r.instance===undefined){n(e)}return r.instance};var a=r;var o=function(e,t){a(e,[],function(){return t})};o("global!Array",Array);o("global!Error",Error);a("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){};var r=function(e){return function(){return e()}};var i=function(e,t){return function(){return e(t.apply(null,arguments))}};var a=function(e){return function(){return e}};var o=function(e){return e};var s=function(e,t){return e===t};var u=function(t){var n=new e(arguments.length-1);for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}return function(){var r=new e(arguments.length);for(var i=0;i<r.length;i++){r[i]=arguments[i]}var a=n.concat(r);return t.apply(null,a)}};var l=function(e){return function(){return!e.apply(null,arguments)}};var c=function(e){return function(){throw new t(e)}};var f=function(e){return e()};var d=function(e){e()};var h=a(false);var p=a(true);return{noop:n,noarg:r,compose:i,constant:a,identity:o,tripleEquals:s,curry:u,not:l,die:c,apply:f,call:d,never:h,always:p}});o("global!window",window);o("global!Object",Object);a("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never;var r=e.always;var i=function(){return a};var a=function(){var a=function(e){return e.isNone()};var o=function(e){return e()};var s=function(e){return e};var u=function(){};var l={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:s,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:s,orThunk:o,map:i,ap:i,each:u,bind:i,flatten:i,exists:n,forall:r,filter:i,equals:a,equals_:a,toArray:function(){return[]},toString:e.constant("none()")};if(t.freeze){t.freeze(l)}return l}();var o=function(e){var t=function(){return e};var s=function(){return c};var u=function(t){return o(t(e))};var l=function(t){return t(e)};var c={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:s,orThunk:s,map:u,ap:function(t){return t.fold(i,function(t){return o(t(e))})},each:function(t){t(e)},bind:l,flatten:t,exists:l,forall:l,filter:function(t){return t(e)?c:a},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return c};var s=function(e){return e===null||e===undefined?a:o(e)};return{some:o,none:i,from:s}});o("global!String",String);a("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var i=function(){var e=t.prototype.indexOf;var n=function(t,n){return e.call(t,n)};var r=function(e,t){return x(e,t)};return e===undefined?r:n}();var a=function(t,n){var r=i(t,n);return r===-1?e.none():e.some(r)};var o=function(e,t){return i(e,t)>-1};var s=function(e,t){return b(e,t).isSome()};var u=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var l=function(e,t){var n=[];for(var r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n};var c=function(e,n){var r=e.length;var i=new t(r);for(var a=0;a<r;a++){var o=e[a];i[a]=n(o,a,e)}return i};var f=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n,e)}};var d=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n,e)}};var h=function(e,t){var n=[];var r=[];for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=t(o,i,e)?n:r;s.push(o)}return{pass:n,fail:r}};var p=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r,e)){n.push(a)}}return n};var v=function(e,t){if(e.length===0){return[]}else{var n=t(e[0]);var r=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];var u=t(s);if(u!==n){r.push(i);i=[]}n=u;i.push(s)}if(i.length!==0){r.push(i)}return r}};var m=function(e,t,n){d(e,function(e){n=t(n,e)});return n};var g=function(e,t,n){f(e,function(e){n=t(n,e)});return n};var y=function(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];if(n(a,r,t)){return e.some(a)}}return e.none()};var b=function(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];if(n(a,r,t)){return e.some(r)}}return e.none()};var x=function(e,t){for(var n=0,r=e.length;n<r;++n){if(e[n]===t){return n}}return-1};var w=t.prototype.push;var _=function(e){var r=[];for(var i=0,a=e.length;i<a;++i){if(!t.prototype.isPrototypeOf(e[i])){throw new n("Arr.flatten item "+i+" was not an array, input: "+e)}w.apply(r,e[i])}return r};var k=function(e,t){var n=c(e,t);return _(n)};var C=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n,e)!==true){return false}}return true};var T=function(e,t){return e.length===t.length&&C(e,function(e,n){return e===t[n]})};var S=t.prototype.slice;var E=function(e){var t=S.call(e,0);t.reverse();return t};var A=function(e,t){return p(e,function(e){return!o(t,e)})};var P=function(e,t){var n={};for(var i=0,a=e.length;i<a;i++){var o=e[i];n[r(o)]=t(o,i)}return n};var O=function(e){return[e]};var M=function(e,t){var n=S.call(e,0);n.sort(t);return n};var N=function(t){return t.length===0?e.none():e.some(t[0])};var R=function(t){return t.length===0?e.none():e.some(t[t.length-1])};return{map:c,each:f,eachr:d,partition:h,filter:p,groupBy:v,indexOf:a,foldr:m,foldl:g,find:y,findIndex:b,flatten:_,bind:k,forall:C,exists:s,contains:o,equal:T,reverse:E,chunk:l,difference:A,mapToObject:P,pure:O,sort:M,range:u,head:N,last:R}});o("global!document",document);a("ephox.katamari.api.Global",[],function(){var e=typeof window!=="undefined"?window:Function("return this;")();return e});a("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){var r=n!==undefined?n:e;for(var i=0;i<t.length&&r!==undefined&&r!==null;++i){r=r[t[i]]}return r};var n=function(e,n){var r=e.split(".");return t(r,n)};var r=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var i=function(t,n){var i=n!==undefined?n:e;for(var a=0;a<t.length;++a){i=r(i,t[a])}return i};var a=function(e,t){var n=e.split(".");return i(n,t)};return{path:t,resolve:n,forge:i,namespace:a}});a("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};var n=function(e,n){var r=t(e,n);if(r===undefined){throw e+" not available on this browser"}return r};return{getOrDie:n}});a("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};var n=function(e){return t().createObjectURL(e)};var r=function(e){t().revokeObjectURL(e)};return{createObjectURL:n,revokeObjectURL:r}});o("global!matchMedia",matchMedia);o("global!navigator",navigator);a("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(e,t,n,r,i){var a=r,o=a.userAgent;var s,u,l,c,f,d,h,p,v,m,g,y,b;var x=function(e){return"matchMedia"in i?n(e).matches:false};s=i.opera&&i.opera.buildNumber;v=/Android/.test(o);u=/WebKit/.test(o);l=!u&&!s&&/MSIE/gi.test(o)&&/Explorer/gi.test(a.appName);l=l&&/MSIE (\w+)\./.exec(o)[1];c=o.indexOf("Trident/")!=-1&&(o.indexOf("rv:")!=-1||a.appName.indexOf("Netscape")!=-1)?11:false;f=o.indexOf("Edge/")!=-1&&!l&&!c?12:false;l=l||c||f;d=!u&&!c&&/Gecko/.test(o);h=o.indexOf("Mac")!=-1;p=/(iPad|iPhone)/.test(o);m="FormData"in i&&"FileReader"in i&&"URL"in i&&!!e.createObjectURL;g=x("only screen and (max-device-width: 480px)")&&(v||p);y=x("only screen and (min-width: 800px)")&&(v||p);b=o.indexOf("Windows Phone")!=-1;if(f){u=false}var w=!p||m||o.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:s,webkit:u,ie:l,gecko:d,mac:h,iOS:p,android:v,contentEditable:w,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:l!=8,range:i.getSelection&&"Range"in i,documentMode:l&&!f?t.documentMode||7:10,fileApi:m,ceFalse:l===false||l>8,canHaveCSP:l===false||l>11,desktop:!g&&!y,windowsPhone:b}});o("global!clearInterval",clearInterval);o("global!clearTimeout",clearTimeout);o("global!setInterval",setInterval);o("global!setTimeout",setTimeout);a("tinymce.core.util.Promise",[],function(){if(window.Promise){return window.Promise}var e=r.immediateFn||typeof setImmediate==="function"&&setImmediate||function(e){setTimeout(e,1)};function t(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function r(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=null;this._value=null;this._deferreds=[];l(e,t(a,this),t(o,this))}function i(t){var n=this;if(this._state===null){this._deferreds.push(t);return}e(function(){var e=n._state?t.onFulfilled:t.onRejected;if(e===null){(n._state?t.resolve:t.reject)(n._value);return}var r;try{r=e(n._value)}catch(e){t.reject(e);return}t.resolve(r)})}function a(e){try{if(e===this){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&(typeof e==="object"||typeof e==="function")){var n=e.then;if(typeof n==="function"){l(t(n,e),t(a,this),t(o,this));return}}this._state=true;this._value=e;s.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=false;this._value=e;s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++){i.call(this,this._deferreds[e])}this._deferreds=null}function u(e,t,n,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r}function l(e,t,n){var r=false;try{e(function(e){if(r){return}r=true;t(e)},function(e){if(r){return}r=true;n(e)})}catch(e){if(r){return}r=true;n(e)}}r.prototype["catch"]=function(e){return this.then(null,e)};r.prototype.then=function(e,t){var n=this;return new r(function(r,a){i.call(n,new u(e,t,r,a))})};r.all=function(){var e=Array.prototype.slice.call(arguments.length===1&&n(arguments[0])?arguments[0]:arguments);return new r(function(t,n){if(e.length===0){return t([])}var r=e.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}e[a]=o;if(--r===0){t(e)}}catch(e){n(e)}}for(var a=0;a<e.length;a++){i(a,e[a])}})};r.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===r){return e}return new r(function(t){t(e)})};r.reject=function(e){return new r(function(t,n){n(e)})};r.race=function(e){return new r(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};return r});a("tinymce.core.util.Delay",["global!clearInterval","global!clearTimeout","global!document","global!setInterval","global!setTimeout","global!window","tinymce.core.util.Promise"],function(e,t,n,r,i,a,o){var s;var u=function(e,t){var n,r=a.requestAnimationFrame,i=["ms","moz","webkit"];var o=function(e){a.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++){r=a[i[n]+"RequestAnimationFrame"]}if(!r){r=o}r(e,t)};var l=function(e,t){if(typeof t!="number"){t=0}return i(e,t)};var c=function(e,t){if(typeof t!="number"){t=1}return r(e,t)};var f=function(e){return t(e)};var d=function(t){return e(t)};var h=function(e,n){var r,i;i=function(){var i=arguments;t(r);r=l(function(){e.apply(this,i)},n)};i.stop=function(){t(r)};return i};return{requestAnimationFrame:function(e,t){if(s){s.then(e);return}s=new o(function(e){if(!t){t=n.body}u(e,t)}).then(e)},setTimeout:l,setInterval:c,setEditorTimeout:function(e,t,n){return l(function(){if(!e.removed){t()}},n)},setEditorInterval:function(t,n,r){var i;i=c(function(){if(!t.removed){n()}else{e(i)}},r);return i},debounce:h,throttle:h,clearInterval:d,clearTimeout:f}});a("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r){"use strict";var i="mce-data-";var a=/^(?:mouse|contextmenu)|click/;var o={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};var s=function(e){return e.isDefaultPrevented===l||e.isDefaultPrevented===u};var u=function(){return false};var l=function(){return true};var c=function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r||false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}};var f=function(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r||false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}};var d=function(e,t){var n,r=t;n=e.path;if(n&&n.length>0){r=n[0]}if(e.deepPath){n=e.deepPath();if(n&&n.length>0){r=n[0]}}return r};var h=function(t,r){var i,c=r||{},f;for(i in t){if(!o[i]){c[i]=t[i]}}if(!c.target){c.target=c.srcElement||e}if(n.experimentalShadowDom){c.target=d(t,c.target)}if(t&&a.test(t.type)&&t.pageX===f&&t.clientX!==f){var h=c.target.ownerDocument||e;var p=h.documentElement;var v=h.body;c.pageX=t.clientX+(p&&p.scrollLeft||v&&v.scrollLeft||0)-(p&&p.clientLeft||v&&v.clientLeft||0);c.pageY=t.clientY+(p&&p.scrollTop||v&&v.scrollTop||0)-(p&&p.clientTop||v&&v.clientTop||0)}c.preventDefault=function(){c.isDefaultPrevented=l;if(t){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}}};c.stopPropagation=function(){c.isPropagationStopped=l;if(t){if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}}};c.stopImmediatePropagation=function(){c.isImmediatePropagationStopped=l;c.stopPropagation()};if(s(c)===false){c.isDefaultPrevented=u;c.isPropagationStopped=u;c.isImmediatePropagationStopped=u}if(typeof c.metaKey=="undefined"){c.metaKey=false}return c};var p=function(e,t,i){var a=e.document,o={type:"ready"};if(i.domLoaded){t(o);return}var s=function(){return a.readyState==="complete"||a.readyState==="interactive"&&a.body};var u=function(){if(!i.domLoaded){i.domLoaded=true;t(o)}};var l=function(){if(s()){f(a,"readystatechange",l);u()}};var d=function(){try{a.documentElement.doScroll("left")}catch(e){r.setTimeout(d);return}u()};if(a.addEventListener&&!(n.ie&&n.ie<11)){if(s()){u()}else{c(e,"DOMContentLoaded",u)}}else{c(a,"readystatechange",l);if(a.documentElement.doScroll&&e.self===e.top){d()}}c(e,"load",u)};var v=function(){var n=this,r={},a,o,s,u,l;o=i+(+new Date).toString(32);u="onmouseenter"in e.documentElement;s="onfocusin"in e.documentElement;l={mouseenter:"mouseover",mouseleave:"mouseout"};a=1;n.domLoaded=false;n.events=r;var d=function(e,t){var n,i,a,o,s=r[t];n=s&&s[e.type];if(n){for(i=0,a=n.length;i<a;i++){o=n[i];if(o&&o.func.call(o.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}};n.bind=function(e,i,f,v){var m,g,y,b,x,w,_,k=t;var C=function(e){d(h(e||k.event),m)};if(!e||e.nodeType===3||e.nodeType===8){return}if(!e[o]){m=a++;e[o]=m;r[m]={}}else{m=e[o]}v=v||e;i=i.split(" ");y=i.length;while(y--){b=i[y];w=C;x=_=false;if(b==="DOMContentLoaded"){b="ready"}if(n.domLoaded&&b==="ready"&&e.readyState=="complete"){f.call(v,h({type:b}));continue}if(!u){x=l[b];if(x){w=function(e){var t,n;t=e.currentTarget;n=e.relatedTarget;if(n&&t.contains){n=t.contains(n)}else{while(n&&n!==t){n=n.parentNode}}if(!n){e=h(e||k.event);e.type=e.type==="mouseout"?"mouseleave":"mouseenter";e.target=t;d(e,m)}}}}if(!s&&(b==="focusin"||b==="focusout")){_=true;x=b==="focusin"?"focus":"blur";w=function(e){e=h(e||k.event);e.type=e.type==="focus"?"focusin":"focusout";d(e,m)}}g=r[m][b];if(!g){r[m][b]=g=[{func:f,scope:v}];g.fakeName=x;g.capture=_;g.nativeHandler=w;if(b==="ready"){p(e,w,n)}else{c(e,x||b,w,_)}}else{if(b==="ready"&&n.domLoaded){f({type:b})}else{g.push({func:f,scope:v})}}}e=g=0;return f};n.unbind=function(e,t,i){var a,s,u,l,c,d;if(!e||e.nodeType===3||e.nodeType===8){return n}a=e[o];if(a){d=r[a];if(t){t=t.split(" ");u=t.length;while(u--){c=t[u];s=d[c];if(s){if(i){l=s.length;while(l--){if(s[l].func===i){var h=s.nativeHandler;var p=s.fakeName,v=s.capture;s=s.slice(0,l).concat(s.slice(l+1));s.nativeHandler=h;s.fakeName=p;s.capture=v;d[c]=s}}}if(!i||s.length===0){delete d[c];f(e,s.fakeName||c,s.nativeHandler,s.capture)}}}}else{for(c in d){s=d[c];f(e,s.fakeName||c,s.nativeHandler,s.capture)}d={}}for(c in d){return n}delete r[a];try{delete e[o]}catch(t){e[o]=null}}return n};n.fire=function(e,t,r){var i;if(!e||e.nodeType===3||e.nodeType===8){return n}r=h(null,r);r.type=t;r.target=e;do{i=e[o];if(i){d(r,i)}e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return n};n.clean=function(e){var t,r,i=n.unbind;if(!e||e.nodeType===3||e.nodeType===8){return n}if(e[o]){i(e)}if(!e.getElementsByTagName){e=e.document}if(e&&e.getElementsByTagName){i(e);r=e.getElementsByTagName("*");t=r.length;while(t--){e=r[t];if(e[o]){i(e)}}}return n};n.destroy=function(){r={}};n.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation()}return false}};v.Event=new v;v.Event.bind(t,"ready",function(){});return v});a("tinymce.core.dom.Sizzle",[],function(){var e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y,b="sizzle"+-new Date,x=window.document,w=0,_=0,k=re(),C=re(),T=re(),S=function(e,t){if(e===t){c=true}return 0},E=typeof undefined,A=1<<31,P={}.hasOwnProperty,O=[],M=O.pop,N=O.push,R=O.push,D=O.slice,B=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+I+"*("+F+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+I+"*\\]",z=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",H=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),U=new RegExp("^"+I+"*,"+I+"*"),W=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),V=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),q=new RegExp(z),K=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{R.apply(O=D.call(x.childNodes),x.childNodes);O[x.childNodes.length].nodeType}catch(e){R={apply:O.length?function(e,t){N.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}function ne(e,n,r,i){var o,u,l,c,h,m,g,w,_,k;if((n?n.ownerDocument||n:x)!==d){f(n)}n=n||d;r=r||[];if(!e||typeof e!=="string"){return r}if((c=n.nodeType)!==1&&c!==9){return[]}if(p&&!i){if(o=Z.exec(e)){if(l=o[1]){if(c===9){u=n.getElementById(l);if(u&&u.parentNode){if(u.id===l){r.push(u);return r}}else{return r}}else{if(n.ownerDocument&&(u=n.ownerDocument.getElementById(l))&&y(n,u)&&u.id===l){r.push(u);return r}}}else if(o[2]){R.apply(r,n.getElementsByTagName(e));return r}else if((l=o[3])&&t.getElementsByClassName){R.apply(r,n.getElementsByClassName(l));return r}}if(t.qsa&&(!v||!v.test(e))){w=g=b;_=n;k=c===9&&e;if(c===1&&n.nodeName.toLowerCase()!=="object"){m=a(e);if(g=n.getAttribute("id")){w=g.replace(Q,"\\$&")}else{n.setAttribute("id",w)}w="[id='"+w+"'] ";h=m.length;while(h--){m[h]=w+fe(m[h])}_=J.test(e)&&le(n.parentNode)||n;k=m.join(",")}if(k){try{R.apply(r,_.querySelectorAll(k));return r}catch(e){}finally{if(!g){n.removeAttribute("id")}}}}}return s(e.replace(H,"$1"),n,r,i)}function re(){var e=[];function t(r,i){if(e.push(r+" ")>n.cacheLength){delete t[e.shift()]}return t[r+" "]=i}return t}function ie(e){e[b]=true;return e}function ae(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function oe(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function se(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ue(e){return ie(function(t){t=+t;return ie(function(n,r){var i,a=e([],n.length,t),o=a.length;while(o--){if(n[i=a[o]]){n[i]=!(r[i]=n[i])}}})})}function le(e){return e&&typeof e.getElementsByTagName!==E&&e}t=ne.support={};i=ne.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};f=ne.setDocument=function(e){var r,a=e?e.ownerDocument||e:x,o=a.defaultView;function s(e){try{return e.top}catch(e){}return null}if(a===d||a.nodeType!==9||!a.documentElement){return d}d=a;h=a.documentElement;p=!i(a);if(o&&o!==s(o)){if(o.addEventListener){o.addEventListener("unload",function(){f()},false)}else if(o.attachEvent){o.attachEvent("onunload",function(){f()})}}t.attributes=true;t.getElementsByTagName=true;t.getElementsByClassName=X.test(a.getElementsByClassName);t.getById=true;n.find["ID"]=function(e,t){if(typeof t.getElementById!==E&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};n.filter["ID"]=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}};n.find["TAG"]=t.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==E){return t.getElementsByTagName(e)}}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if(e==="*"){while(n=a[i++]){if(n.nodeType===1){r.push(n)}}return r}return a};n.find["CLASS"]=t.getElementsByClassName&&function(e,t){if(p){return t.getElementsByClassName(e)}};m=[];v=[];t.disconnectedMatch=true;v=v.length&&new RegExp(v.join("|"));m=m.length&&new RegExp(m.join("|"));r=X.test(h.compareDocumentPosition);y=r||X.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};S=r?function(e,n){if(e===n){c=true;return 0}var r=!e.compareDocumentPosition-!n.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)===(n.ownerDocument||n)?e.compareDocumentPosition(n):1;if(r&1||!t.sortDetached&&n.compareDocumentPosition(e)===r){if(e===a||e.ownerDocument===x&&y(x,e)){return-1}if(n===a||n.ownerDocument===x&&y(x,n)){return 1}return l?B.call(l,e)-B.call(l,n):0}return r&4?-1:1}:function(e,t){if(e===t){c=true;return 0}var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o){return e===a?-1:t===a?1:i?-1:o?1:l?B.call(l,e)-B.call(l,t):0}else if(i===o){return ae(e,t)}n=e;while(n=n.parentNode){s.unshift(n)}n=t;while(n=n.parentNode){u.unshift(n)}while(s[r]===u[r]){r++}return r?ae(s[r],u[r]):s[r]===x?-1:u[r]===x?1:0};return a};ne.matches=function(e,t){return ne(e,null,null,t)};ne.matchesSelector=function(e,n){if((e.ownerDocument||e)!==d){f(e)}n=n.replace(V,"='$1']");if(t.matchesSelector&&p&&(!m||!m.test(n))&&(!v||!v.test(n))){try{var r=g.call(e,n);if(r||t.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){}}return ne(n,d,null,[e]).length>0};ne.contains=function(e,t){if((e.ownerDocument||e)!==d){f(e)}return y(e,t)};ne.attr=function(e,r){if((e.ownerDocument||e)!==d){f(e)}var i=n.attrHandle[r.toLowerCase()],a=i&&P.call(n.attrHandle,r.toLowerCase())?i(e,r,!p):undefined;return a!==undefined?a:t.attributes||!p?e.getAttribute(r):(a=e.getAttributeNode(r))&&a.specified?a.value:null};ne.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ne.uniqueSort=function(e){var n,r=[],i=0,a=0;c=!t.detectDuplicates;l=!t.sortStable&&e.slice(0);e.sort(S);if(c){while(n=e[a++]){if(n===e[a]){i=r.push(a)}}while(i--){e.splice(r[i],1)}}l=null;return e};r=ne.getText=function(e){var t,n="",i=0,a=e.nodeType;if(!a){while(t=e[i++]){n+=r(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=r(e)}}}else if(a===3||a===4){return e.nodeValue}return n};n=ne.selectors={cacheLength:50,createPseudo:ie,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(ee,te);e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){ne.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){ne.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(Y["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&q.test(n)&&(t=a(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&k(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!==E&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ne.attr(r,e);if(i==null){return t==="!="}if(!t){return true}i+="";return t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,r,i){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",s=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,v=a!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(m){if(a){while(v){f=t;while(f=f[v]){if(s?f.nodeName.toLowerCase()===g:f.nodeType===1){return false}}p=v=e==="only"&&!p&&"nextSibling"}return true}p=[o?m.firstChild:m.lastChild];if(o&&y){c=m[b]||(m[b]={});l=c[e]||[];h=l[0]===w&&l[1];d=l[0]===w&&l[2];f=h&&m.childNodes[h];while(f=++h&&f&&f[v]||(d=h=0)||p.pop()){if(f.nodeType===1&&++d&&f===t){c[e]=[w,h,d];break}}}else if(y&&(l=(t[b]||(t[b]={}))[e])&&l[0]===w){d=l[1]}else{while(f=++h&&f&&f[v]||(d=h=0)||p.pop()){if((s?f.nodeName.toLowerCase()===g:f.nodeType===1)&&++d){if(y){(f[b]||(f[b]={}))[e]=[w,d]}if(f===t){break}}}}d-=i;return d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ne.error("unsupported pseudo: "+e);if(i[b]){return i(t)}if(i.length>1){r=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?ie(function(e,n){var r,a=i(e,t),o=a.length;while(o--){r=B.call(e,a[o]);e[r]=!(n[r]=a[o])}}):function(e){return i(e,0,r)}}return i}},pseudos:{not:ie(function(e){var t=[],n=[],r=o(e.replace(H,"$1"));return r[b]?ie(function(e,t,n,i){var a,o=r(e,null,i,[]),s=e.length;while(s--){if(a=o[s]){e[s]=!(t[s]=a)}}}):function(e,i,a){t[0]=e;r(t,null,a,n);return!n.pop()}}),has:ie(function(e){return function(t){return ne(e,t).length>0}}),contains:ie(function(e){e=e.replace(ee,te);return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:ie(function(e){if(!K.test(e||"")){ne.error("unsupported lang: "+e)}e=e.replace(ee,te).toLowerCase();return function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return G.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ue(function(){return[0]}),last:ue(function(e,t){return[t-1]}),eq:ue(function(e,t,n){return[n<0?n+t:n]}),even:ue(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:ue(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:ue(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;){e.push(r)}return e}),gt:ue(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;){e.push(r)}return e})}};n.pseudos["nth"]=n.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[e]=oe(e)}for(e in{submit:true,reset:true}){n.pseudos[e]=se(e)}function ce(){}ce.prototype=n.filters=n.pseudos;n.setFilters=new ce;a=ne.tokenize=function(e,t){var r,i,a,o,s,u,l,c=C[e+" "];if(c){return t?0:c.slice(0)}s=e;u=[];l=n.preFilter;while(s){if(!r||(i=U.exec(s))){if(i){s=s.slice(i[0].length)||s}u.push(a=[])}r=false;if(i=W.exec(s)){r=i.shift();a.push({value:r,type:i[0].replace(H," ")});s=s.slice(r.length)}for(o in n.filter){if((i=Y[o].exec(s))&&(!l[o]||(i=l[o](i)))){r=i.shift();a.push({value:r,type:o,matches:i});s=s.slice(r.length)}}if(!r){break}}return t?s.length:s?ne.error(e):C(e,u).slice(0)};function fe(e){var t=0,n=e.length,r="";for(;t<n;t++){r+=e[t].value}return r}function de(e,t,n){var r=t.dir,i=n&&r==="parentNode",a=_++;return t.first?function(t,n,a){while(t=t[r]){if(t.nodeType===1||i){return e(t,n,a)}}}:function(t,n,o){var s,u,l=[w,a];if(o){while(t=t[r]){if(t.nodeType===1||i){if(e(t,n,o)){return true}}}}else{while(t=t[r]){if(t.nodeType===1||i){u=t[b]||(t[b]={});if((s=u[r])&&s[0]===w&&s[1]===a){return l[2]=s[2]}else{u[r]=l;if(l[2]=e(t,n,o)){return true}}}}}}}function he(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return false}}return true}:e[0]}function pe(e,t,n){var r=0,i=t.length;for(;r<i;r++){ne(e,t[r],n)}return n}function ve(e,t,n,r,i){var a,o=[],s=0,u=e.length,l=t!=null;for(;s<u;s++){if(a=e[s]){if(!n||n(a,r,i)){o.push(a);if(l){t.push(s)}}}}return o}function me(e,t,n,r,i,a){if(r&&!r[b]){r=me(r)}if(i&&!i[b]){i=me(i,a)}return ie(function(a,o,s,u){var l,c,f,d=[],h=[],p=o.length,v=a||pe(t||"*",s.nodeType?[s]:s,[]),m=e&&(a||!t)?ve(v,d,e,s,u):v,g=n?i||(a?e:p||r)?[]:o:m;if(n){n(m,g,s,u)}if(r){l=ve(g,h);r(l,[],s,u);c=l.length;while(c--){if(f=l[c]){g[h[c]]=!(m[h[c]]=f)}}}if(a){if(i||e){if(i){l=[];c=g.length;while(c--){if(f=g[c]){l.push(m[c]=f)}}i(null,g=[],l,u)}c=g.length;while(c--){if((f=g[c])&&(l=i?B.call(a,f):d[c])>-1){a[l]=!(o[l]=f)}}}}else{g=ve(g===o?g.splice(p,g.length):g);if(i){i(null,o,g,u)}else{R.apply(o,g)}}})}function ge(e){var t,r,i,a=e.length,o=n.relative[e[0].type],s=o||n.relative[" "],l=o?1:0,c=de(function(e){return e===t},s,true),f=de(function(e){return B.call(t,e)>-1},s,true),d=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?c(e,n,r):f(e,n,r))}];for(;l<a;l++){if(r=n.relative[e[l].type]){d=[de(he(d),r)]}else{r=n.filter[e[l].type].apply(null,e[l].matches);if(r[b]){i=++l;for(;i<a;i++){if(n.relative[e[i].type]){break}}return me(l>1&&he(d),l>1&&fe(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(H,"$1"),r,l<i&&ge(e.slice(l,i)),i<a&&ge(e=e.slice(i)),i<a&&fe(e))}d.push(r)}}return he(d)}function ye(e,t){var r=t.length>0,i=e.length>0,a=function(a,o,s,l,c){var f,h,p,v=0,m="0",g=a&&[],y=[],b=u,x=a||i&&n.find["TAG"]("*",c),_=w+=b==null?1:Math.random()||.1,k=x.length;if(c){u=o!==d&&o}for(;m!==k&&(f=x[m])!=null;m++){if(i&&f){h=0;while(p=e[h++]){if(p(f,o,s)){l.push(f);break}}if(c){w=_}}if(r){if(f=!p&&f){v--}if(a){g.push(f)}}}v+=m;if(r&&m!==v){h=0;while(p=t[h++]){p(g,y,o,s)}if(a){if(v>0){while(m--){if(!(g[m]||y[m])){y[m]=M.call(l)}}}y=ve(y)}R.apply(l,y);if(c&&!a&&y.length>0&&v+t.length>1){ne.uniqueSort(l)}}if(c){w=_;u=b}return g};return r?ie(a):a}o=ne.compile=function(e,t){var n,r=[],i=[],o=T[e+" "];if(!o){if(!t){t=a(e)}n=t.length;while(n--){o=ge(t[n]);if(o[b]){r.push(o)}else{i.push(o)}}o=T(e,ye(i,r));o.selector=e}return o};s=ne.select=function(e,r,i,s){var u,l,c,f,d,h=typeof e==="function"&&e,v=!s&&a(e=h.selector||e);i=i||[];if(v.length===1){l=v[0]=v[0].slice(0);if(l.length>2&&(c=l[0]).type==="ID"&&t.getById&&r.nodeType===9&&p&&n.relative[l[1].type]){r=(n.find["ID"](c.matches[0].replace(ee,te),r)||[])[0];if(!r){return i}else if(h){r=r.parentNode}e=e.slice(l.shift().value.length)}u=Y["needsContext"].test(e)?0:l.length;while(u--){c=l[u];if(n.relative[f=c.type]){break}if(d=n.find[f]){if(s=d(c.matches[0].replace(ee,te),J.test(l[0].type)&&le(r.parentNode)||r)){l.splice(u,1);e=s.length&&fe(l);if(!e){R.apply(i,s);return i}break}}}}(h||o(e,v))(s,r,!p,i,J.test(e)&&le(r.parentNode)||r);return i};t.sortStable=b.split("").sort(S).join("")===b;t.detectDuplicates=!!c;f();t.sortDetached=true;return ne});a("tinymce.core.util.Arr",[],function(){var e=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var t=function(t){var n=t,r,i;if(!e(t)){n=[];for(r=0,i=t.length;r<i;r++){n[r]=t[r]}}return n};var n=function(e,t,n){var r,i;if(!e){return 0}n=n||e;if(e.length!==undefined){for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)===false){return 0}}}else{for(r in e){if(e.hasOwnProperty(r)){if(t.call(n,e[r],r,e)===false){return 0}}}}return 1};var r=function(e,t){var r=[];n(e,function(n,i){r.push(t(n,i,e))});return r};var i=function(e,t){var r=[];n(e,function(n,i){if(!t||t(n,i,e)){r.push(n)}});return r};var a=function(e,t){var n,r;if(e){for(n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}}return-1};var o=function(e,t,n,r){var i=0;if(arguments.length<3){n=e[0]}for(;i<e.length;i++){n=t.call(r,n,e[i],i)}return n};var s=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++){if(t.call(n,e[r],r,e)){return r}}return-1};var u=function(e,t,n){var r=s(e,t,n);if(r!==-1){return e[r]}return undefined};var l=function(e){return e[e.length-1]};return{isArray:e,toArray:t,each:n,map:r,filter:i,indexOf:a,reduce:o,findIndex:s,find:u,last:l}});a("tinymce.core.util.Tools",["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(e,t,n){var r=/^\s*|\s*$/g;var i=function(e){return e===null||e===undefined?"":(""+e).replace(r,"")};var a=function(e,t){if(!t){return e!==undefined}if(t=="array"&&n.isArray(e)){return true}return typeof e==t};var o=function(e,t,n){var r;e=e||[];t=t||",";if(typeof e=="string"){e=e.split(t)}n=n||{};r=e.length;while(r--){n[e[r]]={}}return n};var s=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var u=function(e,t,n){var r=this,i,a,o,s,u,l=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);o=e[3].match(/(^|\.)(\w+)$/i)[2];a=r.createNS(e[3].replace(/\.\w+$/,""),n);if(a[o]){return}if(e[2]=="static"){a[o]=t;if(this.onCreate){this.onCreate(e[2],e[3],a[o])}return}if(!t[o]){t[o]=function(){};l=1}a[o]=t[o];r.extend(a[o].prototype,t);if(e[5]){i=r.resolve(e[5]).prototype;s=e[5].match(/\.(\w+)$/i)[1];u=a[o];if(l){a[o]=function(){return i[s].apply(this,arguments)}}else{a[o]=function(){this.parent=i[s];return u.apply(this,arguments)}}a[o].prototype[o]=a[o];r.each(i,function(e,t){a[o].prototype[t]=i[t]});r.each(t,function(e,t){if(i[t]){a[o].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}}else{if(t!=o){a[o].prototype[t]=e}}})}r.each(t["static"],function(e,t){a[o][t]=e})};var l=function(e,t){var n,r,i,a=arguments,o;for(n=1,r=a.length;n<r;n++){t=a[n];for(i in t){if(t.hasOwnProperty(i)){o=t[i];if(o!==undefined){e[i]=o}}}}return e};var c=function(e,t,r,i){i=i||this;if(e){if(r){e=e[r]}n.each(e,function(e,n){if(t.call(i,e,n,r)===false){return false}c(e,t,r,i)})}};var f=function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0;r<t.length;r++){i=t[r];if(!n[i]){n[i]={}}n=n[i]}return n};var d=function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n){break}}return n};var h=function(e,t){if(!e||a(e,"array")){return e}return n.map(e.split(t||","),i)};var p=function(e){var n=t.cacheSuffix;if(n){e+=(e.indexOf("?")===-1?"?":"&")+n}return e};return{trim:i,isArray:n.isArray,is:a,toArray:n.toArray,makeMap:o,each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:s,extend:l,create:u,walk:c,createNS:f,resolve:d,explode:h,_addCacheSuffix:p}});a("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(e,t,n,r,i){var a=e,o=Array.prototype.push,s=Array.prototype.slice;var u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;var l=t.Event,c;var f=i.makeMap("children,contents,next,prev");var d=function(e){return typeof e!=="undefined"};var h=function(e){return typeof e==="string"};var p=function(e){return e&&e==e.window};var v=function(e,t){var n,r,i;t=t||a;i=t.createElement("div");n=t.createDocumentFragment();i.innerHTML=e;while(r=i.firstChild){n.appendChild(r)}return n};var m=function(e,t,n,r){var i;if(h(t)){t=v(t,M(e[0]))}else if(t.length&&!t.nodeType){t=T.makeArray(t);if(r){for(i=t.length-1;i>=0;i--){m(e,t[i],n,r)}}else{for(i=0;i<t.length;i++){m(e,t[i],n,r)}}return e}if(t.nodeType){i=e.length;while(i--){n.call(e[i],t)}}return e};var g=function(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1};var y=function(e,t,n){var r,i;t=T(t)[0];e.each(function(){var e=this;if(!n||r!=e.parentNode){r=e.parentNode;i=t.cloneNode(false);e.parentNode.insertBefore(i,e);i.appendChild(e)}else{i.appendChild(e)}});return e};var b=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");var x=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," ");var w={for:"htmlFor",class:"className",readonly:"readOnly"};var _={float:"cssFloat"};var k={},C={};var T=function(e,t){return new T.fn.init(e,t)};var S=function(e,t){var n;if(t.indexOf){return t.indexOf(e)}n=t.length;while(n--){if(t[n]===e){return n}}return-1};var E=/^\s*|\s*$/g;var A=function(e){return e===null||e===c?"":(""+e).replace(E,"")};var P=function(e,t){var n,r,i,a,o;if(e){n=e.length;if(n===a){for(r in e){if(e.hasOwnProperty(r)){o=e[r];if(t.call(o,r,o)===false){break}}}}else{for(i=0;i<n;i++){o=e[i];if(t.call(o,i,o)===false){break}}}}return e};var O=function(e,t){var n=[];P(e,function(e,r){if(t(r,e)){n.push(r)}});return n};var M=function(e){if(!e){return a}if(e.nodeType==9){return e}return e.ownerDocument};T.fn=T.prototype={constructor:T,selector:"",context:null,length:0,init:function(t,n){var r=this,i,a;if(!t){return r}if(t.nodeType){r.context=r[0]=t;r.length=1;return r}if(n&&n.nodeType){r.context=n}else{if(n){return T(t).attr(n)}r.context=n=e}if(h(t)){r.selector=t;if(t.charAt(0)==="<"&&t.charAt(t.length-1)===">"&&t.length>=3){i=[null,t,null]}else{i=u.exec(t)}if(i){if(i[1]){a=v(t,M(n)).firstChild;while(a){o.call(r,a);a=a.nextSibling}}else{a=M(n).getElementById(i[2]);if(!a){return r}if(a.id!==i[2]){return r.find(t)}r.length=1;r[0]=a}}else{return T(n).find(t)}}else{this.add(t,false)}return r},toArray:function(){return i.toArray(this)},add:function(e,t){var n=this,r,i;if(h(e)){return n.add(T(e))}if(t!==false){r=T.unique(n.toArray().concat(T.makeArray(e)));n.length=r.length;for(i=0;i<r.length;i++){n[i]=r[i]}}else{o.apply(n,T.makeArray(e))}return n},attr:function(e,t){var n=this,r;if(typeof e==="object"){P(e,function(e,t){n.attr(e,t)})}else if(d(t)){this.each(function(){var n;if(this.nodeType===1){n=k[e];if(n&&n.set){n.set(this,t);return}if(t===null){this.removeAttribute(e,2)}else{this.setAttribute(e,t,2)}}})}else{if(n[0]&&n[0].nodeType===1){r=k[e];if(r&&r.get){return r.get(n[0],e)}if(x[e]){return n.prop(e)?e:c}t=n[0].getAttribute(e,2);if(t===null){t=c}}return t}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;e=w[e]||e;if(typeof e==="object"){P(e,function(e,t){n.prop(e,t)})}else if(d(t)){this.each(function(){if(this.nodeType==1){this[e]=t}})}else{if(n[0]&&n[0].nodeType&&e in n[0]){return n[0][e]}return t}return n},css:function(e,t){var n=this,r,i;var a=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})};var o=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if(typeof e==="object"){P(e,function(e,t){n.css(e,t)})}else{if(d(t)){e=a(e);if(typeof t==="number"&&!b[e]){t+="px"}n.each(function(){var n=this.style;i=C[e];if(i&&i.set){i.set(this,t);return}try{this.style[_[e]||e]=t}catch(e){}if(t===null||t===""){if(n.removeProperty){n.removeProperty(o(e))}else{n.removeAttribute(e)}}})}else{r=n[0];i=C[e];if(i&&i.get){return i.get(r)}if(r.ownerDocument.defaultView){try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(o(e))}catch(e){return c}}else if(r.currentStyle){return r.currentStyle[a(e)]}}}return n},remove:function(){var e=this,t,n=this.length;while(n--){t=e[n];l.clean(t);if(t.parentNode){t.parentNode.removeChild(t)}}return this},empty:function(){var e=this,t,n=this.length;while(n--){t=e[n];while(t.firstChild){t.removeChild(t.firstChild)}}return this},html:function(e){var t=this,n;if(d(e)){n=t.length;try{while(n--){t[n].innerHTML=e}}catch(r){T(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(d(e)){n=t.length;while(n--){if("innerText"in t[n]){t[n].innerText=e}else{t[0].textContent=e}}return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return m(this,arguments,function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.appendChild(e)}})},prepend:function(){return m(this,arguments,function(e){if(this.nodeType===1||this.host&&this.host.nodeType===1){this.insertBefore(e,this.firstChild)}},true)},before:function(){var e=this;if(e[0]&&e[0].parentNode){return m(e,arguments,function(e){this.parentNode.insertBefore(e,this)})}return e},after:function(){var e=this;if(e[0]&&e[0].parentNode){return m(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},true)}return e},appendTo:function(e){T(e).append(this);return this},prependTo:function(e){T(e).prepend(this);return this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return y(this,e)},wrapAll:function(e){return y(this,e,true)},wrapInner:function(e){this.each(function(){T(this).contents().wrapAll(e)});return this},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(this.childNodes)})},clone:function(){var e=[];this.each(function(){e.push(this.cloneNode(true))});return T(e)},addClass:function(e){return this.toggleClass(e,true)},removeClass:function(e){return this.toggleClass(e,false)},toggleClass:function(e,t){var n=this;if(typeof e!="string"){return n}if(e.indexOf(" ")!==-1){P(e.split(" "),function(){n.toggleClass(this,t)})}else{n.each(function(n,r){var i,a;a=g(r,e);if(a!==t){i=r.className;if(a){r.className=A((" "+i+" ").replace(" "+e+" "," "))}else{r.className+=i?" "+e:e}}})}return n},hasClass:function(e){return g(this[0],e)},each:function(e){return P(this,e)},on:function(e,t){return this.each(function(){l.bind(this,e,t)})},off:function(e,t){return this.each(function(){l.unbind(this,e,t)})},trigger:function(e){return this.each(function(){if(typeof e=="object"){l.fire(this,e.type,e)}else{l.fire(this,e)}})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new T(s.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++){T.find(e,this[t],r)}return T(r)},filter:function(e){if(typeof e=="function"){return T(O(this.toArray(),function(t,n){return e(n,t)}))}return T(T.filter(e,this.toArray()))},closest:function(e){var t=[];if(e instanceof T){e=e[0]}this.each(function(n,r){while(r){if(typeof e=="string"&&T(r).is(e)){t.push(r);break}else if(r==e){t.push(r);break}r=r.parentNode}});return T(t)},offset:function(e){var t,n,r;var i=0,a=0,o;if(!e){t=this[0];if(t){n=t.ownerDocument;r=n.documentElement;if(t.getBoundingClientRect){o=t.getBoundingClientRect();i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft;a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop}}return{left:i,top:a}}return this.css(e)},push:o,sort:[].sort,splice:[].splice};i.extend(T,{extend:i.extend,makeArray:function(e){if(p(e)||e.nodeType){return[e]}return i.toArray(e)},inArray:S,isArray:i.isArray,each:P,trim:A,grep:O,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var r=t.length;if(n){e=":not("+e+")"}while(r--){if(t[r].nodeType!=1){t.splice(r,1)}}if(t.length===1){t=T.find.matchesSelector(t[0],e)?[t[0]]:[]}else{t=T.find.matches(e,t)}return t}});var N=function(e,t,n){var r=[],i=e[t];if(typeof n!="string"&&n instanceof T){n=n[0]}while(i&&i.nodeType!==9){if(n!==undefined){if(i===n){break}if(typeof n=="string"&&T(i).is(n)){break}}if(i.nodeType===1){r.push(i)}i=i[t]}return r};var R=function(e,t,n,r){var i=[];if(r instanceof T){r=r[0]}for(;e;e=e[t]){if(n&&e.nodeType!==n){continue}if(r!==undefined){if(e===r){break}if(typeof r=="string"&&T(e).is(r)){break}}i.push(e)}return i};var D=function(e,t,n){for(e=e[t];e;e=e[t]){if(e.nodeType==n){return e}}return null};P({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return N(e,"parentNode")},next:function(e){return D(e,"nextSibling",1)},prev:function(e){return D(e,"previousSibling",1)},children:function(e){return R(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){T.fn[e]=function(n){var r=this,i=[];r.each(function(){var e=t.call(i,this,n,i);if(e){if(T.isArray(e)){i.push.apply(i,e)}else{i.push(e)}}});if(this.length>1){if(!f[e]){i=T.unique(i)}if(e.indexOf("parents")===0){i=i.reverse()}}i=T(i);if(n){return i.filter(n)}return i}});P({parentsUntil:function(e,t){return N(e,"parentNode",t)},nextUntil:function(e,t){return R(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return R(e,"previousSibling",1,t).slice(1)}},function(e,t){T.fn[e]=function(n,r){var i=this,a=[];i.each(function(){var e=t.call(a,this,n,a);if(e){if(T.isArray(e)){a.push.apply(a,e)}else{a.push(e)}}});if(this.length>1){a=T.unique(a);if(e.indexOf("parents")===0||e==="prevUntil"){a=a.reverse()}}a=T(a);if(r){return a.filter(r)}return a}});T.fn.is=function(e){return!!e&&this.filter(e).length>0};T.fn.init.prototype=T.fn;T.overrideDefaults=function(e){var t;var n=function(r,i){t=t||e();if(arguments.length===0){r=t.element}if(!i){i=t.context}return new n.fn.init(r,i)};T.extend(n,this);return n};var B=function(e,t,n){P(n,function(n,r){e[n]=e[n]||{};e[n][t]=r})};if(r.ie&&r.ie<8){B(k,"get",{maxlength:function(e){var t=e.maxLength;if(t===2147483647){return c}return t},size:function(e){var t=e.size;if(t===20){return c}return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(t.length===0){return c}return t}});B(k,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})}if(r.ie&&r.ie<9){_["float"]="styleFloat";B(C,"set",{opacity:function(e,t){var n=e.style;if(t===null||t===""){n.removeAttribute("filter")}else{n.zoom=1;n.filter="alpha(opacity="+t*100+")"}}})}T.attrHooks=k;T.cssHooks=C;return T});a("ephox.katamari.api.Thunk",[],function(){var e=function(e){var t=false;var n;return function(){if(!t){t=true;n=e.apply(null,arguments)}return n}};return{cached:e}});o("global!Number",Number);a("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var i=function(e,n){var i=r(e,n);if(!i){return{major:0,minor:0}}var a=function(e){return t(n.replace(i,"$"+e))};return s(a(1),a(2))};var a=function(e,t){var r=n(t).toLowerCase();if(e.length===0){return o()}return i(e,r)};var o=function(){return s(0,0)};var s=function(e,t){return{major:e,minor:t}};return{nu:s,detect:a,unknown:o}});a("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge";var r="Chrome";var i="IE";var a="Opera";var o="Firefox";var s="Safari";var u=function(e,t){return function(){return t===e}};var l=function(){return c({current:undefined,version:t.unknown()})};var c=function(e){var t=e.current;var l=e.version;return{current:t,version:l,isEdge:u(n,t),isChrome:u(r,t),isIE:u(i,t),isOpera:u(a,t),isFirefox:u(o,t),isSafari:u(s,t)}};return{unknown:l,nu:c,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(i),opera:e.constant(a),firefox:e.constant(o),safari:e.constant(s)}});a("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows";var r="iOS";var i="Android";var a="Linux";var o="OSX";var s="Solaris";var u="FreeBSD";var l=function(e,t){return function(){return t===e}};var c=function(){return f({current:undefined,version:t.unknown()})};var f=function(e){var t=e.current;var c=e.version;return{current:t,version:c,isWindows:l(n,t),isiOS:l(r,t),isAndroid:l(i,t),isOSX:l(o,t),isLinux:l(a,t),isSolaris:l(s,t),isFreeBSD:l(u,t)}};return{unknown:c,nu:f,windows:e.constant(n),ios:e.constant(r),android:e.constant(i),linux:e.constant(a),osx:e.constant(o),solaris:e.constant(s),freebsd:e.constant(u)}});a("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var i=t.isiOS()&&/ipad/i.test(r)===true;var a=t.isiOS()&&!i;var o=t.isAndroid()&&t.version.major===3;var s=t.isAndroid()&&t.version.major===4;var u=i||o||s&&/mobile/i.test(r)===true;var l=t.isiOS()||t.isAndroid();var c=l&&!u;var f=n.isSafari()&&t.isiOS()&&/safari/i.test(r)===false;return{isiPad:e.constant(i),isiPhone:e.constant(a),isTablet:e.constant(u),isPhone:e.constant(c),isTouch:e.constant(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(f)}}});a("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var i=n(r).toLowerCase();return e.find(t,function(e){return e.search(i)})};var i=function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})};var a=function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})};return{detectBrowser:i,detectOs:a}});a("ephox.katamari.str.StrAppend",[],function(){var e=function(e,t){return t+e};var t=function(e,t){return e+t};var n=function(e,t){return e.substring(t)};var r=function(e,t){return e.substring(0,e.length-t)};return{addToStart:e,addToEnd:t,removeFromStart:n,removeFromEnd:r}});a("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){var n=function(e,t){return e.substr(0,t)};var r=function(e,t){return e.substr(e.length-t,e.length)};var i=function(t){return t===""?e.none():e.some(t.substr(0,1))};var a=function(t){return t===""?e.none():e.some(t.substring(1))};return{first:n,last:r,head:i,tail:a}});a("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){if(t===""){return true}if(e.length<t.length){return false}var r=e.substr(n,n+t.length);return r===t};var i=function(e,t){var n=function(e){var t=typeof e;return t==="string"||t==="number"};return e.replace(/\${([^{}]*)}/g,function(e,r){var i=t[r];return n(i)?i:e})};var a=function(t,n){return f(t,n)?e.removeFromStart(t,n.length):t};var o=function(t,n){return d(t,n)?e.removeFromEnd(t,n.length):t};var s=function(t,n){return f(t,n)?t:e.addToStart(t,n)};var u=function(t,n){return d(t,n)?t:e.addToEnd(t,n)};var l=function(e,t){return e.indexOf(t)!==-1};var c=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)};var f=function(e,t){return r(e,t,0)};var d=function(e,t){return r(e,t,e.length-t.length)};var h=function(e){return e.replace(/^\s+|\s+$/g,"")};var p=function(e){return e.replace(/^\s+/g,"")};var v=function(e){return e.replace(/\s+$/g,"")};return{supplant:i,startsWith:f,removeLeading:a,removeTrailing:o,ensureLeading:s,ensureTrailing:u,endsWith:d,contains:l,trim:h,lTrim:p,rTrim:v,capitalize:c}});a("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var r=function(e){return function(n){return t.contains(n,e)}};var i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var n=t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit");return n}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}];var a=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(i),oses:e.constant(a)}});a("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,i){var a=function(a){var o=i.browsers();var s=i.oses();var u=r.detectBrowser(o,a).fold(e.unknown,e.nu);var l=r.detectOs(s,a).fold(t.unknown,t.nu);var c=n(l,u,a);return{browser:u,os:l,deviceType:c}};return{detect:a}});a("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){var r=e.cached(function(){var e=n.userAgent;return t.detect(e)});return{detect:r}});a("global!console",[],function(){if(typeof console==="undefined"){console={log:function(){}}}return console});a("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,i){var a=function(e,t){var n=t||i;var a=n.createElement("div");a.innerHTML=e;if(!a.hasChildNodes()||a.childNodes.length>1){r.error("HTML does not have a single root node",e);throw"HTML must have a single root node"}return u(a.childNodes[0])};var o=function(e,t){var n=t||i;var r=n.createElement(e);return u(r)};var s=function(e,t){var n=t||i;var r=n.createTextNode(e);return u(r)};var u=function(t){if(t===null||t===undefined){throw new n("Node cannot be null or undefined")}return{dom:e.constant(t)}};var l=function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(u)};return{fromHtml:a,fromTag:o,fromText:s,fromDom:u,fromPoint:l}});a("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});a("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var n=function(e){return e.dom().nodeType};var r=function(e){return e.dom().nodeValue};var i=function(e){return function(t){return n(t)===e}};var a=function(r){return n(r)===e.COMMENT||t(r)==="#comment"};var o=i(e.ELEMENT);var s=i(e.TEXT);var u=i(e.DOCUMENT);return{name:t,type:n,value:r,isElement:o,isText:s,isDocument:u,isComment:a}});a("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(n===null){return"null"}var r=typeof n;if(r==="object"&&e.prototype.isPrototypeOf(n)){return"array"}if(r==="object"&&t.prototype.isPrototypeOf(n)){return"string"}return r};var r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}});a("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys;var n=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};return e===undefined?n:e}();var r=function(e,t){var r=n(e);for(var i=0,a=r.length;i<a;i++){var o=r[i];var s=e[o];t(s,o,e)}};var i=function(e,t){return a(e,function(e,n,r){return{k:n,v:t(e,n,r)}})};var a=function(e,t){var n={};r(e,function(r,i){var a=t(r,i,e);n[a.k]=a.v});return n};var o=function(e,t){var n={};var i={};r(e,function(e,r){var a=t(e,r)?n:i;a[r]=e});return{t:n,f:i}};var s=function(e,t){var n=[];r(e,function(e,r){n.push(t(e,r))});return n};var u=function(t,r){var i=n(t);for(var a=0,o=i.length;a<o;a++){var s=i[a];var u=t[s];if(r(u,s,t)){return e.some(u)}}return e.none()};var l=function(e){return s(e,function(e){return e})};var c=function(e){return l(e).length};return{bifilter:o,each:r,map:i,mapToArray:s,tupleMap:a,find:u,keys:n,values:l,size:c}});a("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,i,a){var o=function(t,n,r){if(e.isString(r)||e.isBoolean(r)||e.isNumber(r)){t.setAttribute(n,r+"")}else{a.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t);throw new i("Attribute value was not simple")}};var s=function(e,t,n){o(e.dom(),t,n)};var u=function(e,t){var r=e.dom();n.each(t,function(e,t){o(r,t,e)})};var l=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var c=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var f=function(e,t){e.dom().removeAttribute(t)};var d=function(e){var t=e.dom().attributes;return t===undefined||t===null||t.length===0};var h=function(e){return t.foldl(e.dom().attributes,function(e,t){e[t.name]=t.value;return e},{})};var p=function(e,t,n){if(c(e,n)&&!c(t,n)){s(t,n,l(e,n))}};var v=function(e,n,i){if(!r.isElement(e)||!r.isElement(n)){return}t.each(i,function(t){p(e,n,t)})};return{clone:h,set:s,setAll:u,get:l,has:c,remove:f,hasNone:d,transfer:v}});a("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var i=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var a=e.cached(function(){return o(t.fromDom(r))});var o=function(e){var n=e.dom().body;if(n===null||n===undefined){throw"Body is not available yet"}return t.fromDom(n)};return{body:a,getBody:o,inBody:i}});a("ephox.sugar.impl.Style",[],function(){var e=function(e){return e.style!==undefined};return{isSupported:e}});a("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,i,a,o,s,u,l,c,f,d){var h=function(t,n,r){if(!e.isString(r)){f.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t);throw new c("CSS value must be a string: "+r)}if(u.isSupported(t)){t.style.setProperty(n,r)}};var p=function(e,t){if(u.isSupported(e)){e.style.removeProperty(t)}};var v=function(e,t,n){var r=e.dom();h(r,t,n)};var m=function(e,t){var r=e.dom();n.each(t,function(e,t){h(r,t,e)})};var g=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){p(r,t)},function(e){h(r,t,e)})})};var y=function(e,t){var n=e.dom();var r=d.getComputedStyle(n);var i=r.getPropertyValue(t);var o=i===""&&!a.inBody(e)?b(n,t):i;return o===null?undefined:o};var b=function(e,t){return u.isSupported(e)?e.style.getPropertyValue(t):""};var x=function(e,t){var n=e.dom();var i=b(n,t);return r.from(i).filter(function(e){return e.length>0})};var w=function(e){var t={};var n=e.dom();if(u.isSupported(n)){for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}}return t};var _=function(e,t,n){var r=o.fromTag(e);v(r,t,n);var i=x(r,t);return i.isSome()};var k=function(e,t){var n=e.dom();p(n,t);if(i.has(e,"style")&&l.trim(i.get(e,"style"))===""){i.remove(e,"style")}};var C=function(e,t){var n=i.get(e,"style");var r=t(e);var a=n===undefined?i.remove:i.set;a(e,"style",n);return r};var T=function(e,t){var n=e.dom();var r=t.dom();if(u.isSupported(n)&&u.isSupported(r)){r.style.cssText=n.style.cssText}};var S=function(e){return e.dom().offsetWidth};var E=function(e,t,n){x(e,n).each(function(e){if(x(t,n).isNone()){v(t,n,e)}})};var A=function(e,n,r){if(!s.isElement(e)||!s.isElement(n)){return}t.each(r,function(t){E(e,n,t)})};return{copy:T,set:v,preserve:C,setAll:m,setOptions:g,remove:k,get:y,getRaw:x,getAllRaw:w,isValidValue:_,reflow:S,transfer:A}});a("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var i=arguments;return function(){var a=new n(arguments.length);for(var o=0;o<a.length;o++){a[o]=arguments[o]}if(i.length!==a.length){throw new r('Wrong number of arguments to struct. Expected "['+i.length+']", got '+a.length+" arguments")}var s={};e.each(i,function(e,n){s[e]=t.constant(a[n])});return s}}});a("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};var i=function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")};var a=function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))};var o=function(r,i){if(!t.isArray(i)){throw new n("The "+r+" fields must be an array. Was: "+i+".")}e.each(i,function(e){if(!t.isString(e)){throw new n("The value "+e+" in the "+r+" fields was not a string.")}})};var s=function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")};var u=function(t){var i=r(t);var a=e.find(i,function(e,t){return t<i.length-1&&e===i[t+1]});a.each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+i.join(", ")+"].")})};return{sort:r,reqMessage:i,unsuppMessage:a,validateStrArr:o,invalidTypeMessage:s,checkDupes:u}});a("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,i,a,o){return function(s,u){var l=s.concat(u);if(l.length===0){throw new a("You must specify at least one required or optional field.")}i.validateStrArr("required",s);i.validateStrArr("optional",u);i.checkDupes(l);return function(a){var c=n.keys(a);var f=e.forall(s,function(t){return e.contains(c,t)});if(!f){i.reqMessage(s,c)}var d=e.filter(c,function(t){return!e.contains(l,t)});if(d.length>0){i.unsuppMessage(d)}var h={};e.each(s,function(e){h[e]=t.constant(a[e])});e.each(u,function(e){h[e]=t.constant(o.prototype.hasOwnProperty.call(a,e)?r.some(a[e]):r.none())});return h}}});a("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}});a("ephox.sugar.alien.Recurse",[],function(){var e=function(e,t){var n=[];var r=function(e){n.push(e);return t(e)};var i=t(e);do{i=i.bind(r)}while(i.isSome());return n};return{toArray:e}});a("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){var t=e.getOrDie("Node");return t};var n=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var r=function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)};var i=function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)};return{documentPositionPreceding:r,documentPositionContainedBy:i}});a("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,i,a){var o=r.ELEMENT;var s=r.DOCUMENT;var u=function(e,t){var n=e.dom();if(n.nodeType!==o){return false}else if(n.matches!==undefined){return n.matches(t)}else if(n.msMatchesSelector!==undefined){return n.msMatchesSelector(t)}else if(n.webkitMatchesSelector!==undefined){return n.webkitMatchesSelector(t)}else if(n.mozMatchesSelector!==undefined){return n.mozMatchesSelector(t)}else{throw new i("Browser lacks native selectors")}};var l=function(e){return e.nodeType!==o&&e.nodeType!==s||e.childElementCount===0};var c=function(t,r){var i=r===undefined?a:r.dom();return l(i)?[]:e.map(i.querySelectorAll(t),n.fromDom)};var f=function(e,r){var i=r===undefined?a:r.dom();return l(i)?t.none():t.from(i.querySelector(e)).map(n.fromDom)};return{all:c,is:u,one:f}});a("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,i){var a=function(e,t){return e.dom()===t.dom()};var o=function(e,t){return e.dom().isEqualNode(t.dom())};var s=function(n,r){return e.exists(r,t.curry(a,n))};var u=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)};var l=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())};var c=r.detect().browser;var f=c.isIE()?l:u;return{eq:a,isEqualNode:o,member:s,contains:f,is:i.is}});a("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,i,a,o,s){var u=function(e){return s.fromDom(e.dom().ownerDocument)};var l=function(e){var t=u(e);return s.fromDom(t.dom().documentElement)};var c=function(e){var t=e.dom();var n=t.ownerDocument.defaultView;return s.fromDom(n)};var f=function(e){var t=e.dom();return r.from(t.parentNode).map(s.fromDom)};var d=function(e){return f(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return o.eq(e,t)})})};var h=function(t,r){var i=e.isFunction(r)?r:n.constant(false);var a=t.dom();var o=[];while(a.parentNode!==null&&a.parentNode!==undefined){var u=a.parentNode;var l=s.fromDom(u);o.push(l);if(i(l)===true){break}else{a=u}}return o};var p=function(e){var n=function(n){return t.filter(n,function(t){return!o.eq(e,t)})};return f(e).map(x).map(n).getOr([])};var v=function(e){var t=e.dom();return r.from(t.offsetParent).map(s.fromDom)};var m=function(e){var t=e.dom();return r.from(t.previousSibling).map(s.fromDom)};var g=function(e){var t=e.dom();return r.from(t.nextSibling).map(s.fromDom)};var y=function(e){return t.reverse(a.toArray(e,m))};var b=function(e){return a.toArray(e,g)};var x=function(e){var n=e.dom();return t.map(n.childNodes,s.fromDom)};var w=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(s.fromDom)};var _=function(e){return w(e,0)};var k=function(e){return w(e,e.dom().childNodes.length-1)};var C=function(e){return e.dom().childNodes.length};var T=function(e){return e.dom().hasChildNodes()};var S=i.immutable("element","offset");var E=function(e,t){var n=x(e);return n.length>0&&t<n.length?S(n[t],0):S(e,t)};return{owner:u,defaultView:c,documentElement:l,parent:f,findIndex:d,parents:h,siblings:p,prevSibling:m,offsetParent:v,prevSiblings:y,nextSibling:g,nextSiblings:b,children:x,child:w,firstChild:_,lastChild:k,childNodesCount:C,hasChildNodes:T,leaf:E}});a("tinymce.core.dom.Position",["ephox.katamari.api.Arr","ephox.sand.api.PlatformDetection","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=t.detect().browser;var s=function(t){return e.find(t,r.isElement)};var u=function(e){if(o.isFirefox()&&r.name(e)==="table"){return s(a.children(e)).filter(function(e){return r.name(e)==="caption"}).bind(function(e){return s(a.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop;var r=e.dom().offsetTop;var i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0)}else{return 0}};var l=function(e,t,r){var a=0,o=0,s,l=e.ownerDocument,c;r=r?r:e;if(t){if(r===e&&t.getBoundingClientRect&&i.get(n.fromDom(e),"position")==="static"){c=t.getBoundingClientRect();a=c.left+(l.documentElement.scrollLeft||e.scrollLeft)-l.documentElement.clientLeft;o=c.top+(l.documentElement.scrollTop||e.scrollTop)-l.documentElement.clientTop;return{x:a,y:o}}s=t;while(s&&s!==r&&s.nodeType){a+=s.offsetLeft||0;o+=s.offsetTop||0;s=s.offsetParent}s=t.parentNode;while(s&&s!==r&&s.nodeType){a-=s.scrollLeft||0;o-=s.scrollTop||0;s=s.parentNode}o+=u(n.fromDom(t))}return{x:a,y:o}};return{getPos:l}});a("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var r=function(i){var a=t.none();var o=[];var s=function(e){return r(function(t){u(function(n){t(e(n))})})};var u=function(e){if(c()){d(e)}else{o.push(e)}};var l=function(e){a=t.some(e);f(o);o=[]};var c=function(){return a.isSome()};var f=function(t){e.each(t,d)};var d=function(e){a.each(function(t){n(function(){e(t)},0)})};i(l);return{get:u,map:s,isReady:c}};var i=function(e){return r(function(t){t(e)})};return{nu:r,pure:i}});a("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){var n=function(n){return function(){var r=e.prototype.slice.call(arguments);var i=this;t(function(){n.apply(i,r)},0)}};return{bounce:n}});a("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(r){var i=function(e){r(t.bounce(e))};var a=function(e){return n(function(t){i(function(n){var r=e(n);t(r)})})};var o=function(e){return n(function(t){i(function(n){e(n).get(t)})})};var s=function(e){return n(function(t){i(function(n){e.get(t)})})};var u=function(){return e.nu(i)};return{map:a,bind:o,anonBind:s,toLazy:u,get:i}};var r=function(e){return n(function(t){t(e)})};return{nu:n,pure:r}});a("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){var t=function(t,n){return n(function(n){var r=[];var i=0;var a=function(e){return function(a){r[e]=a;i++;if(i>=t.length){n(r)}}};if(t.length===0){n([])}else{e.each(t,function(e,t){e.get(a(t))})}})};return{par:t}});a("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var r=function(e){return n.par(e,t.nu)};var i=function(t,n){var i=e.map(t,n);return r(i)};var a=function(e,t){return function(n){return t(n).bind(e)}};return{par:r,mapM:i,compose:a}});a("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){var i=function(e){return r===e};var a=function(e){return n(r)};var o=function(e){return n(r)};var s=function(e){return n(e(r))};var u=function(e){e(r)};var l=function(e){return e(r)};var c=function(e,t){return t(r)};var f=function(e){return e(r)};var d=function(e){return e(r)};var h=function(){return t.some(r)};return{is:i,isValue:e.constant(true),isError:e.constant(false),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:a,orThunk:o,fold:c,map:s,each:u,bind:l,exists:f,forall:d,toOption:h}};var r=function(n){var i=function(e){return e()};var a=function(){return e.die(n)()};var o=function(e){return e};var s=function(e){return e()};var u=function(e){return r(n)};var l=function(e){return r(n)};var c=function(e,t){return e(n)};return{is:e.constant(false),isValue:e.constant(false),isError:e.constant(true),getOr:e.identity,getOrThunk:i,getOrDie:a,or:o,orThunk:s,fold:c,map:u,each:e.noop,bind:l,exists:e.constant(false),forall:e.constant(true),toOption:t.none}};return{value:n,error:r}});a("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","global!navigator","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s){"use strict";return function(u,l){var c=0,f={},d;l=l||{};d=l.maxLoadTime||5e3;var h=function(e){u.getElementsByTagName("head")[0].appendChild(e)};var p=function(e,t,n){var r,i,l,p;var v=function(){var e=p.passed,t=e.length;while(t--){e[t]()}p.status=2;p.passed=[];p.failed=[]};var m=function(){var e=p.failed,t=e.length;while(t--){e[t]()}p.status=3;p.passed=[];p.failed=[]};var g=function(){var e=a.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)};var y=function(e,t){if(!e()){if((new Date).getTime()-l<d){o.setTimeout(t)}else{m()}}};var b=function(){y(function(){var e=u.styleSheets,t,n=e.length,i;while(n--){t=e[n];i=t.ownerNode?t.ownerNode:t.owningElement;if(i&&i.id===r.id){v();return true}}},b)};var x=function(){y(function(){try{var e=i.sheet.cssRules;v();return!!e}catch(e){}},x)};e=s._addCacheSuffix(e);if(!f[e]){p={passed:[],failed:[]};f[e]=p}else{p=f[e]}if(t){p.passed.push(t)}if(n){p.failed.push(n)}if(p.status==1){return}if(p.status==2){v();return}if(p.status==3){m();return}p.status=1;r=u.createElement("link");r.rel="stylesheet";r.type="text/css";r.id="u"+c++;r.async=false;r.defer=false;l=(new Date).getTime();if("onload"in r&&!g()){r.onload=b;r.onerror=m}else{if(a.userAgent.indexOf("Firefox")>0){i=u.createElement("style");i.textContent='@import "'+e+'"';x();h(i);return}b()}h(r);r.href=e};var v=function(e){return n.nu(function(n){p(e,t.compose(n,t.constant(i.value(e))),t.compose(n,t.constant(i.error(e))))})};var m=function(e){return e.fold(t.identity,t.identity)};var g=function(t,n,i){r.par(e.map(t,v)).get(function(t){var r=e.partition(t,function(e){return e.isValue()});if(r.fail.length>0){i(r.fail.map(m))}else{n(r.pass.map(m))}})};return{load:p,loadAll:g}}});a("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){var n=e;var r=function(e,n,r,i){var a,o;if(e){if(!i&&e[n]){return e[n]}if(e!=t){a=e[r];if(a){return a}for(o=e.parentNode;o&&o!=t;o=o.parentNode){a=o[r];if(a){return a}}}}};var i=function(e,n,r,i){var a,o,s;if(e){a=e[r];if(t&&a===t){return}if(a){if(!i){for(s=a[n];s;s=s[n]){if(!s[n]){return s}}}return a}o=e.parentNode;if(o&&o!==t){return o}}};this.current=function(){return n};this.next=function(e){n=r(n,"firstChild","nextSibling",e);return n};this.prev=function(e){n=r(n,"lastChild","previousSibling",e);return n};this.prev2=function(e){n=i(n,"lastChild","previousSibling",e);return n}}});a("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var r=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"];var i=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"];var a=["td","th"];var o=["thead","tbody","tfoot"];var s=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"];var u=["h1","h2","h3","h4","h5","h6"];var l=["li","dd","dt"];var c=["ul","ol","dl"];var f=function(r){var i;return function(a){i=i?i:e.mapToObject(r,t.constant(true));return i.hasOwnProperty(n.name(a))}};var d=f(u);var h=f(r);var p=function(e){return n.isElement(e)&&!h(e)};var v=function(e){return n.isElement(e)&&n.name(e)==="br"};return{isBlock:h,isInline:p,isHeading:d,isTextBlock:f(s),isList:f(c),isListItem:f(l),isVoid:f(i),isTableSection:f(o),isTableCell:f(a),isBr:v}});a("tinymce.core.dom.NodeType",[],function(){var e=function(e){return function(t){return!!t&&t.nodeType==e}};var t=e(1);var n=function(e){e=e.toLowerCase().split(" ");return function(t){var n,r;if(t&&t.nodeType){r=t.nodeName.toLowerCase();for(n=0;n<e.length;n++){if(r===e[n]){return true}}}return false}};var r=function(e,n){n=n.toLowerCase().split(" ");return function(r){var i,a;if(t(r)){for(i=0;i<n.length;i++){a=r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(e);if(a===n[i]){return true}}}return false}};var i=function(e,n){return function(r){return t(r)&&r[e]===n}};var a=function(e,n){return function(n){return t(n)&&n.hasAttribute(e)}};var o=function(e,n){return function(r){return t(r)&&r.getAttribute(e)===n}};var s=function(e){return t(e)&&e.hasAttribute("data-mce-bogus")};var u=function(e){return function(n){if(t(n)){if(n.contentEditable===e){return true}if(n.getAttribute("data-mce-contenteditable")===e){return true}}return false}};return{isText:e(3),isElement:t,isComment:e(8),isDocument:e(9),isBr:n("br"),isContentEditableTrue:u("true"),isContentEditableFalse:u("false"),matchNodeNames:n,hasPropValue:i,hasAttribute:a,hasAttributeValue:o,matchStyleValues:r,isBogus:s}});a("tinymce.core.dom.TrimNode",["ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r){var i=function(e){var t=e.previousSibling&&e.previousSibling.nodeName==="SPAN";var n=e.nextSibling&&e.nextSibling.nodeName==="SPAN";return t&&n};var a=function(e){return e&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};var o=function(s,u){var l,c=u.childNodes;if(n.isElement(u)&&a(u)){return}for(l=c.length-1;l>=0;l--){o(s,c[l])}if(n.isDocument(u)===false){if(n.isText(u)&&u.nodeValue.length>0){var f=r.trim(u.nodeValue).length;if(s.isBlock(u.parentNode)||f>0){return}if(f===0&&i(u)){return}}else if(n.isElement(u)){c=u.childNodes;if(c.length===1&&a(c[0])){u.parentNode.insertBefore(c[0],u)}if(c.length||t.isVoid(e.fromDom(u))){return}}s.remove(u)}return u};return{trimNode:o}});a("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;var r,i,a,o=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\"\']/g,l=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,c={128:"‚Ç¨",130:"‚Äö",131:"∆í",132:"‚Äû",133:"‚Ä¶",134:"‚Ä†",135:"‚Ä°",136:"ÀÜ",137:"‚Ä∞",138:"≈†",139:"‚Äπ",140:"≈í",142:"≈Ω",145:"‚Äò",146:"‚Äô",147:"‚Äú",148:"‚Äù",149:"‚Ä¢",150:"‚Äì",151:"‚Äî",152:"Àú",153:"‚Ñ¢",154:"≈°",155:"‚Ä∫",156:"≈ì",158:"≈æ",159:"≈∏"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var f=function(t){var n;n=e.fromTag("div").dom();n.innerHTML=t;return n.textContent||n.innerText||t};var d=function(e,t){var n,r,a,o={};if(e){e=e.split(",");t=t||10;for(n=0;n<e.length;n+=2){r=String.fromCharCode(parseInt(e[n],t));if(!i[r]){a="&"+e[n+1]+";";o[r]=a;o[a]=r}}return o}};r=d("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,"+"5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,"+"5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,"+"5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,"+"68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,"+"6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,"+"6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,"+"75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,"+"7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,"+"7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,"+"sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,"+"st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,"+"t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,"+"tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,"+"u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,"+"81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,"+"8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,"+"8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,"+"8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,"+"8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,"+"nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,"+"rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,"+"Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,"+"80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,"+"811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?o:s,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(u,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?o:s,function(e){if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){n=n||r;return e.replace(t?o:s,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(e,t){t=d(t)||r;var a=function(e,n){return e.replace(n?o:s,function(e){if(i[e]!==undefined){return i[e]}if(t[e]!==undefined){return t[e]}if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return"&#"+e.charCodeAt(0)+";"})};var u=function(e,n){return h.encodeNamed(e,n,t)};e=n(e.replace(/\+/g,","));if(e.named&&e.numeric){return a}if(e.named){if(t){return u}return h.encodeNamed}if(e.numeric){return h.encodeNumeric}return h.encodeRaw},decode:function(e){return e.replace(l,function(e,t){if(t){if(t.charAt(0).toLowerCase()==="x"){t=parseInt(t.substr(1),16)}else{t=parseInt(t,10)}if(t>65535){t-=65536;return String.fromCharCode(55296+(t>>10),56320+(t&1023))}return c[t]||String.fromCharCode(t)}return a[e]||r[e]||f(e)})}};return h});a("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){var t={},n={};var r=e.makeMap,i=e.each,a=e.extend,o=e.explode,s=e.inArray;var u=function(t,n){t=e.trim(t);return t?t.split(n||" "):[]};var l=function(e){var r={},a,o;var s,l,c,f;var d=function(e,t,i){var o,s,l;var c=function(e,t){var n={},r,i;for(r=0,i=e.length;r<i;r++){n[e[r]]=t||{}}return n};i=i||[];t=t||"";if(typeof i==="string"){i=u(i)}e=u(e);o=e.length;while(o--){s=u([a,t].join(" "));l={attributes:c(s),attributesOrder:s,children:c(i,n)};r[e[o]]=l}};var h=function(e,t){var n,i,a,o;e=u(e);n=e.length;t=u(t);while(n--){i=r[e[n]];for(a=0,o=t.length;a<o;a++){i.attributes[t[a]]={};i.attributesOrder.push(t[a])}}};if(t[e]){return t[e]}a="id accesskey class dir lang style tabindex title role";o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment";if(e!="html4"){a+=" contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate";o+=" article aside details dialog figure header footer hgroup section nav";s+=" audio canvas command datalist mark meter output picture "+"progress time wbr video ruby bdi keygen"}if(e!="html5-strict"){a+=" xml:lang";f="acronym applet basefont big font strike tt";s=[s,f].join(" ");i(u(f),function(e){d(e,"",s)});c="center dir isindex noframes";o=[o,c].join(" ");l=[o,s].join(" ");i(u(c),function(e){d(e,"",l)})}l=l||[o,s].join(" ");d("html","manifest","head body");d("head","","base command link meta noscript script style title");d("title hr noscript br");d("base","href target");d("link","href rel media hreflang type sizes hreflang");d("meta","name http-equiv content charset");d("style","media type scoped");d("script","src async defer type charset");d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",l);d("address dt dd div caption","",l);d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s);d("blockquote","cite",l);d("ol","reversed start type","li");d("ul","","li");d("li","value",l);d("dl","","dt dd");d("a","href target rel media hreflang type",s);d("q","cite",s);d("ins del","cite datetime",l);d("img","src sizes srcset alt usemap ismap width height");d("iframe","src name width height",l);d("embed","src type width height");d("object","data type typemustmatch name usemap form width height",[l,"param"].join(" "));d("param","name value");d("map","name",[l,"area"].join(" "));d("area","alt coords shape href target rel media hreflang type");d("table","border","caption colgroup thead tfoot tbody tr"+(e=="html4"?" col":""));d("colgroup","span","col");d("col","span");d("tbody thead tfoot","","tr");d("tr","","td th");d("td","colspan rowspan headers",l);d("th","colspan rowspan headers scope abbr",l);d("form","accept-charset action autocomplete enctype method name novalidate target",l);d("fieldset","disabled form name",[l,"legend"].join(" "));d("label","form for",s);d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e=="html4"?l:s);d("select","disabled form multiple name required size","option optgroup");d("optgroup","disabled label","option");d("option","disabled label selected value");d("textarea","cols dirname disabled form maxlength name readonly required rows wrap");d("menu","type label",[l,"li"].join(" "));d("noscript","",l);if(e!="html4"){d("wbr");d("ruby","",[s,"rt rp"].join(" "));d("figcaption","",l);d("mark rt rp summary bdi","",s);d("canvas","width height",l);d("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",[l,"track source"].join(" "));d("audio","src crossorigin preload autoplay mediagroup loop muted controls "+"buffered volume",[l,"track source"].join(" "));d("picture","","img source");d("source","src srcset type media sizes");d("track","kind src srclang label default");d("datalist","",[s,"option"].join(" "));d("article section nav aside header footer","",l);d("hgroup","","h1 h2 h3 h4 h5 h6");d("figure","",[l,"figcaption"].join(" "));d("time","datetime",s);d("dialog","open",l);d("command","type label icon disabled checked radiogroup command");d("output","for form name",s);d("progress","value max",s);d("meter","value min max low high optimum",s);d("details","open",[l,"summary"].join(" "));d("keygen","autofocus challenge disabled form keytype name")}if(e!="html5-strict"){h("script","language xml:space");h("style","xml:space");h("object","declare classid code codebase codetype archive standby align border hspace vspace");h("embed","align name hspace vspace");h("param","valuetype type");h("a","charset name rev shape coords");h("br","clear");h("applet","codebase archive code object alt name width height align hspace vspace");h("img","name longdesc align border hspace vspace");h("iframe","longdesc frameborder marginwidth marginheight scrolling align");h("font basefont","size color face");h("input","usemap align");h("select","onchange");h("textarea");h("h1 h2 h3 h4 h5 h6 div p legend caption","align");h("ul","type compact");h("li","type");h("ol dl menu dir","compact");h("pre","width xml:space");h("hr","align noshade size width");h("isindex","prompt");h("table","summary width frame rules cellspacing cellpadding align bgcolor");h("col","width align char charoff valign");h("colgroup","width align char charoff valign");h("thead","align char charoff valign");h("tr","align char charoff valign bgcolor");h("th","axis align char charoff valign nowrap bgcolor width height");h("form","accept");h("td","abbr axis scope align char charoff valign nowrap bgcolor width height");h("tfoot","align char charoff valign");h("tbody","align char charoff valign");h("area","nohref");h("body","background bgcolor text link vlink alink")}if(e!="html4"){h("input button select textarea","autofocus");h("input textarea","placeholder");h("a","download");h("link script img","crossorigin");h("iframe","sandbox seamless allowfullscreen")}i(u("a form meter progress dfn"),function(e){if(r[e]){delete r[e].children[e]}});delete r.caption.children.table;delete r.script;t[e]=r;return r};var c=function(e,t){var n;if(e){n={};if(typeof e=="string"){e={"*":e}}i(e,function(e,i){n[i]=n[i.toUpperCase()]=t=="map"?r(e,/[, ]/):o(e,/[, ]/)})}return n};return function(e){var n=this,f={},d={},h=[],p,v,m;var g,y,b,x,w;var _,k,C,T,S;var E={},A={};var P=function(n,i,o){var s=e[n];if(!s){s=t[n];if(!s){s=r(i," ",r(i.toUpperCase()," "));s=a(s,o);t[n]=s}}else{s=r(s,/[, ]/,r(s.toUpperCase(),/[, ]/))}return s};e=e||{};m=l(e.schema);if(e.verify_html===false){e.valid_elements="*[*]"}p=c(e.valid_styles);v=c(e.invalid_styles,"map");w=c(e.valid_classes,"map");g=P("whitespace_elements","pre script noscript style textarea video audio iframe object code");y=P("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");b=P("short_ended_elements","area base basefont br col frame hr img input isindex link "+"meta param embed source wbr track");x=P("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize "+"noshade nowrap readonly selected autoplay loop controls");k=P("non_empty_elements","td th iframe video audio object "+"script pre code",b);C=P("move_caret_before_on_enter_elements","table",k);T=P("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form "+"blockquote center dir fieldset header footer article section hgroup aside nav figure");_=P("block_elements","hr table tbody thead tfoot "+"th tr td li ol ul caption dl dt dd noscript menu isindex option "+"datalist select optgroup figcaption",T);S=P("text_inline_elements","span strong b em i font strike u var cite "+"dfn code mark q sup sub samp");i((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){A[e]=new RegExp("</"+e+"[^>]*>","gi")});var O=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")};var M=function(e){var t,n,i,a,o,l,c,d,p,v,m,g,y,b,x,w,_,k,C,T=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(e){e=u(e,",");if(f["@"]){w=f["@"].attributes;_=f["@"].attributesOrder}for(t=0,n=e.length;t<n;t++){o=T.exec(e[t]);if(o){b=o[1];p=o[2];x=o[3];d=o[5];g={};y=[];l={attributes:g,attributesOrder:y};if(b==="#"){l.paddEmpty=true}if(b==="-"){l.removeEmpty=true}if(o[4]==="!"){l.removeEmptyAttrs=true}if(w){for(k in w){g[k]=w[k]}y.push.apply(y,_)}if(d){d=u(d,"|");for(i=0,a=d.length;i<a;i++){o=S.exec(d[i]);if(o){c={};m=o[1];v=o[2].replace(/[\\:]:/g,":");b=o[3];C=o[4];if(m==="!"){l.attributesRequired=l.attributesRequired||[];l.attributesRequired.push(v);c.required=true}if(m==="-"){delete g[v];y.splice(s(y,v),1);continue}if(b){if(b==="="){l.attributesDefault=l.attributesDefault||[];l.attributesDefault.push({name:v,value:C});c.defaultValue=C}if(b===":"){l.attributesForced=l.attributesForced||[];l.attributesForced.push({name:v,value:C});c.forcedValue=C}if(b==="<"){c.validValues=r(C,"?")}}if(E.test(v)){l.attributePatterns=l.attributePatterns||[];c.pattern=O(v);l.attributePatterns.push(c)}else{if(!g[v]){y.push(v)}g[v]=c}}}}if(!w&&p=="@"){w=g;_=y}if(x){l.outputName=p;f[x]=l}if(E.test(p)){l.pattern=O(p);h.push(l)}else{f[p]=l}}}}};var N=function(e){f={};h=[];M(e);i(m,function(e,t){d[t]=e.children})};var R=function(e){var n=/^(~)?(.+)$/;if(e){t.text_block_elements=t.block_elements=null;i(u(e,","),function(e){var t=n.exec(e),r=t[1]==="~",o=r?"span":"div",s=t[2];d[s]=d[o];E[s]=o;if(!r){_[s.toUpperCase()]={};_[s]={}}if(!f[s]){var u=f[o];u=a({},u);delete u.removeEmptyAttrs;delete u.removeEmpty;f[s]=u}i(d,function(e,t){if(e[o]){d[t]=e=a({},d[t]);e[s]=e[o]}})})}};var D=function(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;t[e.schema]=null;if(n){i(u(n,","),function(e){var t=r.exec(e),n,a;if(t){a=t[1];if(a){n=d[t[2]]}else{n=d[t[2]]={"#comment":{}}}n=d[t[2]];i(u(t[3],"|"),function(e){if(a==="-"){delete n[e]}else{n[e]={}}})}})}};var B=function(e){var t=f[e],n;if(t){return t}n=h.length;while(n--){t=h[n];if(t.pattern.test(e)){return t}}};if(!e.valid_elements){i(m,function(e,t){f[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};d[t]=e.children});if(e.schema!="html5"){i(u("strong/b em/i"),function(e){e=u(e,"/");f[e[1]].outputName=e[0]})}i(u("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){if(f[e]){f[e].removeEmpty=true}});i(u("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){f[e].paddEmpty=true});i(u("span"),function(e){f[e].removeEmptyAttrs=true})}else{N(e.valid_elements)}R(e.custom_elements);D(e.valid_children);M(e.extended_valid_elements);D("+ol[ul|ol],+ul[ul|ol]");i({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){if(f[t]){f[t].parentsRequired=u(e)}});if(e.invalid_elements){i(o(e.invalid_elements),function(e){if(f[e]){delete f[e]}})}if(!B("span")){M("span[!data-mce-type|*]")}n.children=d;n.getValidStyles=function(){return p};n.getInvalidStyles=function(){return v};n.getValidClasses=function(){return w};n.getBoolAttrs=function(){return x};n.getBlockElements=function(){return _};n.getTextBlockElements=function(){return T};n.getTextInlineElements=function(){return S};n.getShortEndedElements=function(){return b};n.getSelfClosingElements=function(){return y};n.getNonEmptyElements=function(){return k};n.getMoveCaretBeforeOnEnterElements=function(){return C};n.getWhiteSpaceElements=function(){return g};n.getSpecialElements=function(){return A};n.isValidChild=function(e,t){var n=d[e.toLowerCase()];return!!(n&&n[t.toLowerCase()])};n.isValid=function(e,t){var n,r,i=B(e);if(i){if(t){if(i.attributes[t]){return true}n=i.attributePatterns;if(n){r=n.length;while(r--){if(n[r].pattern.test(e)){return true}}}}else{return true}}return false};n.getElementRule=B;n.getCustomElements=function(){return E};n.addValidElements=M;n.setValidElements=N;n.addCustomElements=R;n.addValidChildren=D;n.elements=f}});a("tinymce.core.html.Styles",[],function(){return function(e,t){var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,o,s={},u,l,c,f="\ufeff";e=e||{};if(t){l=t.getValidStyles();c=t.getInvalidStyles()}u=("\\\" \\' \\; \\: ; : "+f).split(" ");for(o=0;o<u.length;o++){s[u[o]]=f+o;s[f+o]=u[o]}var d=function(e,t,n,r){var i=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};return{toHex:function(e){return e.replace(n,d)},parse:function(t){var u={},l,c,h,p,v=e.url_converter;var m=e.url_converter_scope||this;var g=function(e,t,n){var r,i,a,s;r=u[e+"-top"+t];if(!r){return}i=u[e+"-right"+t];if(!i){return}a=u[e+"-bottom"+t];if(!a){return}s=u[e+"-left"+t];if(!s){return}var l=[r,i,a,s];o=l.length-1;while(o--){if(l[o]!==l[o+1]){break}}if(o>-1&&n){return}u[e+t]=o==-1?l[0]:l.join(" ");delete u[e+"-top"+t];delete u[e+"-right"+t];delete u[e+"-bottom"+t];delete u[e+"-left"+t]};var y=function(e){var t=u[e],n;if(!t){return}t=t.split(" ");n=t.length;while(n--){if(t[n]!==t[0]){return false}}u[e]=t[0];return true};var b=function(e,t,n,r){if(!y(t)){return}if(!y(n)){return}if(!y(r)){return}u[e]=u[t]+" "+u[n]+" "+u[r];delete u[t];delete u[n];delete u[r]};var x=function(e){p=true;return s[e]};var w=function(e,t){if(p){e=e.replace(/\uFEFF[0-9]/g,function(e){return s[e]})}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e};var _=function(e){return String.fromCharCode(parseInt(e.slice(1),16))};var k=function(e){return e.replace(/\\[0-9a-f]+/gi,_)};var C=function(t,n,r,i,a,o){a=a||o;if(a){a=w(a);return"'"+a.replace(/\'/g,"\\'")+"'"}n=w(n||r||i);if(!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s)){return""}if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s)){return""}}if(v){n=v.call(m,n,"style")}return"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){t=t.replace(/[\u0000-\u001F]/g,"");t=t.replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});while(l=i.exec(t)){i.lastIndex=l.index+l[0].length;c=l[1].replace(a,"").toLowerCase();h=l[2].replace(a,"");if(c&&h){c=k(c);h=k(h);if(c.indexOf(f)!==-1||c.indexOf('"')!==-1){continue}if(!e.allow_script_urls&&(c=="behavior"||/expression\s*\(|\/\*|\*\//.test(h))){continue}if(c==="font-weight"&&h==="700"){h="bold"}else if(c==="color"||c==="background-color"){h=h.toLowerCase()}h=h.replace(n,d);h=h.replace(r,C);u[c]=p?w(h,true):h}}g("border","",true);g("border","-width");g("border","-color");g("border","-style");g("padding","");g("margin","");b("border","border-width","border-style","border-color");if(u.border==="medium none"){delete u.border}if(u["border-image"]==="none"){delete u["border-image"]}}return u},serialize:function(e,t){var n="",r,i;var a=function(t){var r,i,a,o;r=l[t];if(r){for(i=0,a=r.length;i<a;i++){t=r[i];o=e[t];if(o){n+=(n.length>0?" ":"")+t+": "+o+";"}}}};var o=function(e,t){var n;n=c["*"];if(n&&n[e]){return false}n=c[t];if(n&&n[e]){return false}return true};if(t&&l){a("*");a(t)}else{for(r in e){i=e[r];if(i&&(!c||o(r,t))){n+=(n.length>0?" ":"")+r+": "+i+";"}}}return n}}}});a("tinymce.core.dom.DOMUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Position","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.dom.TrimNode","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p=h.each,v=h.is,m=h.grep;var g=n.ie;var y=/^([a-z0-9],?)+$/i;var b=/^[ \t\r\n]*$/;var x=function(e,t){var n={},r=t.keep_values,i;i={set:function(n,r,i){if(t.url_converter){r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])}n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};n={style:{set:function(e,t){if(t!==null&&typeof t==="object"){e.css(t);return}if(r){e.attr("data-mce-style",t)}e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName);return n}}};if(r){n.href=n.src=i}return n};var w=function(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName);if(!n){n=null}t.attr("data-mce-style",n)};var _=function(e,t){var n=0,r,i;if(e){for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){i=e.nodeType;if(t&&i==3){if(i==r||!e.nodeValue.length){continue}}n++;r=i}}return n};var k=function(e,n){var a=this,o;a.doc=e;a.win=t;a.files={};a.counter=0;a.stdMode=!g||e.documentMode>=8;a.boxModel=!g||e.compatMode=="CSS1Compat"||a.stdMode;a.styleSheetLoader=new s(e);a.boundEvents=[];a.settings=n=n||{};a.schema=n.schema?n.schema:new f({});a.styles=new d({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);a.fixDoc(e);a.events=n.ownEvents?new i(n.proxy):i.Event;a.attrHooks=x(a,n);o=a.schema.getBlockElements();a.$=r.overrideDefaults(function(){return{context:e,element:a.getRoot()}});a.isBlock=function(e){if(!e){return false}var t=e.nodeType;if(t){return!!(t===1&&o[e.nodeName])}return!!o[e]}};k.prototype={$$:function(e){if(typeof e=="string"){e=this.get(e)}return this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(g&&t.schema){("abbr article aside audio canvas "+"details figcaption figure footer "+"header hgroup mark menu meter nav "+"output progress section summary "+"time video").replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements()){e.createElement(n)}}},clone:function(e,t){var n=this,r,i;if(!g||e.nodeType!==1||t){return e.cloneNode(t)}i=n.doc;if(!t){r=i.createElement(e.nodeName);p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))});return r}return r.firstChild},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;e=!e?this.win:e;t=e.document;n=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;e=t.get(e);n=t.getPos(e);r=t.getSize(e);return{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;e=t.get(e);n=t.getStyle(e,"width");r=t.getStyle(e,"height");if(n.indexOf("px")===-1){n=0}if(r.indexOf("px")===-1){r=0}return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,t,n,r){var i=this,a,o=[];e=i.get(e);r=r===undefined;n=n||(i.getRoot().nodeName!="BODY"?i.getRoot().parentNode:null);if(v(t,"string")){a=t;if(t==="*"){t=function(e){return e.nodeType==1}}else{t=function(e){return i.is(e,a)}}}while(e){if(e==n||!e.nodeType||e.nodeType===9){break}if(!t||t(e)){if(r){o.push(e)}else{return e}}e=e.parentNode}return r?o:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e;e=this.doc.getElementById(e);if(e&&e.id!==t){return this.doc.getElementsByName(t)[1]}}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return o(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e){return false}if(e.length===undefined){if(t==="*"){return e.nodeType==1}if(y.test(t)){t=t.toLowerCase().split(/,/);e=e.nodeName.toLowerCase();for(n=t.length-1;n>=0;n--){if(t[n]==e){return true}}return false}}if(e.nodeType&&e.nodeType!=1){return false}var r=e.nodeType?[e]:e;return o(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,r,i){var a=this;return this.run(e,function(e){var o;o=v(t,"string")?a.doc.createElement(t):t;a.setAttribs(o,n);if(r){if(r.nodeType){o.appendChild(r)}else{a.setHTML(o,r)}}return!i?e.appendChild(o):o})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t){if(t.hasOwnProperty(i)&&t[i]!==null&&typeof t[i]!="undefined"){r+=" "+i+'="'+this.encode(t[i])+'"'}}if(typeof n!="undefined"){return r+">"+n+"</"+e+">"}return r+" />"},createFragment:function(e){var t,n,r=this.doc,i;i=r.createElement("div");t=r.createDocumentFragment();if(e){i.innerHTML=e}while(n=i.firstChild){t.appendChild(n)}return t},remove:function(e,t){e=this.$$(e);if(t){e.each(function(){var e;while(e=this.firstChild){if(e.nodeType==3&&e.data.length===0){this.removeChild(e)}else{this.parentNode.insertBefore(e,this)}}}).remove()}else{e.remove()}return e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n);if(this.settings.update_styles){w(this,e)}},getStyle:function(e,t,r){e=this.$$(e);if(r){return e.css(t)}t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(t=="float"){t=n.ie&&n.ie<12?"styleFloat":"cssFloat"}return e[0]&&e[0].style?e[0].style[t]:undefined},setStyles:function(e,t){e=this.$$(e).css(t);if(this.settings.update_styles){w(this,e)}},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--){e.removeAttributeNode(n.item(t))}})},setAttrib:function(e,t,n){var r=this,i,a,o=r.settings;if(n===""){n=null}e=r.$$(e);i=e.attr(t);if(!e.length){return}a=r.attrHooks[t];if(a&&a.set){a.set(e,n,t)}else{e.attr(t,n)}if(i!=n&&o.onSetAttrib){o.onSetAttrib({attrElm:e,attrName:t,attrValue:n})}},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){p(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this,i,a;e=r.$$(e);if(e.length){i=r.attrHooks[t];if(i&&i.get){a=i.get(e,t)}else{a=e.attr(t)}}if(typeof a=="undefined"){a=n||""}return a},getPos:function(e,t){return a.getPos(this.doc.body,this.get(e),t)},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(t){var n=this,r=n.doc,i,a;if(n!==k.DOM&&r===e){var o=k.DOM.addedStyles;o=o||[];if(o[t]){return}o[t]=true;k.DOM.addedStyles=o}a=r.getElementById("mceDefaultStyles");if(!a){a=r.createElement("style");a.id="mceDefaultStyles";a.type="text/css";i=r.getElementsByTagName("head")[0];if(i.firstChild){i.insertBefore(a,i.firstChild)}else{i.appendChild(a)}}if(a.styleSheet){a.styleSheet.cssText+=t}else{a.appendChild(r.createTextNode(t))}},loadCSS:function(t){var n=this,r=n.doc,i;if(n!==k.DOM&&r===e){k.DOM.loadCSS(t);return}if(!t){t=""}i=r.getElementsByTagName("head")[0];p(t.split(","),function(e){var t;e=h._addCacheSuffix(e);if(n.files[e]){return}n.files[e]=true;t=n.create("link",{rel:"stylesheet",href:e});if(g&&r.documentMode&&r.recalc){t.onload=function(){if(r.recalc){r.recalc()}t.onload=null}}i.appendChild(t)})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,false)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){if(this.className===""){r(this).attr("class",null)}})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return this.$$(e).css("display")=="none"},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(e,t){e=this.$$(e);if(g){e.each(function(e,n){if(n.canHaveHTML===false){return}while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br>"+t;n.removeChild(n.firstChild)}catch(e){r("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t})}else{e.html(t)}},getOuterHTML:function(e){e=this.get(e);return e.nodeType==1&&"outerHTML"in e?e.outerHTML:r("<div></div>").append(r(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this){this.outerHTML=t;return}}catch(e){}n.remove(r(this).html(t),true)})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(e,t){t=this.get(t);return this.run(e,function(e){var n,r;n=t.parentNode;r=t.nextSibling;if(r){n.insertBefore(e,r)}else{n.appendChild(e)}return e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){if(v(t,"array")){e=e.cloneNode(true)}if(n){p(m(t.childNodes),function(t){e.appendChild(t)})}return t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;if(e.nodeName!=t.toUpperCase()){r=n.create(t);p(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))});n.replace(r,e,1)}return r||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r){r=r.parentNode}if(n==r){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}return n},toHex:function(e){return this.styles.toHex(h.trim(e))},run:function(e,t,n){var r=this,i;if(typeof e==="string"){e=r.get(e)}if(!e){return false}n=n||this;if(!e.nodeType&&(e.length||e.length===0)){i=[];p(e,function(e,a){if(e){if(typeof e=="string"){e=r.get(e)}i.push(t.call(n,e,a))}});return i}return t.call(n,e)},getAttribs:function(e){var t;e=this.get(e);if(!e){return[]}if(g){t=[];if(e.nodeName=="OBJECT"){return e.attributes}if(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")){t.push({specified:1,nodeName:"selected"})}var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;e.cloneNode(false).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})});return t}return e.attributes},isEmpty:function(e,t){var n=this,r,i,a,o,s,l,c=0;e=e.firstChild;if(e){s=new u(e,e.parentNode);t=t||(n.schema?n.schema.getNonEmptyElements():null);o=n.schema?n.schema.getWhiteSpaceElements():{};do{a=e.nodeType;if(a===1){var f=e.getAttribute("data-mce-bogus");if(f){e=s.next(f==="all");continue}l=e.nodeName.toLowerCase();if(t&&t[l]){if(l==="br"){c++;e=s.next();continue}return false}i=n.getAttribs(e);r=i.length;while(r--){l=i[r].nodeName;if(l==="name"||l==="data-mce-bookmark"){return false}}}if(a==8){return false}if(a===3&&!b.test(e.nodeValue)){return false}if(a===3&&e.parentNode&&o[e.parentNode.nodeName]&&b.test(e.nodeValue)){return false}e=s.next()}while(e)}return c<=1},createRng:function(){return this.doc.createRange()},nodeIndex:_,split:function(e,t,n){var r=this,i=r.createRng(),a,o,s;if(e&&t){i.setStart(e.parentNode,r.nodeIndex(e));i.setEnd(t.parentNode,r.nodeIndex(t));a=i.extractContents();i=r.createRng();i.setStart(t.parentNode,r.nodeIndex(t)+1);i.setEnd(e.parentNode,r.nodeIndex(e)+1);o=i.extractContents();s=e.parentNode;s.insertBefore(l.trimNode(r,a),e);if(n){s.insertBefore(n,e)}else{s.insertBefore(t,e)}s.insertBefore(l.trimNode(r,o),e);r.remove(e);return n||t}},bind:function(e,t,n,r){var i=this;if(h.isArray(e)){var a=e.length;while(a--){e[a]=i.bind(e[a],t,n,r)}return e}if(i.settings.collect&&(e===i.doc||e===i.win)){i.boundEvents.push([e,t,n,r])}return i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this,i;if(h.isArray(e)){i=e.length;while(i--){e[i]=r.unbind(e[i],t,n)}return e}if(r.boundEvents&&(e===r.doc||e===r.win)){i=r.boundEvents.length;while(i--){var a=r.boundEvents[i];if(e==a[0]&&(!t||t==a[1])&&(!n||n==a[2])){this.events.unbind(a[0],a[1],a[2])}}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(!e||e.nodeType!=1){return null}t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null},getContentEditableParent:function(e){var t=this.getRoot(),n=null;for(;e&&e!==t;e=e.parentNode){n=this.getContentEditable(e);if(n!==null){break}}return n},destroy:function(){var e=this;if(e.boundEvents){var t=e.boundEvents.length;while(t--){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}if(o.setDocument){o.setDocument()}e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){while(e){if(t===e){return true}e=e.parentNode}return false},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e){if(typeof i=="string"){i=function(e){return r.is(e,t)}}for(e=e[n];e;e=e[n]){if(i(e)){return e}}}return null}};k.DOM=new k(e);k.nodeIndex=_;return k});a("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r=t.DOM;var i=n.each,a=n.grep;var o=function(e){return typeof e==="function"};var s=function(){var t=0,s=1,u=2,l=3,c={},f=[],d={},h=[],p=0,v;var m=function(t,i,a){var s=r,u,l;var c=function(){s.remove(l);if(u){u.onreadystatechange=u.onload=u=null}i()};var f=function(){if(o(a)){a()}else{if(typeof console!=="undefined"&&console.log){console.log("Failed to load script: "+t)}}};l=s.uniqueId();u=e.createElement("script");u.id=l;u.type="text/javascript";u.src=n._addCacheSuffix(t);if("onreadystatechange"in u){u.onreadystatechange=function(){if(/loaded|complete/.test(u.readyState)){c()}}}else{u.onload=c}u.onerror=f;(e.getElementsByTagName("head")[0]||e.body).appendChild(u)};this.isDone=function(e){return c[e]==u};this.markDone=function(e){c[e]=u};this.add=this.load=function(e,n,r,i){var a=c[e];if(a==v){f.push(e);c[e]=t}if(n){if(!d[e]){d[e]=[]}d[e].push({success:n,failure:i,scope:r||this})}};this.remove=function(e){delete c[e];delete d[e]};this.loadQueue=function(e,t,n){this.loadScripts(f,e,t,n)};this.loadScripts=function(e,t,n,r){var f,g=[];var y=function(e,t){i(d[t],function(t){if(o(t[e])){t[e].call(t.scope)}});d[t]=v};h.push({success:t,failure:r,scope:n||this});f=function(){var t=a(e);e.length=0;i(t,function(e){if(c[e]===u){y("success",e);return}if(c[e]===l){y("failure",e);return}if(c[e]!==s){c[e]=s;p++;m(e,function(){c[e]=u;p--;y("success",e);f()},function(){c[e]=l;p--;g.push(e);y("failure",e);f()})}});if(!p){var n=h.slice(0);h.length=0;i(n,function(e){if(g.length===0){if(o(e.success)){e.success.call(e.scope)}}else{if(o(e.failure)){e.failure.call(e.scope,g)}}})}};f()}};s.ScriptLoader=new s;return s});a("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t,n){var r=n.each;var i=function(){var e=this;e.items=[];e.urls={};e.lookup={};e._listeners=[]};i.prototype={get:function(e){if(this.lookup[e]){return this.lookup[e].instance}return undefined},dependencies:function(e){var t;if(this.lookup[e]){t=this.lookup[e].dependencies}return t||[]},requireLangPack:function(e,n){var r=i.language;if(r&&i.languageLoad!==false){if(n){n=","+n+",";if(n.indexOf(","+r.substr(0,2)+",")!=-1){r=r.substr(0,2)}else if(n.indexOf(","+r+",")==-1){return}}t.ScriptLoader.add(this.urls[e]+"/langs/"+r+".js")}},add:function(t,n,i){this.items.push(n);this.lookup[t]={instance:n,dependencies:i};var a=e.partition(this._listeners,function(e){return e.name===t});this._listeners=a.fail;r(a.pass,function(e){e.callback()});return n},remove:function(e){delete this.urls[e];delete this.lookup[e]},createUrl:function(e,t){if(typeof t==="object"){return t}return{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,n){var i=this.urls[e];r(n,function(e){t.ScriptLoader.add(i+"/"+e)})},load:function(e,n,a,o,s){var u=this,l=n;var c=function(){var i=u.dependencies(e);r(i,function(e){var t=u.createUrl(n,e);u.load(t.resource,t,undefined,undefined)});if(a){if(o){a.call(o)}else{a.call(t)}}};if(u.urls[e]){return}if(typeof n==="object"){l=n.prefix+n.resource+n.suffix}if(l.indexOf("/")!==0&&l.indexOf("://")==-1){l=i.baseURL+"/"+l}u.urls[e]=l.substring(0,l.lastIndexOf("/"));if(u.lookup[e]){c()}else{t.ScriptLoader.add(l,c,o,s)}},waitFor:function(e,t){if(this.lookup.hasOwnProperty(e)){t()}else{this._listeners.push({name:e,callback:t})}}};i.PluginManager=new i;i.ThemeManager=new i;return i});a("tinymce.core.text.Zwsp",[],function(){var e="\ufeff";var t=function(t){return t===e};var n=function(t){return t.replace(new RegExp(e,"g"),"")};return{isZwsp:t,ZWSP:e,trim:n}});a("tinymce.core.caret.CaretContainer",["global!document","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isElement,i=t.isText;var a=function(e){if(i(e)){e=e.parentNode}return r(e)&&e.hasAttribute("data-mce-caret")};var o=function(e){return i(e)&&n.isZwsp(e.data)};var s=function(e){return a(e)||o(e)};var u=function(e){return e.firstChild!==e.lastChild||!t.isBr(e.firstChild)};var l=function(e,t){var r,a,o,u;r=e.ownerDocument;o=r.createTextNode(n.ZWSP);u=e.parentNode;if(!t){a=e.nextSibling;if(i(a)){if(s(a)){return a}if(m(a)){a.splitText(1);return a}}if(e.nextSibling){u.insertBefore(o,e.nextSibling)}else{u.appendChild(o)}}else{a=e.previousSibling;if(i(a)){if(s(a)){return a}if(g(a)){return a.splitText(a.data.length-1)}}u.insertBefore(o,e)}return o};var c=function(e){if(t.isText(e)){var r=e.data;if(r.length>0&&r.charAt(0)!==n.ZWSP){e.insertData(0,n.ZWSP)}return e}else{return null}};var f=function(e){if(t.isText(e)){var r=e.data;if(r.length>0&&r.charAt(r.length-1)!==n.ZWSP){e.insertData(r.length,n.ZWSP)}return e}else{return null}};var d=function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset())===n.ZWSP};var h=function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset()-1)===n.ZWSP};var p=function(){var t=e.createElement("br");t.setAttribute("data-mce-bogus","1");return t};var v=function(e,t,n){var r,i,a;r=t.ownerDocument;i=r.createElement(e);i.setAttribute("data-mce-caret",n?"before":"after");i.setAttribute("data-mce-bogus","all");i.appendChild(p());a=t.parentNode;if(!n){if(t.nextSibling){a.insertBefore(i,t.nextSibling)}else{a.appendChild(i)}}else{a.insertBefore(i,t)}return i};var m=function(e){return i(e)&&e.data[0]==n.ZWSP};var g=function(e){return i(e)&&e.data[e.data.length-1]==n.ZWSP};var y=function(e){var n=e.getElementsByTagName("br");var r=n[n.length-1];if(t.isBogus(r)){r.parentNode.removeChild(r)}};var b=function(e){if(e&&e.hasAttribute("data-mce-caret")){y(e);e.removeAttribute("data-mce-caret");e.removeAttribute("data-mce-bogus");e.removeAttribute("style");e.removeAttribute("_moz_abspos");return e}return null};return{isCaretContainer:s,isCaretContainerBlock:a,isCaretContainerInline:o,showCaretContainerBlock:b,insertInline:l,prependInline:c,appendInline:f,isBeforeInline:d,isAfterInline:h,insertBlock:v,hasContent:u,startsWithCaretContainer:m,endsWithCaretContainer:g}});a("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){var r=e.isContentEditableTrue,i=e.isContentEditableFalse,a=e.isBr,o=e.isText,s=e.matchNodeNames("script style textarea"),u=e.matchNodeNames("img input textarea hr iframe video audio object"),l=e.matchNodeNames("table"),c=n.isCaretContainer;var f=function(e){if(c(e)){return false}if(o(e)){if(s(e.parentNode)){return false}return true}return u(e)||a(e)||l(e)||i(e)};var d=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(i(e)){return false}if(r(e)){return true}}return true};var h=function(e){if(!i(e)){return false}return t.reduce(e.getElementsByTagName("*"),function(e,t){return e||r(t)},false)!==true};var p=function(e){return u(e)||h(e)};var v=function(e,t){return f(e)&&d(e,t)};return{isCaretCandidate:f,isInEditable:d,isAtomic:p,isEditableCaretCandidate:v}});a("tinymce.core.geom.ClientRect",[],function(){var e=Math.round;var t=function(t){if(!t){return{left:0,top:0,bottom:0,right:0,width:0,height:0}}return{left:e(t.left),top:e(t.top),bottom:e(t.bottom),right:e(t.right),width:e(t.width),height:e(t.height)}};var n=function(e,n){e=t(e);if(n){e.right=e.left}else{e.left=e.left+e.width;e.right=e.left}e.width=0;return e};var r=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right};var i=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2};var a=function(e,t){if(e.bottom-e.height/2<t.top){return true}if(e.top>t.bottom){return false}return i(t.top-e.bottom,e,t)};var o=function(e,t){if(e.top>t.bottom){return true}if(e.bottom<t.top){return false}return i(t.bottom-e.top,e,t)};var s=function(e,t){return e.left<t.left};var u=function(e,t){return e.right>t.right};var l=function(e,t){if(a(e,t)){return-1}if(o(e,t)){return 1}if(s(e,t)){return-1}if(u(e,t)){return 1}return 0};var c=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};return{clone:t,collapse:n,isEqual:r,isAbove:a,isBelow:o,isLeft:s,isRight:u,compare:l,containsXY:c}});a("tinymce.core.selection.RangeNodes",[],function(){var e=function(e){var t=e.startContainer,n=e.startOffset;if(t.hasChildNodes()&&e.endOffset==n+1){return t.childNodes[n]}return null};var t=function(e,t){if(e.nodeType===1&&e.hasChildNodes()){if(t>=e.childNodes.length){t=e.childNodes.length-1}e=e.childNodes[t]}return e};return{getSelectedNode:e,getNode:t}});a("tinymce.core.text.ExtendingChar",[],function(){var e=new RegExp("[ÃÄ-ÕØ“É-“á“à-“â÷ë-÷Ω÷ø◊Å-◊Ç◊Ñ-◊Ö◊áÿê-ÿö"+"Ÿã-ŸüŸ∞€ñ-€ú€ü-€§€ß-€®€™-€≠‹ë‹∞-›äﬁ¶-ﬁ∞"+"ﬂ´-ﬂ≥‡†ñ-‡†ô‡†õ-‡†£‡†•-‡†ß‡†©-‡†≠‡°ô-‡°õ‡££-‡§Ç‡§∫‡§º"+"‡•Å-‡•à‡•ç‡•ë-‡•ó‡•¢-‡•£‡¶Å‡¶º‡¶æ‡ßÅ-‡ßÑ‡ßç‡ßó‡ß¢-‡ß£"+"‡®Å-‡®Ç‡®º‡©Å-‡©Ç‡©á-‡©à‡©ã-‡©ç‡©ë‡©∞-‡©±‡©µ‡™Å-‡™Ç‡™º"+"‡´Å-‡´Ö‡´á-‡´à‡´ç‡´¢-‡´£‡¨Å‡¨º‡¨æ‡¨ø‡≠Å-‡≠Ñ‡≠ç‡≠ñ‡≠ó"+"‡≠¢-‡≠£‡ÆÇ‡Ææ‡ØÄ‡Øç‡Øó‡∞Ä‡∞æ-‡±Ä‡±Ü-‡±à‡±ä-‡±ç‡±ï-‡±ñ"+"‡±¢-‡±£‡≤Å‡≤º‡≤ø‡≥Ç‡≥Ü‡≥å-‡≥ç‡≥ï-‡≥ñ‡≥¢-‡≥£‡¥Å‡¥æ‡µÅ-‡µÑ"+"‡µç‡µó‡µ¢-‡µ£‡∑ä‡∑è‡∑í-‡∑î‡∑ñ‡∑ü‡∏±‡∏¥-‡∏∫‡πá-‡πé‡∫±‡∫¥-‡∫π"+"‡∫ª-‡∫º‡ªà-‡ªç‡ºò-‡ºô‡ºµ‡º∑‡ºπ‡Ω±-‡Ωæ‡æÄ-‡æÑ‡æÜ-‡æá‡æç-‡æó"+"‡æô-‡æº‡øÜ·Ä≠-·Ä∞·Ä≤-·Ä∑·Äπ-·Ä∫·ÄΩ-·Äæ·Åò-·Åô·Åû-·Å†·Å±-·Å¥"+"·ÇÇ·ÇÖ-·ÇÜ·Çç·Çù·çù-·çü·úí-·úî·ú≤-·ú¥·ùí-·ùì·ù≤-·ù≥·û¥-·ûµ"+"·û∑-·ûΩ·üÜ·üâ-·üì·üù·†ã-·†ç·¢©·§†-·§¢·§ß-·§®·§≤·§π-·§ª·®ó-·®ò"+"·®õ·©ñ·©ò-·©û·©†·©¢·©•-·©¨·©≥-·©º·©ø·™∞-·™Ω·™æ·¨Ä-·¨É·¨¥"+"·¨∂-·¨∫·¨º·≠Ç·≠´-·≠≥·ÆÄ-·ÆÅ·Æ¢-·Æ•·Æ®-·Æ©·Æ´-·Æ≠·Ø¶·Ø®-·Ø©"+"·Ø≠·ØØ-·Ø±·∞¨-·∞≥·∞∂-·∞∑·≥ê-·≥í·≥î-·≥†·≥¢-·≥®·≥≠·≥¥·≥∏-·≥π"+"·∑Ä-·∑µ·∑º-·∑ø‚Äå-‚Äç‚Éê-‚Éú‚Éù-‚É†‚É°‚É¢-‚É§‚É•-‚É∞‚≥Ø-‚≥±"+"‚µø‚∑†-‚∑ø„Ä™-„Ä≠„ÄÆ-„ÄØ„Çô-„ÇöÍôØÍô∞-Íô≤Íô¥-ÍôΩÍöû-ÍöüÍõ∞-Íõ±"+"Í†ÇÍ†ÜÍ†ãÍ†•-Í†¶Í£ÑÍ£†-Í£±Í§¶-Í§≠Í•á-Í•ëÍ¶Ä-Í¶ÇÍ¶≥Í¶∂-Í¶πÍ¶º"+"Íß•Í®©-Í®ÆÍ®±-Í®≤Í®µ-Í®∂Í©ÉÍ©åÍ©ºÍ™∞Í™≤-Í™¥Í™∑-Í™∏Í™æ-Í™øÍ´Å"+"Í´¨-Í´≠Í´∂ÍØ•ÍØ®ÍØ≠Ô¨ûÔ∏Ä-Ô∏èÔ∏†-Ô∏ØÔæû-Ôæü]");var t=function(t){return typeof t=="string"&&t.charCodeAt(0)>=768&&e.test(t)};return{isExtendingChar:t}});a("tinymce.core.util.Fun",[],function(){var e=[].slice;var t=function(e){return function(){return e}};var n=function(e){return function(t){return!e(t)}};var r=function(e,t){return function(n){return e(t(n))}};var i=function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++){if(t[n](e)){return true}}return false}};var a=function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++){if(!t[n](e)){return false}}return true}};var o=function(t){var n=e.call(arguments);if(n.length-1>=t.length){return t.apply(this,n.slice(1))}return function(){var e=n.concat([].slice.call(arguments));return o.apply(this,e)}};var s=function(){};return{constant:t,negate:n,and:a,or:i,curry:o,compose:r,noop:s}});a("tinymce.core.caret.CaretPosition",["tinymce.core.caret.CaretCandidate","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect","tinymce.core.selection.RangeNodes","tinymce.core.text.ExtendingChar","tinymce.core.util.Fun"],function(e,t,n,r,i,a,o){var s=n.isElement,u=e.isCaretCandidate,l=n.matchStyleValues("display","block table"),c=n.matchStyleValues("float","left right"),f=o.and(s,u,o.negate(c)),d=o.negate(n.matchStyleValues("white-space","pre pre-line pre-wrap")),h=n.isText,p=n.isBr,v=t.nodeIndex,m=i.getNode;var g=function(e){return"createRange"in e?e.createRange():t.DOM.createRng()};var y=function(e){return e&&/[\r\n\t ]/.test(e)};var b=function(e){var t=e.startContainer,n=e.startOffset,r;if(y(e.toString())&&d(t.parentNode)){r=t.data;if(y(r[n-1])||y(r[n+1])){return true}}return false};var x=function(e){var t=[],n,i;var o=function(e){var t=e.ownerDocument,n=g(t),i=t.createTextNode("¬†"),a=e.parentNode,o;a.insertBefore(i,e);n.setStart(i,0);n.setEnd(i,1);o=r.clone(n.getBoundingClientRect());a.removeChild(i);return o};var u=function(e){var t,n;n=e.getClientRects();if(n.length>0){t=r.clone(n[0])}else{t=r.clone(e.getBoundingClientRect())}if(p(e)&&t.left===0){return o(e)}return t};var c=function(e,t){e=r.collapse(e,t);e.width=1;e.right=e.left+1;return e};var d=function(e){if(e.height===0){return}if(t.length>0){if(r.isEqual(e,t[t.length-1])){return}}t.push(e)};var v=function(e,n){var r=g(e.ownerDocument);if(n<e.data.length){if(a.isExtendingChar(e.data[n])){return t}if(a.isExtendingChar(e.data[n-1])){r.setStart(e,n);r.setEnd(e,n+1);if(!b(r)){d(c(u(r),false));return t}}}if(n>0){r.setStart(e,n-1);r.setEnd(e,n);if(!b(r)){d(c(u(r),false))}}if(n<e.data.length){r.setStart(e,n);r.setEnd(e,n+1);if(!b(r)){d(c(u(r),true))}}};if(h(e.container())){v(e.container(),e.offset());return t}if(s(e.container())){if(e.isAtEnd()){i=m(e.container(),e.offset());if(h(i)){v(i,i.data.length)}if(f(i)&&!p(i)){d(c(u(i),false))}}else{i=m(e.container(),e.offset());if(h(i)){v(i,0)}if(f(i)&&e.isAtEnd()){d(c(u(i),false));return t}n=m(e.container(),e.offset()-1);if(f(n)&&!p(n)){if(l(n)||l(i)||!f(i)){d(c(u(n),false))}}if(f(i)){d(c(u(i),true))}}}return t};var w=function(e,t,n){var r=function(){if(h(e)){return t===0}return t===0};var i=function(){if(h(e)){return t>=e.data.length}return t>=e.childNodes.length};var a=function(){var n;n=g(e.ownerDocument);n.setStart(e,t);n.setEnd(e,t);return n};var s=function(){if(!n){n=x(new w(e,t))}return n};var u=function(){return s().length>0};var l=function(n){return n&&e===n.container()&&t===n.offset()};var c=function(n){return m(e,n?t-1:t)};return{container:o.constant(e),offset:o.constant(t),toRange:a,getClientRects:s,isVisible:u,isAtStart:r,isAtEnd:i,isEqual:l,getNode:c}};w.fromRangeStart=function(e){return new w(e.startContainer,e.startOffset)};w.fromRangeEnd=function(e){return new w(e.endContainer,e.endOffset)};w.after=function(e){return new w(e.parentNode,v(e)+1)};w.before=function(e){return new w(e.parentNode,v(e))};w.isAtStart=function(e){return e?e.isAtStart():false};w.isAtEnd=function(e){return e?e.isAtEnd():false};w.isTextPosition=function(e){return e?n.isText(e.container()):false};return w});a("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,i,a){var o=n.isContentEditableTrue,s=n.isContentEditableFalse,u=n.matchStyleValues("display","block table table-cell table-caption list-item"),l=i.isCaretContainer,c=i.isCaretContainerBlock,f=e.curry,d=n.isElement,h=a.isCaretCandidate;var p=function(e){return e>0};var v=function(e){return e<0};var m=function(e,t){var n;while(n=e(t)){if(!c(n)){return n}}return null};var g=function(e,n,r,i,a){var o=new t(e,i);if(v(n)){if(s(e)||c(e)){e=m(o.prev,true);if(r(e)){return e}}while(e=m(o.prev,a)){if(r(e)){return e}}}if(p(n)){if(s(e)||c(e)){e=m(o.next,true);if(r(e)){return e}}while(e=m(o.next,a)){if(r(e)){return e}}}return null};var y=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(o(e)){return e}}return t};var b=function(e,t){while(e&&e!=t){if(u(e)){return e}e=e.parentNode}return null};var x=function(e,t,n){return b(e.container(),n)==b(t.container(),n)};var w=function(e,t,n){return y(e.container(),n)==y(t.container(),n)};var _=function(e,t){var n,r;if(!t){return null}n=t.container();r=t.offset();if(!d(n)){return null}return n.childNodes[r+e]};var k=function(e,t){var n=t.ownerDocument.createRange();if(e){n.setStartBefore(t);n.setEndBefore(t)}else{n.setStartAfter(t);n.setEndAfter(t)}return n};var C=function(e,t,n){return b(t,e)==b(n,e)};var T=function(e,t,n){var r,i;if(e){i="previousSibling"}else{i="nextSibling"}while(n&&n!=t){r=n[i];if(l(r)){r=r[i]}if(s(r)){if(C(t,r,n)){return r}break}if(h(r)){break}n=n.parentNode}return null};var S=f(k,true);var E=f(k,false);var A=function(e,t,r){var a,o,u,c;var h=f(T,true,t);var p=f(T,false,t);o=r.startContainer;u=r.startOffset;if(i.isCaretContainerBlock(o)){if(!d(o)){o=o.parentNode}c=o.getAttribute("data-mce-caret");if(c=="before"){a=o.nextSibling;if(s(a)){return S(a)}}if(c=="after"){a=o.previousSibling;if(s(a)){return E(a)}}}if(!r.collapsed){return r}if(n.isText(o)){if(l(o)){if(e===1){a=p(o);if(a){return S(a)}a=h(o);if(a){return E(a)}}if(e===-1){a=h(o);if(a){return E(a)}a=p(o);if(a){return S(a)}}return r}if(i.endsWithCaretContainer(o)&&u>=o.data.length-1){if(e===1){a=p(o);if(a){return S(a)}}return r}if(i.startsWithCaretContainer(o)&&u<=1){if(e===-1){a=h(o);if(a){return E(a)}}return r}if(u===o.data.length){a=p(o);if(a){return S(a)}return r}if(u===0){a=h(o);if(a){return E(a)}return r}}return r};var P=function(e,t){return s(_(e,t))};return{isForwards:p,isBackwards:v,findNode:g,getEditingHost:y,getParentBlock:b,isInSameBlock:x,isInSameEditingHost:w,isBeforeContentEditableFalse:f(P,0),isAfterContentEditableFalse:f(P,-1),normalizeRange:A}});a("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,i,a){var o=e.isContentEditableFalse,s=e.isText,u=e.isElement,l=e.isBr,c=r.isForwards,f=r.isBackwards,d=t.isCaretCandidate,h=t.isAtomic,p=t.isEditableCaretCandidate;var v=function(e,t){var n=[];while(e&&e!=t){n.push(e);e=e.parentNode}return n};var m=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){return e.childNodes[t]}return null};var g=function(e,t){if(c(e)){if(d(t.previousSibling)&&!s(t.previousSibling)){return n.before(t)}if(s(t)){return n(t,0)}}if(f(e)){if(d(t.nextSibling)&&!s(t.nextSibling)){return n.after(t)}if(s(t)){return n(t,t.data.length)}}if(f(e)){if(l(t)){return n.before(t)}return n.after(t)}return n.before(t)};var y=function(t,i){var a;if(!e.isBr(t)){return false}a=b(1,n.after(t),i);if(!a){return false}return!r.isInSameBlock(n.before(t),n.before(a),i)};var b=function(e,t,x){var w,_,k,C,T,S,E;if(!u(x)||!t){return null}if(t.isEqual(n.after(x))&&x.lastChild){E=n.after(x.lastChild);if(f(e)&&d(x.lastChild)&&u(x.lastChild)){return l(x.lastChild)?n.before(x.lastChild):E}}else{E=t}w=E.container();_=E.offset();if(s(w)){if(f(e)&&_>0){return n(w,--_)}if(c(e)&&_<w.length){return n(w,++_)}k=w}else{if(f(e)&&_>0){C=m(w,_-1);if(d(C)){if(!h(C)){T=r.findNode(C,e,p,C);if(T){if(s(T)){return n(T,T.data.length)}return n.after(T)}}if(s(C)){return n(C,C.data.length)}return n.before(C)}}if(c(e)&&_<w.childNodes.length){C=m(w,_);if(d(C)){if(y(C,x)){return b(e,n.after(C),x)}if(!h(C)){T=r.findNode(C,e,p,C);if(T){if(s(T)){return n(T,0)}return n.before(T)}}if(s(C)){return n(C,0)}return n.after(C)}}k=E.getNode()}if(c(e)&&E.isAtEnd()||f(e)&&E.isAtStart()){k=r.findNode(k,e,a.constant(true),x,true);if(p(k)){return g(e,k)}}C=r.findNode(k,e,p,x);S=i.last(i.filter(v(w,x),o));if(S&&(!C||!S.contains(C))){if(c(e)){E=n.after(S)}else{E=n.before(S)}return E}if(C){return g(e,C)}return null};return function(e){return{next:function(t){return b(1,t,e)},prev:function(t){return b(-1,t,e)}}}});a("tinymce.core.InsertList",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r){var i=function(e){return e.firstChild&&e.firstChild===e.lastChild};var a=function(e){return e.name==="br"||e.value==="¬†"};var o=function(e,t){var n=e.getBlockElements();return n[t.name]&&i(t)&&a(t.firstChild)};var s=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||o(e,t))};var u=function(e,t){var n=t.firstChild;var r=t.lastChild;if(n&&n.name==="meta"){n=n.next}if(r&&r.attr("id")==="mce_marker"){r=r.prev}if(s(e,r)){r=r.prev}if(!n||n!==r){return false}return n.name==="ul"||n.name==="ol"};var l=function(e){var t=e.firstChild;var n=e.lastChild;if(t&&t.nodeName==="META"){t.parentNode.removeChild(t)}if(n&&n.id==="mce_marker"){n.parentNode.removeChild(n)}return e};var c=function(e,t,n){var r=t.serialize(n);var i=e.createFragment(r);return l(i)};var f=function(e){return r.grep(e.childNodes,function(e){return e.nodeName==="LI"})};var d=function(e){return e.data==="¬†"||n.isBr(e)};var h=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&d(e.firstChild)};var p=function(e){return!e.firstChild||h(e)};var v=function(e){return e.length>0&&p(e[e.length-1])?e.slice(0,-1):e};var m=function(e,t){var n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null};var g=function(e,t){return!!m(e,t)};var y=function(e,t){var n=t.cloneRange();var r=t.cloneRange();n.setStartBefore(e);r.setEndAfter(e);return[n.cloneContents(),r.cloneContents()]};var b=function(n,r){var i=e.before(n);var a=new t(r);var o=a.next(i);return o?o.toRange():null};var x=function(n,r){var i=e.after(n);var a=new t(r);var o=a.prev(i);return o?o.toRange():null};var w=function(e,t,n,i){var a=y(e,i);var o=e.parentNode;o.insertBefore(a[0],e);r.each(t,function(t){o.insertBefore(t,e)});o.insertBefore(a[1],e);o.removeChild(e);return x(t[t.length-1],n)};var _=function(e,t,n){var i=e.parentNode;r.each(t,function(t){i.insertBefore(t,e)});return b(e,n)};var k=function(e,t,n,r){r.insertAfter(t.reverse(),e);return x(t[0],n)};var C=function(n,r,i,a){var o=c(r,n,a);var s=m(r,i.startContainer);var u=v(f(o.firstChild));var l=1,d=2;var h=r.getRoot();var p=function(n){var a=e.fromRangeStart(i);var o=new t(r.getRoot());var u=n===l?o.prev(a):o.next(a);return u?m(r,u.getNode())!==s:true};if(p(l)){return _(s,u,h)}else if(p(d)){return k(s,u,h,r)}return w(s,u,h,i)};return{isListFragment:u,insertAtCaret:C,isParentBlockLi:g,trimListItems:v,listItems:f}});a("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,r,i){var a=e.isText,o=e.isBogus,s=t.nodeIndex;var u=function(e){var t=e.parentNode;if(o(t)){return u(t)}return t};var l=function(e){if(!e){return[]}return r.reduce(e.childNodes,function(e,t){if(o(t)&&t.nodeName!="BR"){e=e.concat(l(t))}else{e.push(t)}return e},[])};var c=function(e,t){while(e=e.previousSibling){if(!a(e)){break}t+=e.data.length}return t};var f=function(e){return function(t){return e===t}};var d=function(t){var n,i,o;n=l(u(t));i=r.findIndex(n,f(t),t);n=n.slice(0,i+1);o=r.reduce(n,function(e,t,r){if(a(t)&&a(n[r-1])){e++}return e},0);n=r.filter(n,e.matchNodeNames(t.nodeName));i=r.findIndex(n,f(t),t);return i-o};var h=function(e){var t;if(a(e)){t="text()"}else{t=e.nodeName.toLowerCase()}return t+"["+d(e)+"]"};var p=function(e,t,n){var r=[];for(t=t.parentNode;t!=e;t=t.parentNode){if(n&&n(t)){break}r.push(t)}return r};var v=function(t,i){var o,s,u=[],l,f,d;o=i.container();s=i.offset();if(a(o)){l=c(o,s)}else{f=o.childNodes;if(s>=f.length){l="after";s=f.length-1}else{l="before"}o=f[s]}u.push(h(o));d=p(t,o);d=r.filter(d,n.negate(e.isBogus));u=u.concat(r.map(d,function(e){return h(e)}));return u.reverse().join("/")+","+l};var m=function(t,n,i){var o=l(t);o=r.filter(o,function(e,t){return!a(e)||!a(o[t-1])});o=r.filter(o,e.matchNodeNames(n));return o[i]};var g=function(e,t){var n=e,r=0,o;while(a(n)){o=n.data.length;if(t>=r&&t<=r+o){e=n;t=t-r;break}if(!a(n.nextSibling)){e=n;t=o;break}r+=o;n=n.nextSibling}if(t>e.data.length){t=e.data.length}return new i(e,t)};var y=function(e,t){var n,o,u;if(!t){return null}n=t.split(",");t=n[0].split("/");u=n.length>1?n[1]:"before";o=r.reduce(t,function(e,t){t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(!t){return null}if(t[1]==="text()"){t[1]="#text"}return m(e,t[1],parseInt(t[2],10))},e);if(!o){return null}if(!a(o)){if(u==="after"){u=s(o)+1}else{u=s(o)}return new i(o.parentNode,u)}return g(o,parseInt(u,10))};return{create:v,resolve:y}});a("tinymce.core.dom.GetBookmark",["ephox.katamari.api.Fun","tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.selection.RangeNodes","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s){var u=i.isContentEditableFalse;var l=function(e,t,n){var r,a;a=e(t.data.slice(0,n)).length;for(r=t.previousSibling;r&&i.isText(r);r=r.previousSibling){a+=e(r.data).length}return a};var c=function(e,t,n,r,a){var o=r[a?"startContainer":"endContainer"];var s=r[a?"startOffset":"endOffset"],u=[],c,f=0;var d=e.getRoot();if(i.isText(o)){u.push(n?l(t,o,s):s)}else{c=o.childNodes;if(s>=c.length&&c.length){f=1;s=Math.max(0,c.length-1)}u.push(e.nodeIndex(c[s],n)+f)}for(;o&&o!==d;o=o.parentNode){u.push(e.nodeIndex(o,n))}return u};var f=function(e,t,n,r){var i=t.dom,a={};a.start=c(i,e,n,r,true);if(!t.isCollapsed()){a.end=c(i,e,n,r,false)}return a};var d=function(e){if(i.isText(e)&&e.data.length===0){e.parentNode.removeChild(e)}};var h=function(e,t,n){var r=0;s.each(e.select(t),function(e){if(e.getAttribute("data-mce-bogus")==="all"){return}if(e===n){return false}r++});return r};var p=function(e,t){var n,r,a,o=t?"start":"end";n=e[o+"Container"];r=e[o+"Offset"];if(i.isElement(n)&&n.nodeName==="TR"){a=n.childNodes;n=a[Math.min(t?r:r-1,a.length-1)];if(n){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}}};var v=function(e){p(e,true);p(e,false);return e};var m=function(e,t){var r;if(i.isElement(e)){e=a.getNode(e,t);if(u(e)){return e}}if(n.isCaretContainer(e)){if(i.isText(e)&&n.isCaretContainerBlock(e)){e=e.parentNode}r=e.previousSibling;if(u(r)){return r}r=e.nextSibling;if(u(r)){return r}}};var g=function(e){return m(e.startContainer,e.startOffset)||m(e.endContainer,e.endOffset)};var y=function(e,t,n){var r=n.getNode();var i=r?r.nodeName:null;var a=n.getRng();if(u(r)||i==="IMG"){return{name:i,index:h(n.dom,i,r)}}r=g(a);if(r){i=r.tagName;return{name:i,index:h(n.dom,i,r)}}return f(e,n,t,a)};var b=function(e){var n=e.getRng();return{start:t.create(e.dom.getRoot(),r.fromRangeStart(n)),end:t.create(e.dom.getRoot(),r.fromRangeEnd(n))}};var x=function(e){return{rng:e.getRng()}};var w=function(e){var t=e.dom;var n=e.getRng();var r=t.uniqueId();var i=e.isCollapsed();var a="overflow:hidden;line-height:0px";var o=e.getNode();var s=o.nodeName;var u="&#xFEFF;";if(s==="IMG"){return{name:s,index:h(t,s,o)}}var l=v(n.cloneRange());if(!i){l.collapse(false);var c=t.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:a},u);l.insertNode(c);d(c.nextSibling)}n=v(n);n.collapse(true);var f=t.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:a},u);n.insertNode(f);d(f.previousSibling);e.moveToBookmark({id:r,keep:1});return{id:r}};var _=function(e,t,n){if(t===2){return y(o.trim,n,e)}else if(t===3){return b(e)}else if(t){return x(e)}else{return w(e)}};return{getBookmark:_,getUndoBookmark:e.curry(y,e.identity,true)}});a("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){var t=function(e){var t=[];var n=function(e){t.push(e)};for(var r=0;r<e.length;r++){e[r].each(n)}return t};var n=function(t,n){for(var r=0;r<t.length;r++){var i=n(t[r],r);if(i.isSome()){return i}}return e.none()};var r=function(t,n){var r=[];for(var i=0;i<t.length;i++){var a=t[i];if(a.isSome()){r.push(a.getOrDie())}else{return e.none()}}return e.some(n.apply(null,r))};return{cat:t,findMap:n,liftN:r}});a("tinymce.core.dom.ResolveBookmark",["ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.Env","tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o){var s=function(e,t){if(e.isBlock(t)&&!t.innerHTML&&!n.ie){t.innerHTML='<br data-mce-bogus="1" />'}return t};var u=function(e,t){var n,i;n=e.createRng();i=r.resolve(e.getRoot(),t.start);n.setStart(i.container(),i.offset());i=r.resolve(e.getRoot(),t.end);n.setEnd(i.container(),i.offset());return n};var l=function(e,t,n,r){var i=n[t?"start":"end"],a,o,s,u,l=e.getRoot();if(i){s=i[0];for(o=l,a=i.length-1;a>=1;a--){u=o.childNodes;if(i[a]>u.length-1){return}o=u[i[a]]}if(o.nodeType===3){s=Math.min(i[0],o.nodeValue.length)}if(o.nodeType===1){s=Math.min(i[0],o.childNodes.length)}if(t){r.setStart(o,s)}else{r.setEnd(o,s)}}return true};var c=function(t,r,s){var u=t.get(s.id+"_"+r),l,c,f,d,h=s.keep;var p,v;if(u){l=u.parentNode;if(r==="start"){if(!h){c=t.nodeIndex(u)}else{l=u.firstChild;c=1}p=l;v=c}else{if(!h){c=t.nodeIndex(u)}else{l=u.firstChild;c=1}p=l;v=c}if(!h){d=u.previousSibling;f=u.nextSibling;o.each(o.grep(u.childNodes),function(e){if(a.isText(e)){e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")}});while(u=t.get(s.id+"_"+r)){t.remove(u,1)}if(d&&f&&d.nodeType===f.nodeType&&a.isText(d)&&!n.opera){c=d.nodeValue.length;d.appendData(f.nodeValue);t.remove(f);if(r==="start"){p=d;v=c}else{p=d;v=c}}}return e.some(i(p,v))}else{return e.none()}};var f=function(e,t){return e.isSome()?e:t};var d=function(t,n){var r=t.createRng();if(l(t,true,n,r)&&l(t,false,n,r)){return e.some(r)}else{return e.none()}};var h=function(e,n){var r=c(e,"start",n);var i=c(e,"end",n);return t.liftN([r,f(i,r)],function(t,n){var r=e.createRng();r.setStart(s(e,t.container()),t.offset());r.setEnd(s(e,n.container()),n.offset());return r})};var p=function(t,n){return e.from(t.select(n.name)[n.index]).map(function(e){var n=t.createRng();n.selectNode(e);return n})};var v=function(t,n){var r=t.dom;if(n){if(o.isArray(n.start)){return d(r,n)}else if(typeof n.start==="string"){return e.some(u(r,n))}else if(n.id){return h(r,n)}else if(n.name){return p(r,n)}else if(n.rng){return e.some(n.rng)}}return e.none()};return{resolve:v}});a("tinymce.core.dom.Bookmarks",["tinymce.core.dom.GetBookmark","tinymce.core.dom.ResolveBookmark"],function(e,t){var n=function(t,n,r){return e.getBookmark(t,n,r)};var r=function(e,n){t.resolve(e,n).each(function(t){e.setRng(t)})};var i=function(e){return e&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"};return{getBookmark:n,moveToBookmark:r,isBookmarkNode:i}});a("tinymce.core.dom.ElementUtils",["tinymce.core.dom.Bookmarks","tinymce.core.util.Tools"],function(e,t){var n=t.each;var r=function(t){this.compare=function(r,i){if(r.nodeName!=i.nodeName){return false}var a=function(e){var r={};n(t.getAttribs(e),function(n){var i=n.nodeName.toLowerCase();if(i.indexOf("_")!==0&&i!=="style"&&i.indexOf("data-")!==0){r[i]=t.getAttrib(e,i)}});return r};var o=function(e,t){var n,r;for(r in e){if(e.hasOwnProperty(r)){n=t[r];if(typeof n=="undefined"){return false}if(e[r]!=n){return false}delete t[r]}}for(r in t){if(t.hasOwnProperty(r)){return false}}return true};if(!o(a(r),a(i))){return false}if(!o(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style")))){return false}return!e.isBookmarkNode(r)&&!e.isBookmarkNode(i)}};return r});a("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){var r=e.parent(t);r.each(function(e){e.dom().insertBefore(n.dom(),t.dom())})};var n=function(n,r){var a=e.nextSibling(n);a.fold(function(){var t=e.parent(n);t.each(function(e){i(e,r)})},function(e){t(e,r)})};var r=function(t,n){var r=e.firstChild(t);r.fold(function(){i(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})};var i=function(e,t){e.dom().appendChild(t.dom())};var a=function(n,r,a){e.child(n,a).fold(function(){i(n,r)},function(e){t(e,r)})};var o=function(e,n){t(e,n);i(n,e)};return{before:t,after:n,prepend:r,append:i,appendAt:a,wrap:o}});a("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){var n=function(n,r){e.each(r,function(e){t.before(n,e)})};var r=function(n,r){e.each(r,function(e,i){var a=i===0?n:r[i-1];t.after(a,e)})};var i=function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})};var a=function(n,r){e.each(r,function(e){t.append(n,e)})};return{before:n,after:r,prepend:i,append:a}});a("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t){t.dom().textContent="";e.each(n.children(t),function(e){i(e)})};var i=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var a=function(e){var r=n.children(e);if(r.length>0){t.before(e,r)}i(e)};return{empty:r,remove:i,unwrap:a}});a("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,i){var a=function(e){if(!r(e)){throw new n("Can only get "+i+" value of a "+i+" node")}return l(e).getOr("")};var o=function(e){try{return s(e)}catch(e){return t.none()}};var s=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()};var u=e.detect().browser;var l=u.isIE()&&u.version.major===10?o:s;var c=function(e,t){if(!r(e)){throw new n("Can only set raw "+i+" value of a "+i+" node")}e.dom().nodeValue=t};return{get:a,getOption:l,set:c}}});a("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");var r=function(e){return n.get(e)};var i=function(e){return n.getOption(e)};var a=function(e,t){n.set(e,t)};return{get:r,getOption:i,set:a}});a("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return s(t.body(),e)};var i=function(t,r,i){return e.filter(n.parents(t,i),r)};var a=function(t,r){return e.filter(n.siblings(t),r)};var o=function(t,r){return e.filter(n.children(t),r)};var s=function(t,r){var i=[];e.each(n.children(t),function(e){if(r(e)){i=i.concat([e])}i=i.concat(s(e,r))});return i};return{all:r,ancestors:i,siblings:a,children:o,descendants:s}});a("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){var n=function(e){return t.all(e)};var r=function(n,r,i){return e.ancestors(n,function(e){return t.is(e,r)},i)};var i=function(n,r){return e.siblings(n,function(e){return t.is(e,r)})};var a=function(n,r){return e.children(n,function(e){return t.is(e,r)})};var o=function(e,n){return t.all(n,e)};return{all:n,ancestors:r,siblings:i,children:a,descendants:o}});a("tinymce.core.dom.PaddingBr",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType"],function(e,t,n,r,i,a,o,s,u){var l=function(e){var t=[],n=e.dom();while(n){t.push(r.fromDom(n));n=n.lastChild}return t};var c=function(t){var r=o.descendants(t,"br");var i=e.filter(l(t).slice(-1),u.isBr);if(r.length===i.length){e.each(i,n.remove)}};var f=function(e){n.empty(e);t.append(e,r.fromHtml('<br data-mce-bogus="1">'))};var d=function(e){return i.isText(e)?a.get(e)==="¬†":u.isBr(e)};var h=function(t){return e.filter(s.children(t),d).length===1};var p=function(e){s.lastChild(e).each(function(t){s.prevSibling(t).each(function(r){if(u.isBlock(e)&&u.isBr(t)&&u.isBlock(r)){n.remove(t)}})})};return{removeTrailingBr:c,fillWithPaddingBr:f,isPaddedElement:h,trimBlockTrailingBr:p}});a("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var r=[],i,a,o,s,u;t=t||{};i=t.indent;a=n(t.indent_before||"");o=n(t.indent_after||"");s=e.getEncodeFunc(t.entity_encoding||"raw",t.entities);u=t.element_format=="html";return{start:function(e,t,n){var l,c,f,d;if(i&&a[e]&&r.length>0){d=r[r.length-1];if(d.length>0&&d!=="\n"){r.push("\n")}}r.push("<",e);if(t){for(l=0,c=t.length;l<c;l++){f=t[l];r.push(" ",f.name,'="',s(f.value,true),'"')}}if(!n||u){r[r.length]=">"}else{r[r.length]=" />"}if(n&&i&&o[e]&&r.length>0){d=r[r.length-1];if(d.length>0&&d!=="\n"){r.push("\n")}}},end:function(e){var t;r.push("</",e,">");if(i&&o[e]&&r.length>0){t=r[r.length-1];if(t.length>0&&t!=="\n"){r.push("\n")}}},text:function(e,t){if(e.length>0){r[r.length]=t?e:s(e)}},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("\x3c!--",e,"--\x3e")},pi:function(e,t){if(t){r.push("<?",e," ",s(t),"?>")}else{r.push("<?",e,"?>")}if(i){r.push("\n")}},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}});a("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,r){var i=this,a=new e(n);n=n||{};n.validate="validate"in n?n.validate:true;i.schema=r=r||new t;i.writer=a;i.serialize=function(e){var t,i;i=n.validate;t={3:function(e){a.text(e.value,e.raw)},8:function(e){a.comment(e.value)},7:function(e){a.pi(e.name,e.value)},10:function(e){a.doctype(e.value)},4:function(e){a.cdata(e.value)},11:function(e){if(e=e.firstChild){do{o(e)}while(e=e.next)}}};a.reset();var o=function(e){var n=t[e.type],s,u,l,c,f,d,h,p,v;if(!n){s=e.name;u=e.shortEnded;l=e.attributes;if(i&&l&&l.length>1){d=[];d.map={};v=r.getElementRule(e.name);if(v){for(h=0,p=v.attributesOrder.length;h<p;h++){c=v.attributesOrder[h];if(c in l.map){f=l.map[c];d.map[c]=f;d.push({name:c,value:f})}}for(h=0,p=l.length;h<p;h++){c=l[h].name;if(!(c in d.map)){f=l.map[c];d.map[c]=f;d.push({name:c,value:f})}}l=d}}a.start(e.name,l,u);if(!u){if(e=e.firstChild){do{o(e)}while(e=e.next)}a.end(s)}}else{n(e)}};if(e.type==1&&!n.inner){o(e)}else{t[11](e)}return a.getContent()}}});a("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o){var s=function(e,t,n){var i=e?r.before(n):r.after(n);return p(e,t,i)};var u=function(e){return o.isBr(e)?r.before(e):r.after(e)};var l=function(e){if(r.isTextPosition(e)){return e.offset()===0}else{return n.isCaretCandidate(e.getNode())}};var c=function(e){if(r.isTextPosition(e)){return e.offset()===e.container().data.length}else{return n.isCaretCandidate(e.getNode(true))}};var f=function(e,t){return!r.isTextPosition(e)&&!r.isTextPosition(t)&&e.getNode()===t.getNode(true)};var d=function(e){return!r.isTextPosition(e)&&o.isBr(e.getNode())};var h=function(e,t,n){if(e){return!f(t,n)&&!d(t)&&c(t)&&l(n)}else{return!f(n,t)&&l(t)&&c(n)}};var p=function(e,n,r){var i=new a(n);return t.from(e?i.next(r):i.prev(r))};var v=function(e,n,r){return p(e,n,r).bind(function(a){if(i.isInSameBlock(r,a,n)&&h(e,r,a)){return p(e,n,a)}else{return t.some(a)}})};var m=function(e,i){var a=e?i.firstChild:i.lastChild;if(o.isText(a)){return t.some(new r(a,e?0:a.data.length))}else if(a){if(n.isCaretCandidate(a)){return t.some(e?r.before(a):u(a))}else{return s(e,i,a)}}else{return t.none()}};return{fromPosition:p,nextPosition:e.curry(p,true),prevPosition:e.curry(p,false),navigate:v,positionIn:m,firstPositionIn:e.curry(m,true),lastPositionIn:e.curry(m,false)}});a("tinymce.core.selection.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(e,t,n,r){var i=function(t,n,r,i){var a=e.createRange();a.setStart(t,n);a.setEnd(r,i);return a};var a=function(e){var a=n.fromRangeStart(e);var o=n.fromRangeEnd(e);var s=e.commonAncestorContainer;return t.fromPosition(false,s,o).map(function(t){if(!r.isInSameBlock(a,o,s)&&r.isInSameBlock(a,t,s)){return i(a.container(),a.offset(),t.container(),t.offset())}else{return e}}).getOr(e)};var o=function(e){return e.collapsed?e:a(e)};var s=function(e){return o(e)};return{normalize:s}});a("tinymce.core.InsertContent",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.InsertList","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.html.Serializer","tinymce.core.selection.RangeNormalizer","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=s.matchNodeNames("td th");var h=function(e,t,n){if(n.getAttribute("data-mce-bogus")==="all"){n.parentNode.insertBefore(e.dom.createFragment(t),n)}else{var r=n.firstChild;var i=n.lastChild;if(!r||r===i&&r.nodeName==="BR"){e.dom.setHTML(n,t)}else{e.selection.setContent(t)}}};var p=function(n,r){e.from(n.getParent(r,"td,th")).map(t.fromDom).each(u.trimBlockTrailingBr)};var v=function(e,t,s){var u,v,m,g,y,b;var x,w,_,k,C,T;var S=e.schema.getTextInlineElements();var E=e.selection,A=e.dom;var P=function(e){var t,n,r;t=E.getRng(true);n=t.startContainer;r=t.startOffset;var i=function(e){return n[e]&&n[e].nodeType==3};if(n.nodeType==3){if(r>0){e=e.replace(/^&nbsp;/," ")}else if(!i("previousSibling")){e=e.replace(/^ /,"&nbsp;")}if(r<n.length){e=e.replace(/&nbsp;(<br>|)$/," ")}else if(!i("nextSibling")){e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;")}}return e};var O=function(){var e,n,r;e=E.getRng(true);n=e.startContainer;r=e.startOffset;if(n.nodeType==3&&e.collapsed){if(n.data[r]==="¬†"){n.deleteData(r,1);if(!/[\u00a0| ]$/.test(t)){t+=" "}}else if(n.data[r-1]==="¬†"){n.deleteData(r-1,1);if(!/[\u00a0| ]$/.test(t)){t=" "+t}}}};var M=function(){if(T){var t=e.getBody(),n=new o(A);f.each(A.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!=t;r=r.parentNode){if(S[e.nodeName.toLowerCase()]&&n.compare(r,e)){A.remove(e,true)}}})}};var N=function(e){var t=e;while(t=t.walk()){if(t.type===1){t.attr("data-mce-fragment","1")}}};var R=function(e){f.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})};var D=function(e){return!!e.getAttribute("data-mce-fragment")};var B=function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]};var L=function(t){var r,o,s;var u=function(t){var n=e.getBody();for(;t&&t!==n;t=t.parentNode){if(e.dom.getContentEditable(t)==="false"){return t}}return null};if(!t){return}E.scrollIntoView(t);r=u(t);if(r){A.remove(t);E.select(r);return}w=A.createRng();_=t.previousSibling;if(_&&_.nodeType==3){w.setStart(_,_.nodeValue.length);if(!n.ie){k=t.nextSibling;if(k&&k.nodeType==3){_.appendData(k.data);k.parentNode.removeChild(k)}}}else{w.setStartBefore(t);w.setEndBefore(t)}var l=function(t){var n=i.fromRangeStart(t);var r=new a(e.getBody());n=r.next(n);if(n){return n.toRange()}};o=A.getParent(t,A.isBlock);A.remove(t);if(o&&A.isEmpty(o)){e.$(o).empty();w.setStart(o,0);w.setEnd(o,0);if(!d(o)&&!D(o)&&(s=l(w))){w=s;A.remove(o)}else{A.add(o,A.create("br",{"data-mce-bogus":"1"}))}}E.setRng(w)};if(/^ | $/.test(t)){t=P(t)}u=e.parser;T=s.merge;v=new l({validate:e.settings.validate},e.schema);C='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';b={content:t,format:"html",selection:true,paste:s.paste};b=e.fire("BeforeSetContent",b);if(b.isDefaultPrevented()){e.fire("SetContent",{content:b.content,format:"html",selection:true,paste:s.paste});return}t=b.content;if(t.indexOf("{$caret}")==-1){t+="{$caret}"}t=t.replace(/\{\$caret\}/,C);w=E.getRng();var I=w.startContainer||(w.parentElement?w.parentElement():null);var F=e.getBody();if(I===F&&E.isCollapsed()){if(A.isBlock(F.firstChild)&&B(F.firstChild)&&A.isEmpty(F.firstChild)){w=A.createRng();w.setStart(F.firstChild,0);w.setEnd(F.firstChild,0);E.setRng(w)}}if(!E.isCollapsed()){e.selection.setRng(c.normalize(e.selection.getRng()));e.getDoc().execCommand("Delete",false,null);O()}m=E.getNode();var j={context:m.nodeName.toLowerCase(),data:s.data,insert:true};y=u.parse(t,j);if(s.paste===true&&r.isListFragment(e.schema,y)&&r.isParentBlockLi(A,m)){w=r.insertAtCaret(v,A,e.selection.getRng(true),y);e.selection.setRng(w);e.fire("SetContent",b);return}N(y);_=y.lastChild;if(_.attr("id")=="mce_marker"){x=_;for(_=_.prev;_;_=_.walk(true)){if(_.type==3||!A.isBlock(_.name)){if(e.schema.isValidChild(_.parent.name,"span")){_.parent.insert(x,_,_.name==="br")}break}}}e._selectionOverrides.showBlockCaretContainer(m);if(!j.invalid){t=v.serialize(y);h(e,t,m)}else{E.setContent(C);m=E.getNode();g=e.getBody();if(m.nodeType==9){m=_=g}else{_=m}while(_!==g){m=_;_=_.parentNode}t=m==g?g.innerHTML:A.getOuterHTML(m);t=v.serialize(u.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return v.serialize(y)})));if(m==g){A.setHTML(g,t)}else{A.setOuterHTML(m,t)}}M();L(A.get("mce_marker"));R(e.getBody());p(e.dom,e.selection.getStart());e.fire("SetContent",b);e.addVisual()};var m=function(e){var t;if(typeof e!=="string"){t=f.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}};var g=function(e,t){var n=m(t);v(e,n.content,n.details)};return{insertAtCaret:g}});a("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,i,a,o){return n(i,a)?t.some(i):e.isFunction(o)&&o(i)?t.none():r(i,a,o)}});a("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,i,a,o,s){var u=function(e){return h(i.body(),e)};var l=function(t,i,a){var s=t.dom();var u=e.isFunction(a)?a:n.constant(false);while(s.parentNode){s=s.parentNode;var l=o.fromDom(s);if(i(l)){return r.some(l)}else if(u(l)){break}}return r.none()};var c=function(e,t,n){var r=function(e){return t(e)};return s(r,l,e,t,n)};var f=function(e,t){var n=e.dom();if(!n.parentNode){return r.none()}return d(o.fromDom(n.parentNode),function(n){return!a.eq(e,n)&&t(n)})};var d=function(e,r){var i=t.find(e.dom().childNodes,n.compose(r,o.fromDom));return i.map(o.fromDom)};var h=function(e,t){var n=function(e){for(var i=0;i<e.childNodes.length;i++){if(t(o.fromDom(e.childNodes[i]))){return r.some(o.fromDom(e.childNodes[i]))}var a=n(e.childNodes[i]);if(a.isSome()){return a}}return r.none()};return n(e.dom())};return{first:u,ancestor:l,closest:c,sibling:f,child:d,descendant:h}});a("tinymce.core.EditorSettings",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.katamari.api.Struct","ephox.katamari.api.Type","ephox.sand.api.PlatformDetection","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u){var l=a.immutable("sections","settings");var c=s.detect();var f=c.deviceType.isTouch();var d=["lists","autolink","autosave"];var h={theme:"mobile"};var p=function(t){var n=o.isArray(t)?t.join(" "):t;var r=e.map(o.isString(n)?n.split(" "):[],i.trim);return e.filter(r,function(e){return e.length>0})};var v=function(n){return e.filter(n,t.curry(e.contains,d))};var m=function(t,r){var i=n.bifilter(r,function(n,r){return e.contains(t,r)});return l(i.t,i.f)};var g=function(e,t,n){var r=e.sections();var i=r.hasOwnProperty(t)?r[t]:{};return u.extend({},n,i)};var y=function(e,t){return e.sections().hasOwnProperty(t)};var b=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:"<!DOCTYPE html>",visual:true,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:"30px",inline_styles:true,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,"+"tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:true}};var x=function(e,t){var n=t.external_plugins?t.external_plugins:{};if(e&&e.external_plugins){return u.extend({},e.external_plugins,n)}else{return n}};var w=function(e,t){return[].concat(p(e)).concat(p(t))};var _=function(e,t,n,r){var i=p(n.forced_plugins);var a=p(r.plugins);var o=e&&y(t,"mobile")?v(a):a;var s=w(i,o);return u.extend(r,{plugins:s.join(" ")})};var k=function(e,t){var n=t.settings().inline;return e&&y(t,"mobile")&&!n};var C=function(e,t,n,r){var i=m(["mobile"],r);var a=u.extend(t,n,i.settings(),k(e,i)?g(i,"mobile",h):{},{validate:true,content_editable:i.settings().inline,external_plugins:x(n,i.settings())});return _(e,i,n,a)};var T=function(e,t,n,r,i){var a=b(t,n,e);return C(f,a,r,i)};var S=function(e,t){return r.from(e.settings[t])};var E=function(e,t,n){return r.from(t.settings[n]).filter(e)};return{getEditorSettings:T,get:S,getString:t.curry(E,o.isString),combineSettings:C}});a("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;var t=function(t){return e.test(t)};return{hasStrongRtl:t}});a("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.EditorSettings","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.text.Bidi"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=function(e,t){var n=a.getString(e,"inline_boundaries_selector").getOr("a[href],code");return i.is(r.fromDom(t),n)};var h=function(e){return l.DOM.getStyle(e,"direction",true)==="rtl"||f.hasStrongRtl(e.textContent)};var p=function(t,n,r){return e.filter(l.DOM.getParents(r.container(),"*",n),t)};var v=function(e,t,r){var i=p(e,t,r);return n.from(i[i.length-1])};var m=function(e,t,n){var r=u.getParentBlock(t,e);var i=u.getParentBlock(n,e);return r&&r===i};var g=function(e){return o.isBeforeInline(e)||o.isAfterInline(e)};var y=function(e,t){var n=t.container(),r=t.offset();if(e){if(o.isCaretContainerInline(n)){if(c.isText(n.nextSibling)){return new s(n.nextSibling,0)}else{return s.after(n)}}else{return o.isBeforeInline(t)?new s(n,r+1):t}}else{if(o.isCaretContainerInline(n)){if(c.isText(n.previousSibling)){return new s(n.previousSibling,n.previousSibling.data.length)}else{return s.before(n)}}else{return o.isAfterInline(t)?new s(n,r-1):t}}};var b=t.curry(y,true);var x=t.curry(y,false);return{isInlineTarget:d,findRootInline:v,isRtl:h,isAtZwsp:g,normalizePosition:y,normalizeForwards:b,normalizeBackwards:x,hasSameParentBlock:m}});a("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateFind","tinymce.core.caret.CaretFinder","tinymce.core.dom.ElementType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,i,a,o,s){var u=function(e){return function(t){return n.eq(e,r.fromDom(t.dom().parentNode))}};var l=function(t,r){return n.contains(t,r)?i.closest(r,function(e){return o.isTextBlock(e)||o.isListItem(e)},u(t)):e.none()};var c=function(e){var t=e.getBody();var n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)};var f=function(e){if(e.dom.isEmpty(e.getBody())){e.setContent("");c(e)}};var d=function(e,n,r){return t.liftN([a.firstPositionIn(r),a.lastPositionIn(r)],function(t,i){var o=s.normalizePosition(true,t);var u=s.normalizePosition(false,i);var l=s.normalizePosition(false,n);if(e){return a.nextPosition(r,l).map(function(e){return e.isEqual(u)&&n.isEqual(o)}).getOr(false)}else{return a.prevPosition(r,l).map(function(e){return e.isEqual(o)&&n.isEqual(u)}).getOr(false)}}).getOr(true)};return{getParentBlock:l,paddEmptyBody:f,willDeleteLastPositionInElement:d}});a("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(e){return t.one(e)};var i=function(n,r,i){return e.ancestor(n,function(e){return t.is(e,r)},i)};var a=function(n,r){return e.sibling(n,function(e){return t.is(e,r)})};var o=function(n,r){return e.child(n,function(e){return t.is(e,r)})};var s=function(e,n){return t.one(n,e)};var u=function(e,r,a){return n(t.is,i,e,r,a)};return{first:r,ancestor:i,sibling:a,child:o,descendant:s,closest:u}});a("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){var t=function(t){return e.first(t).isSome()};var n=function(t,n,r){return e.ancestor(t,n,r).isSome()};var r=function(t,n){return e.sibling(t,n).isSome()};var i=function(t,n){return e.child(t,n).isSome()};var a=function(t,n){return e.descendant(t,n).isSome()};var o=function(t,n,r){return e.closest(t,n,r).isSome()};return{any:t,ancestor:n,sibling:r,child:i,descendant:a,closest:o}});a("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,i,a,o){var s=function(i,a){var o=n.fromDom(i);var s=n.fromDom(a);return r.ancestor(s,"pre,code",e.curry(t.eq,o))};var u=function(e,t){return a.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&s(e,t)===false};var l=function(e){return a.isElement(e)&&e.nodeName==="A"&&e.hasAttribute("name")};var c=function(e,t){return i.isCaretCandidate(t)&&u(e,t)===false||l(t)||f(t)};var f=a.hasAttribute("data-mce-bookmark");var d=a.hasAttribute("data-mce-bogus");var h=a.hasAttributeValue("data-mce-bogus","all");var p=function(e){var t,n,r=0;if(c(e,e)){return false}else{n=e.firstChild;if(!n){return true}t=new o(n,e);do{if(h(n)){n=t.next(true);continue}if(d(n)){n=t.next();continue}if(a.isBr(n)){r++;n=t.next();continue}if(c(e,n)){return false}n=t.next()}while(n);return r<=1}};var v=function(e){return p(e.dom())};return{isEmpty:v}});a("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=i.immutable("block","position");var m=i.immutable("from","to");var g=function(e,t){var n=o.fromDom(e);var r=o.fromDom(t.container());return d.getParentBlock(n,r).map(function(e){return v(e,t)})};var y=function(e){return a.eq(e.from().block(),e.to().block())===false};var b=function(e){return l.parent(e.from().block()).bind(function(t){return l.parent(e.to().block()).filter(function(e){return a.eq(t,e)})}).isSome()};var x=function(e){return p.isContentEditableFalse(e.from().block())===false&&p.isContentEditableFalse(e.to().block())===false};var w=function(e,t,r){if(p.isBr(r.position().getNode())&&h.isEmpty(r.block())===false){return c.positionIn(false,r.block().dom()).bind(function(i){if(i.isEqual(r.position())){return c.fromPosition(t,e,i).bind(function(t){return g(e,t)})}else{return n.some(r)}}).getOr(r)}else{return r}};var _=function(e,t,n){var i=g(e,f.fromRangeStart(n));var a=i.bind(function(n){return c.fromPosition(t,e,n.position()).bind(function(n){return g(e,n).map(function(n){return w(e,t,n)})})});return r.liftN([i,a],m).filter(function(e){return y(e)&&b(e)&&x(e)})};var k=function(e,t,r){return r.collapsed?_(e,t,r):n.none()};return{read:k}});a("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return e.slice(0,-1)};var i=function(e,i,a){if(t.contains(i,e)){return r(n.parents(e,function(e){return a(e)||t.eq(e,i)}))}else{return[]}};var a=function(t,n){return i(t,n,e.constant(false))};var o=function(e,t){return[e].concat(a(e,t))};return{parentsUntil:i,parents:a,parentsAndSelf:o}});a("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.dom.Parents"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p=function(t){var n=o.children(t);return e.findIndex(n,l.isBlock).fold(function(){return n},function(e){return n.slice(0,e)})};var v=function(t){var n=p(t);e.each(n,function(e){i.remove(e)});return n};var m=function(e,t){s.positionIn(e,t.dom()).each(function(e){var t=e.getNode();if(f.isBr(t)){i.remove(a.fromDom(t))}})};var g=function(t,n){var r=h.parentsAndSelf(n,t);return e.find(r.reverse(),c.isEmpty).each(i.remove)};var y=function(e,r){var i=o.parents(r,function(t){return n.eq(t,e)});return t.from(i[i.length-2])};var b=function(e,r){if(n.contains(r,e)){return o.parent(e).bind(function(i){return n.eq(i,r)?t.some(e):y(r,e)})}else{return t.none()}};var x=function(t,n,a){if(c.isEmpty(a)){i.remove(a);if(c.isEmpty(n)){d.fillWithPaddingBr(n)}return s.firstPositionIn(n.dom())}else{m(true,n);m(false,a);var o=v(n);return b(n,a).fold(function(){g(t,n);var i=s.lastPositionIn(a.dom());e.each(o,function(e){r.append(a,e)});return i},function(i){var l=s.prevPosition(a.dom(),u.before(i.dom()));e.each(o,function(e){r.before(i,e)});g(t,n);return l})}};var w=function(e,t,n,r){return t?x(e,r,n):x(e,n,r)};return{mergeBlocks:w}});a("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t,n){var r=function(r,i){var a,o=e.fromDom(r.getBody());a=t.read(o.dom(),i,r.selection.getRng()).bind(function(e){return n.mergeBlocks(o,i,e.from().block(),e.to().block())});a.each(function(e){r.selection.setRng(e.toRange())});return a.isSome()};return{backspaceDelete:r}});a("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateFind","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks","tinymce.core.dom.ElementType"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e,i){var a=i.getRng();return t.liftN([s.getParentBlock(e,r.fromDom(a.startContainer)),s.getParentBlock(e,r.fromDom(a.endContainer))],function(t,r){if(n.eq(t,r)===false){a.deleteContents();u.mergeBlocks(e,true,t,r).each(function(e){i.setRng(e.toRange())});return true}else{return false}}).getOr(false)};var f=function(t,a){var o=r.fromDom(a);var s=e.curry(n.eq,t);return i.ancestor(o,l.isTableCell,s).isSome()};var d=function(e,t){return f(e,t.startContainer)||f(e,t.endContainer)};var h=function(e,t){var n=a.prevPosition(e.dom(),o.fromRangeStart(t)).isNone();var r=a.nextPosition(e.dom(),o.fromRangeEnd(t)).isNone();return!d(e,t)&&n&&r};var p=function(e){e.setContent("");e.selection.setCursorLocation();return true};var v=function(e){var t=r.fromDom(e.getBody());var n=e.selection.getRng();return h(t,n)?p(e):c(t,e.selection)};var m=function(e,t){return e.selection.isCollapsed()?false:v(e,e.selection.getRng())};return{backspaceDelete:m}});a("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,i,a){var o=function(o){if(!n.isArray(o)){throw new i("cases must be an array")}if(o.length===0){throw new i("there must be at least one case")}var s=[];var u={};e.each(o,function(l,c){var f=t.keys(l);if(f.length!==1){throw new i("one and only one name per case")}var d=f[0];var h=l[d];if(u[d]!==undefined){throw new i("duplicate key detected:"+d)}else if(d==="cata"){throw new i("cannot have a case named cata (sorry)")}else if(!n.isArray(h)){throw new i("case arguments must be an array")}s.push(d);u[d]=function(){var n=arguments.length;if(n!==h.length){throw new i("Wrong number of arguments to case "+d+". Expected "+h.length+" ("+h+"), got "+n)}var u=new r(n);for(var l=0;l<u.length;l++){u[l]=arguments[l]}var f=function(n){var r=t.keys(n);if(s.length!==r.length){throw new i("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+r.join(","))}var a=e.forall(s,function(t){return e.contains(r,t)});if(!a){throw new i("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+s.join(", "))}return n[d].apply(null,u)};return{fold:function(){if(arguments.length!==o.length){throw new i("Wrong number of arguments to fold. Expected "+o.length+", got "+arguments.length)}var e=arguments[c];return e.apply(null,u)},match:f,log:function(e){a.log(e,{constructors:s,constructor:d,params:u})}}}});return u};return{generate:o}});a("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o,s,u){var l=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]);var c=function(e,t){var n=t.getNode(e===false);var r=e?"after":"before";return u.isElement(n)&&n.getAttribute("data-mce-caret")===r};var f=function(e,r,i,a){var u=a.getNode(r===false);return o.getParentBlock(n.fromDom(e),n.fromDom(i.getNode())).map(function(e){return s.isEmpty(e)?l.remove(e.dom()):l.moveToElement(u)}).orThunk(function(){return t.some(l.moveToElement(u))})};var d=function(e,n,i){return r.fromPosition(n,e,i).bind(function(r){if(n&&u.isContentEditableFalse(r.getNode())){return f(e,n,i,r)}else if(n===false&&u.isContentEditableFalse(r.getNode(true))){return f(e,n,i,r)}else if(n&&a.isAfterContentEditableFalse(i)){return t.some(l.moveToPosition(r))}else if(n===false&&a.isBeforeContentEditableFalse(i)){return t.some(l.moveToPosition(r))}else{return t.none()}})};var h=function(e,n){if(e&&u.isContentEditableFalse(n.nextSibling)){return t.some(l.moveToElement(n.nextSibling))}else if(e===false&&u.isContentEditableFalse(n.previousSibling)){return t.some(l.moveToElement(n.previousSibling))}else{return t.none()}};var p=function(e,n,r){return r.fold(function(e){return t.some(l.remove(e))},function(e){return t.some(l.moveToElement(e))},function(r){if(a.isInSameBlock(n,r,e)){return t.none()}else{return t.some(l.moveToPosition(r))}})};var v=function(e,n,r){if(c(n,r)){return h(n,r.getNode(n===false)).fold(function(){return d(e,n,r)},t.some)}else{return d(e,n,r).bind(function(t){return p(e,r,t)})}};var m=function(e,n,r){var o=a.normalizeRange(n?1:-1,e,r);var s=i.fromRangeStart(o);if(n===false&&a.isAfterContentEditableFalse(s)){return t.some(l.remove(s.getNode(true)))}else if(n&&a.isBeforeContentEditableFalse(s)){return t.some(l.remove(s.getNode()))}else{return v(e,n,s)}};return{read:m}});a("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p=function(e,t){var n=e.container();var r=e.offset();return f.isTextPosition(e)===false&&n===t.parentNode&&r>f.before(t).offset()};var v=function(e,t){return p(t,e)?new f(t.container(),t.offset()-1):t};var m=function(e){return h.isText(e)?new f(e,0):f.before(e)};var g=function(e){return h.isText(e)?new f(e,e.data.length):f.after(e)};var y=function(e){if(l.isCaretCandidate(e.previousSibling)){return t.some(g(e.previousSibling))}else{return e.previousSibling?c.lastPositionIn(e.previousSibling):t.none()}};var b=function(e){if(l.isCaretCandidate(e.nextSibling)){return t.some(m(e.nextSibling))}else{return e.nextSibling?c.firstPositionIn(e.nextSibling):t.none()}};var x=function(e,n){var r=f.before(n.previousSibling?n.previousSibling:n.parentNode);return c.prevPosition(e,r).fold(function(){return c.nextPosition(e,f.after(n))},t.some)};var w=function(e,n){return c.nextPosition(e,f.after(n)).fold(function(){return c.prevPosition(e,f.before(n))},t.some)};var _=function(e,t){return y(t).orThunk(function(){return b(t)}).orThunk(function(){return x(e,t)})};var k=function(e,t){return b(t).orThunk(function(){return y(t)}).orThunk(function(){return w(e,t)})};var C=function(e,t,n){return e?k(t,n):_(t,n)};var T=function(t,n,r){return C(t,n,r).map(e.curry(v,r))};var S=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})};var E=function(e){return function(t){return t.dom()===e}};var A=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(o.name(t))};var P=function(e){if(d.isEmpty(e)){var n=a.fromHtml('<br data-mce-bogus="1">');i.empty(e);r.append(e,n);return t.some(f.before(n.dom()))}else{return t.none()}};var O=function(e,t){return n.liftN([u.prevSibling(e),u.nextSibling(e),t],function(t,n,r){var a,o=t.dom(),s=n.dom();if(h.isText(o)&&h.isText(s)){a=o.data.length;o.appendData(s.data);i.remove(n);i.remove(e);if(r.container()===s){return new f(o,a)}else{return r}}else{i.remove(e);return r}}).orThunk(function(){i.remove(e);return t})};var M=function(n,r,i){var a=T(r,n.getBody(),i.dom());var o=s.ancestor(i,e.curry(A,n),E(n.getBody()));var u=O(i,a);if(n.dom.isEmpty(n.getBody())){n.setContent("");n.selection.setCursorLocation()}else{o.bind(P).fold(function(){S(n,r,u)},function(e){S(n,r,t.some(e))})}};return{deleteElement:M}});a("tinymce.core.delete.CefDelete",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.caret.CaretPosition","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.DeleteUtils","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o,s,u){var l=function(e,t){return function(r){e._selectionOverrides.hideFakeCaret();o.deleteElement(e,t,n.fromDom(r));return true}};var c=function(e,t){return function(n){var r=t?i.before(n):i.after(n);e.selection.setRng(r.toRange());return true}};var f=function(e){return function(t){e.selection.setRng(t.toRange());return true}};var d=function(e,t){var n=a.read(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(l(e,t),c(e,t),f(e))});return n.getOr(false)};var h=function(n){e.each(r.descendants(n,".mce-offscreen-selection"),t.remove)};var p=function(e,t){var r=e.selection.getNode();if(u.isContentEditableFalse(r)){h(n.fromDom(e.getBody()));o.deleteElement(e,t,n.fromDom(e.selection.getNode()));s.paddEmptyBody(e);return true}else{return false}};var v=function(e,t){while(t&&t!==e){if(u.isContentEditableTrue(t)||u.isContentEditableFalse(t)){return t}t=t.parentNode}return null};var m=function(e){var t,n=v(e.getBody(),e.selection.getNode());if(u.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)){t=e.dom.create("br",{"data-mce-bogus":"1"});e.dom.setHTML(n,"");n.appendChild(t);e.selection.setRng(i.before(t).toRange())}return true};var g=function(e,t){if(e.selection.isCollapsed()){return d(e,t)}else{return p(e,t)}};return{backspaceDelete:g,paddEmptyElement:m}});a("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isText;var i=function(e){return r(e)&&e.data[0]===n.ZWSP};var a=function(e){return r(e)&&e.data[e.data.length-1]===n.ZWSP};var o=function(e){return e.ownerDocument.createTextNode(n.ZWSP)};var s=function(e){if(r(e.previousSibling)){if(a(e.previousSibling)){return e.previousSibling}else{e.previousSibling.appendData(n.ZWSP);return e.previousSibling}}else if(r(e)){if(i(e)){return e}else{e.insertData(0,n.ZWSP);return e}}else{var t=o(e);e.parentNode.insertBefore(t,e);return t}};var u=function(e){if(r(e.nextSibling)){if(i(e.nextSibling)){return e.nextSibling}else{e.nextSibling.insertData(0,n.ZWSP);return e.nextSibling}}else if(r(e)){if(a(e)){return e}else{e.appendData(n.ZWSP);return e}}else{var t=o(e);if(e.nextSibling){e.parentNode.insertBefore(t,e.nextSibling)}else{e.parentNode.appendChild(t)}return t}};var l=function(e,t){return e?s(t):u(t)};return{insertInline:l,insertInlineBefore:e.curry(l,true),insertInlineAfter:e.curry(l,false)}});a("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n,r,i){var a=r.isElement;var o=r.isText;var s=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};var u=function(e){try{return e.nodeValue}catch(e){return""}};var l=function(e,t){if(t.length===0){s(e)}else{e.nodeValue=t}};var c=function(e){var t=i.trim(e);return{count:e.length-t.length,text:t}};var f=function(e,t){g(e);return t};var d=function(e,t){var r=c(e.data.substr(0,t.offset()));var i=c(e.data.substr(t.offset()));var a=r.text+i.text;if(a.length>0){l(e,a);return new n(e,t.offset()-r.count)}else{return t}};var h=function(t,r){var i=r.container();var a=e.indexOf(i.childNodes,t).map(function(e){return e<r.offset()?new n(i,r.offset()-1):r}).getOr(r);g(t);return a};var p=function(e,t){return t.container()===e?d(e,t):f(e,t)};var v=function(e,t){return t.container()===e.parentNode?h(e,t):f(e,t)};var m=function(e,t){return n.isTextPosition(t)?p(e,t):v(e,t)};var g=function(e){if(a(e)&&t.isCaretContainer(e)){if(t.hasContent(e)){e.removeAttribute("data-mce-caret")}else{s(e)}}if(o(e)){var n=i.trim(u(e));l(e,n)}};return{removeAndReposition:m,remove:g}});a("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,i,a,o,s){var u=function(e,t){if(o.isText(e.container())){return n.insertInline(t,e.container())}else{return n.insertInline(t,e.getNode())}};var l=function(e,n){var r=n.get();return r&&e.container()===r&&t.isCaretContainerInline(r)};var c=function(t,o){return o.fold(function(i){r.remove(t.get());var o=n.insertInlineBefore(i);t.set(o);return e.some(new a(o,o.length-1))},function(e){return i.firstPositionIn(e).map(function(e){if(!l(e,t)){r.remove(t.get());var n=u(e,true);t.set(n);return new a(n,1)}else{return new a(t.get(),1)}})},function(e){return i.lastPositionIn(e).map(function(e){if(!l(e,t)){r.remove(t.get());var n=u(e,false);t.set(n);return new a(n,n.length-1)}else{return new a(t.get(),t.get().length-1)}})},function(i){r.remove(t.get());var o=n.insertInlineAfter(i);t.set(o);return e.some(new a(o,1))})};return{renderCaret:c}});a("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(e){var t=function(e){return e&&/^(IMG)$/.test(e.nodeName)};var n=function(n,r,i){var a=i.startContainer,s=i.startOffset,u,l,c;if(i.startContainer===i.endContainer){if(t(i.startContainer.childNodes[i.startOffset])){return}}if(a.nodeType===3&&s>=a.nodeValue.length){s=n.nodeIndex(a);a=a.parentNode}if(a.nodeType===1){c=a.childNodes;if(s<c.length){a=c[s];u=new e(a,n.getParent(a,n.isBlock))}else{a=c[c.length-1];u=new e(a,n.getParent(a,n.isBlock));u.next(true)}for(l=u.current();l;l=u.next()){if(l.nodeType===3&&!o(l)){i.setStart(l,0);r.setRng(i);return}}}};var r=function(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t]){if(e.nodeType===1||!o(e)){return e}}}};var i=function(e,t){if(t.nodeType){t=t.nodeName}return!!e.schema.getTextBlockElements()[t.toLowerCase()]};var a=function(e,t,n){return e.schema.isValidChild(t,n)};var o=function(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)};var s=function(e,t){if(typeof e!=="string"){e=e(t)}else if(t){e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})}return e};var u=function(e,t){e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()===t.toLowerCase()};var l=function(e,t,n){if(n==="color"||n==="backgroundColor"){t=e.toHex(t)}if(n==="fontWeight"&&t===700){t="bold"}if(n==="fontFamily"){t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}return""+t};var c=function(e,t,n){return l(e,e.getStyle(t,n),n)};var f=function(e,t){var n;e.getParent(t,function(t){n=e.getStyle(t,"text-decoration");return n&&n!=="none"});return n};var d=function(e,t,n){return e.getParents(t,n,e.getRoot())};return{isInlineBlock:t,moveStart:n,getNonWhiteSpaceSibling:r,isTextBlock:i,isValid:a,isWhiteSpaceNode:o,replaceVars:s,isEq:u,normalizeStyleValue:l,getStyle:c,getTextDecoration:f,getParents:d}});a("tinymce.core.fmt.ExpandRange",["tinymce.core.dom.Bookmarks","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils","tinymce.core.selection.RangeNodes"],function(e,t,n,r){var i=e.isBookmarkNode;var a=n.getParents,o=n.isWhiteSpaceNode,s=n.isTextBlock;var u=function(e,t){if(typeof t==="undefined"){t=e.nodeType===3?e.length:e.childNodes.length}while(e&&e.hasChildNodes()){e=e.childNodes[t];if(e){t=e.nodeType===3?e.length:e.childNodes.length}}return{node:e,offset:t}};var l=function(e,t){var n=u(e,t);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling){n=u(n.node.previousSibling)}if(n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "){if(n.offset>1){e=n.node;e.splitText(n.offset-1)}}}return e};var c=function(e){return e.nodeName==="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling};var f=function(e,t){var n=t;while(n){if(n.nodeType===1&&e.getContentEditable(n)){return e.getContentEditable(n)==="false"?n:t}n=n.parentNode}return t};var d=function(e,t,n,r){var i,a,o=n.nodeValue;if(typeof r==="undefined"){r=e?o.length:0}if(e){i=o.lastIndexOf(" ",r);a=o.lastIndexOf("¬†",r);i=i>a?i:a;if(i!==-1&&!t){i++}}else{i=o.indexOf(" ",r);a=o.indexOf("¬†",r);i=i!==-1&&(a===-1||i<a)?i:a}return i};var h=function(e,n,r,i,a,o){var s,u,l,c;if(r.nodeType===3){l=d(a,o,r,i);if(l!==-1){return{container:r,offset:l}}c=r}s=new t(r,e.getParent(r,e.isBlock)||n);while(u=s[a?"prev":"next"]()){if(u.nodeType===3){c=u;l=d(a,o,u);if(l!==-1){return{container:u,offset:l}}}else if(e.isBlock(u)){break}}if(c){if(a){i=0}else{i=c.length}return{container:c,offset:i}}};var p=function(e,t,n,r,i){var o,s,u,l;if(r.nodeType===3&&r.nodeValue.length===0&&r[i]){r=r[i]}o=a(e,r);for(s=0;s<o.length;s++){for(u=0;u<t.length;u++){l=t[u];if("collapsed"in l&&l.collapsed!==n.collapsed){continue}if(e.is(o[s],l.selector)){return o[s]}}}return r};var v=function(e,t,r,i){var o,u=e.dom,l=u.getRoot();if(!t[0].wrapper){o=u.getParent(r,t[0].block,l)}if(!o){var c=u.getParent(r,"LI,TD,TH");o=u.getParent(r.nodeType===3?r.parentNode:r,function(t){return t!==l&&s(e,t)},c)}if(o&&t[0].wrapper){o=a(u,o,"ul,ol").reverse()[0]||o}if(!o){o=r;while(o[i]&&!u.isBlock(o[i])){o=o[i];if(n.isEq(o,"br")){break}}}return o||r};var m=function(e,t,n,r,a,s,u){var l,f,d,h,p;l=f=u?n:a;h=u?"previousSibling":"nextSibling";p=e.getRoot();if(l.nodeType===3&&!o(l)){if(u?r>0:s<l.nodeValue.length){return l}}while(true){if(!t[0].block_expand&&e.isBlock(f)){return f}for(d=f[h];d;d=d[h]){if(!i(d)&&!o(d)&&!c(d)){return f}}if(f===p||f.parentNode===p){l=f;break}f=f.parentNode}return l};var g=function(e,t,n,a){var o,s=t.startContainer,u=t.startOffset,c=t.endContainer,d=t.endOffset,g=e.dom;if(s.nodeType===1&&s.hasChildNodes()){s=r.getNode(s,u);if(s.nodeType===3){u=0}}if(c.nodeType===1&&c.hasChildNodes()){c=r.getNode(c,t.collapsed?d:d-1);if(c.nodeType===3){d=c.nodeValue.length}}s=f(g,s);c=f(g,c);if(i(s.parentNode)||i(s)){s=i(s)?s:s.parentNode;s=s.nextSibling||s;if(s.nodeType===3){u=0}}if(i(c.parentNode)||i(c)){c=i(c)?c:c.parentNode;c=c.previousSibling||c;if(c.nodeType===3){d=c.length}}if(n[0].inline){if(t.collapsed){o=h(g,e.getBody(),s,u,true,a);if(o){s=o.container;u=o.offset}o=h(g,e.getBody(),c,d,false,a);if(o){c=o.container;d=o.offset}}c=a?c:l(c,d)}if(n[0].inline||n[0].block_expand){if(!n[0].inline||(s.nodeType!==3||u===0)){s=m(g,n,s,u,c,d,true)}if(!n[0].inline||(c.nodeType!==3||d===c.nodeValue.length)){c=m(g,n,s,u,c,d,false)}}if(n[0].selector&&n[0].expand!==false&&!n[0].inline){s=p(g,n,t,s,"previousSibling");c=p(g,n,t,c,"nextSibling")}if(n[0].block||n[0].selector){s=v(e,n,s,"previousSibling");c=v(e,n,c,"nextSibling");if(n[0].block){if(!g.isBlock(s)){s=m(g,n,s,u,c,d,true)}if(!g.isBlock(c)){c=m(g,n,s,u,c,d,false)}}}if(s.nodeType===1){u=g.nodeIndex(s);s=s.parentNode}if(c.nodeType===1){d=g.nodeIndex(c)+1;c=c.parentNode}return{startContainer:s,startOffset:u,endContainer:c,endOffset:d}};return{expandRng:g}});a("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(e){var t=e.isEq;var n=function(e,t,n){var r=e.formatter.get(n);if(r){for(var i=0;i<r.length;i++){if(r[i].inherit===false&&e.dom.is(t,r[i].selector)){return true}}}return false};var r=function(e,t,r,i){var a=e.dom.getRoot();if(t===a){return false}t=e.dom.getParent(t,function(t){if(n(e,t,r)){return true}return t.parentNode===a||!!o(e,t,r,i,true)});return o(e,t,r,i)};var i=function(e,n,r){if(t(n,r.inline)){return true}if(t(n,r.block)){return true}if(r.selector){return n.nodeType===1&&e.is(n,r.selector)}};var a=function(n,r,i,a,o,s){var u,l,c=i[a],f;if(i.onmatch){return i.onmatch(r,i,a)}if(c){if(typeof c.length==="undefined"){for(u in c){if(c.hasOwnProperty(u)){if(a==="attributes"){l=n.getAttrib(r,u)}else{l=e.getStyle(n,r,u)}if(o&&!l&&!i.exact){return}if((!o||i.exact)&&!t(l,e.normalizeStyleValue(n,e.replaceVars(c[u],s),u))){return}}}}else{for(f=0;f<c.length;f++){if(a==="attributes"?n.getAttrib(r,c[f]):e.getStyle(n,r,c[f])){return i}}}}return i};var o=function(e,t,n,r,o){var s=e.formatter.get(n),u,l,c,f,d=e.dom;if(s&&t){for(l=0;l<s.length;l++){u=s[l];if(i(e.dom,t,u)&&a(d,t,u,"attributes",o,r)&&a(d,t,u,"styles",o,r)){if(f=u.classes){for(c=0;c<f.length;c++){if(!e.dom.hasClass(t,f[c])){return}}}return u}}}};var s=function(e,t,n,i){var a;if(i){return r(e,i,t,n)}i=e.selection.getNode();if(r(e,i,t,n)){return true}a=e.selection.getStart();if(a!==i){if(r(e,a,t,n)){return true}}return false};var u=function(e,t,n){var r,i=[],a={};r=e.selection.getStart();e.dom.getParent(r,function(r){var s,u;for(s=0;s<t.length;s++){u=t[s];if(!a[u]&&o(e,r,u,n)){a[u]=true;i.push(u)}}},e.dom.getRoot());return i};var l=function(t,n){var r=t.formatter.get(n),i,a,o,s,u,l=t.dom;if(r){i=t.selection.getStart();a=e.getParents(l,i);for(s=r.length-1;s>=0;s--){u=r[s].selector;if(!u||r[s].defaultBlock){return true}for(o=a.length-1;o>=0;o--){if(l.is(a[o],u)){return true}}}}return false};return{matchNode:o,matchName:i,match:s,matchAll:u,canApply:l,matchesUnInheritedFormatSelector:n}});a("tinymce.core.selection.SplitRange",["tinymce.core.dom.NodeType"],function(e){var t=function(e,t){return e.splitText(t)};var n=function(n){var r=n.startContainer,i=n.startOffset,a=n.endContainer,o=n.endOffset;if(r===a&&e.isText(r)){if(i>0&&i<r.nodeValue.length){a=t(r,i);r=a.previousSibling;if(o>i){o=o-i;r=a=t(a,o).previousSibling;o=a.nodeValue.length;i=0}else{o=0}}}else{if(e.isText(r)&&i>0&&i<r.nodeValue.length){r=t(r,i);i=0}if(e.isText(a)&&o>0&&o<a.nodeValue.length){a=t(a,o).previousSibling;o=a.nodeValue.length}}return{startContainer:r,startOffset:i,endContainer:a,endOffset:o}};return{split:n}});a("tinymce.core.fmt.CaretFormat",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.dom.TreeWalker","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.selection.SplitRange","tinymce.core.text.Zwsp","tinymce.core.util.Fun"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v){var m=p.ZWSP,g="_mce_caret";var y=function(e,t){return e.importNode(t,true)};var b=function(e){return e.nodeType===1&&e.id===g};var x=function(e){var t=[];while(e){if(e.nodeType===3&&e.nodeValue!==m||e.childNodes.length>1){return[]}if(e.nodeType===1){t.push(e)}e=e.firstChild}return t};var w=function(e){return x(e).length>0};var _=function(e){var t;if(e){t=new l(e,e);for(e=t.current();e;e=t.next()){if(e.nodeType===3){return e}}}return null};var k=function(e){var n=r.fromTag("span");a.setAll(n,{id:g,"data-mce-bogus":"1","data-mce-type":"format-caret"});if(e){t.append(n,r.fromText(m))}return n};var C=function(e,t){while(t&&t!==e){if(t.id===g){return t}t=t.parentNode}return null};var T=function(e){var t=_(e);if(t&&t.nodeValue.charAt(0)===m){t.deleteData(0,1)}return t};var S=function(e,t,n,i){var a,o,s;a=t.getRng(true);o=e.getParent(n,e.isBlock);if(w(n)){if(i!==false){a.setStartBefore(n);a.setEndBefore(n)}e.remove(n)}else{s=T(n);if(a.startContainer===s&&a.startOffset>0){a.setStart(s,a.startOffset-1)}if(a.endContainer===s&&a.endOffset>0){a.setEnd(s,a.endOffset-1)}e.remove(n,true)}if(o&&e.isEmpty(o)){u.fillWithPaddingBr(r.fromDom(o))}t.setRng(a)};var E=function(e,t,n,r,i){if(!r){r=C(e,n.getStart());if(!r){while(r=t.get(g)){S(t,n,r,false)}}}else{S(t,n,r,i)}};var A=function(e,t,n){var i=e.dom,a=i.getParent(n,v.curry(f.isTextBlock,e));if(a&&i.isEmpty(a)){n.parentNode.replaceChild(t,n)}else{u.removeTrailingBr(r.fromDom(n));if(i.isEmpty(n)){n.parentNode.replaceChild(t,n)}else{i.insertAfter(t,n)}}};var P=function(e,t){e.appendChild(t);return t};var O=function(t,n){var r=e.foldr(t,function(e,t){return P(e,t.cloneNode(false))},n);return P(r,r.ownerDocument.createTextNode(m))};var M=function(e,t,n){var r,i,a,o,s,u,l;var f=e.selection;r=f.getRng(true);o=r.startOffset;u=r.startContainer;l=u.nodeValue;i=C(e.getBody(),f.getStart());if(i){a=_(i)}var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&o>0&&o<l.length&&d.test(l.charAt(o))&&d.test(l.charAt(o-1))){s=f.getBookmark();r.collapse(true);r=c.expandRng(e,r,e.formatter.get(t));r=h.split(r);e.formatter.apply(t,n,r);f.moveToBookmark(s)}else{if(!i||a.nodeValue!==m){i=y(e.getDoc(),k(true).dom());a=i.firstChild;r.insertNode(i);o=1;e.formatter.apply(t,n,i)}else{e.formatter.apply(t,n,i)}f.setCursorLocation(a,o)}};var N=function(e,t,n,r){var i=e.dom,a=e.selection;var o=a.getRng(true),s,u,l;var f,p,v,m=[],g;s=o.startContainer;u=o.startOffset;p=s;if(s.nodeType===3){if(u!==s.nodeValue.length){f=true}p=p.parentNode}while(p){if(d.matchNode(e,p,t,n,r)){v=p;break}if(p.nextSibling){f=true}m.push(p);p=p.parentNode}if(!v){return}if(f){l=a.getBookmark();o.collapse(true);o=c.expandRng(e,o,e.formatter.get(t),true);o=h.split(o);e.formatter.remove(t,n,o);a.moveToBookmark(l)}else{g=C(e.getBody(),v);var y=k(false).dom();var b=O(m,y);if(g){A(e,y,g)}else{A(e,y,v)}S(i,a,g,false);a.setCursorLocation(b,1);if(i.isEmpty(v)){i.remove(v)}}};var R=function(e,t,n,r){E(e,t,n,null,false);if(r===8&&n.isCollapsed()&&n.getStart().innerHTML===m){E(e,t,n,C(e,n.getStart()))}if(r===37||r===39){E(e,t,n,C(e,n.getStart()))}};var D=function(e){var t=e.dom,n=e.selection;var r=e.getBody();e.on("mouseup keydown",function(e){R(r,t,n,e.keyCode)})};var B=function(e,i){var a=k(false);var s=O(i,a.dom());t.before(r.fromDom(e),a);n.remove(r.fromDom(e));return o(s,0)};var L=function(e,t){var n=e.schema.getTextInlineElements();return n.hasOwnProperty(i.name(t))&&!b(t.dom())&&!s.isBogus(t.dom())};return{setup:D,applyCaretFormat:M,removeCaretFormat:N,isCaretNode:b,getParentCaretContainer:C,replaceWithCaretFormat:B,isFormatElement:L}});a("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){var t=function(t,n){for(var r=0;r<t.length;r++){var i=t[r].apply(null,n);if(i.isSome()){return i}}return e.none()};return{evaluateUntil:t}});a("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretUtils","tinymce.core.fmt.CaretFormat","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,i,a,o,s,u){var l=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]);var c=function(e,t){var n=a.getParentBlock(t,e);return n?n:e};var f=function(e,r,a){var o=s.normalizeForwards(a);var u=c(r,o.container());return s.findRootInline(e,u,o).fold(function(){return i.nextPosition(u,o).bind(t.curry(s.findRootInline,e,u)).map(function(e){return l.before(e)})},n.none)};var d=function(e,t){return o.getParentCaretContainer(e,t)===null};var h=function(e,n,r){return s.findRootInline(e,n,r).filter(t.curry(d,n))};var p=function(e,t,r){var a=s.normalizeBackwards(r);return h(e,t,a).bind(function(e){var t=i.prevPosition(e,a);return t.isNone()?n.some(l.start(e)):n.none()})};var v=function(e,t,r){var a=s.normalizeForwards(r);return h(e,t,a).bind(function(e){var t=i.nextPosition(e,a);return t.isNone()?n.some(l.end(e)):n.none()})};var m=function(e,r,a){var o=s.normalizeBackwards(a);var u=c(r,o.container());return s.findRootInline(e,u,o).fold(function(){return i.prevPosition(u,o).bind(t.curry(s.findRootInline,e,u)).map(function(e){return l.after(e)})},n.none)};var g=function(e){return s.isRtl(b(e))===false};var y=function(e,t,n){var r=u.evaluateUntil([f,p,v,m],[e,t,n]);return r.filter(g)};var b=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)};var x=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))};var w=function(e){return e.fold(l.before,l.before,l.after,l.after)};var _=function(e){return e.fold(l.start,l.start,l.end,l.end)};var k=function(e,t){return x(e)===x(t)&&b(e)===b(t)};var C=function(e,t,n,i,a,o){return r.liftN([s.findRootInline(t,n,i),s.findRootInline(t,n,a)],function(t,r){if(t!==r&&s.hasSameParentBlock(n,t,r)){return l.after(e?t:r)}else{return o}}).getOr(o)};var T=function(e,n){return e.fold(t.constant(true),function(e){return!k(e,n)})};var S=function(e,n,r,a,o){var u=s.normalizePosition(e,o);var l=i.fromPosition(e,r,u).map(t.curry(s.normalizePosition,e));var c=l.fold(function(){return a.map(w)},function(i){return y(n,r,i).map(t.curry(C,e,n,r,u,i)).filter(t.curry(T,a))});return c.filter(g)};var E=function(e,r){if(e){return r.fold(t.compose(n.some,l.start),n.none,t.compose(n.some,l.after),n.none)}else{return r.fold(n.none,t.compose(n.some,l.before),n.none,t.compose(n.some,l.end))}};var A=function(e,n,r,i){var a=s.normalizePosition(e,i);var o=y(n,r,a);return y(n,r,a).bind(t.curry(E,e)).orThunk(function(){return S(e,n,r,o,i)})};return{readLocation:y,findLocation:A,prevLocation:t.curry(A,false),nextLocation:t.curry(A,true),getElement:b,outside:w,inside:_}});a("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};return e});a("tinymce.core.selection.WordSelection",["ephox.katamari.api.Type","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition"],function(e,t,n){var r=function(t){return e.isFunction(t.selection.getSel().modify)};var i=function(e,t,r){var i=e?1:-1;t.setRng(n(r.container(),r.offset()+i).toRange());t.getSel().modify("move",e?"forward":"backward","word");return true};var a=function(e,a){var o=a.selection.getRng();var s=e?n.fromRangeEnd(o):n.fromRangeStart(o);if(!r(a)){return false}else if(e&&t.isBeforeInline(s)){return i(true,a.selection,s)}else if(!e&&t.isAfterInline(s)){return i(false,a.selection,s)}else{return false}};return{hasSelectionModifyApi:r,moveByWord:a}});a("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils","tinymce.core.selection.WordSelection"],function(e,t,n,r,i,a,o,s,u){var l=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset());n.setEnd(t.container(),t.offset());e.selection.setRng(n)};var c=function(e){return e.settings.inline_boundaries!==false};var f=function(e,t){if(e){t.setAttribute("data-mce-selected","inline-boundary")}else{t.removeAttribute("data-mce-selected")}};var d=function(e,t,n){return a.renderCaret(t,n).map(function(t){l(e,t);return n})};var h=function(e,t,r){var a=e.getBody();var u=i.fromRangeStart(e.selection.getRng());var l=n.curry(s.isInlineTarget,e);var c=o.findLocation(r,l,a,u);return c.bind(function(n){return d(e,t,n)})};var p=function(t,r,i){var a=e.filter(r.select('*[data-mce-selected="inline-boundary"]'),t);var o=e.filter(i,t);e.each(e.difference(a,o),n.curry(f,false));e.each(e.difference(o,a),n.curry(f,true))};var v=function(e,t){if(e.selection.isCollapsed()&&e.composing!==true&&t.get()){var n=i.fromRangeStart(e.selection.getRng());if(i.isTextPosition(n)&&s.isAtZwsp(n)===false){l(e,r.removeAndReposition(t.get(),n));t.set(null)}}};var m=function(t,n,r,a){if(n.selection.isCollapsed()){var s=e.filter(a,t);e.each(s,function(e){var a=i.fromRangeStart(n.selection.getRng());o.readLocation(t,n.getBody(),a).bind(function(e){return d(n,r,e)})})}};var g=function(e,t,n){return function(){return c(e)?h(e,t,n).isSome():false}};var y=function(e,t,n){return function(){return c(t)?u.moveByWord(e,t):false}};var b=function(e){var r=new t(null);var i=n.curry(s.isInlineTarget,e);e.on("NodeChange",function(t){if(c(e)){p(i,e.dom,t.parents);v(e,r);m(i,e,r,t.parents)}});return r};return{move:g,moveNextWord:n.curry(y,true),movePrevWord:n.curry(y,false),setupSelectedState:b,setCaretPosition:l}});a("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","global!document","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p=function(e){return e.settings.inline_boundaries!==false};var v=function(e,t){var n=i.createRange();n.setStart(e.container(),e.offset());n.setEnd(t.container(),t.offset());return n};var m=function(e){return n.liftN([o.firstPositionIn(e),o.lastPositionIn(e)],function(t,n){var r=h.normalizePosition(true,t);var i=h.normalizePosition(false,n);return o.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(true)}).getOr(true)};var g=function(e,t){return function(n){return c.renderCaret(t,n).map(function(t){d.setCaretPosition(e,t);return true}).getOr(false)}};var y=function(t,n,r,i){var a=t.getBody();var o=e.curry(h.isInlineTarget,t);t.undoManager.ignore(function(){t.selection.setRng(v(r,i));t.execCommand("Delete");f.readLocation(o,a,s.fromRangeStart(t.selection.getRng())).map(f.inside).map(g(t,n))});t.nodeChanged()};var b=function(e,t){var n=u.getParentBlock(t,e);return n?n:e};var x=function(n,i,a,s){var u=b(n.getBody(),s.container());var c=e.curry(h.isInlineTarget,n);var d=f.readLocation(c,u,s);return d.bind(function(n){if(a){return n.fold(e.constant(t.some(f.inside(n))),t.none,e.constant(t.some(f.outside(n))),t.none)}else{return n.fold(t.none,e.constant(t.some(f.outside(n))),t.none,e.constant(t.some(f.inside(n))))}}).map(g(n,i)).getOrThunk(function(){var e=o.navigate(a,u,s);var t=e.bind(function(e){return f.readLocation(c,u,e)});if(d.isSome()&&t.isSome()){return h.findRootInline(c,u,s).map(function(e){if(m(e)){l.deleteElement(n,a,r.fromDom(e));return true}else{return false}}).getOr(false)}else{return t.bind(function(t){return e.map(function(e){if(a){y(n,i,s,e)}else{y(n,i,e,s)}return true})}).getOr(false)}})};var w=function(e,t,n){if(e.selection.isCollapsed()&&p(e)){var r=s.fromRangeStart(e.selection.getRng());return x(e,t,n,r)}return false};return{backspaceDelete:w}});a("tinymce.core.delete.TableDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,i,a,o,s,u,l){var c=a.immutable("start","end");var f=a.immutable("rng","table","cells");var d=e.generate([{removeTable:["element"]},{emptyCells:["cells"]}]);var h=function(e,t){return l.closest(s.fromDom(e),"td,th",t)};var p=function(e,t){return l.ancestor(e,"table",t)};var v=function(e){return o.eq(e.start(),e.end())===false};var m=function(e,t){return p(e.start(),t).bind(function(n){return p(e.end(),t).bind(function(e){return o.eq(n,e)?r.some(n):r.none()})})};var g=function(e,t){return i.liftN([h(e.startContainer,t),h(e.endContainer,t)],c).filter(v)};var y=function(e,t){return m(e,t).bind(function(t){var n=u.descendants(t,"td,th");return f(e,t,n)})};var b=function(e,t){var r=n.curry(o.eq,e);return g(t,r).map(function(e){return y(e,r)})};var x=function(e,n){return t.findIndex(e,function(e){return o.eq(e,n)})};var w=function(e){return i.liftN([x(e.cells(),e.rng().start()),x(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})};var _=function(e){return w(e).bind(function(t){var n=e.cells();return t.length===n.length?d.removeTable(e.table()):d.emptyCells(t)})};var k=function(e){return d.emptyCells(e)};var C=function(e,t){return b(e,t).map(_)};return{getActionFromRange:C,getActionFromCells:k}});a("tinymce.core.selection.MultiRange",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.selection.RangeNodes"],function(e,t,n){var r=function(e){var t=[];if(e){for(var n=0;n<e.rangeCount;n++){t.push(e.getRangeAt(n))}}return t};var i=function(r){return e.bind(r,function(e){var r=n.getSelectedNode(e);return r?[t.fromDom(r)]:[]})};var a=function(e){return r(e).length>1};return{getRanges:r,getSelectedNodes:i,hasMultipleRanges:a}});a("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(e,t,n,r,i){var a=function(t){return e.filter(i.getSelectedNodes(t),r.isTableCell)};var o=function(e){var t=n.descendants(e,"td[data-mce-selected],th[data-mce-selected]");return t};var s=function(e,t){var n=o(t);var r=a(e);return n.length>0?n:r};var u=function(e){return s(i.getRanges(e.selection.getSel()),t.fromDom(e.getBody()))};return{getCellsFromRanges:a,getCellsFromElement:o,getCellsFromElementOrRanges:s,getCellsFromEditor:u}});a("tinymce.core.delete.TableDelete",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteElement","tinymce.core.delete.TableDeleteAction","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.PaddingBr","tinymce.core.dom.Parents","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=function(t,n){e.each(n,d.fillWithPaddingBr);t.selection.setCursorLocation(n[0].dom(),0);return true};var m=function(e,t){u.deleteElement(e,false,t);return true};var g=function(e,n,r){return l.getActionFromRange(n,r).map(function(n){return n.fold(t.curry(m,e),t.curry(v,e))})};var y=function(e,t){return C(e,t)};var b=function(e,t,n,r){return _(t,r).fold(function(){return g(e,t,n)},function(t){return y(e,t)}).getOr(false)};var x=function(e,t){var n=i.fromDom(e.getBody());var r=e.selection.getRng();var a=p.getCellsFromEditor(e);return a.length!==0?v(e,a):b(e,n,r,t)};var w=function(t,n){return e.find(h.parentsAndSelf(n,t),c.isTableCell)};var _=function(t,n){return e.find(h.parentsAndSelf(n,t),function(e){return a.name(e)==="caption"})};var k=function(e,t,n,a,s){return o.navigate(n,e.getBody(),s).bind(function(e){return w(t,i.fromDom(e.getNode())).map(function(e){return r.eq(e,a)===false})})};var C=function(e,t){d.fillWithPaddingBr(t);e.selection.setCursorLocation(t.dom(),0);return n.some(true)};var T=function(e,t,n,r){return o.firstPositionIn(e.dom()).bind(function(i){return o.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(true)};var S=function(e,t){return C(e,t)};var E=function(e,t,n){return _(e,i.fromDom(n.getNode())).map(function(e){return r.eq(e,t)===false})};var A=function(e,t,r,i,a){return o.navigate(r,e.getBody(),a).bind(function(n){return T(i,r,a,n)?S(e,i):E(t,i,n)}).or(n.some(true))};var P=function(e,t,n,r){var i=s.fromRangeStart(e.selection.getRng());return w(n,r).bind(function(r){return f.isEmpty(r)?C(e,r):k(e,n,t,r,i)})};var O=function(e,t,n,r){var i=s.fromRangeStart(e.selection.getRng());return f.isEmpty(r)?C(e,r):A(e,n,t,r,i)};var M=function(e,t,n){var r=i.fromDom(e.getBody());return _(r,n).fold(function(){return P(e,t,r,n)},function(n){return O(e,t,r,n)}).getOr(false)};var N=function(e,t){var n=i.fromDom(e.selection.getStart(true));return e.selection.isCollapsed()?M(e,t,n):x(e,n)};return{backspaceDelete:N}});a("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.DeleteUtils","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.TableDelete"],function(e,t,n,r,i,a){var o=function(e,t){e.getDoc().execCommand(t,false,null)};var s=function(s){if(n.backspaceDelete(s,false)){return}else if(i.backspaceDelete(s,false)){return}else if(e.backspaceDelete(s,false)){return}else if(a.backspaceDelete(s)){return}else if(t.backspaceDelete(s,false)){return}else{o(s,"Delete");r.paddEmptyBody(s)}};var u=function(r){if(n.backspaceDelete(r,true)){return}else if(i.backspaceDelete(r,true)){return}else if(e.backspaceDelete(r,true)){return}else if(a.backspaceDelete(r)){return}else if(t.backspaceDelete(r,true)){return}else{o(r,"ForwardDelete")}};return{deleteCommand:s,forwardDeleteCommand:u}});a("tinymce.core.selection.RangeCompare",[],function(){var e=function(e,t){return e&&t&&(e.startContainer===t.startContainer&&e.startOffset===t.startOffset)&&(e.endContainer===t.endContainer&&e.endOffset===t.endOffset)};return{isEq:e}});a("tinymce.core.selection.NormalizeRange",["ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.selection.RangeCompare"],function(e,t,n,r,i,a,o){var s=t.immutable("container","offset");var u=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var l=function(e,t,n){return u(e,t,n)!==null};var c=function(e,t,n){return l(e,t,function(e){return e.nodeName===n})};var f=function(e){return e&&e.nodeName==="TABLE"};var d=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var h=function(e,t){return n.isCaretContainer(e)&&l(e,t,a.isCaretNode)===false};var p=function(e,t,n){var a=new i(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());while(t=a[n?"prev":"next"]()){if(r.isBr(t)){return true}}};var v=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t};var m=function(e,t){while(t&&t!==e){if(r.isContentEditableFalse(t)){return true}t=t.parentNode}return false};var g=function(t,n,a,o,u){var l,f,d,p=t.getRoot(),v;var m=t.schema.getNonEmptyElements();d=t.getParent(u.parentNode,t.isBlock)||p;if(o&&r.isBr(u)&&n&&t.isEmpty(d)){return e.some(s(u.parentNode,t.nodeIndex(u)))}l=new i(u,d);while(v=l[o?"prev":"next"]()){if(t.getContentEditableParent(v)==="false"||h(v,p)){return e.none()}if(r.isText(v)&&v.nodeValue.length>0){if(c(v,p,"A")===false){return e.some(s(v,o?v.nodeValue.length:0))}return e.none()}if(t.isBlock(v)||m[v.nodeName.toLowerCase()]){return e.none()}f=v}if(a&&f){return e.some(s(f,0))}return e.none()};var y=function(t,a,o,u){var l,c,h,y=t.getRoot(),b,x;var w,_,k=false;l=u[(o?"start":"end")+"Container"];c=u[(o?"start":"end")+"Offset"];_=r.isElement(l)&&c===l.childNodes.length;x=t.schema.getNonEmptyElements();w=o;if(n.isCaretContainer(l)){return e.none()}if(r.isElement(l)&&c>l.childNodes.length-1){w=false}if(r.isDocument(l)){l=y;c=0}if(l===y){if(w){b=l.childNodes[c>0?c-1:0];if(b){if(n.isCaretContainer(b)){return e.none()}if(x[b.nodeName]||f(b)){return e.none()}}}if(l.hasChildNodes()){c=Math.min(!w&&c>0?c-1:c,l.childNodes.length-1);l=l.childNodes[c];c=r.isText(l)&&_?l.data.length:0;if(!a&&l===y.lastChild&&f(l)){return e.none()}if(m(y,l)||n.isCaretContainer(l)){return e.none()}if(l.hasChildNodes()&&f(l)===false){b=l;h=new i(l,y);do{if(r.isContentEditableFalse(b)||n.isCaretContainer(b)){k=false;break}if(r.isText(b)&&b.nodeValue.length>0){c=w?0:b.nodeValue.length;l=b;k=true;break}if(x[b.nodeName.toLowerCase()]&&!d(b)){c=t.nodeIndex(b);l=b.parentNode;if((b.nodeName==="IMG"||b.nodeName==="PRE")&&!w){c++}k=true;break}}while(b=w?h.next():h.prev())}}}if(a){if(r.isText(l)&&c===0){g(t,_,a,true,l).each(function(e){l=e.container();c=e.offset();k=true})}if(r.isElement(l)){b=l.childNodes[c];if(!b){b=l.childNodes[c-1]}if(b&&r.isBr(b)&&!v(b,"A")&&!p(t,b,false)&&!p(t,b,true)){g(t,_,a,true,b).each(function(e){l=e.container();c=e.offset();k=true})}}}if(w&&!a&&r.isText(l)&&c===l.nodeValue.length){g(t,_,a,false,l).each(function(e){l=e.container();c=e.offset();k=true})}return k?e.some(s(l,c)):e.none()};var b=function(t,n){var r=n.collapsed,i=n.cloneRange();y(t,r,true,i).each(function(e){i.setStart(e.container(),e.offset())});if(!r){y(t,r,false,i).each(function(e){i.setEnd(e.container(),e.offset())})}if(r){i.collapse(true)}return o.isEq(n,i)?e.none():e.some(i)};return{normalize:b}});a("tinymce.core.newline.InsertBr",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Insert","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils","tinymce.core.selection.NormalizeRange"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e,t,n){var r=new o(t,n),i;var a=e.getNonEmptyElements();while(i=r.next()){if(a[i.nodeName.toLowerCase()]||i.length>0){return true}}};var f=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n);t.scrollIntoView(r);e.remove(r)};var d=function(e,t,n,r){var i=e.createRng();if(!r){i.setStartAfter(n);i.setEndAfter(n)}else{i.setStartBefore(n);i.setEndBefore(n)}t.setRng(i)};var h=function(e,t){var n=e.selection,r=e.dom;var i,a;var o=n.getRng(true);l.normalize(r,o).each(function(e){o.setStart(e.startContainer,e.startOffset);o.setEnd(e.endContainer,e.endOffset)});var s=o.startOffset;var u=o.startContainer;if(u.nodeType===1&&u.hasChildNodes()){var h=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u;if(h&&u.nodeType===3){s=u.nodeValue.length}else{s=0}}var p=r.getParent(u,r.isBlock);var v=p?r.getParent(p.parentNode,r.isBlock):null;var m=v?v.nodeName.toUpperCase():"";var g=t&&t.ctrlKey;if(m==="LI"&&!g){p=v}if(u&&u.nodeType===3&&s>=u.nodeValue.length){if(!c(e.schema,u,p)){i=r.create("br");o.insertNode(i);o.setStartAfter(i);o.setEndAfter(i);a=true}}i=r.create("br");o.insertNode(i);f(r,n,i);d(r,n,i,a);e.undoManager.add()};var p=function(e,r){var i=n.fromTag("br");t.before(n.fromDom(r),i);e.undoManager.add()};var v=function(e,r){if(!g(e.getBody(),r)){t.after(n.fromDom(r),n.fromTag("br"))}var i=n.fromTag("br");t.after(n.fromDom(r),i);f(e.dom,e.selection,i.dom());d(e.dom,e.selection,i.dom(),false);e.undoManager.add()};var m=function(e){return a.isBr(e.getNode())};var g=function(e,t){if(m(i.after(t))){return true}else{return r.nextPosition(e,i.after(t)).map(function(e){return a.isBr(e.getNode())}).getOr(false)}};var y=function(e){return e&&e.nodeName==="A"&&"href"in e};var b=function(t){return t.fold(e.constant(false),y,y,e.constant(false))};var x=function(t){var n=e.curry(u.isInlineTarget,t);var r=i.fromRangeStart(t.selection.getRng());return s.readLocation(n,t.getBody(),r).filter(b)};var w=function(t,n){n.fold(e.noop,e.curry(p,t),e.curry(v,t),e.noop)};var _=function(t,n){var r=x(t);if(r.isSome()){r.each(e.curry(w,t))}else{h(t,n)}};return{insert:_}});a("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(e,t){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var r=function(e,t,n,r){return e.fold(t,n,r)};var i=function(e){return e.fold(t.identity,t.identity,t.identity)};return{before:n.before,on:n.on,after:n.after,cata:r,getStart:i}});a("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i){var a=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var o=t.immutable("start","soffset","finish","foffset");var s=function(e){return a.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var u=function(e){return e.match({domRange:function(e){return n.fromDom(e.startContainer)},relative:function(e,t){return i.getStart(e)},exact:function(e,t,n,r){return e}})};var l=function(e){var t=u(e);return r.defaultView(t)};return{domRange:a.domRange,relative:a.relative,exact:a.exact,exactFromRange:s,range:o,getWin:l}});a("tinymce.core.selection.SelectionBookmark",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","global!document"],function(e,t,n,r,i,a,o,s,u,l){var c=n.detect().browser;var f=function(e,t){var n=a.isText(t)?o.get(t).length:s.children(t).length+1;if(e>n){return n}else if(e<0){return 0}return e};var d=function(e){return u.range(e.start(),f(e.soffset(),e.start()),e.finish(),f(e.foffset(),e.finish()))};var h=function(e,t){return r.contains(e,t)||r.eq(e,t)};var p=function(e){return function(t){return h(e,t.start())&&h(e,t.finish())}};var v=function(e){return e.inline===true||c.isIE()};var m=function(e){return u.range(i.fromDom(e.startContainer),e.startOffset,i.fromDom(e.endContainer),e.endOffset)};var g=function(e){var n=e.getSelection();var r=!n||n.rangeCount===0?t.none():t.from(n.getRangeAt(0));return r.map(m)};var y=function(e){var t=s.defaultView(e);return g(t.dom()).filter(p(e))};var b=function(e,n){return t.from(n).filter(p(e)).map(d)};var x=function(e){var n=l.createRange();n.setStart(e.start().dom(),e.soffset());n.setEnd(e.finish().dom(),e.foffset());return t.some(n)};var w=function(e){var n=v(e)?y(i.fromDom(e.getBody())):t.none();e.bookmark=n.isSome()?n:e.bookmark};var _=function(e,n){var r=i.fromDom(e.getBody());var a=v(e)?t.from(n):t.none();var o=a.map(m).filter(p(r));e.bookmark=o.isSome()?o:e.bookmark};var k=function(n){var r=n.bookmark?n.bookmark:t.none();return r.bind(e.curry(b,i.fromDom(n.getBody()))).bind(x)};var C=function(e){k(e).each(function(t){e.selection.setRng(t)})};return{store:w,storeNative:_,readRange:g,restore:C,getRng:k,getBookmark:y,validate:b}});a("tinymce.core.EditorCommands",["tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.newline.InsertBr","tinymce.core.selection.SelectionBookmark","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o){var s=o.each,u=o.extend;var l=o.map,c=o.inArray,f=o.explode;var d=true,h=false;return function(o){var p,v,m,g={state:{},exec:{},value:{}},y=o.settings,b;o.on("PreInit",function(){p=o.dom;v=o.selection;y=o.settings;m=o.formatter});var x=function(e,t,n,r){var i,u,l=0;if(o.removed){return}if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)&&(!r||!r.skip_focus)){o.focus()}else{a.restore(o)}r=o.fire("BeforeExecCommand",{command:e,ui:t,value:n});if(r.isDefaultPrevented()){return false}u=e.toLowerCase();if(i=g.exec[u]){i(u,t,n);o.fire("ExecCommand",{command:e,ui:t,value:n});return true}s(o.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n)){o.fire("ExecCommand",{command:e,ui:t,value:n});l=true;return false}});if(l){return l}if(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n)){o.fire("ExecCommand",{command:e,ui:t,value:n});return true}try{l=o.getDoc().execCommand(e,t,n)}catch(e){}if(l){o.fire("ExecCommand",{command:e,ui:t,value:n});return true}return false};var w=function(e){var t;if(o.quirks.isHidden()||o.removed){return}e=e.toLowerCase();if(t=g.state[e]){return t(e)}try{return o.getDoc().queryCommandState(e)}catch(e){}return false};var _=function(e){var t;if(o.quirks.isHidden()||o.removed){return}e=e.toLowerCase();if(t=g.value[e]){return t(e)}try{return o.getDoc().queryCommandValue(e)}catch(e){}};var k=function(e,t){t=t||"exec";s(e,function(e,n){s(n.toLowerCase().split(","),function(n){g[t][n]=e})})};var C=function(e,t,n){e=e.toLowerCase();g.exec[e]=function(e,r,i,a){return t.call(n||o,r,i,a)}};var T=function(e){e=e.toLowerCase();if(g.exec[e]){return true}try{return o.getDoc().queryCommandSupported(e)}catch(e){}return false};var S=function(e,t,n){e=e.toLowerCase();g.state[e]=function(){return t.call(n||o)}};var E=function(e,t,n){e=e.toLowerCase();g.value[e]=function(){return t.call(n||o)}};var A=function(e){e=e.toLowerCase();return!!g.exec[e]};u(this,{execCommand:x,queryCommandState:w,queryCommandValue:_,queryCommandSupported:T,addCommands:k,addCommand:C,addQueryStateHandler:S,addQueryValueHandler:E,hasCustomCommand:A});var P=function(e,t,n){if(t===undefined){t=h}if(n===undefined){n=null}return o.getDoc().execCommand(e,t,n)};var O=function(e){return m.match(e)};var M=function(e,t){m.toggle(e,t?{value:t}:undefined);o.nodeChanged()};var N=function(e){b=v.getBookmark(e)};var R=function(){v.moveToBookmark(b)};k({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(t){var n=o.getDoc(),r;try{P(t)}catch(e){r=d}if(t==="paste"&&!n.queryCommandEnabled(t)){r=true}if(r||!n.queryCommandSupported(t)){var i=o.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(e.mac){i=i.replace(/Ctrl\+/g,"‚åò+")}o.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(v.isCollapsed()){var e=o.dom.getParent(o.selection.getStart(),"a");if(e){o.dom.remove(e,true)}return}m.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);if(t=="full"){t="justify"}s("left,center,right,justify".split(","),function(e){if(t!=e){m.remove("align"+e)}});if(t!="none"){M("align"+t)}},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;P(e);t=p.getParent(v.getNode(),"ol,ul");if(t){n=t.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){N();p.split(n,t);R()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){M(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){M(e,n)},FontSize:function(e,t,n){var r,i;if(n>=1&&n<=7){i=f(y.font_size_style_values);r=f(y.font_size_classes);if(r){n=r[n-1]||n}else{n=i[n-1]||n}}M(e,n)},RemoveFormat:function(e){m.remove(e)},mceBlockQuote:function(){M("blockquote")},FormatBlock:function(e,t,n){return M(n||"p")},mceCleanup:function(){var e=v.getBookmark();o.setContent(o.getContent({cleanup:d}),{cleanup:d});v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||v.getNode();if(r!=o.getBody()){N();o.dom.remove(r,d);R()}},mceSelectNodeDepth:function(e,t,n){var r=0;p.getParent(v.getNode(),function(e){if(e.nodeType==1&&r++==n){v.select(e);return h}},o.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(e,n,r){t.insertAtCaret(o,r)},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker");o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){M(n)},mceSetContent:function(e,t,n){o.setContent(n)},"Indent,Outdent":function(e){var t,n,r;t=y.indentation;n=/[a-z%]+$/i.exec(t);t=parseInt(t,10);if(!w("InsertUnorderedList")&&!w("InsertOrderedList")){if(!y.forced_root_block&&!p.getParent(v.getNode(),p.isBlock)){m.apply("div")}s(v.getSelectedBlocks(),function(i){if(p.getContentEditable(i)==="false"){return}if(i.nodeName!=="LI"){var a=o.getParam("indent_use_margin",false)?"margin":"padding";a=i.nodeName==="TABLE"?"margin":a;a+=p.getStyle(i,"direction",true)=="rtl"?"Right":"Left";if(e=="outdent"){r=Math.max(0,parseInt(i.style[a]||0,10)-t);p.setStyle(i,a,r?r+n:"")}else{r=parseInt(i.style[a]||0,10)+t+n;p.setStyle(i,a,r)}}})}else{P(e)}},mceRepaint:function(){},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual;o.addVisual()},mceReplaceContent:function(e,t,n){o.execCommand("mceInsertContent",false,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;if(typeof n=="string"){n={href:n}}r=p.getParent(v.getNode(),"a");n.href=n.href.replace(" ","%20");if(!r||!n.href){m.remove("link")}if(n.href){m.apply("link",n,r)}},selectAll:function(){var e=p.getParent(v.getStart(),r.isContentEditableTrue);if(e){var t=p.createRng();t.selectNodeContents(e);v.setRng(t)}},delete:function(){n.deleteCommand(o)},forwardDelete:function(){n.forwardDeleteCommand(o)},mceNewDocument:function(){o.setContent("")},InsertLineBreak:function(e,t,n){i.insert(o,n);return true}});k({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7);var n=v.isCollapsed()?[p.getParent(v.getNode(),p.isBlock)]:v.getSelectedBlocks();var r=l(n,function(e){return!!m.matchNode(e,t)});return c(r,d)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return O(e)},mceBlockQuote:function(){return O("blockquote")},Outdent:function(){var e;if(y.inline_styles){if((e=p.getParent(v.getStart(),p.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return d}if((e=p.getParent(v.getEnd(),p.isBlock))&&parseInt(e.style.paddingLeft,10)>0){return d}}return w("InsertUnorderedList")||w("InsertOrderedList")||!y.inline_styles&&!!p.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=p.getParent(v.getNode(),"ul,ol");return t&&(e==="insertunorderedlist"&&t.tagName==="UL"||e==="insertorderedlist"&&t.tagName==="OL")}},"state");k({"FontSize,FontName":function(e){var t=0,n;if(n=p.getParent(v.getNode(),"span")){if(e=="fontsize"){t=n.style.fontSize}else{t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return t}},"value");k({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}});a("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");var n=function(t){var n=this,r,i={},a;var o=function(){return false};var s=function(){return true};t=t||{};r=t.scope||n;a=t.toggleEvent||o;var u=function(e,n){var a,u,l,f;e=e.toLowerCase();n=n||{};n.type=e;if(!n.target){n.target=r}if(!n.preventDefault){n.preventDefault=function(){n.isDefaultPrevented=s};n.stopPropagation=function(){n.isPropagationStopped=s};n.stopImmediatePropagation=function(){n.isImmediatePropagationStopped=s};n.isDefaultPrevented=o;n.isPropagationStopped=o;n.isImmediatePropagationStopped=o}if(t.beforeFire){t.beforeFire(n)}a=i[e];if(a){for(u=0,l=a.length;u<l;u++){f=a[u];if(f.once){c(e,f.func)}if(n.isImmediatePropagationStopped()){n.stopPropagation();return n}if(f.func.call(r,n)===false){n.preventDefault();return n}}}return n};var l=function(t,r,s,u){var l,c,f;if(r===false){r=o}if(r){r={func:r};if(u){e.extend(r,u)}c=t.toLowerCase().split(" ");f=c.length;while(f--){t=c[f];l=i[t];if(!l){l=i[t]=[];a(t,true)}if(s){l.unshift(r)}else{l.push(r)}}}return n};var c=function(e,t){var r,o,s,u,l;if(e){u=e.toLowerCase().split(" ");r=u.length;while(r--){e=u[r];o=i[e];if(!e){for(s in i){a(s,false);delete i[s]}return n}if(o){if(!t){o.length=0}else{l=o.length;while(l--){if(o[l].func===t){o=o.slice(0,l).concat(o.slice(l+1));i[e]=o}}}if(!o.length){a(e,false);delete i[e]}}}}else{for(e in i){a(e,false)}i={}}return n};var f=function(e,t,n){return l(e,t,n,{once:true})};var d=function(e){e=e.toLowerCase();return!(!i[e]||i[e].length===0)};n.fire=u;n.on=l;n.off=c;n.once=f;n.has=d};n.isNative=function(e){return!!t[e.toLowerCase()]};return n});a("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){var t=function(t){if(!t._eventDispatcher){t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){if(e.isNative(n)&&t.toggleNativeEvent){t.toggleNativeEvent(n,r)}}})}return t._eventDispatcher};return{fire:function(e,n,r){var i=this;if(i.removed&&e!=="remove"){return n}n=t(i).fire(e,n,r);if(r!==false&&i.parent){var a=i.parent();while(a&&!n.isPropagationStopped()){a.fire(e,n,false);a=a.parent()}}return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}});a("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r=t.DOM,i;var a=function(e,t){if(t=="selectionchange"){return e.getDoc()}if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)){return e.getDoc().documentElement}if(e.settings.event_root){if(!e.eventRoot){e.eventRoot=r.select(e.settings.event_root)[0]}return e.eventRoot}return e.getBody()};var o=function(e,t){var n,o;var s=function(e){return!e.hidden&&!e.readonly};if(!e.delegates){e.delegates={}}if(e.delegates[t]||e.removed){return}n=a(e,t);if(e.settings.event_root){if(!i){i={};e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor){if(i){for(t in i){e.dom.unbind(a(e,t))}i=null}}})}if(i[t]){return}o=function(n){var i=n.target,a=e.editorManager.get(),o=a.length;while(o--){var u=a[o].getBody();if(u===i||r.isChildOf(i,u)){if(s(a[o])){a[o].fire(t,n)}}}};i[t]=o;r.bind(n,t,o)}else{o=function(n){if(s(e)){e.fire(t,n)}};r.bind(n,t,o);e.delegates[t]=o}};var s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;if(e=="focus"||e=="blur"){return}if(t){if(n.initialized){o(n,e)}else{if(!n._pendingNativeEvents){n._pendingNativeEvents=[e]}else{n._pendingNativeEvents.push(e)}}}else if(n.initialized){n.dom.unbind(a(n,e),e,n.delegates[e]);delete n.delegates[e]}},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates){e.dom.unbind(a(e,t),t,e.delegates[t])}delete e.delegates}if(!e.inline){e.getBody().onload=null;e.dom.unbind(e.getWin());e.dom.unbind(e.getDoc())}e.dom.unbind(e.getBody());e.dom.unbind(e.getContainer())}};s=n.extend({},e,s);return s});a("tinymce.core.Mode",[],function(){var e=function(e,t,n){try{e.getDoc().execCommand(t,false,n)}catch(e){}};var t=function(e){var t,n;t=e.getBody();n=function(t){if(e.dom.getParents(t.target,"a").length>0){t.preventDefault()}};e.dom.bind(t,"click",n);return{unbind:function(){e.dom.unbind(t,"click",n)}}};var n=function(n,r){if(n._clickBlocker){n._clickBlocker.unbind();n._clickBlocker=null}if(r){n._clickBlocker=t(n);n.selection.controlSelection.hideResizeRect();n.readonly=true;n.getBody().contentEditable=false}else{n.readonly=false;n.getBody().contentEditable=true;e(n,"StyleWithCSS",false);e(n,"enableInlineTableEditing",false);e(n,"enableObjectResizing",false);n.focus();n.nodeChanged()}};var r=function(e,t){var r=e.readonly?"readonly":"design";if(t==r){return}if(e.initialized){n(e,t=="readonly")}else{e.on("init",function(){n(e,t=="readonly")})}e.fire("SwitchMode",{mode:t})};return{setMode:r}});a("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,r=e.explode;var i={f9:120,f10:121,f11:122};var a=e.makeMap("alt,ctrl,shift,meta,access");return function(o){var s=this,u={},l=[];var c=function(e){var o,s,u={};n(r(e,"+"),function(e){if(e in a){u[e]=true}else{if(/^[0-9]{2,}$/.test(e)){u.keyCode=parseInt(e,10)}else{u.charCode=e.charCodeAt(0);u.keyCode=i[e]||e.toUpperCase().charCodeAt(0)}}});o=[u.keyCode];for(s in a){if(u[s]){o.push(s)}else{u[s]=false}}u.id=o.join(",");if(u.access){u.alt=true;if(t.mac){u.ctrl=true}else{u.shift=true}}if(u.meta){if(t.mac){u.meta=true}else{u.ctrl=true;u.meta=false}}return u};var f=function(t,n,i,a){var s;s=e.map(r(t,">"),c);s[s.length-1]=e.extend(s[s.length-1],{func:i,scope:a||o});return e.extend(s[0],{desc:o.translate(n),subpatterns:s.slice(1)})};var d=function(e){return e.altKey||e.ctrlKey||e.metaKey};var h=function(e){return e.type==="keydown"&&e.keyCode>=112&&e.keyCode<=123};var p=function(e,t){if(!t){return false}if(t.ctrl!=e.ctrlKey||t.meta!=e.metaKey){return false}if(t.alt!=e.altKey||t.shift!=e.shiftKey){return false}if(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode){e.preventDefault();return true}return false};var v=function(e){return e.func?e.func.call(e.scope):null};o.on("keyup keypress keydown",function(e){if((d(e)||h(e))&&!e.isDefaultPrevented()){n(u,function(t){if(p(e,t)){l=t.subpatterns.slice(0);if(e.type=="keydown"){v(t)}return true}});if(p(e,l[0])){if(l.length===1){if(e.type=="keydown"){v(l[0])}}l.shift()}}});s.add=function(t,i,a,s){var l;l=a;if(typeof a==="string"){a=function(){o.execCommand(l,false,null)}}else if(e.isArray(l)){a=function(){o.execCommand(l[0],l[1],l[2])}}n(r(e.trim(t.toLowerCase())),function(e){var t=f(e,i,a,s);u[t.id]=t});return true};s.remove=function(e){var t=f(e);if(u[t.id]){delete u[t.id];return true}return false}}});a("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){var r=n.each;var i=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0};var a=function(e){return e.replace(/<!--|-->/g,"")};var o=function(e,t,n){var r=1,i,a,o,s;s=e.getShortEndedElements();o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;o.lastIndex=i=n;while(a=o.exec(t)){i=o.lastIndex;if(a[1]==="/"){r--}else if(!a[1]){if(a[2]in s){continue}r++}if(r===0){break}}return i};var s=function(s,u){var l=this;var c=function(){};s=s||{};l.schema=u=u||new e;if(s.fix_self_closing!==false){s.fix_self_closing=true}r("comment cdata text start end pi doctype".split(" "),function(e){if(e){l[e]=s[e]||c}});l.parse=function(e){var r=this,l,c=0,f,d,h=[],p,v,m,g;var y,b,x,w,_;var k,C,T,S,E,A,P;var O,M,N,R;var D,B,L,I,F,j,z=0;var H=t.decode,U,W=n.makeMap("src,href,data,background,formaction,poster");var V=/((java|vb)script|mhtml):/i,q=/^data:/i;var K=function(e){var t,n;t=h.length;while(t--){if(h[t].name===e){break}}if(t>=0){for(n=h.length-1;n>=t;n--){e=h[n];if(e.valid){r.end(e.name)}}h.length=t}};var Y=function(e,t,n,r,a){var o,u,l=/[\s\u0000-\u001F]+/g;t=t.toLowerCase();n=t in w?t:H(n||r||a||"");if(k&&!y&&i(t)===false){o=A[t];if(!o&&P){u=P.length;while(u--){o=P[u];if(o.pattern.test(t)){break}}if(u===-1){o=null}}if(!o){return}if(o.validValues&&!(n in o.validValues)){return}}if(W[t]&&!s.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}if(V.test(c)){return}if(!s.allow_html_data_urls&&q.test(c)&&!/^data:image\//i.test(c)){return}}if(y&&(t in W||t.indexOf("on")===0)){return}p.map[t]=n;p.push({name:t,value:n})};L=new RegExp("<(?:"+"(?:!--([\\w\\W]*?)--\x3e)|"+"(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|"+"(?:!DOCTYPE([\\w\\W]*?)>)|"+"(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|"+"(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|"+"(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>)"+")","g");I=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;x=u.getShortEndedElements();B=s.self_closing_elements||u.getSelfClosingElements();w=u.getBoolAttrs();k=s.validate;b=s.remove_internals;U=s.fix_self_closing;F=u.getSpecialElements();R=e+">";while(l=L.exec(R)){if(c<l.index){r.text(H(e.substr(c,l.index-c)))}if(f=l[6]){f=f.toLowerCase();if(f.charAt(0)===":"){f=f.substr(1)}K(f)}else if(f=l[7]){if(l.index+l[0].length>e.length){r.text(H(e.substr(l.index)));c=l.index+l[0].length;continue}f=f.toLowerCase();if(f.charAt(0)===":"){f=f.substr(1)}_=f in x;if(U&&B[f]&&h.length>0&&h[h.length-1].name===f){K(f)}if(!k||(C=u.getElementRule(f))){T=true;if(k){A=C.attributes;P=C.attributePatterns}if(E=l[8]){y=E.indexOf("data-mce-type")!==-1;if(y&&b){T=false}p=[];p.map={};E.replace(I,Y)}else{p=[];p.map={}}if(k&&!y){O=C.attributesRequired;M=C.attributesDefault;N=C.attributesForced;D=C.removeEmptyAttrs;if(D&&!p.length){T=false}if(N){v=N.length;while(v--){S=N[v];g=S.name;j=S.value;if(j==="{$uid}"){j="mce_"+z++}p.map[g]=j;p.push({name:g,value:j})}}if(M){v=M.length;while(v--){S=M[v];g=S.name;if(!(g in p.map)){j=S.value;if(j==="{$uid}"){j="mce_"+z++}p.map[g]=j;p.push({name:g,value:j})}}}if(O){v=O.length;while(v--){if(O[v]in p.map){break}}if(v===-1){T=false}}if(S=p.map["data-mce-bogus"]){if(S==="all"){c=o(u,e,L.lastIndex);L.lastIndex=c;continue}T=false}}if(T){r.start(f,p,_)}}else{T=false}if(d=F[f]){d.lastIndex=c=l.index+l[0].length;if(l=d.exec(e)){if(T){m=e.substr(c,l.index-c)}c=l.index+l[0].length}else{m=e.substr(c);c=e.length}if(T){if(m.length>0){r.text(m,true)}r.end(f)}L.lastIndex=c;continue}if(!_){if(!E||E.indexOf("/")!=E.length-1){h.push({name:f,valid:T})}else if(T){r.end(f)}}}else if(f=l[1]){if(f.charAt(0)===">"){f=" "+f}if(!s.allow_conditional_comments&&f.substr(0,3).toLowerCase()==="[if"){f=" "+f}r.comment(f)}else if(f=l[2]){r.cdata(a(f))}else if(f=l[3]){r.doctype(f)}else if(f=l[4]){r.pi(f,l[5])}c=l.index+l[0].length}if(c<e.length){r.text(H(e.substr(c)))}for(v=h.length-1;v>=0;v--){f=h[v];if(f.valid){r.end(f.name)}}}};s.findEndTag=o;return s});a("tinymce.core.dom.TrimHtml",["tinymce.core.html.SaxParser","tinymce.core.text.Zwsp"],function(e,t){var n=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")};var r=function(t,r){var i=r;var a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var o,s,u,l,c;var f=t.schema;i=n(t.getTempAttrs(),i);c=f.getShortEndedElements();while(l=a.exec(i)){s=a.lastIndex;u=l[0].length;if(c[l[1]]){o=s}else{o=e.findEndTag(f,i,s)}i=i.substring(0,s-u)+i.substring(o);a.lastIndex=s-u}return i};var i=function(e,n){return t.trim(r(e,n))};return{trimExternal:i,trimInternal:r}});a("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){var t=function(t){return e.first(t).isSome()};var n=function(t,n,r){return e.ancestor(t,n,r).isSome()};var r=function(t,n,r){return e.closest(t,n,r).isSome()};var i=function(t,n){return e.sibling(t,n).isSome()};var a=function(t,n){return e.child(t,n).isSome()};var o=function(t,n){return e.descendant(t,n).isSome()};return{any:t,ancestor:n,closest:r,sibling:i,child:a,descendant:o}});a("ephox.sugar.api.dom.Focus",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r,i,a,o){var s=function(e){e.dom().focus()};var u=function(e){e.dom().blur()};var l=function(e){var t=a.owner(e).dom();return e.dom()===t.activeElement};var c=function(e){var n=e!==undefined?e.dom():o;return t.from(n.activeElement).map(r.fromDom)};var f=function(t){var r=a.owner(t);var o=c(r).filter(function(r){return i.closest(r,e.curry(n.eq,t))});o.fold(function(){s(t)},e.noop)};var d=function(e){return c(a.owner(e)).filter(function(t){return e.dom().contains(t.dom())})};return{hasFocus:l,focus:s,blur:u,active:c,search:d,focusInside:f}});a("tinymce.core.focus.EditorFocus",["ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Focus","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.caret.CaretFinder","tinymce.core.dom.ElementType","tinymce.core.selection.RangeNodes","tinymce.core.selection.SelectionBookmark"],function(e,t,n,r,i,a,o,s,u){var l=function(e,t){return e.dom.getParent(t,function(t){return e.dom.getContentEditable(t)==="true"})};var c=function(t){return t.collapsed?e.from(s.getNode(t.startContainer,t.startOffset)).map(r.fromDom):e.none()};var f=function(n,r){return c(r).bind(function(r){if(o.isTableSection(r)){return e.some(r)}else if(t.contains(n,r)===false){return e.some(n)}else{return e.none()}})};var d=function(e,t){f(r.fromDom(e.getBody()),t).bind(function(e){return a.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){e.selection.setRng(t.toRange())})};var h=function(e){if(e.setActive){try{e.setActive()}catch(t){e.focus()}}else{e.focus()}};var p=function(e){return n.hasFocus(e)||n.search(e).isSome()};var v=function(e){return e.iframeElement&&n.hasFocus(r.fromDom(e.iframeElement))};var m=function(e){var t=e.getBody();return t&&p(r.fromDom(t))};var g=function(e){return e.inline?m(e):v(e)};var y=function(e){var t=e.selection,n=e.settings.content_editable;var r=e.getBody(),a,o=t.getRng();e.quirks.refreshContentEditable();a=l(e,t.getNode());if(e.$.contains(r,a)){h(a);d(e,o);b(e);return}if(e.bookmark!==undefined&&g(e)===false){u.getRng(e).each(function(t){e.selection.setRng(t);o=t})}if(!n){if(!i.opera){h(r)}e.getWin().focus()}if(i.gecko||n){h(r);d(e,o)}b(e)};var b=function(e){e.editorManager.setActive(e)};var x=function(e,t){if(e.removed){return}t?b(e):y(e)};return{focus:x,hasFocus:g}});a("tinymce.core.EditorView",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=function(e,t){var n=t.dom();return n[e]};var s=function(e,t){return parseInt(i.get(t,e),10)};var u=e.curry(o,"clientWidth");var l=e.curry(o,"clientHeight");var c=e.curry(s,"margin-top");var f=e.curry(s,"margin-left");var d=function(e){return e.dom().getBoundingClientRect()};var h=function(e,t,n){var r=u(e);var i=l(e);return t>=0&&n>=0&&t<=r&&n<=i};var p=function(e,t,n,r){var i=d(t);var a=e?i.left+t.dom().clientLeft+f(t):0;var o=e?i.top+t.dom().clientTop+c(t):0;var s=n-a;var u=r-o;return{x:s,y:u}};var v=function(e,t,n){var i=r.fromDom(e.getBody());var o=e.inline?i:a.documentElement(i);var s=p(e.inline,o,t,n);return h(o,s.x,s.y)};var m=function(e){return t.from(e).map(r.fromDom)};var g=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return m(t).map(function(e){return n.contains(a.owner(e),e)}).getOr(false)};return{isXYInContentArea:v,isEditorAttachedToDom:g}});a("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}});a("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(e,t,n,r,i){return function(a){var o=[];var s=function(){var e=a.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():r()};var u=function(){return t.from(o[0])};var l=function(e,t){return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout};var c=function(){if(o.length>0){s().reposition(o)}};var f=function(e){o.push(e)};var d=function(t){e.findIndex(o,function(e){return e===t}).each(function(e){o.splice(e,1)})};var h=function(t){if(a.removed||!n.isEditorAttachedToDom(a)){return}return e.find(o,function(e){return l(s().getArgs(e),t)}).getOrThunk(function(){a.editorManager.setActive(a);var e=s().open(t,function(){d(e);c()});f(e);c();return e})};var p=function(){u().each(function(e){s().close(e);d(e);c()})};var v=function(){return o};var m=function(t){t.on("SkinLoaded",function(){var e=t.settings.service_message;if(e){h({text:e,type:"warning",timeout:0,icon:""})}});t.on("ResizeEditor ResizeWindow",function(){i.requestAnimationFrame(c)});t.on("remove",function(){e.each(o,function(e){s().close(e)})})};m(a);return{open:h,close:p,getNotifications:v}}});a("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}});a("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(e,t,n,r){return function(i){var a=[];var o=function(){var e=i.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():r()};var s=function(e,t){return function(){return t?t.apply(e,arguments):undefined}};var u=function(e){i.fire("OpenWindow",{win:e})};var l=function(e){i.fire("CloseWindow",{win:e})};var c=function(e){a.push(e);u(e)};var f=function(t){e.findIndex(a,function(e){return e===t}).each(function(e){a.splice(e,1);l(t);if(a.length===0){i.focus()}})};var d=function(){return t.from(a[a.length-1])};var h=function(e,t){i.editorManager.setActive(i);n.store(i);var r=o().open(e,t,f);c(r);return r};var p=function(e,t,n){var r=o().alert(e,s(n?n:this,t),f);c(r)};var v=function(e,t,n){var r=o().confirm(e,s(n?n:this,t),f);c(r)};var m=function(){d().each(function(e){o().close(e);f(e)})};var g=function(){return d().map(o().getParams).getOr(null)};var y=function(e){d().each(function(t){o().setParams(t,e)})};var b=function(){return a};i.on("remove",function(){e.each(a.slice(0),function(e){o().close(e)})});return{windows:a,open:h,alert:p,confirm:v,close:m,getParams:g,setParams:y,getWindows:b}}});a("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(e,t){var n=t.PluginManager;var r=function(e,t){for(var r in n.urls){var i=n.urls[r]+"/plugin"+t+".js";if(i===e){return r}}return null};var i=function(e,t){var n=r(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t};var a=function(e,t){e.notificationManager.open({type:"error",text:t})};var o=function(e,t){if(e._skinLoaded){a(e,t)}else{e.on("SkinLoaded",function(){a(e,t)})}};var s=function(e,t){o(e,"Failed to upload image: "+t)};var u=function(e,t){o(e,i(e,t))};var l=function(t){var n=e.console;if(n&&!e.test){if(n.error){n.error.apply(n,arguments)}else{n.log.apply(n,arguments)}}};return{pluginLoadError:u,uploadError:s,displayError:o,initError:l}});a("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager});a("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager});a("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){var t=e.getOrDie("XMLHttpRequest");return new t}});a("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r,i){return function(n,a){var o={};var s=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};var u=function(n,r,i,o){var u,l;u=new e;u.open("POST",a.url);u.withCredentials=a.credentials;u.upload.onprogress=function(e){o(e.loaded/e.total*100)};u.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+u.status)};u.onload=function(){var e;if(u.status<200||u.status>=300){i("HTTP Error: "+u.status);return}e=JSON.parse(u.responseText);if(!e||typeof e.location!="string"){i("Invalid JSON: "+u.responseText);return}r(s(a.basePath,e.location))};l=new t.FormData;l.append("file",n.blob(),n.filename());u.send(l)};var l=function(){return new r(function(e){e([])})};var c=function(e,t){return{url:t,blobInfo:e,status:true}};var f=function(e,t){return{url:"",blobInfo:e,status:false,error:t}};var d=function(e,t){i.each(o[e],function(e){e(t)});delete o[e]};var h=function(e,t,i){n.markPending(e.blobUri());return new r(function(r){var a,o;var s=function(){};try{var u=function(){if(a){a.close();o=s}};var l=function(t){u();n.markUploaded(e.blobUri(),t);d(e.blobUri(),c(e,t));r(c(e,t))};var h=function(t){u();n.removeFailed(e.blobUri());d(e.blobUri(),f(e,t));r(f(e,t))};o=function(e){if(e<0||e>100){return}if(!a){a=i()}a.progressBar.value(e)};t(e,l,h,o)}catch(t){r(f(e,t.message))}})};var p=function(e){return e===u};var v=function(e){var t=e.blobUri();return new r(function(e){o[t]=o[t]||[];o[t].push(e)})};var m=function(e,t){e=i.grep(e,function(e){return!n.isUploaded(e.blobUri())});return r.all(i.map(e,function(e){return n.isPending(e.blobUri())?v(e):h(e,a.handler,t)}))};var g=function(e,t){return!a.url&&p(a.handler)?l():m(e,t)};a=i.extend({credentials:false,handler:u},a);return{upload:g}}});a("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(e){return function(t,n){var r=e.getOrDie("Blob");return new r(t,n)}});a("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(e){return function(){var t=e.getOrDie("FileReader");return new t}});a("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],function(e){return function(t){var n=e.getOrDie("Uint8Array");return new n(t)}});a("ephox.sand.api.Window",["ephox.sand.util.Global"],function(e){var t=function(t){var n=e.getOrDie("requestAnimationFrame");n(t)};var n=function(t){var n=e.getOrDie("atob");return n(t)};return{atob:n,requestAnimationFrame:t}});a("tinymce.core.file.Conversions",["ephox.sand.api.Blob","ephox.sand.api.FileReader","ephox.sand.api.Uint8Array","ephox.sand.api.Window","ephox.sand.api.XMLHttpRequest","tinymce.core.util.Promise"],function(e,t,n,r,i,a){var o=function(e){return new a(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var a=new i;a.open("GET",e,true);a.responseType="blob";a.onload=function(){if(this.status==200){t(this.response)}else{r()}};a.onerror=r;a.send()}catch(e){r()}})};var s=function(e){var t,n;e=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(e[0]);if(n){t=n[1]}return{type:t,data:e[1]}};var u=function(t){return new a(function(i){var a,o,u;t=s(t);try{a=r.atob(t.data)}catch(t){i(new e([]));return}o=new n(a.length);for(u=0;u<o.length;u++){o[u]=a.charCodeAt(u)}i(new e([o],{type:t.type}))})};var l=function(e){if(e.indexOf("blob:")===0){return o(e)}if(e.indexOf("data:")===0){return u(e)}return null};var c=function(e){return new a(function(n){var r=new t;r.onloadend=function(){n(r.result)};r.readAsDataURL(e)})};return{uriToBlob:l,blobToDataUri:c,parseDataUri:s}});a("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,r,i){var a=0;var o=function(e){return(e||"blobid")+a++};var s=function(e,t,n,i){var a,s;if(t.src.indexOf("blob:")===0){s=e.getByUri(t.src);if(s){n({image:t,blobInfo:s})}else{r.uriToBlob(t.src).then(function(i){r.blobToDataUri(i).then(function(u){a=r.parseDataUri(u).data;s=e.create(o(),i,a);e.add(s);n({image:t,blobInfo:s})})},function(e){i(e)})}return}a=r.parseDataUri(t.src).data;s=e.findFirst(function(e){return e.base64()===a});if(s){n({image:t,blobInfo:s})}else{r.uriToBlob(t.src).then(function(r){s=e.create(o(),r,a);e.add(s);n({image:t,blobInfo:s})},function(e){i(e)})}};var u=function(e){return e?e.getElementsByTagName("img"):[]};return function(r,a){var o={};var l=function(l,c){var f,d;if(!c){c=n.constant(true)}f=t.filter(u(l),function(e){var t=e.src;if(!i.fileApi){return false}if(e.hasAttribute("data-mce-bogus")){return false}if(e.hasAttribute("data-mce-placeholder")){return false}if(!t||t==i.transparentSrc){return false}if(t.indexOf("blob:")===0){return!r.isUploaded(t)}if(t.indexOf("data:")===0){return c(e)}return false});d=t.map(f,function(t){var n;if(o[t.src]){return new e(function(e){o[t.src].then(function(n){if(typeof n==="string"){return n}e({image:t,blobInfo:n.blobInfo})})})}n=new e(function(e,n){s(a,t,e,n)}).then(function(e){delete o[e.image.src];return e})["catch"](function(e){delete o[t.src];return e});o[t.src]=n;return n});return e.all(d)};return{findAll:l}}});a("tinymce.core.util.Uuid",[],function(){var e=0;var t=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)};var t=(new Date).getTime();return"s"+t.toString(36)+e()+e()+e()};var n=function(n){return n+e+++t()};return{uuid:n}});a("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid"],function(e,t,n,r){return function(){var i=[],a=n.constant;var o=function(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"};return t[e.toLowerCase()]||"dat"};var s=function(e,t,n,r){return typeof e==="object"?u(e):u({id:e,name:r,blob:t,base64:n})};var u=function(t){var n,i;if(!t.blob||!t.base64){throw"blob and base64 representations of the image are required for BlobInfo to be created"}n=t.id||r.uuid("blobid");i=t.name||n;return{id:a(n),name:a(i),filename:a(i+"."+o(t.blob.type)),blob:a(t.blob),base64:a(t.base64),blobUri:a(t.blobUri||e.createObjectURL(t.blob)),uri:a(t.uri)}};var l=function(e){if(!c(e.id())){i.push(e)}};var c=function(e){return f(function(t){return t.id()===e})};var f=function(e){return t.filter(i,e)[0]};var d=function(e){return f(function(t){return t.blobUri()==e})};var h=function(n){i=t.filter(i,function(t){if(t.blobUri()===n){e.revokeObjectURL(t.blobUri());return false}return true})};var p=function(){t.each(i,function(t){e.revokeObjectURL(t.blobUri())});i=[]};return{create:s,add:l,get:c,getByUri:d,findFirst:f,removeByUri:h,destroy:p}}});a("tinymce.core.file.UploadStatus",[],function(){return function(){var e=1,t=2;var n={};var r=function(e,t){return{status:e,resultUri:t}};var i=function(e){return e in n};var a=function(e){var t=n[e];return t?t.resultUri:null};var o=function(t){return i(t)?n[t].status===e:false};var s=function(e){return i(e)?n[e].status===t:false};var u=function(t){n[t]=r(e,null)};var l=function(e,i){n[e]=r(t,i)};var c=function(e){delete n[e]};var f=function(){n={}};return{hasBlobUri:i,getResultUri:a,isPending:o,isUploaded:s,markPending:u,markUploaded:l,removeFailed:c,destroy:f}}});a("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,r,i,a){return function(o){var s=new r,u,l,c=o.settings;var f=new i;var d=function(e){return function(t){if(o.selection){return e(t)}return[]}};var h=function(){return"?"+(new Date).getTime()};var p=function(e,t,n){var r=0;do{r=e.indexOf(t,r);if(r!==-1){e=e.substring(0,r)+n+e.substr(r+t.length);r+=n.length-t.length+1}}while(r!==-1);return e};var v=function(e,t,n){e=p(e,'src="'+t+'"','src="'+n+'"');e=p(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"');return e};var m=function(t,n){e.each(o.undoManager.data,function(r){if(r.type==="fragmented"){r.fragments=e.map(r.fragments,function(e){return v(e,t,n)})}else{r.content=v(r.content,t,n)}})};var g=function(){return o.notificationManager.open({text:o.translate("Image uploading..."),type:"info",timeout:-1,progressBar:true})};var y=function(e,t){s.removeByUri(e.src);m(e.src,t);o.$(e).attr({src:c.images_reuse_filename?t+h():t,"data-mce-src":o.convertURL(t,"src")})};var b=function(n){if(!u){u=new t(f,{url:c.images_upload_url,basePath:c.images_upload_base_path,credentials:c.images_upload_credentials,handler:c.images_upload_handler})}return _().then(d(function(t){var r;r=e.map(t,function(e){return e.blobInfo});return u.upload(r,g).then(d(function(r){var i=e.map(r,function(e,n){var r=t[n].image;if(e.status&&o.settings.images_replace_blob_uris!==false){y(r,e.url)}else if(e.error){a.uploadError(o,e.error)}return{element:r,status:e.status}});if(n){n(i)}return i}))}))};var x=function(e){if(c.automatic_uploads!==false){return b(e)}};var w=function(e){return c.images_dataimg_filter?c.images_dataimg_filter(e):true};var _=function(){if(!l){l=new n(f,s)}return l.findAll(o.getBody(),w).then(d(function(t){t=e.filter(t,function(e){if(typeof e==="string"){a.displayError(o,e);return false}return true});e.each(t,function(e){m(e.image.src,e.blobInfo.blobUri());e.image.src=e.blobInfo.blobUri();e.image.removeAttribute("data-mce-src")});return t}))};var k=function(){s.destroy();f.destroy();l=u=null};var C=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=f.getResultUri(n);if(r){return'src="'+r+'"'}var i=s.getByUri(n);if(!i){i=e.reduce(o.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)}if(i){return'src="data:'+i.blob().type+";base64,"+i.base64()+'"'}return t})};o.on("setContent",function(){if(o.settings.automatic_uploads!==false){x()}else{_()}});o.on("RawSaveContent",function(e){e.content=C(e.content)});o.on("getContent",function(e){if(e.source_view||e.format=="raw"){return}e.content=C(e.content)});o.on("PostRender",function(){o.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(s.getByUri(t)){return}var n=f.getResultUri(t);if(n){e.attr("src",n)}})})});return{blobCache:s,uploadImages:b,uploadImagesAuto:x,scanForImages:_,destroy:k}}});a("tinymce.core.ForceBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Element","tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.dom.Parents","tinymce.core.focus.EditorFocus"],function(e,t,n,r,i,a,o){var s=function(e,t){return e.hasOwnProperty(t.nodeName)};var u=function(e,t){if(i.isText(t)){return true}else if(i.isElement(t)){return!s(e,t)&&!r.isBookmarkNode(t)}else{return false}};var l=function(t,r,i){return e.exists(a.parents(n.fromDom(i),n.fromDom(r)),function(e){return s(t,e.dom())})};var c=function(e){var t=e.settings,n=e.dom,r=e.selection;var a=e.schema,s=a.getBlockElements();var c=r.getStart(),f=e.getBody(),d;var h,p,v,m,g;var y,b,x;var w,_;_=t.forced_root_block;if(!c||!i.isElement(c)||!_){return}w=f.nodeName.toLowerCase();if(!a.isValidChild(w,_.toLowerCase())||l(s,f,c)){return}d=r.getRng();h=d.startContainer;p=d.startOffset;v=d.endContainer;m=d.endOffset;x=o.hasFocus(e);c=f.firstChild;while(c){if(u(s,c)){if(i.isText(c)&&c.nodeValue.length===0){y=c;c=c.nextSibling;n.remove(y);continue}if(!g){g=n.create(_,e.settings.forced_root_block_attrs);c.parentNode.insertBefore(g,c);b=true}y=c;c=c.nextSibling;g.appendChild(y)}else{g=null;c=c.nextSibling}}if(b&&x){d.setStart(h,p);d.setEnd(v,m);r.setRng(d);e.nodeChanged()}};var f=function(e){if(e.settings.forced_root_block){e.on("NodeChange",t.curry(c,e))}};return{setup:f}});a("tinymce.core.NodeChange",["tinymce.core.Env","tinymce.core.selection.RangeCompare","tinymce.core.util.Delay"],function(e,t,n){return function(r){var i,a=[];var o=function(e){var t,n;n=r.$(e).parentsUntil(r.getBody()).add(e);if(n.length===a.length){for(t=n.length;t>=0;t--){if(n[t]!==a[t]){break}}if(t===-1){a=n;return true}}a=n;return false};if(!("onselectionchange"in r.getDoc())){r.on("NodeChange Click MouseUp KeyUp Focus",function(e){var n,a;n=r.selection.getRng();a={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};if(e.type=="nodechange"||!t.isEq(a,i)){r.fire("SelectionChange")}i=a})}r.on("contextmenu",function(){r.fire("SelectionChange")});r.on("SelectionChange",function(){var t=r.selection.getStart(true);if(!t||!e.range&&r.selection.isCollapsed()){return}if(!o(t)&&r.dom.isChildOf(t,r.getBody())){r.nodeChanged({selectionChange:true})}});r.on("MouseUp",function(e){if(!e.isDefaultPrevented()){if(r.selection.getNode().nodeName=="IMG"){n.setEditorTimeout(r,function(){r.nodeChanged()})}else{r.nodeChanged()}}});this.nodeChanged=function(e){var t=r.selection,n,i,a;if(r.initialized&&t&&!r.settings.disable_nodechange&&!r.readonly){a=r.getBody();n=t.getStart(true)||a;if(n.ownerDocument!=r.getDoc()||!r.dom.isChildOf(n,a)){n=a}i=[];r.dom.getParent(n,function(e){if(e===a){return true}i.push(e)});e=e||{};e.element=n;e.parents=i;r.fire("NodeChange",e)}}}});a("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,r,i;i=e.getBoundingClientRect();t=e.ownerDocument;n=t.documentElement;r=t.defaultView;return{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}};var t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}};var n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}};var r=function(e){var t=e.getBody(),n=e.getDoc().documentElement;var r={left:t.scrollLeft,top:t.scrollTop};var i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i};var i=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var i=e(t.getContentAreaContainer());var a=r(t);return{left:n.pageX-i.left+a.left,top:n.pageY-i.top+a.top}}return{left:n.pageX,top:n.pageY}};var a=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};var o=function(e,r){return a(t(e),n(e),i(e,r))};return{calc:o}});a("tinymce.core.DragDropOverrides",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Delay","tinymce.core.util.Fun"],function(e,t,n,r,i,a,o){var s=r.isContentEditableFalse,u=r.isContentEditableTrue;var l=function(e,t){return s(t)&&t!==e};var c=function(e,t,n){if(t===n||e.dom.isChildOf(t,n)){return false}if(s(t)){return false}return true};var f=function(e){var t=e.cloneNode(true);t.removeAttribute("data-mce-selected");return t};var d=function(e,t,n,r){var i=t.cloneNode(true);e.dom.setStyles(i,{width:n,height:r});e.dom.setAttrib(i,"data-mce-selected",null);var a=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});e.dom.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r});e.dom.setStyles(i,{margin:0,boxSizing:"border-box"});a.appendChild(i);return a};var h=function(e,t){if(e.parentNode!==t){t.appendChild(e)}};var p=function(e,t,n,r,i,a){var o=0,s=0;e.style.left=t.pageX+"px";e.style.top=t.pageY+"px";if(t.pageX+n>i){o=t.pageX+n-i}if(t.pageY+r>a){s=t.pageY+r-a}e.style.width=n-o+"px";e.style.height=r-s+"px"};var v=function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}};var m=function(e){return e.button===0};var g=function(e){return e.element};var y=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}};var b=function(e,t){return function(n){if(m(n)){var r=i.find(t.dom.getParents(n.target),o.or(s,u));if(l(t.getBody(),r)){var a=t.dom.getPos(r);var c=t.getBody();var f=t.getDoc().documentElement;e.element=r;e.screenX=n.screenX;e.screenY=n.screenY;e.maxX=(t.inline?c.scrollWidth:f.offsetWidth)-2;e.maxY=(t.inline?c.scrollHeight:f.offsetHeight)-2;e.relX=n.pageX-a.x;e.relY=n.pageY-a.y;e.width=r.offsetWidth;e.height=r.offsetHeight;e.ghost=d(t,r,e.width,e.height)}}}};var x=function(e,t){var r=a.throttle(function(e,n){t._selectionOverrides.hideFakeCaret();t.selection.placeCaretAt(e,n)},0);return function(i){var a=Math.max(Math.abs(i.screenX-e.screenX),Math.abs(i.screenY-e.screenY));if(g(e)&&!e.dragging&&a>10){var o=t.fire("dragstart",{target:e.element});if(o.isDefaultPrevented()){return}e.dragging=true;t.focus()}if(e.dragging){var s=y(e,n.calc(t,i));h(e.ghost,t.getBody());p(e.ghost,s,e.width,e.height,e.maxX,e.maxY);r(i.clientX,i.clientY)}}};var w=function(e){var t=e.getSel().getRangeAt(0);var n=t.startContainer;return n.nodeType===3?n.parentNode:n};var _=function(e,t){return function(n){if(e.dragging){if(c(t,w(t.selection),e.element)){var r=f(e.element);var i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});if(!i.isDefaultPrevented()){r=i.targetClone;t.undoManager.transact(function(){v(e.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()})}}}C(e)}};var k=function(e,t){return function(){C(e);if(e.dragging){t.fire("dragend")}}};var C=function(e){e.dragging=false;e.element=null;v(e.ghost)};var T=function(n){var r={},i,a,o,s,u,l;i=t.DOM;l=e;a=b(r,n);o=x(r,n);s=_(r,n);u=k(r,n);n.on("mousedown",a);n.on("mousemove",o);n.on("mouseup",s);i.bind(l,"mousemove",o);i.bind(l,"mouseup",u);n.on("remove",function(){i.unbind(l,"mousemove",o);i.unbind(l,"mouseup",u)})};var S=function(e){e.on("drop",function(t){var n=typeof t.clientX!=="undefined"?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;if(s(n)||s(e.dom.getContentEditableParent(n))){t.preventDefault()}})};var E=function(e){T(e);S(e)};return{init:E}});a("tinymce.core.caret.FakeCaret",["global!clearInterval","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,r,i,a,o){var s=i.isContentEditableFalse;var u=function(e){return e&&/^(TD|TH)$/i.test(e.nodeName)};return function(i,l){var c,f=null,d;var h=function(e,t){var n=a.collapse(e.getBoundingClientRect(),t),r,o,s,u,l;if(i.tagName=="BODY"){r=i.ownerDocument.documentElement;o=i.scrollLeft||r.scrollLeft;s=i.scrollTop||r.scrollTop}else{l=i.getBoundingClientRect();o=i.scrollLeft-l.left;s=i.scrollTop-l.top}n.left+=o;n.right+=o;n.top+=s;n.bottom+=s;n.width=1;u=e.offsetWidth-e.clientWidth;if(u>0){if(t){u*=-1}n.left+=u;n.right+=u}return n};var p=function(){var e,n,a,o,s;e=r("*[contentEditable=false]",i);for(o=0;o<e.length;o++){n=e[o];a=n.previousSibling;if(t.endsWithCaretContainer(a)){s=a.data;if(s.length==1){a.parentNode.removeChild(a)}else{a.deleteData(s.length-1,1)}}a=n.nextSibling;if(t.startsWithCaretContainer(a)){s=a.data;if(s.length==1){a.parentNode.removeChild(a)}else{a.deleteData(0,1)}}}return null};var v=function(e,n){var a,o;m();if(u(n)){return null}if(l(n)){d=t.insertBlock("p",n,e);a=h(n,e);r(d).css("top",a.top);f=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(i);if(e){f.addClass("mce-visual-caret-before")}y();o=n.ownerDocument.createRange();o.setStart(d,0);o.setEnd(d,0)}else{d=t.insertInline(n,e);o=n.ownerDocument.createRange();if(s(d.nextSibling)){o.setStart(d,0);o.setEnd(d,0)}else{o.setStart(d,1);o.setEnd(d,1)}return o}return o};var m=function(){p();if(d){n.remove(d);d=null}if(f){f.remove();f=null}e(c)};var g=function(){return i.ownerDocument.activeElement===i};var y=function(){c=o.setInterval(function(){if(g()){r("div.mce-visual-caret",i).toggleClass("mce-visual-caret-hidden")}else{r("div.mce-visual-caret",i).addClass("mce-visual-caret-hidden")}},500)};var b=function(){o.clearInterval(c)};var x=function(){return".mce-visual-caret {"+"position: absolute;"+"background-color: black;"+"background-color: currentcolor;"+"}"+".mce-visual-caret-hidden {"+"display: none;"+"}"+"*[data-mce-caret] {"+"position: absolute;"+"left: -1000px;"+"right: auto;"+"top: 0;"+"margin: 0;"+"padding: 0;"+"}"};return{show:v,hide:m,getCss:x,destroy:b}}});a("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){var r=function(i){var a=function(t){return e.map(t,function(e){e=n.clone(e);e.node=i;return e})};if(e.isArray(i)){return e.reduce(i,function(e,t){return e.concat(r(t))},[])}if(t.isElement(i)){return a(i.getClientRects())}if(t.isText(i)){var o=i.ownerDocument.createRange();o.setStart(i,0);o.setEnd(i,i.data.length);return a(o.getClientRects())}};return{getClientRects:r}});a("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,i,a,o){var s=n.isContentEditableFalse,u=a.findNode,l=e.curry;var c=function(e,t){return Math.abs(e.left-t)};var f=function(e,t){return Math.abs(e.right-t)};var d=function(e,n){var r=function(e,t){return e>=t.left&&e<=t.right};return t.reduce(e,function(e,t){var i,a;i=Math.min(c(e,n),f(e,n));a=Math.min(c(t,n),f(t,n));if(r(n,t)){return t}if(r(n,e)){return e}if(a==i&&s(t.node)){return t}if(a<i){return t}return e})};var h=function(e,t,n,r){while(r=u(r,e,o.isEditableCaretCandidate,t)){if(n(r)){return}}};var p=function(e,n){var a=[];var o=function(e,i){var o;o=t.filter(r.getClientRects(i),function(t){return!e(t,n)});a=a.concat(o);return o.length===0};a.push(n);h(-1,e,l(o,i.isAbove),n.node);h(1,e,l(o,i.isBelow),n.node);return a};var v=function(e){return t.filter(t.toArray(e.getElementsByTagName("*")),s)};var m=function(e,t){return{node:e.node,before:c(e,t)<f(e,t)}};var g=function(e,n,i){var a,o;a=r.getClientRects(v(e));a=t.filter(a,function(e){return i>=e.top&&i<=e.bottom});o=d(a,n);if(o){o=d(p(e,o),n);if(o&&s(o.node)){return m(o,n)}}return null};return{findClosestClientRect:d,findLineNodeRects:p,closestCaret:g}});a("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(e,t){var n=function(n,r,i){if(i.collapsed){return false}return e.foldl(i.getClientRects(),function(e,i){return e||t.containsXY(i,n,r)},false)};return{isXYWithinRange:n}});a("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){var n=function(n,r){var i=null;var a=null;var o=function(){if(i!==null){e(i);i=null;a=null}};var s=function(){a=arguments;if(i===null){i=t(function(){n.apply(null,a);i=null;a=null},r)}};return{cancel:o,throttle:s}};var r=function(n,r){var i=null;var a=function(){if(i!==null){e(i);i=null}};var o=function(){var e=arguments;if(i===null){i=t(function(){n.apply(null,e);i=null;e=null},r)}};return{cancel:a,throttle:o}};var i=function(n,r){var i=null;var a=function(){if(i!==null){e(i);i=null}};var o=function(){var a=arguments;if(i!==null){e(i)}i=t(function(){n.apply(null,a);i=null;a=null},r)};return{cancel:a,throttle:o}};return{adaptable:n,first:r,last:i}});a("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,r){var i=n.isContentEditableTrue;var a=n.isContentEditableFalse;var o=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)};var s=function(e){var t=e.ownerDocument.createRange();t.selectNode(e);return t};var u=function(e,t){var n;n=e.fire("BeforeObjectSelected",{target:t});if(n.isDefaultPrevented()){return null}return s(t)};var l=function(n,s){var u,l;s=t.normalizeRange(1,n.getBody(),s);u=e.fromRangeStart(s);if(a(u.getNode())){return o(1,n,u.getNode(),!u.isAtEnd())}if(a(u.getNode(true))){return o(1,n,u.getNode(true),false)}l=n.dom.getParent(u.getNode(),r.or(a,i));if(a(l)){return o(1,n,l,false)}return null};var c=function(e,t){var n;if(!t||!t.collapsed){return t}n=l(e,t);if(n){return n}return t};return{showCaret:o,selectNode:u,renderCaretAtRange:l,renderRangeCaret:c}});a("tinymce.core.focus.CefFocus",["ephox.katamari.api.Throttler","tinymce.core.keyboard.CefUtils"],function(e,t){var n=function(n){var r=e.first(function(){if(!n.removed){var e=t.renderRangeCaret(n,n.selection.getRng());n.selection.setRng(e)}},0);n.on("focus",function(){r.throttle()});n.on("blur",function(){r.cancel()})};return{setup:n}});a("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}});a("tinymce.core.SelectionOverrides",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","tinymce.core.DragDropOverrides","tinymce.core.EditorView","tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.focus.CefFocus","tinymce.core.keyboard.CefUtils","tinymce.core.util.VK"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y,b){var x=v.isContentEditableTrue,w=v.isContentEditableFalse,_=f.isAfterContentEditableFalse,k=f.isBeforeContentEditableFalse;var C=function(v){var C=function(e){return v.dom.isBlock(e)};var T=v.getBody();var S=new h(v.getBody(),C),E="sel-"+v.dom.uniqueId(),A;var P=function(e){return v.dom.hasClass(e,"mce-offscreen-selection")};var O=function(){var e=v.dom.get(E);return e?e.getElementsByTagName("*")[0]:e};var M=function(e){if(e){v.selection.setRng(e)}};var N=function(){return v.selection.getRng()};var R=function(e,t){v.selection.scrollIntoView(e,t)};var D=function(e,t,n){var r;r=v.fire("ShowCaret",{target:t,direction:e,before:n});if(r.isDefaultPrevented()){return null}R(t,e===-1);return S.show(n,t)};var B=function(e,t){t=f.normalizeRange(e,T,t);if(e==-1){return c.fromRangeStart(t)}return c.fromRangeEnd(t)};var L=function(e){if(e.hasAttribute("data-mce-caret")){l.showCaretContainerBlock(e);M(N());R(e[0])}};var I=function(){var e=function(e){var t=v.getBody();while(e&&e!=t){if(x(e)||w(e)){return e}e=e.parentNode}return null};v.on("mouseup",function(e){var t=N();if(t.collapsed&&s.isXYInContentArea(v,e.clientX,e.clientY)){M(y.renderCaretAtRange(v,t))}});v.on("click",function(t){var n;n=e(t.target);if(n){if(w(n)){t.preventDefault();v.focus()}if(x(n)){if(v.dom.isChildOf(n,v.selection.getNode())){U()}}}});v.on("blur NewBlock",function(){U()});var t=function(t){var n=false;t.on("touchstart",function(){n=false});t.on("touchmove",function(){n=true});t.on("touchend",function(r){var i=e(r.target);if(w(i)){if(!n){r.preventDefault();H(y.selectNode(t,i))}}})};var n=function(e){var t=new d(e);if(!e.firstChild){return false}var n=c.before(e.firstChild);var r=t.next(n);return r&&!k(r)&&!_(r)};var r=function(e,t){var n=v.dom.getParent(e,v.dom.isBlock);var r=v.dom.getParent(t,v.dom.isBlock);return n===r};var i=function(e,t){var i=v.dom.getParent(e,v.dom.isBlock);var a=v.dom.getParent(t,v.dom.isBlock);return i&&!r(i,a)&&n(i)};t(v);v.on("mousedown",function(t){var n;if(s.isXYInContentArea(v,t.clientX,t.clientY)===false){return}n=e(t.target);if(n){if(w(n)){t.preventDefault();H(y.selectNode(v,n))}else{U();if(!(x(n)&&t.shiftKey)&&!m.isXYWithinRange(t.clientX,t.clientY,v.selection.getRng())){v.selection.placeCaretAt(t.clientX,t.clientY)}}}else{U();V();var r=p.closestCaret(T,t.clientX,t.clientY);if(r){if(!i(t.target,r.node)){t.preventDefault();v.getBody().focus();M(D(1,r.node,r.before))}}}});v.on("keypress",function(e){if(b.modifierPressed(e)){return}switch(e.keyCode){default:if(w(v.selection.getNode())){e.preventDefault()}break}});v.on("getSelectionRange",function(e){var t=e.range;if(A){if(!A.parentNode){A=null;return}t=t.cloneRange();t.selectNode(A);e.range=t}});v.on("setSelectionRange",function(e){var t;t=H(e.range,e.forward);if(t){e.range=t}});v.on("AfterSetSelectionRange",function(e){var t=e.range;if(!z(t)){V()}if(!P(t.startContainer.parentNode)){U()}});v.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!u.ie){var n=O();if(n){e.preventDefault();t.clearData();t.setData("text/html",n.outerHTML);t.setData("text/plain",n.outerText)}}});o.init(v);g.setup(v)};var F=function(){var e=v.contentStyles,t=".mce-content-body";e.push(S.getCss());e.push(t+" .mce-offscreen-selection {"+"position: absolute;"+"left: -9999999999px;"+"max-width: 1000000px;"+"}"+t+" *[contentEditable=false] {"+"cursor: default;"+"}"+t+" *[contentEditable=true] {"+"cursor: text;"+"}")};var j=function(e){return l.isCaretContainer(e)||l.startsWithCaretContainer(e)||l.endsWithCaretContainer(e)};var z=function(e){return j(e.startContainer)||j(e.endContainer)};var H=function(t,o){var s,l=v.$,c=v.dom,f,d,h,p,m,g,y,b,x;if(!t){return null}if(t.collapsed){if(!z(t)){if(o===false){y=B(-1,t);if(w(y.getNode(true))){return D(-1,y.getNode(true),false)}if(w(y.getNode())){return D(-1,y.getNode(),!y.isAtEnd())}}else{y=B(1,t);if(w(y.getNode())){return D(1,y.getNode(),!y.isAtEnd())}if(w(y.getNode(true))){return D(1,y.getNode(true),false)}}}return null}h=t.startContainer;p=t.startOffset;m=t.endOffset;if(h.nodeType===3&&p===0&&w(h.parentNode)){h=h.parentNode;p=c.nodeIndex(h);h=h.parentNode}if(h.nodeType!=1){return null}if(m==p+1){s=h.childNodes[p]}if(!w(s)){return null}b=x=s.cloneNode(true);g=v.fire("ObjectSelected",{target:s,targetClone:b});if(g.isDefaultPrevented()){return null}f=a.descendant(n.fromDom(v.getBody()),"#"+E).fold(function(){return l([])},function(e){return l([e.dom()])});b=g.targetClone;if(f.length===0){f=l('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",E);f.appendTo(v.getBody())}t=v.dom.createRng();if(b===x&&u.ie){f.empty().append('<p style="font-size: 0" data-mce-bogus="all">¬†</p>').append(b);t.setStartAfter(f[0].firstChild.firstChild);t.setEndAfter(b)}else{f.empty().append("¬†").append(b).append("¬†");t.setStart(f[0].firstChild,1);t.setEnd(f[0].lastChild,0)}f.css({top:c.getPos(s,v.getBody()).y});f[0].focus();d=v.selection.getSel();d.removeAllRanges();d.addRange(t);e.each(i.descendants(n.fromDom(v.getBody()),"*[data-mce-selected]"),function(e){r.remove(e,"data-mce-selected")});s.setAttribute("data-mce-selected",1);A=s;V();return t};var U=function(){if(A){A.removeAttribute("data-mce-selected");a.descendant(n.fromDom(v.getBody()),"#"+E).each(t.remove);A=null}};var W=function(){S.destroy();A=null};var V=function(){S.hide()};if(u.ceFalse){I();F()}return{showCaret:D,showBlockCaretContainer:L,hideFakeCaret:V,destroy:W}};return C});a("tinymce.core.undo.Diff",[],function(){var e=0,t=1,n=2;var r=function(r,i){var a=r.length+i.length+2;var o=new Array(a);var s=new Array(a);var u=function(e,t,n){return{start:e,end:t,diag:n}};var l=function(a,o,s,u,c){var d=f(a,o,s,u);if(d===null||d.start===o&&d.diag===o-u||d.end===a&&d.diag===a-s){var h=a;var p=s;while(h<o||p<u){if(h<o&&p<u&&r[h]===i[p]){c.push([e,r[h]]);++h;++p}else{if(o-a>u-s){c.push([n,r[h]]);++h}else{c.push([t,i[p]]);++p}}}}else{l(a,d.start,s,d.start-d.diag,c);for(var v=d.start;v<d.end;++v){c.push([e,r[v]])}l(d.end,o,d.end-d.diag,u,c)}};var c=function(e,t,n,a){var o=e;while(o-t<a&&o<n&&r[o]===i[o-t]){++o}return u(e,o,t)};var f=function(e,t,n,a){var u=t-e;var l=a-n;if(u===0||l===0){return null}var f=u-l;var d=l+u;var h=(d%2===0?d:d+1)/2;o[1+h]=e;s[1+h]=t+1;for(var p=0;p<=h;++p){for(var v=-p;v<=p;v+=2){var m=v+h;if(v===-p||v!=p&&o[m-1]<o[m+1]){o[m]=o[m+1]}else{o[m]=o[m-1]+1}var g=o[m];var y=g-e+n-v;while(g<t&&y<a&&r[g]===i[y]){o[m]=++g;++y}if(f%2!=0&&f-p<=v&&v<=f+p){if(s[m-f]<=o[m]){return c(s[m-f],v+e-n,t,a)}}}for(v=f-p;v<=f+p;v+=2){m=v+h-f;if(v===f-p||v!=f+p&&s[m+1]<=s[m-1]){s[m]=s[m+1]-1}else{s[m]=s[m-1]}g=s[m]-1;y=g-e+n-v;while(g>=e&&y>=n&&r[g]===i[y]){s[m]=g--;y--}if(f%2===0&&-p<=v&&v<=p){if(s[m]<=o[m+f]){return c(s[m],v+e-n,t,a)}}}}};var d=[];l(0,r.length,0,i.length,d);return d};return{KEEP:e,DELETE:n,INSERT:t,diff:r}});a("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(e,t,n,r){var i=function(e){if(e.nodeType===1){return e.outerHTML}else if(e.nodeType===3){return t.encodeRaw(e.data,false)}else if(e.nodeType===8){return"\x3c!--"+e.data+"--\x3e"}return""};var a=function(t){var n,r,i;i=e.createElement("div");n=e.createDocumentFragment();if(t){i.innerHTML=t}while(r=i.firstChild){n.appendChild(r)}return n};var o=function(e,t,n){var r=a(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else{e.appendChild(r)}};var s=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}};var u=function(e,t){var i=0;r.each(e,function(e){if(e[0]===n.KEEP){i++}else if(e[0]===n.INSERT){o(t,e[1],i);i++}else if(e[0]===n.DELETE){s(t,i)}})};var l=function(e){return r.filter(r.map(e.childNodes,i),function(e){return e.length>0})};var c=function(e,t){var a=r.map(t.childNodes,i);u(n.diff(a,e),t);return t};return{read:l,write:c}});a("tinymce.core.undo.Levels",["ephox.katamari.api.Arr","tinymce.core.dom.TrimHtml","tinymce.core.undo.Fragments"],function(e,t,n){var r=function(e){return e.indexOf("</iframe>")!==-1};var i=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}};var a=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}};var o=function(o){var s,u,l;s=n.read(o.getBody());l=e.bind(s,function(e){var n=t.trimInternal(o.serializer,e);return n.length>0?[n]:[]});u=l.join("");return r(u)?i(l):a(u)};var s=function(e,t,r){if(t.type==="fragmented"){n.write(t.fragments,e.getBody())}else{e.setContent(t.content,{format:"raw"})}e.selection.moveToBookmark(r?t.beforeBookmark:t.bookmark)};var u=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content};var l=function(e,t){return!!e&&!!t&&u(e)===u(t)};return{createFragmentedLevel:i,createCompleteLevel:a,createFromEditor:o,applyToEditor:s,isEq:l}});a("tinymce.core.UndoManager",["tinymce.core.dom.GetBookmark","tinymce.core.undo.Levels","tinymce.core.util.Tools"],function(e,t,n){return function(r){var i=this,a=0,o=[],s,u,l=0;var c=function(){return l===0};var f=function(e){if(c()){i.typing=e}};var d=function(e){r.setDirty(e)};var h=function(e){f(false);i.add({},e)};var p=function(){if(i.typing){f(false);i.add()}};r.on("init",function(){i.add()});r.on("BeforeExecCommand",function(e){var t=e.command;if(t!=="Undo"&&t!=="Redo"&&t!=="mceRepaint"){p();i.beforeChange()}});r.on("ExecCommand",function(e){var t=e.command;if(t!=="Undo"&&t!=="Redo"&&t!=="mceRepaint"){h(e)}});r.on("ObjectResizeStart Cut",function(){i.beforeChange()});r.on("SaveContent ObjectResized blur",h);r.on("DragEnd",h);r.on("KeyUp",function(e){var n=e.keyCode;if(e.isDefaultPrevented()){return}if(n>=33&&n<=36||n>=37&&n<=40||n===45||e.ctrlKey){h();r.nodeChanged()}if(n===46||n===8){r.nodeChanged()}if(u&&i.typing&&t.isEq(t.createFromEditor(r),o[0])===false){if(r.isDirty()===false){d(true);r.fire("change",{level:o[0],lastLevel:null})}r.fire("TypingUndo");u=false;r.nodeChanged()}});r.on("KeyDown",function(e){var t=e.keyCode;if(e.isDefaultPrevented()){return}if(t>=33&&t<=36||t>=37&&t<=40||t===45){if(i.typing){h(e)}return}var n=e.ctrlKey&&!e.altKey||e.metaKey;if((t<16||t>20)&&t!==224&&t!==91&&!i.typing&&!n){i.beforeChange();f(true);i.add({},e);u=true}});r.on("MouseDown",function(e){if(i.typing){h(e)}});r.addShortcut("meta+z","","Undo");r.addShortcut("meta+y,meta+shift+z","","Redo");r.on("AddUndo Undo Redo ClearUndos",function(e){if(!e.isDefaultPrevented()){r.nodeChanged()}});i={data:o,typing:false,beforeChange:function(){if(c()){s=e.getUndoBookmark(r.selection)}},add:function(i,u){var l,f=r.settings,h,p;p=t.createFromEditor(r);i=i||{};i=n.extend(i,p);if(c()===false||r.removed){return null}h=o[a];if(r.fire("BeforeAddUndo",{level:i,lastLevel:h,originalEvent:u}).isDefaultPrevented()){return null}if(h&&t.isEq(h,i)){return null}if(o[a]){o[a].beforeBookmark=s}if(f.custom_undo_redo_levels){if(o.length>f.custom_undo_redo_levels){for(l=0;l<o.length-1;l++){o[l]=o[l+1]}o.length--;a=o.length}}i.bookmark=e.getUndoBookmark(r.selection);if(a<o.length-1){o.length=a+1}o.push(i);a=o.length-1;var v={level:i,lastLevel:h,originalEvent:u};r.fire("AddUndo",v);if(a>0){d(true);r.fire("change",v)}return i},undo:function(){var e;if(i.typing){i.add();i.typing=false;f(false)}if(a>0){e=o[--a];t.applyToEditor(r,e,true);d(true);r.fire("undo",{level:e})}return e},redo:function(){var e;if(a<o.length-1){e=o[++a];t.applyToEditor(r,e,false);d(true);r.fire("redo",{level:e})}return e},clear:function(){o=[];a=0;i.typing=false;i.data=o;r.fire("ClearUndos")},hasUndo:function(){return a>0||i.typing&&o[0]&&!t.isEq(t.createFromEditor(r),o[0])},hasRedo:function(){return a<o.length-1&&!i.typing},transact:function(e){p();i.beforeChange();i.ignore(e);return i.add()},ignore:function(e){try{l++;e()}finally{l--}},extra:function(e,n){var s,u;if(i.transact(e)){u=o[a].bookmark;s=o[a-1];t.applyToEditor(r,s,true);if(i.transact(n)){o[a-1].beforeBookmark=u}}}};return i}});a("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){var r={},i=e.filter,a=e.each;var o=function(e,t){var n=r[e];if(!n){r[e]=n=[]}r[e].push(t)};var s=function(e,t){a(r[e],function(e){e(t)})};o("pre",function(r){var o=r.selection.getRng(),s,u;var l=function(t){return s(t.previousSibling)&&e.indexOf(u,t.previousSibling)!==-1};var c=function(e,t){n(t).remove();n(e).append("<br><br>").append(t.childNodes)};s=t.matchNodeNames("pre");if(!o.collapsed){u=r.selection.getSelectedBlocks();a(i(i(u,s),l),function(e){c(e.previousSibling,e)})}});return{postProcess:s}});a("tinymce.core.selection.RangeWalk",["tinymce.core.util.Tools"],function(e){var t=e.each;var n=function(e,t){var n=e.childNodes;t--;if(t>n.length-1){t=n.length-1}else if(t<0){t=0}return n[t]||e};var r=function(e,r,i){var a=r.startContainer,o=r.startOffset,s=r.endContainer,u=r.endOffset,l,c,f,d,h,p,v;v=e.select("td[data-mce-selected],th[data-mce-selected]");if(v.length>0){t(v,function(e){i([e])});return}var m=function(e){var t;t=e[0];if(t.nodeType===3&&t===a&&o>=t.nodeValue.length){e.splice(0,1)}t=e[e.length-1];if(u===0&&e.length>0&&t===s&&t.nodeType===3){e.splice(e.length-1,1)}return e};var g=function(e,t,n){var r=[];for(;e&&e!=n;e=e[t]){r.push(e)}return r};var y=function(e,t){do{if(e.parentNode===t){return e}e=e.parentNode}while(e)};var b=function(e,t,n){var r=n?"nextSibling":"previousSibling";for(d=e,h=d.parentNode;d&&d!=t;d=h){h=d.parentNode;p=g(d===e?d:d[r],r);if(p.length){if(!n){p.reverse()}i(m(p))}}};if(a.nodeType===1&&a.hasChildNodes()){a=a.childNodes[o]}if(s.nodeType===1&&s.hasChildNodes()){s=n(s,u)}if(a===s){return i(m([a]))}l=e.findCommonAncestor(a,s);for(d=a;d;d=d.parentNode){if(d===s){return b(a,l,true)}if(d===l){break}}for(d=s;d;d=d.parentNode){if(d===a){return b(s,l)}if(d===l){break}}c=y(a,l)||a;f=y(s,l)||s;b(a,c,true);p=g(c===a?c:c.nextSibling,"nextSibling",f===s?f.nextSibling:f);if(p.length){i(m(p))}b(s,f)};return{walk:r}});a("tinymce.core.fmt.RemoveFormat",["tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.selection.RangeWalk","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u){var l=/^(src|href|style)$/;var c=u.each;var f=a.isEq;var d=function(e){return/^(TH|TD)$/.test(e.nodeName)};var h=function(e,r,i){var a,o,s;a=r[i?"startContainer":"endContainer"];o=r[i?"startOffset":"endOffset"];if(t.isElement(a)){s=a.childNodes.length-1;if(!i&&o){o--}a=a.childNodes[o>s?s:o]}if(t.isText(a)&&i&&o>=a.nodeValue.length){a=new n(a,e.getBody()).next()||a}if(t.isText(a)&&!i&&o===0){a=new n(a,e.getBody()).prev()||a}return a};var p=function(e,t,n,r){var i=e.create(n,r);t.parentNode.insertBefore(i,t);i.appendChild(t);return i};var v=function(e,n,r){if(f(n,r.inline)){return true}if(f(n,r.block)){return true}if(r.selector){return t.isElement(n)&&e.is(n,r.selector)}};var m=function(e,t){return t.links&&e.tagName==="A"};var g=function(e,t,n,r){t=a.getNonWhiteSpaceSibling(t,n,r);return!t||(t.nodeName==="BR"||e.isBlock(t))};var y=function(e,t,n){var r=t.parentNode,i;var o=e.dom,s=e.settings.forced_root_block;if(n.block){if(!s){if(o.isBlock(t)&&!o.isBlock(r)){if(!g(o,t,false)&&!g(o,t.firstChild,true,1)){t.insertBefore(o.create("br"),t.firstChild)}if(!g(o,t,true)&&!g(o,t.lastChild,false,1)){t.appendChild(o.create("br"))}}}else{if(r===o.getRoot()){if(!n.list_block||!f(t,n.list_block)){c(u.grep(t.childNodes),function(t){if(a.isValid(e,s,t.nodeName.toLowerCase())){if(!i){i=p(o,t,s);o.setAttribs(i,e.settings.forced_root_block_attrs)}else{i.appendChild(t)}}else{i=0}})}}}}if(n.selector&&n.inline&&!f(n.inline,t)){return}o.remove(t,1)};var b=function(e,t,n,r,i){var o,s,u,d=e.dom;if(!v(d,r,t)&&!m(r,t)){return false}if(t.remove!=="all"){c(t.styles,function(e,o){e=a.normalizeStyleValue(d,a.replaceVars(e,n),o);if(typeof o==="number"){o=e;i=0}if(t.remove_similar||(!i||f(a.getStyle(d,i,o),e))){d.setStyle(r,o,"")}u=1});if(u&&d.getAttrib(r,"style")===""){r.removeAttribute("style");r.removeAttribute("data-mce-style")}c(t.attributes,function(e,t){var o;e=a.replaceVars(e,n);if(typeof t==="number"){t=e;i=0}if(!i||f(d.getAttrib(i,t),e)){if(t==="class"){e=d.getAttrib(r,t);if(e){o="";c(e.split(/\s+/),function(e){if(/mce\-\w+/.test(e)){o+=(o?" ":"")+e}});if(o){d.setAttrib(r,t,o);return}}}if(t==="class"){r.removeAttribute("className")}if(l.test(t)){r.removeAttribute("data-mce-"+t)}r.removeAttribute(t)}});c(t.classes,function(e){e=a.replaceVars(e,n);if(!i||d.hasClass(i,e)){d.removeClass(r,e)}});s=d.getAttribs(r);for(o=0;o<s.length;o++){var h=s[o].nodeName;if(h.indexOf("_")!==0&&h.indexOf("data-")!==0){return false}}}if(t.remove!=="none"){y(e,r,t);return true}};var x=function(e,t,n,r,i){var s;c(a.getParents(e.dom,t.parentNode).reverse(),function(t){var a;if(!s&&t.id!=="_start"&&t.id!=="_end"){a=o.matchNode(e,t,n,r,i);if(a&&a.split!==false){s=t}}});return s};var w=function(e,t,n,r,i,a,o,s){var u,l,c,f,d,h,p=e.dom;if(n){h=n.parentNode;for(u=r.parentNode;u&&u!==h;u=u.parentNode){l=p.clone(u,false);for(d=0;d<t.length;d++){if(b(e,t[d],s,l,l)){l=0;break}}if(l){if(c){l.appendChild(c)}if(!f){f=l}c=l}}if(a&&(!o.mixed||!p.isBlock(n))){r=p.split(n,r)}if(c){i.parentNode.insertBefore(c,i);f.appendChild(i)}}return r};var _=function(n,l,f,v,m){var g=n.formatter.get(l),y=g[0];var _,k,C=true,T=n.dom,S=n.selection;var E=function(e){var t=x(n,e,l,f,m);return w(n,g,t,e,e,true,y,f)};var A=function(e){var r,i,a,o,s;if(t.isElement(e)&&T.getContentEditable(e)){o=C;C=T.getContentEditable(e)==="true";s=true}r=u.grep(e.childNodes);if(C&&!s){for(i=0,a=g.length;i<a;i++){if(b(n,g[i],f,e,e)){break}}}if(y.deep){if(r.length){for(i=0,a=r.length;i<a;i++){A(r[i])}if(s){C=o}}}};var P=function(n){var r=T.get(n?"_start":"_end"),i=r[n?"firstChild":"lastChild"];if(e.isBookmarkNode(i)){i=i[n?"firstChild":"lastChild"]}if(t.isText(i)&&i.data.length===0){i=n?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling}T.remove(r,true);return i};var O=function(e){var r,o;var u=e.commonAncestorContainer;e=i.expandRng(n,e,g,true);if(y.split){r=h(n,e,true);o=h(n,e);if(r!==o){if(/^(TR|TH|TD)$/.test(r.nodeName)&&r.firstChild){if(r.nodeName==="TR"){r=r.firstChild.firstChild||r}else{r=r.firstChild||r}}if(u&&/^T(HEAD|BODY|FOOT|R)$/.test(u.nodeName)&&d(o)&&o.firstChild){o=o.firstChild||o}if(T.isChildOf(r,o)&&r!==o&&!T.isBlock(o)&&!d(r)&&!d(o)){r=p(T,r,"span",{id:"_start","data-mce-type":"bookmark"});E(r);r=P(true);return}r=p(T,r,"span",{id:"_start","data-mce-type":"bookmark"});o=p(T,o,"span",{id:"_end","data-mce-type":"bookmark"});E(r);E(o);r=P(true);o=P()}else{r=o=E(r)}e.startContainer=r.parentNode?r.parentNode:r;e.startOffset=T.nodeIndex(r);e.endContainer=o.parentNode?o.parentNode:o;e.endOffset=T.nodeIndex(o)+1}s.walk(T,e,function(e){c(e,function(e){A(e);if(t.isElement(e)&&n.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&a.getTextDecoration(T,e.parentNode)==="underline"){b(n,{deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,e)}})})};if(v){if(v.nodeType){k=T.createRng();k.setStartBefore(v);k.setEndAfter(v);O(k)}else{O(v)}return}if(T.getContentEditable(S.getNode())==="false"){v=S.getNode();for(var M=0,N=g.length;M<N;M++){if(g[M].ceFalseOverride){if(b(n,g[M],f,v,v)){break}}}return}if(!S.isCollapsed()||!y.inline||T.select("td[data-mce-selected],th[data-mce-selected]").length){_=S.getBookmark();O(S.getRng(true));S.moveToBookmark(_);if(y.inline&&o.match(n,l,f,S.getStart())){a.moveStart(T,S,S.getRng(true))}n.nodeChanged()}else{r.removeCaretFormat(n,l,f,m)}};return{removeFormat:b,remove:_}});a("tinymce.core.fmt.MergeFormats",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u){var l=u.each;var c=function(e){return e&&e.nodeType===1&&!t.isBookmarkNode(e)&&!i.isCaretNode(e)&&!r.isBogus(e)};var f=function(e,n){var r;for(r=e;r;r=r[n]){if(r.nodeType===3&&r.nodeValue.length!==0){return e}if(r.nodeType===1&&!t.isBookmarkNode(r)){return r}}return e};var d=function(e,t,r){var i,a,o=new n(e);if(t&&r){t=f(t,"previousSibling");r=f(r,"nextSibling");if(o.compare(t,r)){for(i=t.nextSibling;i&&i!==r;){a=i;i=i.nextSibling;t.appendChild(a)}e.remove(r);u.each(u.grep(r.childNodes),function(e){t.appendChild(e)});return t}}return r};var h=function(e,t,n){l(e.childNodes,function(e){if(c(e)){if(t(e)){n(e)}if(e.hasChildNodes()){h(e,t,n)}}})};var p=function(t,n){return e.curry(function(e,n){return!!(n&&a.getStyle(t,n,e))},n)};var v=function(t,n,r){return e.curry(function(e,n,r){t.setStyle(r,e,n);if(r.getAttribute("style")===""){r.removeAttribute("style")}m(t,r)},n,r)};var m=function(e,t){if(t.nodeName==="SPAN"&&e.getAttribs(t).length===0){e.remove(t,true)}};var g=function(e,t){var n;if(t.nodeType===1&&t.parentNode&&t.parentNode.nodeType===1){n=a.getTextDecoration(e,t.parentNode);if(e.getStyle(t,"color")&&n){e.setStyle(t,"text-decoration",n)}else if(e.getStyle(t,"text-decoration")===n){e.setStyle(t,"text-decoration",null)}}};var y=function(t,n,r,i){if(n.styles.color||n.styles.textDecoration){u.walk(i,e.curry(g,t),"childNodes");g(t,i)}};var b=function(e,t,n,r){if(t.styles&&t.styles.backgroundColor){h(r,p(e,"fontSize"),v(e,"backgroundColor",a.replaceVars(t.styles.backgroundColor,n)))}};var x=function(e,t,n,r){if(t.inline==="sub"||t.inline==="sup"){h(r,p(e,"fontSize"),v(e,"fontSize",""));e.remove(e.select(t.inline==="sup"?"sub":"sup",r),true)}};var w=function(e,t,n,r){if(r&&t.merge_siblings!==false){r=d(e,a.getNonWhiteSpaceSibling(r),r);r=d(e,r,a.getNonWhiteSpaceSibling(r,true))}};var _=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";l(e.select(r,n),function(n){if(c(n)){l(t.styles,function(t,r){e.setStyle(n,r,"")})}})}};var k=function(e,t,n,r){l(t,function(t){l(e.dom.select(t.inline,r),function(r){if(!c(r)){return}s.removeFormat(e,t,n,r,t.exact?r:null)});_(e.dom,t,r)})};var C=function(e,t,n,r,i){if(o.matchNode(e,i.parentNode,n,r)){if(s.removeFormat(e,t,r,i)){return}}if(t.merge_with_parents){e.dom.getParent(i.parentNode,function(a){if(o.matchNode(e,a,n,r)){s.removeFormat(e,t,r,i);return true}})}};return{mergeWithChildren:k,mergeUnderlineAndColor:y,mergeBackgroundColorAndFontSize:b,mergeSubSup:x,mergeSiblings:w,mergeWithParents:C}});a("tinymce.core.fmt.ApplyFormat",["tinymce.core.dom.Bookmarks","tinymce.core.dom.NodeType","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.Hooks","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.MergeFormats","tinymce.core.selection.RangeNormalizer","tinymce.core.selection.RangeWalk","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c){var f=c.each;var d=function(r){return r&&r.nodeType===1&&!e.isBookmarkNode(r)&&!n.isCaretNode(r)&&!t.isBogus(r)};var h=function(t,p,v,m){var g=t.formatter.get(p),y=g[0],b,x,w=!m&&t.selection.isCollapsed();var _=t.dom,k=t.selection;var C=function(e,t){t=t||y;if(e){if(t.onformat){t.onformat(e,t,v,m)}f(t.styles,function(t,n){_.setStyle(e,n,i.replaceVars(t,v))});if(t.styles){var n=_.getAttrib(e,"style");if(n){e.setAttribute("data-mce-style",n)}}f(t.attributes,function(t,n){_.setAttrib(e,n,i.replaceVars(t,v))});f(t.classes,function(t){t=i.replaceVars(t,v);if(!_.hasClass(e,t)){_.addClass(e,t)}})}};var T=function(e,t){var r=false;if(!y.selector){return false}f(e,function(e){if("collapsed"in e&&e.collapsed!==w){return}if(_.is(t,e.selector)&&!n.isCaretNode(t)){C(t,e);r=true;return false}});return r};var S=function(r,a,u,h){var m=[],b,x,w=true;b=y.inline||y.block;x=r.create(b);C(x);l.walk(r,a,function(e){var a;var s=function(e){var u,l,d,_;_=w;u=e.nodeName.toLowerCase();l=e.parentNode.nodeName.toLowerCase();if(e.nodeType===1&&r.getContentEditable(e)){_=w;w=r.getContentEditable(e)==="true";d=true}if(i.isEq(u,"br")){a=0;if(y.block){r.remove(e)}return}if(y.wrapper&&o.matchNode(t,e,p,v)){a=0;return}if(w&&!d&&y.block&&!y.wrapper&&i.isTextBlock(t,u)&&i.isValid(t,l,b)){e=r.rename(e,b);C(e);m.push(e);a=0;return}if(y.selector){var k=T(g,e);if(!y.inline||k){a=0;return}}if(w&&!d&&i.isValid(t,b,u)&&i.isValid(t,l,b)&&!(!h&&e.nodeType===3&&e.nodeValue.length===1&&e.nodeValue.charCodeAt(0)===65279)&&!n.isCaretNode(e)&&(!y.inline||!r.isBlock(e))){if(!a){a=r.clone(x,false);e.parentNode.insertBefore(a,e);m.push(a)}a.appendChild(e)}else{a=0;f(c.grep(e.childNodes),s);if(d){w=_}a=0}};f(e,s)});if(y.links===true){f(m,function(e){var t=function(e){if(e.nodeName==="A"){C(e,y)}f(c.grep(e.childNodes),t)};t(e)})}f(m,function(n){var a;var u=function(t){var n=0;f(t.childNodes,function(t){if(!i.isWhiteSpaceNode(t)&&!e.isBookmarkNode(t)){n++}});return n};var l=function(e){var t=false;f(e.childNodes,function(e){if(d(e)){t=e;return false}});return t};var c=function(t){var n,i;n=l(t);if(n&&!e.isBookmarkNode(n)&&o.matchName(r,n,y)){i=r.clone(n,false);C(i);r.replace(i,t,true);r.remove(n,1)}return i||t};a=u(n);if((m.length>1||!r.isBlock(n))&&a===0){r.remove(n,1);return}if(y.inline||y.wrapper){if(!y.exact&&a===1){n=c(n)}s.mergeWithChildren(t,g,v,n);s.mergeWithParents(t,y,p,v,n);s.mergeBackgroundColorAndFontSize(r,y,v,n);s.mergeSubSup(r,y,v,n);s.mergeSiblings(r,y,v,n)}})};if(_.getContentEditable(k.getNode())==="false"){m=k.getNode();for(var E=0,A=g.length;E<A;E++){if(g[E].ceFalseOverride&&_.is(m,g[E].selector)){C(m,g[E]);return}}return}if(y){if(m){if(m.nodeType){if(!T(g,m)){x=_.createRng();x.setStartBefore(m);x.setEndAfter(m);S(_,r.expandRng(t,x,g),null,true)}}else{S(_,m,null,true)}}else{if(!w||!y.inline||_.select("td[data-mce-selected],th[data-mce-selected]").length){var P=t.selection.getNode();if(!t.settings.forced_root_block&&g[0].defaultBlock&&!_.getParent(P,_.isBlock)){h(t,g[0].defaultBlock)}t.selection.setRng(u.normalize(t.selection.getRng()));b=k.getBookmark();S(_,r.expandRng(t,k.getRng(true),g),b);if(y.styles){s.mergeUnderlineAndColor(_,y,v,P)}k.moveToBookmark(b);i.moveStart(_,k,k.getRng(true));t.nodeChanged()}else{n.applyCaretFormat(t,p,v)}}a.postProcess(p,t)}};return{applyFormat:h}});a("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(e,t,n,r){var i=r.each;var a=function(e,a){var o={};e.set({});a.on("NodeChange",function(s){var u=t.getParents(a.dom,s.element),l={};u=r.grep(u,function(e){return e.nodeType===1&&!e.getAttribute("data-mce-bogus")});i(e.get(),function(e,t){i(u,function(r){if(a.formatter.matchNode(r,t,{},e.similar)){if(!o[t]){i(e,function(e){e(true,{node:r,format:t,parents:u})});o[t]=e}l[t]=e;return false}if(n.matchesUnInheritedFormatSelector(a,r,t)){return false}})});i(o,function(e,t){if(!l[t]){delete o[t];i(e,function(e){e(false,{node:s.element,format:t,parents:u})})}})})};var o=function(e,t,n,r){var a=e.get();i(t.split(","),function(e){if(!a[e]){a[e]=[];a[e].similar=r}a[e].push(n)});e.set(a)};var s=function(e,t,n,r,i){if(t.get()===null){a(t,e)}o(t,n,r,i)};return{formatChanged:s}});a("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],function(e){var t=function(t){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:false,classes:"align-left",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:false,preview:false,defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:false,classes:"align-center",ceFalseOverride:true,preview:"font-family font-size"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:false},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:false,classes:"align-right",ceFalseOverride:true,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:false,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:false,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:true},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:true},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(){return true},onformat:function(n,r,i){e.each(i,function(e,r){t.setAttrib(n,r,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]};e.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){n[e]={block:e,remove:"all"}});return n};return{get:t}});a("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(e,t){return function(n){var r={};var i=function(e){return e?r[e]:r};var a=function(e,n){if(e){if(typeof e!=="string"){t.each(e,function(e,t){a(t,e)})}else{n=n.length?n:[n];t.each(n,function(e){if(typeof e.deep==="undefined"){e.deep=!e.selector}if(typeof e.split==="undefined"){e.split=!e.selector||e.inline}if(typeof e.remove==="undefined"&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof e.classes==="string"){e.classes=e.classes.split(/\s+/)}});r[e]=n}}};var o=function(e){if(e&&r[e]){delete r[e]}return r};a(e.get(n.dom));a(n.settings.formats);return{get:i,register:a,unregister:o}}});a("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){var r=t.each;var i=e.DOM;var a=function(e,r){var a,o,s;var u=r&&r.schema||new n({});var l=function(e,t){if(t.classes.length){i.addClass(e,t.classes.join(" "))}i.setAttribs(e,t.attrs)};var c=function(e){var t;o=typeof e==="string"?{name:e,classes:[],attrs:{}}:e;t=i.create(o.name);l(t,o);return t};var f=function(e,n){var r=typeof e!=="string"?e.nodeName.toLowerCase():e;var i=u.getElementRule(r);var a=i&&i.parentsRequired;if(a&&a.length){return n&&t.inArray(a,n)!==-1?n:a[0]}else{return false}};var d=function(e,n,r){var a,o,s;var u=n.length>0&&n[0];var l=u&&u.name;s=f(e,l);if(s){if(l===s){o=n[0];n=n.slice(1)}else{o=s}}else if(u){o=n[0];n=n.slice(1)}else if(!r){return e}if(o){a=c(o);a.appendChild(e)}if(r){if(!a){a=i.create("div");a.appendChild(e)}t.each(r,function(t){var n=c(t);a.insertBefore(n,e)})}return d(a,n,o&&o.siblings)};if(e&&e.length){o=e[0];a=c(o);s=i.create("div");s.appendChild(d(a,e.slice(1),o.siblings));return s}else{return""}};var o=function(e,t){return a(u(e),t)};var s=function(e){var n;var r={classes:[],attrs:{}};e=r.selector=t.trim(e);if(e!=="*"){n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,i,a,o){switch(n){case"#":r.attrs.id=i;break;case".":r.classes.push(i);break;case":":if(t.inArray("checked disabled enabled read-only required".split(" "),i)!==-1){r.attrs[i]=i}break}if(a==="["){var s=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);if(s){r.attrs[s[1]]=s[2]}}return""})}r.name=n||"div";return r};var u=function(e){if(!e||typeof e!=="string"){return[]}e=e.split(/\s*,\s*/)[0];e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1");return t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),s);var r=n.pop();if(n.length){r.siblings=n}return r}).reverse()};var l=function(e,t){var n,o,s,l;var c="",f,d;d=e.settings.preview_styles;if(d===false){return""}if(typeof d!=="string"){d="font-family font-size font-weight font-style text-decoration "+"text-transform color background-color border border-radius outline text-shadow"}var h=function(e){return e.replace(/%(\w+)/g,"")};if(typeof t==="string"){t=e.formatter.get(t);if(!t){return}t=t[0]}if("preview"in t){d=t.preview;if(d===false){return""}}n=t.block||t.inline||"span";l=u(t.selector);if(l.length){if(!l[0].name){l[0].name=n}n=t.selector;o=a(l,e)}else{o=a([n],e)}s=i.select(n,o)[0]||o.firstChild;r(t.styles,function(e,t){e=h(e);if(e){i.setStyle(s,t,e)}});r(t.attributes,function(e,t){e=h(e);if(e){i.setAttrib(s,t,e)}});r(t.classes,function(e){e=h(e);if(!i.hasClass(s,e)){i.addClass(s,e)}});e.fire("PreviewFormats");i.setStyles(o,{position:"absolute",left:-65535});e.getBody().appendChild(o);f=i.getStyle(e.getBody(),"fontSize",true);f=/px$/.test(f)?parseInt(f,10):0;r(d.split(" "),function(t){var n=i.getStyle(s,t,true);if(t==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=i.getStyle(e.getBody(),t,true);if(i.toHex(n).toLowerCase()==="#ffffff"){return}}if(t==="color"){if(i.toHex(n).toLowerCase()==="#000000"){return}}if(t==="font-size"){if(/em|%$/.test(n)){if(f===0){return}n=parseFloat(n,10)/(/%$/.test(n)?100:1);n=n*f+"px"}}if(t==="border"&&n){c+="padding:0 2px;"}c+=t+":"+n+";"});e.fire("AfterPreviewFormats");i.remove(o);return c};return{getCssText:l,parseSelector:u,selectorToHtml:o}});a("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat"],function(e,t,n){var r=function(r,i,a,o,s){var u=i.get(a);if(t.match(r,a,o,s)&&(!("toggle"in u[0])||u[0].toggle)){n.remove(r,a,o,s)}else{e.applyFormat(r,a,o,s)}};return{toggle:r}});a("tinymce.core.keyboard.FormatShortcuts",[],function(){var e=function(e){e.addShortcut("meta+b","","Bold");e.addShortcut("meta+i","","Italic");e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++){e.addShortcut("access+"+t,"",["FormatBlock",false,"h"+t])}e.addShortcut("access+7","",["FormatBlock",false,"p"]);e.addShortcut("access+8","",["FormatBlock",false,"div"]);e.addShortcut("access+9","",["FormatBlock",false,"address"])};return{setup:e}});a("tinymce.core.api.Formatter",["ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.FormatChanged","tinymce.core.fmt.FormatRegistry","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.Preview","tinymce.core.fmt.RemoveFormat","tinymce.core.fmt.ToggleFormat","tinymce.core.keyboard.FormatShortcuts"],function(e,t,n,r,i,a,o,s,u,l,c){return function(f){var d=a(f);var h=e(null);c.setup(f);r.setup(f);return{get:d.get,register:d.register,unregister:d.unregister,apply:t.curry(n.applyFormat,f),remove:t.curry(u.remove,f),toggle:t.curry(l.toggle,f,d),match:t.curry(o.match,f),matchAll:t.curry(o.matchAll,f),matchNode:t.curry(o.matchNode,f),canApply:t.curry(o.canApply,f),formatChanged:t.curry(i.formatChanged,f,h),getCssText:t.curry(s.getCssText,f)}}});a("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e,t){return t};var i=function(t,n){var r=e.isObject(t)&&e.isObject(n);return r?o(t,n):n};var a=function(e){return function(){var r=new t(arguments.length);for(var i=0;i<r.length;i++){r[i]=arguments[i]}if(r.length===0){throw new n("Can't merge zero objects")}var a={};for(var o=0;o<r.length;o++){var s=r[o];for(var u in s){if(s.hasOwnProperty(u)){a[u]=e(a[u],s[u])}}}return a}};var o=a(i);var s=a(r);return{deepMerge:o,merge:s}});a("tinymce.core.api.Events",[],function(){var e=function(e,t){return e.fire("PreProcess",t)};var t=function(e,t){return e.fire("PostProcess",t)};return{firePreProcess:e,firePostProcess:t}});a("tinymce.core.dom.DomSerializerFilters",["ephox.katamari.api.Arr","tinymce.core.html.Entities"],function(e,t){var n=function(n,r,i){n.addAttributeFilter("data-mce-tabindex",function(e,t){var n=e.length,r;while(n--){r=e[n];r.attr("tabindex",r.attributes.map["data-mce-tabindex"]);r.attr(t,null)}});n.addAttributeFilter("src,href,style",function(e,t){var n=e.length,a,o,s="data-mce-"+t;var u=r.url_converter,l=r.url_converter_scope,c;while(n--){a=e[n];o=a.attributes.map[s];if(o!==c){a.attr(t,o.length>0?o:null);a.attr(s,null)}else{o=a.attributes.map[t];if(t==="style"){o=i.serializeStyle(i.parseStyle(o),a.name)}else if(u){o=u.call(l,o,t,a.name)}a.attr(t,o.length>0?o:null)}}});n.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(r){r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,"");n.attr("class",r.length>0?r:null)}}});n.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--){i=e[r];if(i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){i.remove()}}});n.addNodeFilter("noscript",function(e){var n=e.length,r;while(n--){r=e[n].firstChild;if(r){r.value=t.decode(r.value)}}});n.addNodeFilter("script,style",function(e,t){var n=e.length,i,a,o;var s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};while(n--){i=e[n];a=i.firstChild?i.firstChild.value:"";if(t==="script"){o=i.attr("type");if(o){i.attr("type",o==="mce-no/type"?null:o.replace(/^mce\-/,""))}if(r.element_format==="xhtml"&&a.length>0){i.firstChild.value="// <![CDATA[\n"+s(a)+"\n// ]]>"}}else{if(r.element_format==="xhtml"&&a.length>0){i.firstChild.value="\x3c!--\n"+s(a)+"\n--\x3e"}}}});n.addNodeFilter("#comment",function(e){var t=e.length,n;while(t--){n=e[t];if(n.value.indexOf("[CDATA[")===0){n.name="#cdata";n.type=4;n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(n.value.indexOf("mce:protected ")===0){n.name="#text";n.type=3;n.raw=true;n.value=unescape(n.value).substr(14)}}});n.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.type===7){r.remove()}else if(r.type===1){if(t==="input"&&!("type"in r.attributes.map)){r.attr("type","text")}}}});n.addAttributeFilter("data-mce-type",function(t){e.each(t,function(e){if(e.attr("data-mce-type")==="format-caret"){if(e.isEmpty(n.schema.getNonEmptyElements())){e.remove()}else{e.unwrap()}}})});n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,"+"data-mce-selected,data-mce-expando,"+"data-mce-type,data-mce-resize",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}})};var r=function(e){var t,n;var r=function(e){return e&&e.name==="br"};t=e.lastChild;if(r(t)){n=t.prev;if(r(n)){t.remove();n.remove()}}};return{register:n,trimTrailingBr:r}});a("tinymce.core.dom.DomSerializerPreProcess",["ephox.katamari.api.Merger","global!document","tinymce.core.api.Events","tinymce.core.util.Tools"],function(e,t,n,r){var i=function(i,a,o){var s,u,l;var c=i.dom;a=a.cloneNode(true);s=t.implementation;if(s.createHTMLDocument){u=s.createHTMLDocument("");r.each(a.nodeName==="BODY"?a.childNodes:[a],function(e){u.body.appendChild(u.importNode(e,true))});if(a.nodeName!=="BODY"){a=u.body.firstChild}else{a=u.body}l=c.doc;c.doc=u}n.firePreProcess(i,e.merge(o,{node:a}));if(l){c.doc=l}return a};var a=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events};var o=function(e,t,n){return a(e,n)?i(e,t,n):t};return{process:o}});a("tinymce.core.html.LegacyFilter",["ephox.katamari.api.Arr","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n){var r=function(t,n){e.each(n,function(e){t.attr(e,null)})};var i=function(t,n,i){t.addNodeFilter("font",function(t){e.each(t,function(e){var t=n.parse(e.attr("style"));var a=e.attr("color");var o=e.attr("face");var s=e.attr("size");if(a){t.color=a}if(o){t["font-family"]=o}if(s){t["font-size"]=i[parseInt(e.attr("size"),10)-1]}e.name="span";e.attr("style",n.serialize(t));r(e,["color","face","size"])})})};var a=function(t,n){t.addNodeFilter("strike",function(t){e.each(t,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through";e.name="span";e.attr("style",n.serialize(t))})})};var o=function(e,r){var o=t();if(r.convert_fonts_to_spans){i(e,o,n.explode(r.font_size_legacy_values))}a(e,o)};var s=function(e,t){if(t.inline_styles){o(e,t)}};return{register:s}});a("tinymce.core.html.Node",[],function(){var e=/^[ \t\r\n]*$/;var t={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};var n=function(e,t,n){var r,i,a=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[a]){return e[a]}if(e!==t){r=e[o];if(r){return r}for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r){return r}}}};var r=function(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}};r.prototype={replace:function(e){var t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t},attr:function(e,t){var n=this,r,i,a;if(typeof e!=="string"){for(i in e){n.attr(i,e[i])}return n}if(r=n.attributes){if(t!==a){if(t===null){if(e in r.map){delete r.map[e];i=r.length;while(i--){if(r[i].name===e){r=r.splice(i,1);return n}}}return n}if(e in r.map){i=r.length;while(i--){if(r[i].name===e){r[i].value=t;break}}}else{r.push({name:e,value:t})}r.map[e]=t;return n}return r.map[e]}},clone:function(){var e=this,t=new r(e.name,e.type),n,i,a,o,s;if(a=e.attributes){s=[];s.map={};for(n=0,i=a.length;n<i;n++){o=a[n];if(o.name!=="id"){s[s.length]={name:o.name,value:o.value};s.map[o.name]=o.value}}t.attributes=s}t.value=e.value;t.shortEnded=e.shortEnded;return t},wrap:function(e){var t=this;t.parent.insert(e,t);e.append(t);return t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;){n=t.next;e.insert(t,e,true);t=n}e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else{r.next=n}if(t.lastChild===e){t.lastChild=r;if(r){r.next=null}}else{n.prev=r}e.parent=e.next=e.prev=null}return e},append:function(e){var t=this,n;if(e.parent){e.remove()}n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e},insert:function(e,t,n){var r;if(e.parent){e.remove()}r=t.parent||this;if(n){if(t===r.firstChild){r.firstChild=e}else{t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===r.lastChild){r.lastChild=e}else{t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e},getAll:function(e){var t=this,r,i=[];for(r=t.firstChild;r;r=n(r,t)){if(r.name===e){i.push(r)}}return i},empty:function(){var e=this,t,r,i;if(e.firstChild){t=[];for(i=e.firstChild;i;i=n(i,e)){t.push(i)}r=t.length;while(r--){i=t[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}e.firstChild=e.lastChild=null;return e},isEmpty:function(t,r,i){var a=this,o=a.firstChild,s,u;r=r||{};if(o){do{if(o.type===1){if(o.attributes.map["data-mce-bogus"]){continue}if(t[o.name]){return false}s=o.attributes.length;while(s--){u=o.attributes[s].name;if(u==="name"||u.indexOf("data-mce-bookmark")===0){return false}}}if(o.type===8){return false}if(o.type===3&&!e.test(o.value)){return false}if(o.type===3&&o.parent&&r[o.parent.name]&&e.test(o.value)){return false}if(i&&i(o)){return false}}while(o=n(o,a))}return true},walk:function(e){return n(this,null,e)}};r.create=function(e,n){var i,a;i=new r(e,t[e]||1);if(n){for(a in n){i.attr(a,n[a])}}return i};return r});a("tinymce.core.html.DomParser",["tinymce.core.html.LegacyFilter","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r,i){var a=i.makeMap,o=i.each,s=i.explode,u=i.extend;var l=function(e,n,r,i){var a=e.padd_empty_with_br||n.insert;if(a&&r[i.name]){i.empty().append(new t("br","1")).shortEnded=true}else{i.empty().append(new t("#text","3")).value="¬†"}};var c=function(e){return f(e,"#text")&&e.firstChild.value==="¬†"};var f=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t};var d=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty};var h=function(e,t,n,r){return r.isEmpty(t,n,function(t){return d(e,t)})};return function(d,p){var v=this,m={},g=[],y={},b={};d=d||{};d.validate="validate"in d?d.validate:true;d.root_name=d.root_name||"body";v.schema=p=p||new r;var x=function(e){var n,r,i,o,s,u,l,c,d;var m,g,y,b,x,w,_;y=a("tr,td,th,tbody,thead,tfoot,table");m=p.getNonEmptyElements();g=p.getWhiteSpaceElements();b=p.getTextBlockElements();x=p.getSpecialElements();for(n=0;n<e.length;n++){r=e[n];if(!r.parent||r.fixed){continue}if(b[r.name]&&r.parent.name=="li"){w=r.next;while(w){if(b[w.name]){w.name="li";w.fixed=true;r.parent.insert(w,r.parent)}else{break}w=w.next}r.unwrap(r);continue}o=[r];for(i=r.parent;i&&!p.isValidChild(i.name,r.name)&&!y[i.name];i=i.parent){o.push(i)}if(i&&o.length>1){o.reverse();s=u=v.filterNode(o[0].clone());for(d=0;d<o.length-1;d++){if(p.isValidChild(u.name,o[d].name)){l=v.filterNode(o[d].clone());u.append(l)}else{l=u}for(c=o[d].firstChild;c&&c!=o[d+1];){_=c.next;l.append(c);c=_}u=l}if(!h(p,m,g,s)){i.insert(s,o[0],true);i.insert(r,s)}else{i.insert(r,o[0],true)}i=o[0];if(h(p,m,g,i)||f(i,"br")){i.empty().remove()}}else if(r.parent){if(r.name==="li"){w=r.prev;if(w&&(w.name==="ul"||w.name==="ul")){w.append(r);continue}w=r.next;if(w&&(w.name==="ul"||w.name==="ul")){w.insert(r,w.firstChild,true);continue}r.wrap(v.filterNode(new t("ul",1)));continue}if(p.isValidChild(r.parent.name,"div")&&p.isValidChild("div",r.name)){r.wrap(v.filterNode(new t("div",1)))}else{if(x[r.name]){r.empty().remove()}else{r.unwrap()}}}}};v.filterNode=function(e){var t,n,r;if(n in m){r=y[n];if(r){r.push(e)}else{y[n]=[e]}}t=g.length;while(t--){n=g[t].name;if(n in e.attributes.map){r=b[n];if(r){r.push(e)}else{b[n]=[e]}}}return e};v.addNodeFilter=function(e,t){o(s(e),function(e){var n=m[e];if(!n){m[e]=n=[]}n.push(t)})};v.addAttributeFilter=function(e,t){o(s(e),function(e){var n;for(n=0;n<g.length;n++){if(g[n].name===e){g[n].callbacks.push(t);return}}g.push({name:e,callbacks:[t]})})};v.parse=function(e,r){var i,o,s,f,v,w,_,k,C,T,S;var E,A,P=[],O;var M,N,R,D;var B,L,I;r=r||{};y={};b={};E=u(a("script,style,head,html,body,title,meta,param"),p.getBlockElements());L=p.getNonEmptyElements();B=p.children;S=d.validate;I="forced_root_block"in r?r.forced_root_block:d.forced_root_block;D=p.getWhiteSpaceElements();A=/^[ \t\r\n]+/;M=/[ \t\r\n]+$/;N=/[ \t\r\n]+/g;R=/^[ \t\r\n]+$/;var F=function(){var e=o.firstChild,t,n;var r=function(t){if(t){e=t.firstChild;if(e&&e.type==3){e.value=e.value.replace(A,"")}e=t.lastChild;if(e&&e.type==3){e.value=e.value.replace(M,"")}}};if(!p.isValidChild(o.name,I.toLowerCase())){return}while(e){t=e.next;if(e.type==3||e.type==1&&e.name!=="p"&&!E[e.name]&&!e.attr("data-mce-type")){if(!n){n=j(I,1);n.attr(d.forced_root_block_attrs);o.insert(n,e);n.append(e)}else{n.append(e)}}else{r(n);n=null}e=t}r(n)};var j=function(e,n){var r=new t(e,n),i;if(e in m){i=y[e];if(i){i.push(r)}else{y[e]=[r]}}return r};var z=function(e){var t,n,r,i,a=p.getBlockElements();for(t=e.prev;t&&t.type===3;){r=t.value.replace(M,"");if(r.length>0){t.value=r;return}n=t.next;if(n){if(n.type==3&&n.value.length){t=t.prev;continue}if(!a[n.name]&&n.name!="script"&&n.name!="style"){t=t.prev;continue}}i=t.prev;t.remove();t=i}};var H=function(e){var t,n={};for(t in e){if(t!=="li"&&t!="p"){n[t]=e[t]}}return n};i=new n({validate:S,allow_script_urls:d.allow_script_urls,allow_conditional_comments:d.allow_conditional_comments,self_closing_elements:H(p.getSelfClosingElements()),cdata:function(e){s.append(j("#cdata",4)).value=e},text:function(e,t){var n;if(!O){e=e.replace(N," ");if(s.lastChild&&E[s.lastChild.name]){e=e.replace(A,"")}}if(e.length!==0){n=j("#text",3);n.raw=!!t;s.append(n).value=e}},comment:function(e){s.append(j("#comment",8)).value=e},pi:function(e,t){s.append(j(e,7)).value=t;z(s)},doctype:function(e){var t;t=s.append(j("#doctype",10));t.value=e;z(s)},start:function(e,t,n){var r,i,a,o,u;a=S?p.getElementRule(e):{};if(a){r=j(a.outputName||e,1);r.attributes=t;r.shortEnded=n;s.append(r);u=B[s.name];if(u&&B[r.name]&&!u[r.name]){P.push(r)}i=g.length;while(i--){o=g[i].name;if(o in t.map){C=b[o];if(C){C.push(r)}else{b[o]=[r]}}}if(E[e]){z(r)}if(!n){s=r}if(!O&&D[e]){O=true}}},end:function(e){var t,n,i,a,o;n=S?p.getElementRule(e):{};if(n){if(E[e]){if(!O){t=s.firstChild;if(t&&t.type===3){i=t.value.replace(A,"");if(i.length>0){t.value=i;t=t.next}else{a=t.next;t.remove();t=a;while(t&&t.type===3){i=t.value;a=t.next;if(i.length===0||R.test(i)){t.remove();t=a}t=a}}}t=s.lastChild;if(t&&t.type===3){i=t.value.replace(M,"");if(i.length>0){t.value=i;t=t.prev}else{a=t.prev;t.remove();t=a;while(t&&t.type===3){i=t.value;a=t.prev;if(i.length===0||R.test(i)){t.remove();t=a}t=a}}}}}if(O&&D[e]){O=false}if(n.removeEmpty&&h(p,L,D,s)){if(!s.attributes.map.name&&!s.attributes.map.id){o=s.parent;if(E[s.name]){s.empty().remove()}else{s.unwrap()}s=o;return}}if(n.paddEmpty&&(c(s)||h(p,L,D,s))){l(d,r,E,s)}s=s.parent}}},p);o=s=new t(r.context||d.root_name,11);i.parse(e);if(S&&P.length){if(!r.context){x(P)}else{r.invalid=true}}if(I&&(o.name=="body"||r.isRootContent)){F()}if(!r.invalid){for(T in y){C=m[T];f=y[T];_=f.length;while(_--){if(!f[_].parent){f.splice(_,1)}}for(v=0,w=C.length;v<w;v++){C[v](f,T,r)}}for(v=0,w=g.length;v<w;v++){C=g[v];if(C.name in b){f=b[C.name];_=f.length;while(_--){if(!f[_].parent){f.splice(_,1)}}for(_=0,k=C.callbacks.length;_<k;_++){C.callbacks[_](f,C.name,r)}}}}return o};if(d.remove_trailing_brs){v.addNodeFilter("br",function(e,n,r){var i,a=e.length,o,s=u({},p.getBlockElements());var c=p.getNonEmptyElements(),f,v,m,g;var y=p.getNonEmptyElements();var b,x;s.body=1;for(i=0;i<a;i++){o=e[i];f=o.parent;if(s[o.parent.name]&&o===f.lastChild){m=o.prev;while(m){g=m.name;if(g!=="span"||m.attr("data-mce-type")!=="bookmark"){if(g!=="br"){break}if(g==="br"){o=null;break}}m=m.prev}if(o){o.remove();if(h(p,c,y,f)){b=p.getElementRule(f.name);if(b){if(b.removeEmpty){f.remove()}else if(b.paddEmpty){l(d,r,s,f)}}}}}else{v=o;while(f&&f.firstChild===v&&f.lastChild===v){v=f;if(s[f.name]){break}f=f.parent}if(v===f&&d.padd_empty_with_br!==true){x=new t("#text",3);x.value="¬†";o.replace(x)}}}})}v.addAttributeFilter("href",function(e){var t=e.length,n;var r=function(e){var t=e.split(" ").filter(function(e){return e.length>0});return t.concat(["noopener"]).sort().join(" ")};var a=function(e){var t=e?i.trim(e):"";if(!/\b(noopener)\b/g.test(t)){return r(t)}else{return t}};if(!d.allow_unsafe_link_target){while(t--){n=e[t];if(n.name==="a"&&n.attr("target")==="_blank"){n.attr("rel",a(n.attr("rel")))}}}});if(!d.allow_html_in_named_anchor){v.addAttributeFilter("id,name",function(e){var t=e.length,n,r,i,a;while(t--){a=e[t];if(a.name==="a"&&a.firstChild&&!a.attr("href")){i=a.parent;n=a.lastChild;do{r=n.prev;i.insert(n,a);n=r}while(n)}}})}if(d.fix_list_elements){v.addNodeFilter("ul,ol",function(e){var n=e.length,r,i;while(n--){r=e[n];i=r.parent;if(i.name==="ul"||i.name==="ol"){if(r.prev&&r.prev.name==="li"){r.prev.append(r)}else{var a=new t("li",1);a.attr("style","list-style-type: none");r.wrap(a)}}}})}if(d.validate&&p.getValidClasses()){v.addAttributeFilter("class",function(e){var t=e.length,n,r,i,a,o;var s=p.getValidClasses(),u,l;while(t--){n=e[t];r=n.attr("class").split(" ");o="";for(i=0;i<r.length;i++){a=r[i];l=false;u=s["*"];if(u&&u[a]){l=true}u=s[n.name];if(!l&&u&&u[a]){l=true}if(l){if(o){o+=" "}o+=a}}if(!o.length){o=null}n.attr("class",o)}})}e.register(this,d)}});a("tinymce.core.dom.DomSerializer",["ephox.katamari.api.Fun","ephox.katamari.api.Merger","tinymce.core.api.Events","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomSerializerFilters","tinymce.core.dom.DomSerializerPreProcess","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c){var f=function(e,t,n){if(c.inArray(t,n)===-1){e.addAttributeFilter(n,function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}});t.push(n)}};var d=function(e,r,i){if(!r.no_events&&e){var a=n.firePostProcess(e,t.merge(r,{content:i}));return a.content}else{return i}};var h=function(e,t,n){var r=l.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:c.trim(r)};var p=function(e,n,r,a){var o=a.selection?t.merge({forced_root_block:false},a):a;var s=e.parse(r,o);i.trimTrailingBr(s);return s};var v=function(e,t,n){var r=new u(e,t);return r.serialize(n)};var m=function(e,t,n,r,i){var a=v(t,n,r);return d(e,i,a)};return function(n,u){var l,c,d,v=["data-mce-selected"];l=u&&u.dom?u.dom:r.DOM;c=u&&u.schema?u.schema:new s(n);n.entity_encoding=n.entity_encoding||"named";n.remove_trailing_brs="remove_trailing_brs"in n?n.remove_trailing_brs:true;d=new o(n,c);i.register(d,n,l);var g=function(e,r){var i=t.merge({format:"html"},r?r:{});var o=a.process(u,e,i);var s=h(l,o,i);var f=p(d,l,s,i);return i.format==="tree"?f:m(u,n,c,f,i)};return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},addTempAttr:e.curry(f,d,v),getTempAttrs:function(){return v}}}});a("tinymce.core.api.dom.Serializer",["tinymce.core.dom.DomSerializer"],function(e){return function(t,n){var r=new e(t,n);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs}}});a("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],function(e,t,n,r){var i=function(r){return n.descendant(t.fromDom(r.getBody()),"*[data-mce-caret]").fold(e.constant(null),function(e){return e.dom()})};var a=function(e){e.selection.setRng(e.selection.getRng())};var o=function(e,t){if(t.hasAttribute("data-mce-caret")){r.showCaretContainerBlock(t);a(e);e.selection.scrollIntoView(t)}};var s=function(e,t){var n=i(e);if(!n){return}if(t.type==="compositionstart"){t.preventDefault();t.stopPropagation();o(n);return}if(r.hasContent(n)){o(e,n)}};var u=function(t){t.on("keyup compositionstart",e.curry(s,t))};return{setup:u}});a("tinymce.core.api.dom.BookmarkManager",["ephox.katamari.api.Fun","tinymce.core.dom.Bookmarks"],function(e,t){var n=function(n){return{getBookmark:e.curry(t.getBookmark,n),moveToBookmark:e.curry(t.moveToBookmark,n)}};n.isBookmarkNode=t.isBookmarkNode;return n});a("tinymce.core.dom.ControlSelection",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","global!document","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,i,a,o,s,u,l){var c=i.isContentEditableFalse;var f=i.isContentEditableTrue;var d=function(e,t){while(t&&t!=e){if(f(t)||c(t)){return t}t=t.parentNode}return null};return function(e,i){var f=i.dom,h=u.each;var p,v,m,g,y;var b,x,w,_,k,C,T,S;var E,A,P=i.getDoc(),O=r;var M=Math.abs,N=Math.round,R=i.getBody(),D,B;g={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var L=".mce-content-body";i.contentStyles.push(L+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"box-sizing: content-box;"+"background: #FFF;"+"width: 7px;"+"height: 7px;"+"z-index: 10000"+"}"+L+" .mce-resizehandle:hover {"+"background: #000"+"}"+L+" img[data-mce-selected],"+L+" hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+L+" .mce-clonedresizable {"+"position: absolute;"+(o.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+L+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}");var I=function(e){return e&&(e.nodeName==="IMG"||i.dom.is(e,"figure.image"))};var F=function(e,t){return I(e.target)&&!a.isXYWithinRange(e.clientX,e.clientY,t)};var j=function(e){var t=e.target;if(F(e,i.selection.getRng())&&!e.isDefaultPrevented()){e.preventDefault();i.selection.select(t)}};var z=function(e){return i.dom.is(e,"figure.image")?e.querySelector("img"):e};var H=function(e){var r=i.settings.object_resizing;if(r===false||o.iOS){return false}if(typeof r!="string"){r="table,img,figure.image,div"}if(e.getAttribute("data-mce-resize")==="false"){return false}if(e==i.getBody()){return false}return n.is(t.fromDom(e),r)};var U=function(e){var t,n,r;var a,o;t=e.screenX-b;n=e.screenY-x;E=t*y[2]+k;A=n*y[3]+C;E=E<5?5:E;A=A<5?5:A;if(I(p)&&i.settings.resize_img_proportional!==false){r=!l.modifierPressed(e)}else{r=l.modifierPressed(e)||I(p)&&y[2]*y[3]!==0}if(r){if(M(t)>M(n)){A=N(E*T);E=N(A/T)}else{E=N(A/T);A=N(E*T)}}f.setStyles(z(v),{width:E,height:A});a=y.startPos.x+t;o=y.startPos.y+n;a=a>0?a:0;o=o>0?o:0;f.setStyles(m,{left:a,top:o,display:"block"});m.innerHTML=E+" &times; "+A;if(y[2]<0&&v.clientWidth<=E){f.setStyle(v,"left",w+(k-E))}if(y[3]<0&&v.clientHeight<=A){f.setStyle(v,"top",_+(C-A))}t=R.scrollWidth-D;n=R.scrollHeight-B;if(t+n!==0){f.setStyles(m,{left:a-t,top:o-n})}if(!S){i.fire("ObjectResizeStart",{target:p,width:k,height:C});S=true}};var W=function(){S=false;var e=function(e,t){if(t){if(p.style[e]||!i.schema.isValid(p.nodeName.toLowerCase(),e)){f.setStyle(z(p),e,t)}else{f.setAttrib(z(p),e,t)}}};e("width",E);e("height",A);f.unbind(P,"mousemove",U);f.unbind(P,"mouseup",W);if(O!=P){f.unbind(O,"mousemove",U);f.unbind(O,"mouseup",W)}f.remove(v);f.remove(m);V(p);i.fire("ObjectResized",{target:p,width:E,height:A});f.setAttrib(p,"style",f.getAttrib(p,"style"));i.nodeChanged()};var V=function(e){var t,n,r,a,s;q();$();t=f.getPos(e,R);w=t.x;_=t.y;s=e.getBoundingClientRect();n=s.width||s.right-s.left;r=s.height||s.bottom-s.top;if(p!=e){p=e;E=A=0}a=i.fire("ObjectSelected",{target:e});if(H(e)&&!a.isDefaultPrevented()){h(g,function(e,t){var i;var a=function(t){b=t.screenX;x=t.screenY;k=z(p).clientWidth;C=z(p).clientHeight;T=C/k;y=e;e.startPos={x:n*e[0]+w,y:r*e[1]+_};D=R.scrollWidth;B=R.scrollHeight;v=p.cloneNode(true);f.addClass(v,"mce-clonedresizable");f.setAttrib(v,"data-mce-bogus","all");v.contentEditable=false;v.unSelectabe=true;f.setStyles(v,{left:w,top:_,margin:0});v.removeAttribute("data-mce-selected");R.appendChild(v);f.bind(P,"mousemove",U);f.bind(P,"mouseup",W);if(O!=P){f.bind(O,"mousemove",U);f.bind(O,"mouseup",W)}m=f.add(R,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},k+" &times; "+C)};i=f.get("mceResizeHandle"+t);if(i){f.remove(i)}i=f.add(R,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:true,style:"cursor:"+t+"-resize; margin:0; padding:0"});if(o.ie){i.contentEditable=false}f.bind(i,"mousedown",function(e){e.stopImmediatePropagation();e.preventDefault();a(e)});e.elm=i;f.setStyles(i,{left:n*e[0]+w-i.offsetWidth/2,top:r*e[1]+_-i.offsetHeight/2})})}else{q()}p.setAttribute("data-mce-selected","1")};var q=function(){var e,t;$();if(p){p.removeAttribute("data-mce-selected")}for(e in g){t=f.get("mceResizeHandle"+e);if(t){f.unbind(t);f.remove(t)}}};var K=function(t){var n,r;var a=function(e,t){if(e){do{if(e===t){return true}}while(e=e.parentNode)}};if(S||i.removed){return}h(f.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")});r=t.type=="mousedown"?t.target:e.getNode();r=f.$(r).closest("table,img,figure.image,hr")[0];if(a(r,R)){G();n=e.getStart(true);if(a(n,r)&&a(e.getEnd(true),r)){V(r);return}}q()};var Y=function(e){return c(d(i.getBody(),e))};var $=function(){for(var e in g){var t=g[e];if(t.elm){f.unbind(t.elm);delete t.elm}}};var G=function(){try{i.getDoc().execCommand("enableObjectResizing",false,false)}catch(e){}};i.on("init",function(){G();if(o.ie&&o.ie>=11){i.on("mousedown click",function(e){var t=e.target,n=t.nodeName;if(!S&&/^(TABLE|IMG|HR)$/.test(n)&&!Y(t)){if(e.button!==2){i.selection.select(t,n=="TABLE")}if(e.type=="mousedown"){i.nodeChanged()}}});i.dom.bind(R,"mscontrolselect",function(e){var t=function(e){s.setEditorTimeout(i,function(){i.selection.select(e)})};if(Y(e.target)){e.preventDefault();t(e.target);return}if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();if(e.target.tagName=="IMG"){t(e.target)}}})}var e=s.throttle(function(e){if(!i.composing){K(e)}});i.on("nodechange ResizeEditor ResizeWindow drop",e);i.on("keyup compositionend",function(t){if(p&&p.nodeName=="TABLE"){e(t)}});i.on("hide blur",q);i.on("contextmenu",j)});i.on("remove",$);var X=function(){p=v=null};return{isResizable:H,showResizeRect:V,hideResizeRect:q,updateResizeRect:K,destroy:X}}});a("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){var t=0,n=0;var r=e;while(r&&r.nodeType){t+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}return{x:t,y:n}};var n=function(e,t,n){var r={elm:t,alignToTop:n};e.fire("scrollIntoView",r);return r.isDefaultPrevented()};var r=function(r,i,a){var o,s,u=r.dom,l=u.getRoot(),c,f,d=0;if(n(r,i,a)){return}if(!e.isElement(i)){return}if(a===false){d=i.offsetHeight}if(l.nodeName!=="BODY"){var h=r.selection.getScrollContainer();if(h){o=t(i).y-t(h).y+d;f=h.clientHeight;c=h.scrollTop;if(o<c||o+25>c+f){h.scrollTop=o<c?o:o-f+25}return}}s=u.getViewPort(r.getWin());o=u.getPos(i).y+d;c=s.y;f=s.h;if(o<s.y||o+25>c+f){r.getWin().scrollTo(0,o<c?o:o-f+25)}};return{scrollIntoView:r}});a("tinymce.core.selection.CaretRangeFromPoint",["tinymce.core.dom.NodeType","tinymce.core.util.Tools"],function(e,t){var n=function(t){return e.isContentEditableTrue(t)||e.isContentEditableFalse(t)};var r=function(e,t,n){while(e&&e!==t){if(n(e)){return e}e=e.parentNode}return null};var i=function(e,n,r){var i,a,o;i=r.elementFromPoint(e,n);a=r.body.createTextRange();if(!i||i.tagName==="HTML"){i=r.body}a.moveToElementText(i);o=t.toArray(a.getClientRects());o=o.sort(function(e,t){e=Math.abs(Math.max(e.top-n,e.bottom-n));t=Math.abs(Math.max(t.top-n,t.bottom-n));return e-t});if(o.length>0){n=(o[0].bottom+o[0].top)/2;try{a.moveToPoint(e,n);a.collapse(true);return a}catch(e){}}return null};var a=function(t,i){var a=t&&t.parentElement?t.parentElement():null;return e.isContentEditableFalse(r(a,i,n))?null:t};var o=function(e,t,n){var r,o;if(n.caretPositionFromPoint){o=n.caretPositionFromPoint(e,t);if(o){r=n.createRange();r.setStart(o.offsetNode,o.offset);r.collapse(true)}}else if(n.caretRangeFromPoint){r=n.caretRangeFromPoint(e,t)}else if(n.body.createTextRange){r=n.body.createTextRange();try{r.moveToPoint(e,t);r.collapse(true)}catch(a){r=i(e,t,n)}return a(r,n.body)}return r};return{fromPoint:o}});a("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(e){var t=function(t,n){return e.map(n,function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e})};return{processRanges:t}});a("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=function(e,n){return t.fromDom(e.dom().cloneNode(n))};var s=function(e){return o(e,false)};var u=function(e){return o(e,true)};var l=function(n,r){var i=t.fromTag(r);var a=e.clone(n);e.setAll(i,a);return i};var c=function(e,t){var n=l(e,t);var i=a.children(u(e));r.append(n,i);return n};var f=function(e,t){var o=l(e,t);n.before(e,o);var s=a.children(e);r.append(o,s);i.remove(e);return o};return{shallow:s,shallowAs:l,deep:u,copy:c,mutate:f}});a("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){var r=function(r,i){var a=i||n;var o=a.createDocumentFragment();e.each(r,function(e){o.appendChild(e.dom())});return t.fromDom(o)};return{fromElements:r}});a("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,r,i,a,o,s,u){var l=function(e){var t=e.startContainer,r=e.startOffset;if(u.isText(t)){return r===0?n.some(a.fromDom(t)):n.none()}else{return n.from(t.childNodes[r]).map(a.fromDom)}};var c=function(e){var t=e.endContainer,r=e.endOffset;if(u.isText(t)){return r===t.data.length?n.some(a.fromDom(t)):n.none()}else{return n.from(t.childNodes[r-1]).map(a.fromDom)}};var f=function(e){return s.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(f(t))})};var d=function(e){return s.lastChild(e).fold(t.constant([e]),function(t){if(o.name(t)==="br"){return s.prevSibling(t).map(function(t){return[e].concat(d(t))}).getOr([])}else{return[e].concat(d(t))}})};var h=function(n,a){return r.liftN([l(a),c(a)],function(r,a){var o=e.find(f(n),t.curry(i.eq,r));var s=e.find(d(n),t.curry(i.eq,a));return o.isSome()&&s.isSome()}).getOr(false)};return{hasAllContentsSelected:h}});a("tinymce.core.selection.SimpleTableModel",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,i,a,o,s,u,l){var c=n.immutable("element","width","rows");var f=n.immutable("element","cells");var d=n.immutable("x","y");var h=function(e,t){var n=parseInt(u.get(e,t),10);return isNaN(n)?1:n};var p=function(e,t,n,r,i){var a=h(i,"rowspan");var s=h(i,"colspan");var u=e.rows();for(var l=n;l<n+a;l++){if(!u[l]){u[l]=f(o.deep(r),[])}for(var c=t;c<t+s;c++){var d=u[l].cells();d[c]=l==n&&c==t?i:o.shallow(i)}}};var v=function(e,t,n){var r=e.rows();var i=r[n]?r[n].cells():[];return!!i[t]};var m=function(e,t,n){while(v(e,t,n)){t++}return t};var g=function(t){return e.foldl(t,function(e,t){return t.cells().length>e?t.cells().length:e},0)};var y=function(e,n){var i=e.rows();for(var a=0;a<i.length;a++){var o=i[a].cells();for(var s=0;s<o.length;s++){if(r.eq(o[s],n)){return t.some(d(s,a))}}}return t.none()};var b=function(e,t,n,r,i){var a=[];var o=e.rows();for(var s=n;s<=i;s++){var u=o[s].cells();var l=t<r?u.slice(t,r+1):u.slice(r,t+1);a.push(f(o[s].element(),l))}return a};var x=function(e,t,n){var r=t.x(),i=t.y();var a=n.x(),o=n.y();var s=i<o?b(e,r,i,a,o):b(e,r,o,a,i);return c(e.element(),g(s),s)};var w=function(e,t){var n=o.shallow(e.element());var r=s.fromTag("tbody");a.append(r,t);i.append(n,r);return n};var _=function(t){return e.map(t.rows(),function(t){var n=e.map(t.cells(),function(e){var t=o.deep(e);u.remove(t,"colspan");u.remove(t,"rowspan");return t});var r=o.shallow(t.element());a.append(r,n);return r})};var k=function(t){var n=c(o.shallow(t),0,[]);e.each(l.descendants(t,"tr"),function(t,r){e.each(l.descendants(t,"td,th"),function(e,i){p(n,m(n,i,r),r,t,e)})});return c(n.element(),g(n.rows()),n.rows())};var C=function(e){return w(e,_(e))};var T=function(e,t,n){return y(e,t).bind(function(t){return y(e,n).map(function(n){return x(e,t,n)})})};return{fromDom:k,toDom:C,subsection:T}});a("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils","tinymce.core.selection.SimpleTableModel","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=function(t){return e.find(t,function(e){return s.name(e)==="ul"||s.name(e)==="ol"})};var m=function(n,r){return e.find(n,function(e){return s.name(e)==="li"&&d.hasAllContentsSelected(e,r)}).fold(t.constant([]),function(e){return v(n).map(function(e){return[a.fromTag("li"),a.fromTag(s.name(e))]}).getOr([])})};var g=function(t,n){var i=e.foldl(n,function(e,t){r.append(t,e);return t},t);return n.length>0?o.fromElements([i]):i};var y=function(e){if(c.isListItem(e)){return l.parent(e).filter(c.isList).fold(t.constant([]),function(t){return[e,t]})}else{return c.isList(e)?[e]:[]}};var b=function(t,n){var r=a.fromDom(n.commonAncestorContainer);var o=f.parentsAndSelf(r,t);var s=e.filter(o,function(e){return c.isInline(e)||c.isHeading(e)});var u=m(o,n);var l=s.concat(u.length?u:y(r));return e.map(l,i.shallow)};var x=function(){return o.fromElements([])};var w=function(e,t){return g(a.fromDom(t.cloneContents()),b(e,t))};var _=function(e,r){return u.ancestor(r,"table",t.curry(n.eq,e))};var k=function(e,t){return _(e,t[0]).bind(function(e){var n=t[0];var r=t[t.length-1];var i=h.fromDom(e);return h.subsection(i,n,r).map(function(e){return o.fromElements([h.toDom(e)])})}).getOrThunk(x)};var C=function(e,t){return t.length>0&&t[0].collapsed?x():w(e,t[0])};var T=function(e,t){var n=p.getCellsFromElementOrRanges(t,e);return n.length>0?k(e,n):C(e,t)};return{read:T}});a("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(e,t,n,r,i){var a=function(a,o){var s=a.selection.getRng(),u=a.dom.create("body");var l=a.selection.getSel(),c;var f=t.processRanges(a,r.getRanges(l));o=o||{};o.get=true;o.format=o.format||"html";o.selection=true;o=a.fire("BeforeGetContent",o);if(o.isDefaultPrevented()){a.fire("GetContent",o);return o.content}if(o.format==="text"){return a.selection.isCollapsed()?"":i.trim(s.text||(l.toString?l.toString():""))}if(s.cloneContents){c=o.contextual?n.read(e.fromDom(a.getBody()),f).dom():s.cloneContents();if(c){u.appendChild(c)}}else if(s.item!==undefined||s.htmlText!==undefined){u.innerHTML="<br>"+(s.item?s.item(0).outerHTML:s.htmlText);u.removeChild(u.firstChild)}else{u.innerHTML=s.toString()}o.getInner=true;var d=a.selection.serializer.serialize(u,o);if(o.format==="tree"){return d}o.content=a.selection.isCollapsed()?"":d;a.fire("GetContent",o);return o.content};return{getContent:a}});a("tinymce.core.selection.SetSelectionContent",[],function(){var e=function(e,t,n){var r=e.selection.getRng(),i,a=e.getDoc(),o,s;n=n||{format:"html"};n.set=true;n.selection=true;n.content=t;if(!n.no_events){n=e.fire("BeforeSetContent",n);if(n.isDefaultPrevented()){e.fire("SetContent",n);return}}t=n.content;if(r.insertNode){t+='<span id="__caret">_</span>';if(r.startContainer==a&&r.endContainer==a){a.body.innerHTML=t}else{r.deleteContents();if(a.body.childNodes.length===0){a.body.innerHTML=t}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(t))}else{o=a.createDocumentFragment();s=a.createElement("div");o.appendChild(s);s.outerHTML=t;r.insertNode(o)}}}i=e.dom.get("__caret");r=a.createRange();r.setStartBefore(i);r.setEndBefore(i);e.selection.setRng(r);e.dom.remove("__caret");try{e.selection.setRng(r)}catch(e){}}else{if(r.item){a.execCommand("Delete",false,null);r=e.getRng()}if(/^\s+/.test(t)){r.pasteHTML('<span id="__mce_tmp">_</span>'+t);e.dom.remove("__mce_tmp")}else{r.pasteHTML(t)}}if(!n.no_events){e.fire("SetContent",n)}};return{setContent:e}});a("tinymce.core.dom.Selection",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.api.dom.BookmarkManager","tinymce.core.caret.CaretPosition","tinymce.core.dom.ControlSelection","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.focus.EditorFocus","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.GetSelectionContent","tinymce.core.selection.MultiRange","tinymce.core.selection.NormalizeRange","tinymce.core.selection.SelectionBookmark","tinymce.core.selection.SetSelectionContent","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m){var g=m.each,y=m.trim;var b=function(n){return!!(n&&n.ownerDocument)&&e.contains(t.fromDom(n.ownerDocument),t.fromDom(n))};var x=function(e){if(!e){return false}else if(e.select){return true}else{return b(e.startContainer)&&b(e.endContainer)}};var w=function(e,t,n,i){var o=this;o.dom=e;o.win=t;o.serializer=n;o.editor=i;o.bookmarkManager=new r(o);o.controlSelection=new a(o,i)};w.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();if(!e){n._moveEndPoint(r,n.editor.getBody(),true);n.setRng(r)}else{r.setStart(e,t);r.setEnd(e,t);n.setRng(r);n.collapse(false)}},getContent:function(e){return f.getContent(this.editor,e)},setContent:function(e,t){v.setContent(this.editor,e,t)},getStart:function(e){var t=this,n=t.getRng(),r;r=n.startContainer;if(r.nodeType==1&&r.hasChildNodes()){if(!e||!n.collapsed){r=r.childNodes[Math.min(r.childNodes.length-1,n.startOffset)]}}if(r&&r.nodeType==3){return r.parentNode}return r},getEnd:function(e){var t=this,n=t.getRng(),r,i;r=n.endContainer;i=n.endOffset;if(r.nodeType==1&&r.hasChildNodes()){if(!e||!n.collapsed){r=r.childNodes[i>0?i-1:i]}}if(r&&r.nodeType==3){return r.parentNode}return r},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,r=n.dom,i=r.createRng(),a;if(e){a=r.nodeIndex(e);i.setStart(e.parentNode,a);i.setEnd(e.parentNode,a+1);if(t){n._moveEndPoint(i,e,true);n._moveEndPoint(i,e)}n.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();if(!t||t.item){return false}if(t.compareEndPoints){return t.compareEndPoints("StartToEnd",t)===0}return!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng();n.collapse(!!e);t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t=this,n,r,i,a;var o=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t.win){return null}a=t.win.document;if(typeof a==="undefined"||a===null){return null}if(t.editor.bookmark!==undefined&&u.hasFocus(t.editor)===false){var s=p.getRng(t.editor);if(s.isSome()){return s.getOr(a.createRange())}}try{if(n=t.getSel()){if(n.rangeCount>0){r=n.getRangeAt(0)}else{r=n.createRange?n.createRange():a.createRange()}}}catch(e){}r=c.processRanges(t.editor,[r])[0];if(!r){r=a.createRange?a.createRange():a.body.createTextRange()}if(r.setStart&&r.startContainer.nodeType===9&&r.collapsed){i=t.dom.getRoot();r.setStart(i,0);r.setEnd(i,0)}if(t.selectedRange&&t.explicitRange){if(o(r.START_TO_START,r,t.selectedRange)===0&&o(r.END_TO_END,r,t.selectedRange)===0){r=t.explicitRange}else{t.selectedRange=null;t.explicitRange=null}}return r},setRng:function(e,t){var r=this,i,a,o;if(!x(e)){return}if(e.select){r.explicitRange=null;try{e.select()}catch(e){}return}i=r.getSel();o=r.editor.fire("SetSelectionRange",{range:e,forward:t});e=o.range;if(i){r.explicitRange=e;try{i.removeAllRanges();i.addRange(e)}catch(e){}if(t===false&&i.extend){i.collapse(e.endContainer,e.endOffset);i.extend(e.startContainer,e.startOffset)}r.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&i.setBaseAndExtent&&!n.ie){if(e.endOffset-e.startOffset<2){if(e.startContainer.hasChildNodes()){a=e.startContainer.childNodes[e.startOffset];if(a&&a.tagName==="IMG"){i.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset);if(i.anchorNode!==e.startContainer||i.focusNode!==e.endContainer){i.setBaseAndExtent(a,0,a,1)}}}}}r.editor.fire("AfterSetSelectionRange",{range:e,forward:t})},setNode:function(e){var t=this;t.setContent(t.dom.getOuterHTML(e));return e},getNode:function(){var e=this,t=e.getRng(),n;var r,i,a,o,s=e.dom.getRoot();var u=function(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n};if(!t){return s}r=t.startContainer;i=t.endContainer;a=t.startOffset;o=t.endOffset;n=t.commonAncestorContainer;if(!t.collapsed){if(r==i){if(o-a<2){if(r.hasChildNodes()){n=r.childNodes[a]}}}if(r.nodeType===3&&i.nodeType===3){if(r.length===a){r=u(r.nextSibling,true)}else{r=r.parentNode}if(o===0){i=u(i.previousSibling,false)}else{i=i.parentNode}if(r&&r===i){return r}}}if(n&&n.nodeType==3){return n.parentNode}return n},getSelectedBlocks:function(e,t){var n=this,r=n.dom,i,a,o=[];a=r.getRoot();e=r.getParent(e||n.getStart(),r.isBlock);t=r.getParent(t||n.getEnd(),r.isBlock);if(e&&e!=a){o.push(e)}if(e&&t&&e!=t){i=e;var u=new s(e,a);while((i=u.next())&&i!=t){if(r.isBlock(i)){o.push(i)}}}if(t&&e!=t&&t!=a){o.push(t)}return o},isForward:function(){var e=this.dom,t=this.getSel(),n,r;if(!t||!t.anchorNode||!t.focusNode){return true}n=e.createRng();n.setStart(t.anchorNode,t.anchorOffset);n.collapse(true);r=e.createRng();r.setStart(t.focusNode,t.focusOffset);r.collapse(true);return n.compareBoundaryPoints(n.START_TO_START,r)<=0},normalize:function(){var e=this,t=e.getRng();if(!d.hasMultipleRanges(e.getSel())){var n=h.normalize(e.dom,t);n.each(function(t){e.setRng(t,e.isForward())});return n.getOr(t)}return t},selectorChanged:function(e,t){var n=this,r;if(!n.selectorChangedData){n.selectorChangedData={};r={};n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,a=i.getParents(t,null,i.getRoot()),o={};g(n.selectorChangedData,function(e,t){g(a,function(n){if(i.is(n,t)){if(!r[t]){g(e,function(e){e(true,{node:n,selector:t,parents:a})});r[t]=e}o[t]=e;return false}})});g(r,function(e,n){if(!o[n]){delete r[n];g(e,function(e){e(false,{node:t,selector:n,parents:a})})}})})}if(!n.selectorChangedData[e]){n.selectorChangedData[e]=[]}n.selectorChangedData[e].push(t);return n},getScrollContainer:function(){var e,t=this.dom.getRoot();while(t&&t.nodeName!="BODY"){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){o.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(l.fromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,r){var i=t,a=new s(t,i);var o=this.dom.schema.getNonEmptyElements();do{if(t.nodeType==3&&y(t.nodeValue).length!==0){if(r){e.setStart(t,0)}else{e.setEnd(t,t.nodeValue.length)}return}if(o[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName)){if(r){e.setStartBefore(t)}else{if(t.nodeName=="BR"){e.setEndBefore(t)}else{e.setEndAfter(t)}}return}if(n.ie&&n.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t)){if(r){e.setStart(t,0)}else{e.setEnd(t,0)}return}}while(t=r?a.next():a.prev());if(i.nodeName=="BODY"){if(r){e.setStart(i,0)}else{e.setEnd(i,i.childNodes.length)}}},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?i.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null;this.controlSelection.destroy()}};return w});a("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,r,i,a,o,s){var u=e.curry;var l=function(e,t,n,a){while(a=i.findNode(a,e,r.isEditableCaretCandidate,t)){if(n(a)){return}}};var c=function(e,r,i,a,o,s){var u=0,c,f=[],d;var h=function(a){var s,l,c;c=n.getClientRects(a);if(e==-1){c=c.reverse()}for(s=0;s<c.length;s++){l=c[s];if(i(l,d)){continue}if(f.length>0&&r(l,t.last(f))){u++}l.line=u;if(o(l)){return true}f.push(l)}};d=t.last(s.getClientRects());if(!d){return f}c=s.getNode();h(c);l(e,a,h,c);return f};var f=function(e,t){return t.line>e};var d=function(e,t){return t.line===e};var h=u(c,-1,s.isAbove,s.isBelow);var p=u(c,1,s.isBelow,s.isAbove);var v=function(e,n,r,i){var u=new a(n),l,c,f,d,h=[],p=0,v,m;var g=function(n){if(e==1){return t.last(n.getClientRects())}return t.last(n.getClientRects())};if(e==1){l=u.next;c=s.isBelow;f=s.isAbove;d=o.after(i)}else{l=u.prev;c=s.isAbove;f=s.isBelow;d=o.before(i)}m=g(d);do{if(!d.isVisible()){continue}v=g(d);if(f(v,m)){continue}if(h.length>0&&c(v,t.last(h))){p++}v=s.clone(v);v.position=d;v.line=p;if(r(v)){return h}h.push(v)}while(d=l(d));return h};return{upUntil:h,downUntil:p,positionsUntil:v,isAboveLine:u(f),isLine:u(d)}});a("tinymce.core.keyboard.CefNavigation",["tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.keyboard.CefUtils","tinymce.core.selection.RangeNodes","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=s.isContentEditableFalse;var h=l.getSelectedNode;var p=r.isAfterContentEditableFalse;var v=r.isBeforeContentEditableFalse;var m=function(e,t){while(t=e(t)){if(t.isVisible()){return t}}return t};var g=function(e,t){var n=r.isInSameBlock(e,t);if(!n&&s.isBr(e.getNode())){return true}return n};var y=function(e){return t.isCaretContainerBlock(e.startContainer)};var b=function(e,t,i){i=r.normalizeRange(e,t,i);if(e===-1){return n.fromRangeStart(i)}return n.fromRangeEnd(i)};var x=function(e,t,n,r,i){var a,o,s,l;if(!i.collapsed){a=h(i);if(d(a)){return u.showCaret(e,t,a,e===-1)}}l=y(i);o=b(e,t.getBody(),i);if(r(o)){return u.selectNode(t,o.getNode(e===-1))}o=n(o);if(!o){if(l){return i}return null}if(r(o)){return u.showCaret(e,t,o.getNode(e===-1),e===1)}s=n(o);if(r(s)){if(g(o,s)){return u.showCaret(e,t,s.getNode(e===-1),e===1)}}if(l){return u.renderRangeCaret(t,o.toRange())}return null};var w=function(e,t,n,r){var i,s,l,f,m,g,y,x,w;w=h(r);i=b(e,t.getBody(),r);s=n(t.getBody(),o.isAboveLine(1),i);l=c.filter(s,o.isLine(1));m=c.last(i.getClientRects());if(v(i)){w=i.getNode()}if(p(i)){w=i.getNode(true)}if(!m){return null}g=m.left;f=a.findClosestClientRect(l,g);if(f){if(d(f.node)){y=Math.abs(g-f.left);x=Math.abs(g-f.right);return u.showCaret(e,t,f.node,y<x)}}if(w){var _=o.positionsUntil(e,t.getBody(),o.isAboveLine(1),w);f=a.findClosestClientRect(c.filter(_,o.isLine(1)),g);if(f){return u.renderRangeCaret(t,f.position.toRange())}f=c.last(c.filter(_,o.isLine(0)));if(f){return u.renderRangeCaret(t,f.position.toRange())}}};var _=function(t){var n=t.dom.create(t.settings.forced_root_block);if(!e.ie||e.ie>=11){n.innerHTML='<br data-mce-bogus="1">'}return n};var k=function(e,t,r){var a,o,s;var u=new i(e.getBody());var l=f.curry(m,u.next);var c=f.curry(m,u.prev);if(r.collapsed&&e.settings.forced_root_block){a=e.dom.getParent(r.startContainer,"PRE");if(!a){return}if(t===1){o=l(n.fromRangeStart(r))}else{o=c(n.fromRangeStart(r))}if(!o){s=_(e);if(t===1){e.$(a).after(s)}else{e.$(a).before(s)}e.selection.select(s,true);e.selection.collapse()}}};var C=function(e,t){var n=new i(e.getBody());var r=f.curry(m,n.next);var a=f.curry(m,n.prev);var o,s=t?1:-1;var u=t?r:a;var l=t?v:p;var c=e.selection.getRng();o=x(s,e,u,l,c);if(o){return o}o=k(e,s,c);if(o){return o}return null};var T=function(e,t){var n,r=t?1:-1;var i=t?o.downUntil:o.upUntil;var a=e.selection.getRng();n=w(r,e,i,a);if(n){return n}n=k(e,r,a);if(n){return n}return null};var S=function(e,t){return function(){var n=C(e,t);if(n){e.selection.setRng(n);return true}else{return false}}};var E=function(e,t){return function(){var n=T(e,t);if(n){e.selection.setRng(n);return true}else{return false}}};return{moveH:S,moveV:E}});a("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var r=function(r){return e.map(r,function(e){return n.merge({shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0,action:t.noop},e)})};var i=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey};var a=function(t,n){return e.bind(r(t),function(e){return i(e,n)?[e]:[]})};var o=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}};var s=function(t,n){return e.find(a(t,n),function(e){return e.action()})};return{match:a,action:o,execute:s}});a("tinymce.core.keyboard.ArrowKeys",["ephox.sand.api.PlatformDetection","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,i){var a=function(a,o,s){var u=e.detect().os;r.execute([{keyCode:i.RIGHT,action:n.moveH(a,true)},{keyCode:i.LEFT,action:n.moveH(a,false)},{keyCode:i.UP,action:n.moveV(a,false)},{keyCode:i.DOWN,action:n.moveV(a,true)},{keyCode:i.RIGHT,action:t.move(a,o,true)},{keyCode:i.LEFT,action:t.move(a,o,false)},{keyCode:i.RIGHT,ctrlKey:!u.isOSX(),altKey:u.isOSX(),action:t.moveNextWord(a,o)},{keyCode:i.LEFT,ctrlKey:!u.isOSX(),altKey:u.isOSX(),action:t.movePrevWord(a,o)}],s).each(function(e){s.preventDefault()})};var o=function(e,t){e.on("keydown",function(n){if(n.isDefaultPrevented()===false){a(e,t,n)}})};return{setup:o}});a("tinymce.core.delete.InlineFormatDelete",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteElement","tinymce.core.delete.DeleteUtils","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.fmt.CaretFormat"],function(e,t,n,r,i,a,o,s,u,l){var c=function(n,r){var i=u.parentsAndSelf(r,n);return e.findIndex(i,s.isBlock).fold(t.constant(i),function(e){return i.slice(0,e)})};var f=function(e){return r.children(e).length===1};var d=function(n,r,i,o){var s=t.curry(l.isFormatElement,r);var u=e.map(e.filter(o,s),function(e){return e.dom()});if(u.length===0){a.deleteElement(r,n,i)}else{var c=l.replaceWithCaretFormat(i.dom(),u);r.selection.setRng(c.toRange())}};var h=function(t,r){var a=n.fromDom(t.getBody());var s=n.fromDom(t.selection.getStart());var u=e.filter(c(a,s),f);return e.last(u).map(function(e){var n=i.fromRangeStart(t.selection.getRng());if(o.willDeleteLastPositionInElement(r,n,e.dom())){d(r,t,e,u);return true}else{return false}}).getOr(false)};var p=function(e,t){return e.selection.isCollapsed()?h(e,t):false};return{backspaceDelete:p}});a("tinymce.core.keyboard.DeleteBackspaceKeys",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.InlineFormatDelete","tinymce.core.delete.TableDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,i,a,o,s){var u=function(u,l,c){o.execute([{keyCode:s.BACKSPACE,action:o.action(n.backspaceDelete,u,false)},{keyCode:s.DELETE,action:o.action(n.backspaceDelete,u,true)},{keyCode:s.BACKSPACE,action:o.action(r.backspaceDelete,u,l,false)},{keyCode:s.DELETE,action:o.action(r.backspaceDelete,u,l,true)},{keyCode:s.BACKSPACE,action:o.action(t.backspaceDelete,u,false)},{keyCode:s.DELETE,action:o.action(t.backspaceDelete,u,true)},{keyCode:s.BACKSPACE,action:o.action(e.backspaceDelete,u,false)},{keyCode:s.DELETE,action:o.action(e.backspaceDelete,u,true)},{keyCode:s.BACKSPACE,action:o.action(a.backspaceDelete,u,false)},{keyCode:s.DELETE,action:o.action(a.backspaceDelete,u,true)},{keyCode:s.BACKSPACE,action:o.action(i.backspaceDelete,u,false)},{keyCode:s.DELETE,action:o.action(i.backspaceDelete,u,true)}],c).each(function(e){c.preventDefault()})};var l=function(e,t){o.execute([{keyCode:s.BACKSPACE,action:o.action(n.paddEmptyElement,e)},{keyCode:s.DELETE,action:o.action(n.paddEmptyElement,e)}],t)};var c=function(e,t){e.on("keydown",function(n){if(n.isDefaultPrevented()===false){u(e,t,n)}});e.on("keyup",function(t){if(t.isDefaultPrevented()===false){l(e,t)}})};return{setup:c}});a("tinymce.core.api.Settings",[],function(){var e=function(e,t,n){var r=e.getParam(t,n);if(r.indexOf("=")!==-1){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}else{return r}};var t=function(e){return e.getParam("iframe_attrs",{})};var n=function(e){return e.getParam("doctype","<!DOCTYPE html>")};var r=function(e){return e.getParam("document_base_url","")};var i=function(t){return e(t,"body_id","tinymce")};var a=function(t){return e(t,"body_class","")};var o=function(e){return e.getParam("content_security_policy","")};var s=function(e){return e.getParam("br_in_pre",true)};var u=function(e){if(e.getParam("force_p_newlines",false)){return"p"}var t=e.getParam("forced_root_block","p");return t===false?"":t};var l=function(e){return e.getParam("forced_root_block_attrs",{})};var c=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")};var f=function(e){return e.getParam("no_newline_selector","")};var d=function(e){return e.getParam("keep_styles",true)};var h=function(e){return e.getParam("end_container_on_empty_block",false)};return{getIframeAttrs:t,getDocType:n,getDocumentBaseUrl:r,getBodyId:i,getBodyClass:a,getContentSecurityPolicy:o,shouldPutBrInPre:s,getForcedRootBlock:u,getForcedRootBlockAttrs:l,getBrNewLineSelector:c,getNoNewLineSelector:f,shouldKeepStyles:d,shouldEndContainerOnEmtpyBlock:h}});a("tinymce.core.newline.NewLineUtils",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,i,a){var o=function(e){while(e){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data)){return e}e=e.nextSibling}};var s=function(e,t){var n,r,s,u=t,l,c=e.dom;var f=e.schema.getMoveCaretBeforeOnEnterElements();if(!t){return}if(/^(LI|DT|DD)$/.test(t.nodeName)){var d=o(t.firstChild);if(d&&/^(UL|OL|DL)$/.test(d.nodeName)){t.insertBefore(c.doc.createTextNode("¬†"),t.firstChild)}}s=c.createRng();t.normalize();if(t.hasChildNodes()){n=new a(t,t);while(r=n.current()){if(i.isText(r)){s.setStart(r,0);s.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){s.setStartBefore(r);s.setEndBefore(r);break}u=r;r=n.next()}if(!r){s.setStart(u,0);s.setEnd(u,0)}}else{if(i.isBr(t)){if(t.nextSibling&&c.isBlock(t.nextSibling)){s.setStartBefore(t);s.setEndBefore(t)}else{s.setStartAfter(t);s.setEndAfter(t)}}else{s.setStart(t,0);s.setEnd(t,0)}}e.selection.setRng(s);c.remove(l);e.selection.scrollIntoView(t)};var u=function(e,t){var n=e.getRoot(),r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var l=function(e){return t.from(e.dom.getParent(e.selection.getStart(true),e.dom.isBlock))};var c=function(t){return l(t).fold(e.constant(""),function(e){return e.nodeName.toUpperCase()})};var f=function(e){return l(e).filter(function(e){return r.isListItem(n.fromDom(e))}).isSome()};return{moveToCaretPosition:s,getEditableRoot:u,getParentBlock:l,getParentBlockName:c,isListItemParentBlock:f}});a("tinymce.core.newline.InsertLi",["tinymce.core.dom.NodeType","tinymce.core.newline.NewLineUtils"],function(e,t){var n=function(e,t){return e.firstChild&&e.firstChild.nodeName===t};var r=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t};var i=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)};var a=function(e){return i(e)&&i(e.parentNode)};var o=function(e){var t=e.parentNode;if(/^(LI|DT|DD)$/.test(t.nodeName)){return t}return e};var s=function(t,n,r){var i=t[r?"firstChild":"lastChild"];while(i){if(e.isElement(i)){break}i=i[r?"nextSibling":"previousSibling"]}return i===n};var u=function(e,i,u,l,c){var f=e.dom;var d=e.selection.getRng();if(u===e.getBody()){return}if(a(u)){c="LI"}var h=c?i(c):f.create("BR");if(s(u,l,true)&&s(u,l,false)){if(r(u,"LI")){f.insertAfter(h,o(u))}else{f.replace(h,u)}}else if(s(u,l,true)){if(r(u,"LI")){f.insertAfter(h,o(u));h.appendChild(f.doc.createTextNode(" "));h.appendChild(u)}else{u.parentNode.insertBefore(h,u)}}else if(s(u,l,false)){f.insertAfter(h,o(u))}else{u=o(u);var p=d.cloneRange();p.setStartAfter(l);p.setEndAfter(u);var v=p.extractContents();if(c==="LI"&&n(v,"LI")){h=v.firstChild;f.insertAfter(v,u)}else{f.insertAfter(v,u);f.insertAfter(h,u)}}f.remove(l);t.moveToCaretPosition(e,h)};return{insert:u}});a("tinymce.core.newline.InsertBlock",["tinymce.core.api.Settings","tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.newline.InsertLi","tinymce.core.newline.NewLineUtils","tinymce.core.selection.NormalizeRange","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e){return e&&e.nodeName==="A"&&l.trim(u.trim(e.innerText||e.textContent)).length===0};var f=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)};var d=function(e){e.innerHTML='<br data-mce-bogus="1">'};var h=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t};var p=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.getContentEditable(t)!=="true"};var v=function(e,t,r){var i=r,a=[],o;if(!i){return}while(i=i.firstChild){if(e.isBlock(i)){return}if(n.isElement(i)&&!t[i.nodeName.toLowerCase()]){a.push(i)}}o=a.length;while(o--){i=a[o];if(!i.hasChildNodes()||i.firstChild===i.lastChild&&i.firstChild.nodeValue===""){e.remove(i)}else{if(c(i)){e.remove(i)}}}};var m=function(e,t,r){if(n.isText(t)===false){return r}if(e){return r===1&&t.data.charAt(r-1)===u.ZWSP?0:r}else{return r===t.data.length-1&&t.data.charAt(r)===u.ZWSP?t.data.length:r}};var g=function(e){var t=e.cloneRange();t.setStart(e.startContainer,m(true,e.startContainer,e.startOffset));t.setEnd(e.endContainer,m(false,e.endContainer,e.endOffset));return t};var y=function(e){do{if(n.isText(e)){e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")}e=e.firstChild}while(e)};var b=function(e,t){var n=e.getRoot(),r,i;r=t;while(r!==n&&e.getContentEditable(r)!=="false"){if(e.getContentEditable(r)==="true"){i=r}r=r.parentNode}return r!==n?i:n};var x=function(t,n){var r=e.getForcedRootBlock(t);if(r&&r.toLowerCase()===n.tagName.toLowerCase()){t.dom.setAttribs(n,e.getForcedRootBlockAttrs(t))}};var w=function(e,t,n,r,i){var a,o,s,u,l,c,d=t||"P";var h=e.dom,v=b(h,r);o=h.getParent(r,h.isBlock);if(!o||!p(h,o)){o=o||v;if(o===e.getBody()||f(o)){c=o.nodeName.toLowerCase()}else{c=o.parentNode.nodeName.toLowerCase()}if(!o.hasChildNodes()){a=h.create(d);x(e,a);o.appendChild(a);n.setStart(a,0);n.setEnd(a,0);return a}u=r;while(u.parentNode!==o){u=u.parentNode}while(u&&!h.isBlock(u)){s=u;u=u.previousSibling}if(s&&e.schema.isValidChild(c,d.toLowerCase())){a=h.create(d);x(e,a);s.parentNode.insertBefore(a,s);u=s;while(u&&!h.isBlock(u)){l=u.nextSibling;a.appendChild(u);u=l}n.setStart(r,i);n.setEnd(r,i)}}return r};var _=function(e,t){var n;t.normalize();n=t.lastChild;if(!n||/^(left|right)$/gi.test(e.getStyle(n,"float",true))){e.add(t,"br")}};var k=function(u,l){var c,f,k,C,T,S;var E,A,P,O,M,N,R;var D=u.dom;var B=u.schema,L=B.getNonEmptyElements();var I=u.selection.getRng();var F=function(t){var n=k,r,a,o,s=B.getTextInlineElements();if(t||O==="TABLE"||O==="HR"){r=D.create(t||N);x(u,r)}else{r=T.cloneNode(false)}o=r;if(e.shouldKeepStyles(u)===false){D.setAttrib(r,"style",null);D.setAttrib(r,"class",null)}else{do{if(s[n.nodeName]){if(i.isCaretNode(n)){continue}a=n.cloneNode(false);D.setAttrib(a,"id","");if(r.hasChildNodes()){a.appendChild(r.firstChild);r.appendChild(a)}else{o=a;r.appendChild(a)}}}while((n=n.parentNode)&&n!==f)}d(o);return r};var j=function(e){var t,i,a,o;o=m(e,k,C);if(n.isText(k)&&(e?o>0:o<k.nodeValue.length)){return false}if(k.parentNode===T&&R&&!e){return true}if(e&&n.isElement(k)&&k===T.firstChild){return true}if(h(k,"TABLE")||h(k,"HR")){return R&&!e||!R&&e}t=new r(k,T);if(n.isText(k)){if(e&&o===0){t.prev()}else if(!e&&o===k.nodeValue.length){t.next()}}while(i=t.current()){if(n.isElement(i)){if(!i.getAttribute("data-mce-bogus")){a=i.nodeName.toLowerCase();if(L[a]&&a!=="br"){return false}}}else if(n.isText(i)&&!/^[ \t\r\n]*$/.test(i.nodeValue)){return false}if(e){t.prev()}else{t.next()}}return true};var z=function(){if(/^(H[1-6]|PRE|FIGURE)$/.test(O)&&M!=="HGROUP"){E=F(N)}else{E=F()}if(e.shouldEndContainerOnEmtpyBlock(u)&&p(D,P)&&D.isEmpty(T)){E=D.split(P,T)}else{D.insertAfter(E,T)}o.moveToCaretPosition(u,E)};s.normalize(D,I).each(function(e){I.setStart(e.startContainer,e.startOffset);I.setEnd(e.endContainer,e.endOffset)});k=I.startContainer;C=I.startOffset;N=e.getForcedRootBlock(u);S=l.shiftKey;if(n.isElement(k)&&k.hasChildNodes()){R=C>k.childNodes.length-1;k=k.childNodes[Math.min(C,k.childNodes.length-1)]||k;if(R&&n.isText(k)){C=k.nodeValue.length}else{C=0}}f=b(D,k);if(!f){return}if(N&&!S||!N&&S){k=w(u,N,I,k,C)}T=D.getParent(k,D.isBlock);P=T?D.getParent(T.parentNode,D.isBlock):null;O=T?T.nodeName.toUpperCase():"";M=P?P.nodeName.toUpperCase():"";if(M==="LI"&&!l.ctrlKey){T=P;P=P.parentNode;O=M}if(/^(LI|DT|DD)$/.test(O)){if(D.isEmpty(T)){a.insert(u,F,P,T,N);return}}if(N&&T===u.getBody()){return}N=N||"P";if(t.isCaretContainerBlock(T)){E=t.showCaretContainerBlock(T);if(D.isEmpty(T)){d(T)}o.moveToCaretPosition(u,E)}else if(j()){z()}else if(j(true)){E=T.parentNode.insertBefore(F(),T);o.moveToCaretPosition(u,h(T,"HR")?E:T)}else{c=g(I).cloneRange();c.setEndAfter(T);A=c.extractContents();y(A);E=A.firstChild;D.insertAfter(A,T);v(D,L,E);_(D,T);if(D.isEmpty(T)){d(T)}E.normalize();if(D.isEmpty(E)){D.remove(E);z()}else{o.moveToCaretPosition(u,E)}}D.setAttrib(E,"id","");u.fire("NewBlock",{newBlock:E})};return{insert:k}});a("tinymce.core.newline.ContextSelectors",["ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.api.Settings","tinymce.core.newline.NewLineUtils"],function(e,t,n,r){var i=function(n,i){return r.getParentBlock(n).filter(function(n){return i.length>0&&t.is(e.fromDom(n),i)}).isSome()};var a=function(e){return i(e,n.getBrNewLineSelector(e))};var o=function(e){return i(e,n.getNoNewLineSelector(e))};return{shouldInsertBr:a,shouldBlockNewLine:o}});a("tinymce.core.newline.NewLineAction",["ephox.katamari.api.Adt","ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.api.Settings","tinymce.core.newline.ContextSelectors","tinymce.core.newline.NewLineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,i,a,o){var s=e.generate([{br:[]},{block:[]},{none:[]}]);var u=function(e,t){return i.shouldBlockNewLine(e)};var l=function(e){return function(t,n){var i=r.getForcedRootBlock(t)==="";return i===e}};var c=function(e){return function(t,n){return a.isListItemParentBlock(t)===e}};var f=function(e){return function(t,n){var r=a.getParentBlockName(t)==="PRE";return r===e}};var d=function(e){return function(t,n){return r.shouldPutBrInPre(t)===e}};var h=function(e,t){return i.shouldInsertBr(e)};var p=function(e,t){return t};var v=function(e){var t=r.getForcedRootBlock(e);var n=a.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t?t:"P")};var m=function(e,r){return function(i,a){var o=t.foldl(e,function(e,t){return e&&t(i,a)},true);return o?n.some(r):n.none()}};var g=function(e,t){return o.evaluateUntil([m([u],s.none()),m([f(true),d(false),p],s.br()),m([f(true),d(false)],s.block()),m([f(true),d(true),p],s.block()),m([f(true),d(true)],s.br()),m([c(true),p],s.br()),m([c(true)],s.block()),m([l(true),p,v],s.block()),m([l(true)],s.br()),m([h],s.br()),m([l(false),p],s.br()),m([v],s.block())],[e,t.shiftKey]).getOr(s.none())};return{getAction:g}});a("tinymce.core.newline.InsertNewLine",["ephox.katamari.api.Fun","tinymce.core.newline.InsertBlock","tinymce.core.newline.InsertBr","tinymce.core.newline.NewLineAction"],function(e,t,n,r){var i=function(i,a){r.getAction(i,a).fold(function(){n.insert(i,a)},function(){t.insert(i,a)},e.noop)};return{insert:i}});a("tinymce.core.keyboard.EnterKey",["tinymce.core.newline.InsertNewLine","tinymce.core.util.VK"],function(e,t){var n=function(e){if(e.typing){e.typing=false;e.add()}};var r=function(t,r){if(r.isDefaultPrevented()){return}r.preventDefault();n(t.undoManager);t.undoManager.transact(function(){if(t.selection.isCollapsed()===false){t.execCommand("Delete")}e.insert(t,r)})};var i=function(e){e.on("keydown",function(n){if(n.keyCode===t.ENTER){r(e,n)}})};return{setup:i}});a("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,i){var a=function(e,t){return l(e)&&n.isText(t.container())};var o=function(e,t){var n=t.container();var r=t.offset();n.insertData(r,"¬†");e.selection.setCursorLocation(n,r+1)};var s=function(e,t,n){if(a(n,t)){o(e,t);return true}else{return false}};var u=function(n){var a=e.curry(i.isInlineTarget,n);var o=t.fromRangeStart(n.selection.getRng());var u=r.readLocation(a,n.getBody(),o);return u.map(e.curry(s,n,o)).getOr(false)};var l=function(t){return t.fold(e.constant(false),e.constant(true),e.constant(true),e.constant(false))};var c=function(e){return e.selection.isCollapsed()?u(e):false};return{insertAtSelection:c}});a("tinymce.core.keyboard.SpaceKey",["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n){var r=function(r,i){t.execute([{keyCode:n.SPACEBAR,action:t.action(e.insertAtSelection,r)}],i).each(function(e){i.preventDefault()})};var i=function(e){e.on("keydown",function(t){if(t.isDefaultPrevented()===false){r(e,t)}})};return{setup:i}});a("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,r,i){var a=function(a){var o=t.setupSelectedState(a);e.setup(a,o);n.setup(a,o);r.setup(a);i.setup(a)};return{setup:a}});a("tinymce.core.util.Quirks",["global!document","global!window","tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,i,a,o,s){return function(u){var l=o.each;var c=s.BACKSPACE,f=s.DELETE,d=u.dom,h=u.selection,p=u.settings,v=u.parser;var m=n.gecko,g=n.ie,y=n.webkit;var b="data:text/mce-internal,";var x=g?"Text":"URL";var w=function(e,t){try{u.getDoc().execCommand(e,false,t)}catch(e){}};var _=function(e){return e.isDefaultPrevented()};var k=function(e){var t,n;if(e.dataTransfer){if(u.selection.isCollapsed()&&e.target.tagName=="IMG"){h.select(e.target)}t=u.selection.getContent();if(t.length>0){n=b+escape(u.id)+","+escape(t);e.dataTransfer.setData(x,n)}}};var C=function(e){var t;if(e.dataTransfer){t=e.dataTransfer.getData(x);if(t&&t.indexOf(b)>=0){t=t.substr(b.length).split(",");return{id:unescape(t[0]),html:unescape(t[1])}}}return null};var T=function(e,t){if(u.queryCommandSupported("mceInsertClipboardContent")){u.execCommand("mceInsertClipboardContent",false,{content:e,internal:t})}else{u.execCommand("mceInsertContent",false,e)}};var S=function(){var e=function(e){var t=d.create("body");var n=e.cloneContents();t.appendChild(n);return h.serializer.serialize(t,{format:"html"})};var t=function(t){var n=e(t);var r=d.createRng();r.selectNode(u.getBody());var i=e(r);return n===i};u.on("keydown",function(e){var n=e.keyCode,r,i;if(!_(e)&&(n==f||n==c)){r=u.selection.isCollapsed();i=u.getBody();if(r&&!d.isEmpty(i)){return}if(!r&&!t(u.selection.getRng())){return}e.preventDefault();u.setContent("");if(i.firstChild&&d.isBlock(i.firstChild)){u.selection.setCursorLocation(i.firstChild,0)}else{u.selection.setCursorLocation(i,0)}u.nodeChanged()}})};var E=function(){u.shortcuts.add("meta+a",null,"SelectAll")};var A=function(){if(!u.settings.content_editable){d.bind(u.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==u.getDoc().documentElement){t=h.getRng();u.getBody().focus();if(e.type=="mousedown"){if(r.isCaretContainer(t.startContainer)){return}h.placeCaretAt(e.clientX,e.clientY)}else{h.setRng(t)}}})}};var P=function(){u.on("keydown",function(e){if(!_(e)&&e.keyCode===c){if(!u.getBody().getElementsByTagName("hr").length){return}if(h.isCollapsed()&&h.getRng(true).startOffset===0){var t=h.getNode();var n=t.previousSibling;if(t.nodeName=="HR"){d.remove(t);e.preventDefault();return}if(n&&n.nodeName&&n.nodeName.toLowerCase()==="hr"){d.remove(n);e.preventDefault()}}}})};var O=function(){if(!t.Range.prototype.getClientRects){u.on("mousedown",function(e){if(!_(e)&&e.target.nodeName==="HTML"){var t=u.getBody();t.blur();a.setEditorTimeout(u,function(){t.focus()})}})}};var M=function(){u.on("click",function(e){var t=e.target;if(/^(IMG|HR)$/.test(t.nodeName)&&d.getContentEditableParent(t)!=="false"){e.preventDefault();u.selection.select(t);u.nodeChanged()}if(t.nodeName=="A"&&d.hasClass(t,"mce-item-anchor")){e.preventDefault();h.select(t)}})};var N=function(){var e=function(){var e=d.getAttribs(h.getStart().cloneNode(false));return function(){var t=h.getStart();if(t!==u.getBody()){d.setAttrib(t,"style",null);l(e,function(e){t.setAttributeNode(e.cloneNode(true))})}}};var t=function(){return!h.isCollapsed()&&d.getParent(h.getStart(),d.isBlock)!=d.getParent(h.getEnd(),d.isBlock)};u.on("keypress",function(n){var r;if(!_(n)&&(n.keyCode==8||n.keyCode==46)&&t()){r=e();u.getDoc().execCommand("delete",false,null);r();n.preventDefault();return false}});d.bind(u.getDoc(),"cut",function(n){var r;if(!_(n)&&t()){r=e();a.setEditorTimeout(u,function(){r()})}})};var R=function(){u.on("keydown",function(e){if(!_(e)&&e.keyCode===c){if(h.isCollapsed()&&h.getRng(true).startOffset===0){var t=h.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table"){e.preventDefault();return false}}}})};var D=function(){u.on("keydown",function(e){var t,n,r,i,a;if(_(e)||e.keyCode!=s.BACKSPACE){return}t=h.getRng();n=t.startContainer;r=t.startOffset;i=d.getRoot();a=n;if(!t.collapsed||r!==0){return}while(a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=i){a=a.parentNode}if(a.tagName==="BLOCKQUOTE"){u.formatter.toggle("blockquote",null,a);t=d.createRng();t.setStart(n,0);t.setEnd(n,0);h.setRng(t)}})};var B=function(){var e=function(){w("StyleWithCSS",false);w("enableInlineTableEditing",false);if(!p.object_resizing){w("enableObjectResizing",false)}};if(!p.readonly){u.on("BeforeExecCommand MouseDown",e)}};var L=function(){var e=function(){l(d.select("a"),function(e){var t=e.parentNode,n=d.getRoot();if(t.lastChild===e){while(t&&!d.isBlock(t)){if(t.parentNode.lastChild!==t||t===n){return}t=t.parentNode}d.add(t,"br",{"data-mce-bogus":1})}})};u.on("SetContent ExecCommand",function(t){if(t.type=="setcontent"||t.command==="mceInsertLink"){e()}})};var I=function(){if(p.forced_root_block){u.on("init",function(){w("DefaultParagraphSeparator",p.forced_root_block)})}};var F=function(){u.on("keyup focusin mouseup",function(e){if(!s.modifierPressed(e)){h.normalize()}},true)};var j=function(){u.contentStyles.push("img:-moz-broken {"+"-moz-force-broken-image-icon:1;"+"min-width:24px;"+"min-height:24px"+"}")};var z=function(){if(!u.inline){u.on("keydown",function(){if(e.activeElement==e.body){u.getWin().focus()}})}};var H=function(){if(!u.inline){u.contentStyles.push("body {min-height: 150px}");u.on("click",function(e){var t;if(e.target.nodeName=="HTML"){if(n.ie>11){u.getBody().focus();return}t=u.selection.getRng();u.getBody().focus();u.selection.setRng(t);u.selection.normalize();u.nodeChanged()}})}};var U=function(){if(n.mac){u.on("keydown",function(e){if(s.metaKeyPressed(e)&&!e.shiftKey&&(e.keyCode==37||e.keyCode==39)){e.preventDefault();u.selection.getSel().modify("move",e.keyCode==37?"backward":"forward","lineboundary")}})}};var W=function(){w("AutoUrlDetect",false)};var V=function(){u.on("click",function(e){var t=e.target;do{if(t.tagName==="A"){e.preventDefault();return}}while(t=t.parentNode)});u.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")};var q=function(){u.on("init",function(){u.dom.bind(u.getBody(),"submit",function(e){e.preventDefault()})})};var K=function(){v.addNodeFilter("br",function(e){var t=e.length;while(t--){if(e[t].attr("class")=="Apple-interchange-newline"){e[t].remove()}}})};var Y=function(){u.on("dragstart",function(e){k(e)});u.on("drop",function(e){if(!_(e)){var t=C(e);if(t&&t.id!=u.id){e.preventDefault();var n=i.fromPoint(e.x,e.y,u.getDoc());h.setRng(n);T(t.html,true)}}})};var $=function(){};var G=function(){var e;if(!m||u.removed){return 0}e=u.selection.getSel();return!e||!e.rangeCount||e.rangeCount===0};D();S();if(!n.windowsPhone){F()}if(y){A();M();I();q();R();K();if(n.iOS){z();H();V()}else{E()}}if(n.ie>=11){H();R()}if(n.ie){E();W();Y()}if(m){P();O();N();B();L();j();U();R()}return{refreshContentEditable:$,isHidden:G}}});a("tinymce.core.init.InitContentBody",["ephox.sugar.api.dom.Insert","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","global!document","global!window","tinymce.core.EditorUpload","tinymce.core.ForceBlocks","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.api.Formatter","tinymce.core.api.dom.Serializer","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y,b,x,w){var _=h.DOM;var k=function(r,i){var a=t.fromDom(r.getDoc().head);var o=t.fromTag("style");n.set(o,"type","text/css");e.append(o,t.fromText(i));e.append(a,o)};var C=function(e){var t=new v(e.settings,e.schema);t.addAttributeFilter("src,href,style,tabindex",function(t,n){var r=t.length,i,a=e.dom,o,s;while(r--){i=t[r];o=i.attr(n);s="data-mce-"+n;if(!i.attributes.map[s]){if(o.indexOf("data:")===0||o.indexOf("blob:")===0){continue}if(n==="style"){o=a.serializeStyle(a.parseStyle(o),i.name);if(!o.length){o=null}i.attr(s,o);i.attr(n,o)}else if(n==="tabindex"){i.attr(s,o);i.attr(n,null)}else{i.attr(s,e.convertURL(o,n,i.name))}}}});t.addNodeFilter("script",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("type")||"no/type";if(r.indexOf("mce-")!==0){n.attr("type","mce-"+r)}}});t.addNodeFilter("#cdata",function(e){var t=e.length,n;while(t--){n=e[t];n.type=8;n.name="#comment";n.value="[CDATA["+n.value+"]]"}});t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){var n=t.length,r,i=e.schema.getNonEmptyElements();while(n--){r=t[n];if(r.isEmpty(i)&&r.getAll("br").length===0){r.append(new m("br",1)).shortEnded=true}}});return t};var T=function(e){if(e.settings.auto_focus){b.setEditorTimeout(e,function(){var t;if(e.settings.auto_focus===true){t=e}else{t=e.editorManager.get(e.settings.auto_focus)}if(!t.destroyed){t.focus()}},100)}};var S=function(e){e.bindPendingEventDelegates();e.initialized=true;e.fire("init");e.focus(true);e.nodeChanged({initial:true});e.execCallback("init_instance_callback",e);T(e)};var E=function(e){return e.inline?_.styleSheetLoader:e.dom.styleSheetLoader};var A=function(e,t){var n=e.settings,v=e.getElement(),m=e.getDoc(),b,T;if(!n.inline){e.getElement().style.visibility=e.orgVisibility}if(!t&&!n.content_editable){m.open();m.write(e.iframeHTML);m.close()}if(n.content_editable){e.on("remove",function(){var e=this.getBody();_.removeClass(e,"mce-content-body");_.removeClass(e,"mce-edit-focus");_.setAttrib(e,"contentEditable",null)});_.addClass(v,"mce-content-body");e.contentDocument=m=n.content_document||r;e.contentWindow=n.content_window||i;e.bodyElement=v;n.content_document=n.content_window=null;n.root_name=v.nodeName.toLowerCase()}b=e.getBody();b.disabled=true;e.readonly=n.readonly;if(!e.readonly){if(e.inline&&_.getStyle(b,"position",true)==="static"){b.style.position="relative"}b.contentEditable=e.getParam("content_editable_state",true)}b.disabled=false;e.editorUpload=new a(e);e.schema=new g(n);e.dom=new h(m,{keep_values:true,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:true,root_element:e.inline?e.getBody():null,collect:n.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}});e.parser=C(e);e.serializer=new f(n,e);e.selection=new p(e.dom,e.getWin(),e.serializer,e);e.formatter=new c(e);e.undoManager=new l(e);e._nodeChangeDispatcher=new s(e);e._selectionOverrides=new u(e);d.setup(e);y.setup(e);o.setup(e);e.fire("PreInit");if(!n.browser_spellcheck&&!n.gecko_spellcheck){m.body.spellcheck=false;_.setAttrib(b,"spellcheck","false")}e.quirks=new x(e);e.fire("PostRender");if(n.directionality){b.dir=n.directionality}if(n.nowrap){b.style.whiteSpace="nowrap"}if(n.protect){e.on("BeforeSetContent",function(e){w.each(n.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})})}e.on("SetContent",function(){e.addVisual(e.getBody())});if(n.padd_empty_editor){e.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}e.load({initial:true,format:"html"});e.startContent=e.getContent({format:"raw"});e.on("compositionstart compositionend",function(t){e.composing=t.type==="compositionstart"});if(e.contentStyles.length>0){T="";w.each(e.contentStyles,function(e){T+=e+"\r\n"});e.dom.addStyle(T)}E(e).loadAll(e.contentCSS,function(t){S(e)},function(t){S(e)});if(n.content_style){k(e,n.content_style)}};return{initContentBody:A}});a("tinymce.core.init.InitIframe",["ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!document","global!window","tinymce.core.Env","tinymce.core.api.Settings","tinymce.core.dom.DOMUtils","tinymce.core.init.InitContentBody","tinymce.core.util.Uuid"],function(e,t,n,r,i,a,o,s,u,l){var c=s.DOM;var f=function(e,t){if(r.domain!==i.location.hostname&&a.ie&&a.ie<12){var n=l.uuid("mce");e[n]=function(){u.initContentBody(e)};var o="javascript:(function(){"+'document.open();document.domain="'+r.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed."+n+"(true);})()";c.setAttrib(t,"src",o);return true}return false};var d=function(e){var t=typeof e==="number"?e+"px":e;return t?t:""};var h=function(r,i,a,o){var s=e.fromTag("iframe");t.setAll(s,o);t.setAll(s,{id:r+"_ifr",frameBorder:"0",allowTransparency:"true",title:i});n.setAll(s,{width:"100%",height:d(a),display:"block"});return s};var p=function(e){var t,n,r;r=o.getDocType(e)+"<html><head>";if(o.getDocumentBaseUrl(e)!==e.documentBaseUrl){r+='<base href="'+e.documentBaseURI.getURI()+'" />'}r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';t=o.getBodyId(e);n=o.getBodyClass(e);if(o.getContentSecurityPolicy(e)){r+='<meta http-equiv="Content-Security-Policy" content="'+o.getContentSecurityPolicy(e)+'" />'}r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>';return r};var v=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help");var r=h(e.id,n,t.height,o.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null;e.fire("load")};var i=f(e,r);e.contentAreaContainer=t.iframeContainer;e.iframeElement=r;e.iframeHTML=p(e);c.add(t.iframeContainer,r);return i};var m=function(e,t){var n=v(e,t);if(t.editorContainer){c.get(t.editorContainer).style.display=e.orgDisplay;e.hidden=c.isHidden(t.editorContainer)}e.getElement().style.display="none";c.setAttrib(e.id,"aria-hidden",true);if(!n){u.initContentBody(e)}};return{init:m}});a("tinymce.core.init.Init",["ephox.katamari.api.Type","global!document","global!window","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.dom.DOMUtils","tinymce.core.init.InitContentBody","tinymce.core.init.InitIframe","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u){var l=a.DOM;var c=function(e,t,n){var i=r.get(n),a,o;a=r.urls[n]||e.documentBaseUrl.replace(/\/$/,"");n=u.trim(n);if(i&&u.inArray(t,n)===-1){u.each(r.dependencies(n),function(n){c(e,t,n)});if(e.plugins[n]){return}o=new i(e,a,e.$);e.plugins[n]=o;if(o.init){o.init(e,a);t.push(n)}}};var f=function(e){return e.replace(/^\-/,"")};var d=function(e){var t=[];u.each(e.settings.plugins.split(/[ ,]/),function(n){c(e,t,f(n))})};var h=function(t){var n,r=t.settings.theme;if(e.isString(r)){t.settings.theme=f(r);n=i.get(r);t.theme=new n(t,i.urls[r]);if(t.theme.init){t.theme.init(t,i.urls[r]||t.documentBaseUrl.replace(/\/$/,""),t.$)}}else{t.theme={}}};var p=function(e){var t,n,r,i,a,o=e.settings,s=e.getElement();t=o.width||l.getStyle(s,"width")||"100%";n=o.height||l.getStyle(s,"height")||s.offsetHeight;r=o.min_height||100;i=/^[0-9\.]+(|px)$/i;if(i.test(""+t)){t=Math.max(parseInt(t,10),100)}if(i.test(""+n)){n=Math.max(parseInt(n,10),r)}a=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:o.delta_width,deltaHeight:o.delta_height});if(!o.content_editable){n=(a.iframeHeight||n)+(typeof n==="number"?a.deltaHeight||0:"");if(n<r){n=r}}a.height=n;return a};var v=function(e){var t,n=e.getElement();t=e.settings.theme(e,n);if(t.editorContainer.nodeType){t.editorContainer.id=t.editorContainer.id||e.id+"_parent"}if(t.iframeContainer&&t.iframeContainer.nodeType){t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"}t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight;return t};var m=function(e){return{editorContainer:e,iframeContainer:e}};var g=function(e){var t=l.create("div");l.insertAfter(t,e);return m(t)};var y=function(e){var t=e.getElement();return e.inline?m(null):g(t)};var b=function(t){var n=t.settings,r=t.getElement();t.orgDisplay=r.style.display;if(e.isString(n.theme)){return p(t)}else if(e.isFunction(n.theme)){return v(t)}else{return y(t)}};var x=function(e){var t=e.settings,n=e.getElement(),r;e.rtl=t.rtl_ui||e.editorManager.i18n.rtl;e.editorManager.i18n.setCode(t.language);t.aria_label=t.aria_label||l.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area"));e.fire("ScriptsLoaded");h(e);d(e);r=b(e);e.editorContainer=r.editorContainer?r.editorContainer:null;if(t.content_css){u.each(u.explode(t.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))})}if(t.content_editable){return o.initContentBody(e)}else{return s.init(e,r)}};return{init:x}});a("tinymce.core.init.Render",["ephox.katamari.api.Type","global!window","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c,f,d){var h=i.DOM;var p=function(e){return e.charAt(0)==="-"};var v=function(e,t){var n=t.settings;if(n.language&&n.language!=="en"&&!n.language_url){n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"}if(n.language_url&&!t.editorManager.i18n.data[n.language]){e.add(n.language_url)}};var m=function(t,n,r,i){var a=n.settings,o=a.theme;if(e.isString(o)){if(!p(o)&&!f.urls.hasOwnProperty(o)){var s=a.theme_url;if(s){f.load(o,n.documentBaseURI.toAbsolute(s))}else{f.load(o,"themes/"+o+"/theme"+r+".js")}}t.loadQueue(function(){f.waitFor(o,i)})}else{i()}};var g=function(e,t){if(d.isArray(e.plugins)){e.plugins=e.plugins.join(" ")}d.each(e.external_plugins,function(t,n){c.load(n,t);e.plugins+=" "+n});d.each(e.plugins.split(/[ ,]/),function(e){e=d.trim(e);if(e&&!c.urls[e]){if(p(e)){e=e.substr(1,e.length);var n=c.dependencies(e);d.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=c.createUrl(n,e);c.load(e.resource,e)})}else{c.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}}})};var y=function(e,t){var n=o.ScriptLoader;m(n,e,t,function(){v(n,e);g(e.settings,t);n.loadQueue(function(){if(!e.removed){l.init(e)}},e,function(t){u.pluginLoadError(e,t[0]);if(!e.removed){l.init(e)}})})};var b=function(e){var i=e.settings,o=e.id;var u=function(){h.unbind(t,"ready",u);e.render()};if(!a.Event.domLoaded){h.bind(t,"ready",u);return}if(!e.getElement()){return}if(!s.contentEditable){return}if(!i.inline){e.orgVisibility=e.getElement().style.visibility;e.getElement().style.visibility="hidden"}else{e.inline=true}var l=e.getElement().form||h.getParent(o,"form");if(l){e.formElement=l;if(i.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)){h.insertAfter(h.create("input",{type:"hidden",name:o}),o);e.hasHiddenInput=true}e.formEventDelegate=function(t){e.fire(t.type,t)};h.bind(l,"submit reset",e.formEventDelegate);e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})});if(i.submit_patch&&!l.submit.nodeType&&!l.submit.length&&!l._mceOldSubmit){l._mceOldSubmit=l.submit;l.submit=function(){e.editorManager.triggerSave();e.setDirty(false);return l._mceOldSubmit(l)}}}e.windowManager=new r(e);e.notificationManager=new n(e);if(i.encoding==="xml"){e.on("GetContent",function(e){if(e.save){e.content=h.encode(e.content)}})}if(i.add_form_submit_trigger){e.on("submit",function(){if(e.initialized){e.save()}})}if(i.add_unload_trigger){e._beforeUnload=function(){if(e.initialized&&!e.destroyed&&!e.isHidden()){e.save({format:"raw",no_events:true,set_dirty:false})}};e.editorManager.on("BeforeUnload",e._beforeUnload)}e.editorManager.add(e);y(e,e.suffix)};return{render:b}});a("tinymce.core.ui.Sidebar",[],function(){var e=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n});e.sidebars=r};return{add:e}});a("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){var n=t.each,r=t.trim;var i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");var a={ftp:21,http:80,https:443,mailto:25};var o=function(t,a){var s=this,u,l;t=r(t);a=s.settings=a||{};u=a.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){s.source=t;return}var c=t.indexOf("//")===0;if(t.indexOf("/")===0&&!c){t=(u?u.protocol||"http":"http")+"://mce_host"+t}if(!/^[\w\-]*:?\/\//.test(t)){l=a.base_uri?a.base_uri.path:new o(e.location.href).directory;if(a.base_uri.protocol===""){t="//mce_host"+s.toAbsPath(l,t)}else{t=/([^#?]*)([#?]?.*)/.exec(t);t=(u&&u.protocol||"http")+"://mce_host"+s.toAbsPath(l,t[1])+t[2]}}t=t.replace(/@@/g,"(mce_at)");t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);n(i,function(e,n){var r=t[n];if(r){r=r.replace(/\(mce_at\)/g,"@@")}s[e]=r});if(u){if(!s.protocol){s.protocol=u.protocol}if(!s.userInfo){s.userInfo=u.userInfo}if(!s.port&&s.host==="mce_host"){s.port=u.port}if(!s.host||s.host==="mce_host"){s.host=u.host}s.source=""}if(c){s.protocol=""}};o.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t=this,n;if(e==="./"){return e}e=new o(e,{base_uri:t});if(e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol&&e.protocol!==""){return e.getURI()}var r=t.getURI(),i=e.getURI();if(r==i||r.charAt(r.length-1)=="/"&&r.substr(0,r.length-1)==i){return r}n=t.toRelPath(t.path,e.path);if(e.query){n+="?"+e.query}if(e.anchor){n+="#"+e.anchor}return n},toAbsolute:function(e,t){e=new o(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port){return true}var t=a[this.protocol];if(t&&(this.port||t)==(e.port||t)){return true}}return false},toRelPath:function(e,t){var n,r=0,i="",a,o;e=e.substring(0,e.lastIndexOf("/"));e=e.split("/");n=t.split("/");if(e.length>=n.length){for(a=0,o=e.length;a<o;a++){if(a>=n.length||e[a]!=n[a]){r=a+1;break}}}if(e.length<n.length){for(a=0,o=n.length;a<o;a++){if(a>=e.length||e[a]!=n[a]){r=a+1;break}}}if(r===1){return t}for(a=0,o=e.length-(r-1);a<o;a++){i+="../"}for(a=r-1,o=n.length;a<o;a++){if(a!=r-1){i+="/"+n[a]}else{i+=n[a]}}return i},toAbsPath:function(e,t){var r,i=0,a=[],o,s;o=/\/$/.test(t)?"/":"";e=e.split("/");t=t.split("/");n(e,function(e){if(e){a.push(e)}});e=a;for(r=t.length-1,a=[];r>=0;r--){if(t[r].length===0||t[r]==="."){continue}if(t[r]===".."){i++;continue}if(i>0){i--;continue}a.push(t[r])}r=e.length-i;if(r<=0){s=a.reverse().join("/")}else{s=e.slice(0,r).join("/")+"/"+a.reverse().join("/")}if(s.indexOf("/")!==0){s="/"+s}if(o&&s.lastIndexOf("/")!==s.length-1){s+=o}return s},getURI:function(e){var t,n=this;if(!n.source||e){t="";if(!e){if(n.protocol){t+=n.protocol+"://"}else{t+="//"}if(n.userInfo){t+=n.userInfo+"@"}if(n.host){t+=n.host}if(n.port){t+=":"+n.port}}if(n.path){t+=n.path}if(n.query){t+="?"+n.query}if(n.anchor){t+="#"+n.anchor}n.source=t}return n.source}};o.parseDataUri=function(e){var t,n;e=decodeURIComponent(e).split(",");n=/data:([^;]+)/.exec(e[0]);if(n){t=n[1]}return{type:t,data:e[1]}};o.getDocumentBaseUrl=function(e){var t;if(e.protocol.indexOf("http")!==0&&e.protocol!=="file:"){t=e.href}else{t=e.protocol+"//"+e.host+e.pathname}if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)){t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(t)){t+="/"}}return t};return o});a("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.EditorCommands","tinymce.core.EditorObservable","tinymce.core.EditorSettings","tinymce.core.Env","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.dom.TrimHtml","tinymce.core.focus.EditorFocus","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m){var g=s.DOM;var y=p.extend,b=p.each;var x=p.trim,w=p.resolve;var _=i.ie;var k=function(n,a,s){var l=this,c,f;c=l.documentBaseUrl=s.documentBaseURL;f=s.baseURI;a=r.getEditorSettings(l,n,c,s.defaultSettings,a);l.settings=a;e.language=a.language||"en";e.languageLoad=a.language_load;e.baseURL=s.baseURL;l.id=n;l.setDirty(false);l.plugins={};l.documentBaseURI=new v(a.document_base_url,{base_uri:f});l.baseURI=f;l.contentCSS=[];l.contentStyles=[];l.shortcuts=new o(l);l.loadedCSS={};l.editorCommands=new t(l);l.suffix=s.suffix;l.editorManager=s;l.inline=a.inline;l.buttons={};l.menuItems={};if(a.cache_suffix){i.cacheSuffix=a.cache_suffix.replace(/^[\?\&]+/,"")}if(a.override_viewport===false){i.overrideViewPort=false}s.fire("SetupEditor",l);l.execCallback("setup",l);l.$=u.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})};k.prototype={render:function(){d.render(this)},focus:function(e){c.focus(this,e)},execCallback:function(e){var t=this,n=t.settings[e],r;if(!n){return}if(t.callbackLookup&&(r=t.callbackLookup[e])){n=r.func;r=r.scope}if(typeof n==="string"){r=n.replace(/\.\w+$/,"");r=r?w(r):0;n=w(n);t.callbackLookup=t.callbackLookup||{};t.callbackLookup[e]={func:n,scope:r}}return n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&p.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;if(n==="hash"){i={};if(typeof r==="string"){b(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("=");if(e.length>1){i[x(e[0])]=x(e[1])}else{i[x(e[0])]=x(e)}})}else{i=r}return i}return r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}if(t.stateSelector&&typeof t.active==="undefined"){t.active=false}if(!t.text&&!t.icon){t.icon=e}n.buttons=n.buttons;t.tooltip=t.tooltip||t.title;n.buttons[e]=t},addSidebar:function(e,t){return h.add(this,e,t)},addMenuItem:function(e,t){var n=this;if(t.cmd){t.onclick=function(){n.execCommand(t.cmd)}}n.menuItems=n.menuItems;n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,r;n.contextToolbars=n.contextToolbars||[];if(typeof e=="string"){r=e;e=function(e){return n.dom.is(e,r)}}n.contextToolbars.push({id:m.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;if(e.hidden){e.hidden=false;if(e.inline){e.getBody().contentEditable=true}else{g.show(e.getContainer());g.hide(e.id)}e.load();e.fire("show")}},hide:function(){var e=this,t=e.getDoc();if(!e.hidden){if(_&&t&&!e.inline){t.execCommand("SelectAll")}e.save();if(e.inline){e.getBody().contentEditable=false;if(e==e.editorManager.focusedEditor){e.editorManager.focusedEditor=null}}else{g.hide(e.getContainer());g.setStyle(e.id,"display",e.orgDisplay)}e.hidden=true;e.fire("hide")}},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t=this,n=t.getElement(),r;if(t.removed){return""}if(n){e=e||{};e.load=true;r=t.setContent(n.value!==undefined?n.value:n.innerHTML,e);e.element=n;if(!e.no_events){t.fire("LoadContent",e)}e.element=n=null;return r}},save:function(e){var t=this,n=t.getElement(),r,i;if(!n||!t.initialized||t.removed){return}e=e||{};e.save=true;e.element=n;r=e.content=t.getContent(e);if(!e.no_events){t.fire("SaveContent",e)}if(e.format=="raw"){t.fire("RawSaveContent",e)}r=e.content;if(!/TEXTAREA|INPUT/i.test(n.nodeName)){if(!t.inline){n.innerHTML=r}if(i=g.getParent(t.id,"form")){b(i.elements,function(e){if(e.name==t.id){e.value=r;return false}})}}else{n.value=r}e.element=n=null;if(e.set_dirty!==false){t.setDirty(false)}return r},setContent:function(e,t){var n=this,r=n.getBody(),i,a;t=t||{};t.format=t.format||"html";t.set=true;t.content=e;if(!t.no_events){n.fire("BeforeSetContent",t)}e=t.content;if(e.length===0||/^\s+$/.test(e)){a=_&&_<11?"":'<br data-mce-bogus="1">';if(r.nodeName=="TABLE"){e="<tr><td>"+a+"</td></tr>"}else if(/^(UL|OL)$/.test(r.nodeName)){e="<li>"+a+"</li>"}i=n.settings.forced_root_block;if(i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())){e=a;e=n.dom.createHTML(i,n.settings.forced_root_block_attrs,e)}else if(!_&&!e){e='<br data-mce-bogus="1">'}n.dom.setHTML(r,e);n.fire("SetContent",t)}else{if(t.format!=="raw"){e=new f({validate:n.validate},n.schema).serialize(n.parser.parse(e,{isRootContent:true,insert:true}))}t.content=x(e);n.dom.setHTML(r,t.content);if(!t.no_events){n.fire("SetContent",t)}}return t.content},getContent:function(e){var t=this,n,r=t.getBody();if(t.removed){return""}e=e||{};e.format=e.format||"html";e.get=true;e.getInner=true;if(!e.no_events){t.fire("BeforeGetContent",e)}if(e.format==="raw"){n=p.trim(l.trimExternal(t.serializer,r.innerHTML))}else if(e.format==="text"){n=r.innerText||r.textContent}else if(e.format==="tree"){return t.serializer.serialize(r,e)}else{n=t.serializer.serialize(r,e)}if(e.format!=="text"){e.content=x(n)}else{e.content=n}if(!e.no_events){t.fire("GetContent",e)}return e.content},insertContent:function(e,t){if(t){e=y({content:e},t)}this.execCommand("mceInsertContent",false,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e;if(e&&e!=t){this.fire("dirty")}},setMode:function(e){a.setMode(this,e)},getContainer:function(){var e=this;if(!e.container){e.container=g.get(e.editorContainer||e.id+"_parent")}return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){if(!this.targetElm){this.targetElm=g.get(this.id)}return this.targetElm},getWin:function(){var e=this,t;if(!e.contentWindow){t=e.iframeElement;if(t){e.contentWindow=t.contentWindow}}return e.contentWindow},getDoc:function(){var e=this,t;if(!e.contentDocument){t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback){return r.execCallback("urlconverter_callback",e,n,true,t)}if(!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0||e.length===0){return e}if(i.relative_urls){return r.documentBaseURI.toRelative(e)}e=r.documentBaseURI.toAbsolute(e,i.remove_script_host);return e},addVisual:function(e){var t=this,n=t.settings,r=t.dom,i;e=e||t.getBody();if(t.hasVisual===undefined){t.hasVisual=n.visual}b(r.select("table,a",e),function(e){var a;switch(e.nodeName){case"TABLE":i=n.visual_table_class||"mce-item-table";a=r.getAttrib(e,"border");if((!a||a=="0")&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}return;case"A":if(!r.getAttrib(e,"href",false)){a=r.getAttrib(e,"name")||e.id;i=n.visual_anchor_class||"mce-item-anchor";if(a&&t.hasVisual){r.addClass(e,i)}else{r.removeClass(e,i)}}return}});t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})},remove:function(){var e=this;if(!e.removed){e.save();e.removed=1;e.unbindAllNativeEvents();if(e.hasHiddenInput){g.remove(e.getElement().nextSibling)}if(!e.inline){if(_&&_<10){e.getDoc().execCommand("SelectAll",false,null)}g.setStyle(e.id,"display",e.orgDisplay);e.getBody().onload=null}e.fire("remove");e.editorManager.remove(e);g.remove(e.getContainer());e._selectionOverrides.destroy();e.editorUpload.destroy();e.destroy()}},destroy:function(e){var t=this,n;if(t.destroyed){return}if(!e&&!t.removed){t.remove();return}if(!e){t.editorManager.off("beforeunload",t._beforeUnload);if(t.theme&&t.theme.destroy){t.theme.destroy()}t.selection.destroy();t.dom.destroy()}n=t.formElement;if(n){if(n._mceOldSubmit){n.submit=n._mceOldSubmit;n._mceOldSubmit=null}g.unbind(n,"submit reset",t.formEventDelegate)}t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null;t.bodyElement=t.contentDocument=t.contentWindow=null;t.iframeElement=t.targetElm=null;if(t.selection){t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null}t.destroyed=1},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}};y(k.prototype,n);return k});a("tinymce.core.api.FocusManager",["global!document"],function(e){var t=function(e){return e.className.toString().indexOf("mce-")!==-1};return{isEditorUIElement:t}});a("tinymce.core.selection.SelectionRestore",["ephox.katamari.api.Throttler","ephox.sand.api.PlatformDetection","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark"],function(e,t,n,r,i){var a=function(e){return e.type==="nodechange"&&e.selectionChange};var o=function(e,t){var i=function(){t.throttle()};r.DOM.bind(n,"mouseup",i);e.on("remove",function(){r.DOM.unbind(n,"mouseup",i)})};var s=function(e){e.on("focusout",function(){i.store(e)})};var u=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})};var l=function(e,n){var r=t.detect().browser;if(r.isIE()||r.isEdge()){s(e)}else{u(e,n)}e.on("keyup nodechange",function(t){if(!a(t)){i.store(e)}})};var c=function(t){var n=e.first(function(){i.store(t)},0);if(t.inline){o(t,n)}t.on("init",function(){l(t,n)});t.on("remove",function(){n.cancel()})};return{register:c}});a("tinymce.core.focus.FocusController",["ephox.katamari.api.Fun","global!document","tinymce.core.api.FocusManager","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionRestore","tinymce.core.util.Delay"],function(e,t,n,r,i,a){var o,s=r.DOM;var u=function(e){return n.isEditorUIElement(e)};var l=function(e,t){var n=e?e.settings.custom_ui_selector:"";var r=s.getParent(t,function(t){return u(t)||(n?e.dom.is(t,n):false)});return r!==null};var c=function(){try{return t.activeElement}catch(e){return t.body}};var f=function(e,n){var r=n.editor;i.register(r);r.on("focusin",function(){var t=e.focusedEditor;if(t!=r){if(t){t.fire("blur",{focusedEditor:r})}e.setActive(r);e.focusedEditor=r;r.fire("focus",{blurredEditor:t});r.focus(true)}});r.on("focusout",function(){a.setEditorTimeout(r,function(){var t=e.focusedEditor;if(!l(r,c())&&t==r){r.fire("blur",{focusedEditor:null});e.focusedEditor=null}})});if(!o){o=function(n){var r=e.activeEditor,i;i=n.target;if(r&&i.ownerDocument===t){if(i!==t.body&&!l(r,i)&&e.focusedEditor===r){r.fire("blur",{focusedEditor:null});e.focusedEditor=null}}};s.bind(t,"focusin",o)}};var d=function(e,n){if(e.focusedEditor==n.editor){e.focusedEditor=null}if(!e.activeEditor){s.unbind(t,"focusin",o);o=null}};var h=function(t){t.on("AddEditor",e.curry(f,t));t.on("RemoveEditor",e.curry(d,t))};return{setup:h,isEditorUIElement:u,isUIElement:l}});a("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";return{setCode:function(e){if(e){n=e;this.rtl=this.data[e]?this.data[e]._dir==="rtl":false}},getCode:function(){return n},rtl:false,add:function(e,n){var r=t[e];if(!r){t[e]=r={}}for(var i in n){r[i]=n[i]}this.setCode(e)},translate:function(r){var i=t[n]||{};var a=function(t){if(e.is(t,"function")){return Object.prototype.toString.call(t)}return!o(t)?""+t:""};var o=function(t){return t===""||t===null||e.is(t,"undefined")};var s=function(t){t=a(t);return e.hasOwn(i,t)?a(i[t]):t};if(o(r)){return""}if(e.is(r,"object")&&e.hasOwn(r,"raw")){return a(r.raw)}if(e.is(r,"array")){var u=r.slice(1);r=s(r[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(u,n)?a(u[n]):t})}return s(r).replace(/{context:\w+}$/,"")},data:t}});a("tinymce.core.EditorManager",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!document","global!window","tinymce.core.AddOnManager","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.focus.FocusController","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v){var m=u.DOM;var g=p.explode,y=p.each,b=p.extend;var x=0,w,_,k=false;var C=[],T=[];var S=function(e){return e!=="length"};var E=function(e){y(_.get(),function(t){if(e.type==="scroll"){t.fire("ScrollWindow",e)}else{t.fire("ResizeWindow",e)}})};var A=function(e){if(e!==k){if(e){l(r).on("resize scroll",E)}else{l(r).off("resize scroll",E)}k=e}};var P=function(t){var n=T;delete C[t.id];for(var r=0;r<C.length;r++){if(C[r]===t){C.splice(r,1);break}}T=e.filter(T,function(e){return t!==e});if(_.activeEditor===t){_.activeEditor=T.length>0?T[0]:null}if(_.focusedEditor===t){_.focusedEditor=null}return n.length!==T.length};var O=function(e){if(e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode){P(e);e.unbindAllNativeEvents();e.destroy(true);e.removed=true;e=null}return e};_={defaultSettings:{},$:l,majorVersion:"4",minorVersion:"7.4",releaseDate:"2017-12-05",editors:C,i18n:f,activeEditor:null,settings:{},setup:function(){var e=this,t,i,a="",o,s;i=v.getDocumentBaseUrl(n.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(i)){i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(i)){i+="/"}}o=r.tinymce||r.tinyMCEPreInit;if(o){t=o.base||o.baseURL;a=o.suffix}else{var u=n.getElementsByTagName("script");for(var l=0;l<u.length;l++){s=u[l].src;var f=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){if(f.indexOf(".min")!=-1){a=".min"}t=s.substring(0,s.lastIndexOf("/"));break}}if(!t&&n.currentScript){s=n.currentScript.src;if(s.indexOf(".min")!=-1){a=".min"}t=s.substring(0,s.lastIndexOf("/"))}}e.baseURL=new v(i).toAbsolute(t);e.documentBaseURL=i;e.baseURI=new v(e.baseURL);e.suffix=a;c.setup(e)},overrideDefaults:function(e){var t,n;t=e.base_url;if(t){this.baseURL=new v(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,""));this.baseURI=new v(this.baseURL)}n=e.suffix;if(e.suffix){this.suffix=n}this.defaultSettings=e;var r=e.plugin_base_urls;for(var a in r){i.PluginManager.urls[a]=r[a]}},init:function(e){var t=this,i,u;u=p.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track "+"colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var c=function(e,t){return e.inline&&t.tagName.toLowerCase()in u};var f=function(e){var t=e.id;if(!t){t=e.name;if(t&&!m.get(t)){t=e.name}else{t=m.uniqueId()}e.setAttribute("id",t)}return t};var d=function(n){var r=e[n];if(!r){return}return r.apply(t,Array.prototype.slice.call(arguments,2))};var v=function(e,t){return t.constructor===RegExp?t.test(e.className):m.hasClass(e,t)};var w=function(e){var t,r=[];if(o.ie&&o.ie<11){s.initError("TinyMCE does not support the browser you are using. For a list of supported"+" browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/");return[]}if(e.types){y(e.types,function(e){r=r.concat(m.select(e.selector))});return r}else if(e.selector){return m.select(e.selector)}else if(e.target){return[e.target]}switch(e.mode){case"exact":t=e.elements||"";if(t.length>0){y(g(t),function(e){var t;if(t=m.get(e)){r.push(t)}else{y(n.forms,function(t){y(t.elements,function(t){if(t.name===e){e="mce_editor_"+x++;m.setAttrib(t,"id",e);r.push(t)}})})}})}break;case"textareas":case"specific_textareas":y(m.select("textarea"),function(t){if(e.editor_deselector&&v(t,e.editor_deselector)){return}if(!e.editor_selector||v(t,e.editor_selector)){r.push(t)}});break}return r};var _=function(e){i=e};var k=function(){var n=0,i=[],o;var u=function(e,r,s){var u=new a(e,r,t);i.push(u);u.on("init",function(){if(++n===o.length){_(i)}});u.targetElm=u.targetElm||s;u.render()};m.unbind(r,"ready",k);d("onpageload");o=l.unique(w(e));if(e.types){y(e.types,function(t){p.each(o,function(n){if(m.is(n,t.selector)){u(f(n),b({},e,t),n);return false}return true})});return}p.each(o,function(e){O(t.get(e.id))});o=p.grep(o,function(e){return!t.get(e.id)});if(o.length===0){_([])}else{y(o,function(t){if(c(e,t)){s.initError("Could not initialize inline editor on invalid inline target element",t)}else{u(f(t),e,t)}})}};t.settings=e;m.bind(r,"ready",k);return new h(function(e){if(i){e(i)}else{_=function(t){e(t)}}})},get:function(n){if(arguments.length===0){return T.slice(0)}else if(t.isString(n)){return e.find(T,function(e){return e.id===n}).getOr(null)}else if(t.isNumber(n)){return T[n]?T[n]:null}else{return null}},add:function(e){var t=this,n;n=C[e.id];if(n===e){return e}if(t.get(e.id)===null){if(S(e.id)){C[e.id]=e}C.push(e);T.push(e)}A(true);t.activeEditor=e;t.fire("AddEditor",{editor:e});if(!w){w=function(){t.fire("BeforeUnload")};m.bind(r,"beforeunload",w)}return e},createEditor:function(e,t){return this.add(new a(e,t,this))},remove:function(e){var n=this,i,a;if(!e){for(i=T.length-1;i>=0;i--){n.remove(T[i])}return}if(t.isString(e)){e=e.selector||e;y(m.select(e),function(e){a=n.get(e.id);if(a){n.remove(a)}});return}a=e;if(t.isNull(n.get(a.id))){return null}if(P(a)){n.fire("RemoveEditor",{editor:a})}if(T.length===0){m.unbind(r,"beforeunload",w)}a.remove();A(T.length>0);return a},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":if(!r.get(n)){new a(n,r.settings,r).render()}return true;case"mceRemoveEditor":if(i){i.remove()}return true;case"mceToggleEditor":if(!i){r.execCommand("mceAddEditor",0,n);return true}if(i.isHidden()){i.show()}else{i.hide()}return true}if(r.activeEditor){return r.activeEditor.execCommand(e,t,n)}return false},triggerSave:function(){y(T,function(e){e.save()})},addI18n:function(e,t){f.add(e,t)},translate:function(e){return f.translate(e)},setActive:function(e){var t=this.activeEditor;if(this.activeEditor!=e){if(t){t.fire("deactivate",{relatedTarget:e})}e.fire("activate",{relatedTarget:t})}this.activeEditor=e}};b(_,d);_.setup();return _});a("tinymce.core.api.dom.RangeUtils",["ephox.katamari.api.Fun","tinymce.core.selection.CaretRangeFromPoint","tinymce.core.selection.NormalizeRange","tinymce.core.selection.RangeCompare","tinymce.core.selection.RangeNodes","tinymce.core.selection.RangeWalk","tinymce.core.selection.SplitRange"],function(e,t,n,r,i,a,o){var s=function(t){var r=function(e,n){return a.walk(t,e,n)};var i=o.split;var s=function(r){return n.normalize(t,r).fold(e.constant(false),function(e){r.setStart(e.startContainer,e.startOffset);r.setEnd(e.endContainer,e.endOffset);return true})};return{walk:r,split:i,normalize:s}};s.compareRanges=r.isEq;s.getCaretRangeFromPoint=t.fromPoint;s.getSelectedNode=i.getSelectedNode;s.getNode=i.getNode;return s});a("tinymce.core.geom.Rect",[],function(){"use strict";var e=Math.min,t=Math.max,n=Math.round;var r=function(e,t,r){var i,a,o,s,l,c;i=t.x;a=t.y;o=e.w;s=e.h;l=t.w;c=t.h;r=(r||"").split("");if(r[0]==="b"){a+=c}if(r[1]==="r"){i+=l}if(r[0]==="c"){a+=n(c/2)}if(r[1]==="c"){i+=n(l/2)}if(r[3]==="b"){a-=s}if(r[4]==="r"){i-=o}if(r[3]==="c"){a-=n(s/2)}if(r[4]==="c"){i-=n(o/2)}return u(i,a,o,s)};var i=function(e,t,n,i){var a,o;for(o=0;o<i.length;o++){a=r(e,t,i[o]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y){return i[o]}}return null};var a=function(e,t,n){return u(e.x-t,e.y-n,e.w+t*2,e.h+n*2)};var o=function(n,r){var i,a,o,s;i=t(n.x,r.x);a=t(n.y,r.y);o=e(n.x+n.w,r.x+r.w);s=e(n.y+n.h,r.y+r.h);if(o-i<0||s-a<0){return null}return u(i,a,o-i,s-a)};var s=function(e,n,r){var i,a,o,s,l,c,f,d,h,p;l=e.x;c=e.y;f=e.x+e.w;d=e.y+e.h;h=n.x+n.w;p=n.y+n.h;i=t(0,n.x-l);a=t(0,n.y-c);o=t(0,f-h);s=t(0,d-p);l+=i;c+=a;if(r){f+=i;d+=a;l-=o;c-=s}f-=o;d-=s;return u(l,c,f-l,d-c)};var u=function(e,t,n,r){return{x:e,y:t,w:n,h:r}};var l=function(e){return u(e.left,e.top,e.width,e.height)};return{inflate:a,relativePosition:r,findBestRelativePosition:i,intersect:o,clamp:s,create:u,fromClientRect:l}});a("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},get:function(t){var n=t.toLowerCase();var r=e.hasOwnProperty(n)?e[n]:null;if(r===null){throw new Error("Could not find module for type: "+t)}return r},create:function(t,n){var r;if(typeof t=="string"){n=n||{};n.type=t}else{n=t;t=n.type}t=t.toLowerCase();r=e[t];if(!r){throw new Error("Could not find control by type: "+t)}r=new r(n);r.type=t;return r}}});a("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){var t=e.each,n=e.extend;var r,i;var a=function(){};a.extend=r=function(e){var a=this,o=a.prototype,s,u,l;var c=function(){var e,t,n,r=this;if(!i){if(r.init){r.init.apply(r,arguments)}t=r.Mixins;if(t){e=t.length;while(e--){n=t[e];if(n.init){n.init.apply(r,arguments)}}}}};var f=function(){return this};var d=function(e,t){return function(){var n=this,r=n._super,i;n._super=o[e];i=t.apply(n,arguments);n._super=r;return i}};i=true;s=new a;i=false;if(e.Mixins){t(e.Mixins,function(t){for(var n in t){if(n!=="init"){e[n]=t[n]}}});if(o.Mixins){e.Mixins=o.Mixins.concat(e.Mixins)}}if(e.Methods){t(e.Methods.split(","),function(t){e[t]=f})}if(e.Properties){t(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;if(e!==r){t[n]=e;return t}return t[n]}})}if(e.Statics){t(e.Statics,function(e,t){c[t]=e})}if(e.Defaults&&o.Defaults){e.Defaults=n({},o.Defaults,e.Defaults)}for(u in e){l=e[u];if(typeof l=="function"&&o[u]){s[u]=d(u,l)}else{s[u]=l}}c.prototype=s;c.constructor=c;c.extend=r;return c};return a});a("tinymce.core.util.Color",[],function(){var e=Math.min,t=Math.max,n=Math.round;var r=function(r){var i=this,a=0,o=0,s=0;var u=function(r,i,a){var o,s,u,l,c,f;o=0;s=0;u=0;r=r/255;i=i/255;a=a/255;c=e(r,e(i,a));f=t(r,t(i,a));if(c==f){u=c;return{h:0,s:0,v:u*100}}l=r==c?i-a:a==c?r-i:a-r;o=r==c?3:a==c?1:5;o=60*(o-l/(f-c));s=(f-c)/f;u=f;return{h:n(o),s:n(s*100),v:n(u*100)}};var l=function(r,i,u){var l,c,f,d;r=(parseInt(r,10)||0)%360;i=parseInt(i,10)/100;u=parseInt(u,10)/100;i=t(0,e(i,1));u=t(0,e(u,1));if(i===0){a=o=s=n(255*u);return}l=r/60;c=u*i;f=c*(1-Math.abs(l%2-1));d=u-c;switch(Math.floor(l)){case 0:a=c;o=f;s=0;break;case 1:a=f;o=c;s=0;break;case 2:a=0;o=c;s=f;break;case 3:a=0;o=f;s=c;break;case 4:a=f;o=0;s=c;break;case 5:a=c;o=0;s=f;break;default:a=o=s=0}a=n(255*(a+d));o=n(255*(o+d));s=n(255*(s+d))};var c=function(){var e=function(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e};return"#"+e(a)+e(o)+e(s)};var f=function(){return{r:a,g:o,b:s}};var d=function(){return u(a,o,s)};var h=function(e){var t;if(typeof e=="object"){if("r"in e){a=e.r;o=e.g;s=e.b}else if("v"in e){l(e.h,e.s,e.v)}}else{if(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e)){a=parseInt(t[1],10);o=parseInt(t[2],10);s=parseInt(t[3],10)}else if(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e)){a=parseInt(t[1],16);o=parseInt(t[2],16);s=parseInt(t[3],16)}else if(t=/#([0-F])([0-F])([0-F])/gi.exec(e)){a=parseInt(t[1]+t[1],16);o=parseInt(t[2]+t[2],16);s=parseInt(t[3]+t[3],16)}}a=a<0?0:a>255?255:a;o=o<0?0:o>255?255:o;s=s<0?0:s>255?255:s;return i};if(r){h(r)}i.toRgb=f;i.toHsv=d;i.toHex=c;i.parse=h};return r});a("tinymce.core.util.JSON",["global!window"],function(e){var t=function(e,n){var r,i,a,o;n=n||'"';if(e===null){return"null"}a=typeof e;if(a=="string"){i="\bb\tt\nn\ff\rr\"\"''\\\\";return n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){if(n==='"'&&e==="'"){return e}r=i.indexOf(t);if(r+1){return"\\"+i.charAt(r+1)}e=t.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+n}if(a=="object"){if(e.hasOwnProperty&&Object.prototype.toString.call(e)==="[object Array]"){for(r=0,i="[";r<e.length;r++){i+=(r>0?",":"")+t(e[r],n)}return i+"]"}i="{";for(o in e){if(e.hasOwnProperty(o)){i+=typeof e[o]!="function"?(i.length>1?","+n:n)+o+n+":"+t(e[o],n):""}}return i+"}"}return""+e};return{serialize:t,parse:function(t){try{return e[String.fromCharCode(101)+"val"]("("+t+")")}catch(e){}}}});a("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,r=e.DOM,i=t.count!==undefined?t.count:n.count;var a="tinymce_jsonp_"+i;n.callbacks[i]=function(e){r.remove(a);delete n.callbacks[i];t.callback(e)};r.add(r.doc.body,"script",{id:a,src:t.url,type:"text/javascript"});n.count++}}});a("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,r){var i={send:function(n){var a,o=0;var s=function(){if(!n.async||a.readyState==4||o++>1e4){if(n.success&&o<1e4&&a.status==200){n.success.call(n.success_scope,""+a.responseText,a,n)}else if(n.error){n.error.call(n.error_scope,o>1e4?"TIMED_OUT":"GENERAL",a,n)}a=null}else{t(s,10)}};n.scope=n.scope||this;n.success_scope=n.success_scope||n.scope;n.error_scope=n.error_scope||n.scope;n.async=n.async===false?false:true;n.data=n.data||"";i.fire("beforeInitialize",{settings:n});a=new e;if(a){if(a.overrideMimeType){a.overrideMimeType(n.content_type)}a.open(n.type||(n.data?"POST":"GET"),n.url,n.async);if(n.crossDomain){a.withCredentials=true}if(n.content_type){a.setRequestHeader("Content-Type",n.content_type)}if(n.requestheaders){r.each(n.requestheaders,function(e){a.setRequestHeader(e.key,e.value)})}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a=i.fire("beforeSend",{xhr:a,settings:n}).xhr;a.send(n.data);if(!n.async){return s()}t(s,10)}}};r.extend(i,n);return i});a("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){var r=n.extend;var i=function(e){this.settings=r({},e);this.count=0};i.sendRPC=function(e){return(new i).send(e)};i.prototype={send:function(n){var i=n.error,a=n.success;n=r(this.settings,n);n.success=function(t,r){t=e.parse(t);if(typeof t=="undefined"){t={error:"JSON Parse error."}}if(t.error){i.call(n.error_scope||n.scope,t.error,r)}else{a.call(n.success_scope||n.scope,t.result)}};n.error=function(e,t){if(i){i.call(n.error_scope||n.scope,e,t)}};n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params});n.content_type="application/json";t.send(n)}};return i});a("tinymce.core.util.LocalStorage",["global!document","global!window"],function(e,t){var n,r,i,a,o,s;try{if(t.localStorage){return t.localStorage}}catch(e){}o="tinymce";r=e.documentElement;s=!!r.addBehavior;if(s){r.addBehavior("#default#userData")}var u=function(){a=[];for(var e in i){a.push(e)}n.length=a.length};var l=function(){var e,t,n,a=0;i={};if(!s){return}var l=function(e){var n,r;r=e!==undefined?a+e:t.indexOf(",",a);if(r===-1||r>t.length){return null}n=t.substring(a,r);a=r+1;return n};r.load(o);t=r.getAttribute(o)||"";do{var c=l();if(c===null){break}e=l(parseInt(c,32)||0);if(e!==null){c=l();if(c===null){break}n=l(parseInt(c,32)||0);if(e){i[e]=n}}}while(e!==null);u()};var c=function(){var e,t="";if(!s){return}for(var n in i){e=i[n];t+=(t?",":"")+n.length.toString(32)+","+n+","+e.length.toString(32)+","+e}r.setAttribute(o,t);try{r.save(o)}catch(e){}u()};n={key:function(e){return a[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t;c()},removeItem:function(e){delete i[e];c()},clear:function(){i={};c()}};l();return n});a("tinymce.core.api.Tinymce",["tinymce.core.AddOnManager","tinymce.core.Editor","tinymce.core.EditorCommands","tinymce.core.EditorManager","tinymce.core.EditorObservable","tinymce.core.Env","tinymce.core.Shortcuts","tinymce.core.UndoManager","tinymce.core.api.FocusManager","tinymce.core.api.Formatter","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.api.dom.BookmarkManager","tinymce.core.api.dom.RangeUtils","tinymce.core.api.dom.Serializer","tinymce.core.dom.ControlSelection","tinymce.core.dom.DOMUtils","tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.dom.Selection","tinymce.core.dom.Sizzle","tinymce.core.dom.TreeWalker","tinymce.core.geom.Rect","tinymce.core.html.DomParser","tinymce.core.html.Entities","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Styles","tinymce.core.html.Writer","tinymce.core.ui.Factory","tinymce.core.util.Class","tinymce.core.util.Color","tinymce.core.util.Delay","tinymce.core.util.EventDispatcher","tinymce.core.util.I18n","tinymce.core.util.JSON","tinymce.core.util.JSONP","tinymce.core.util.JSONRequest","tinymce.core.util.LocalStorage","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.VK","tinymce.core.util.XHR"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y,b,x,w,_,k,C,T,S,E,A,P,O,M,N,R,D,B,L,I,F,j,z,H,U,W,V,q,K,Y){var $=r;var G={geom:{Rect:k},util:{Promise:W,Delay:B,Tools:V,VK:K,URI:q,Class:R,EventDispatcher:L,Observable:U,I18n:I,XHR:Y,JSON:F,JSONRequest:z,JSONP:j,LocalStorage:H,Color:D},dom:{EventUtils:y,Sizzle:w,DomQuery:g,TreeWalker:_,DOMUtils:m,ScriptLoader:b,RangeUtils:h,Serializer:p,ControlSelection:v,BookmarkManager:d,Selection:x,Event:y.Event},html:{Styles:O,Entities:T,Node:S,Schema:A,SaxParser:E,DomParser:C,Writer:M,Serializer:P},ui:{Factory:N},Env:a,AddOnManager:e,Formatter:l,UndoManager:s,EditorCommands:n,WindowManager:f,NotificationManager:c,EditorObservable:i,Shortcuts:o,Editor:t,FocusManager:u,EditorManager:r,DOM:m.DOM,ScriptLoader:b.ScriptLoader,PluginManager:e.PluginManager,ThemeManager:e.ThemeManager,trim:V.trim,isArray:V.isArray,is:V.is,toArray:V.toArray,makeMap:V.makeMap,each:V.each,map:V.map,grep:V.grep,inArray:V.inArray,extend:V.extend,create:V.create,walk:V.walk,createNS:V.createNS,resolve:V.resolve,explode:V.explode,_addCacheSuffix:V._addCacheSuffix,isOpera:a.opera,isWebKit:a.webkit,isIE:a.ie,isGecko:a.gecko,isMac:a.mac};$=V.extend($,G);return $});a("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(t,n,r){var i=this||n;var a=function(n){if(typeof i.define==="function"&&!i.define.amd){i.define("ephox/tinymce",[],t.constant(n));i.define("tinymce.core.EditorManager",[],t.constant(n))}{e.exports=n}};var o=function(e){n.tinymce=e;n.tinyMCE=e};return function(){o(r);a(r);return r}});i("tinymce.core.api.Main")()})()});(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")});i("tinymce.plugins.code.api.Settings",["tinymce.core.dom.DOMUtils"],function(e){var t=function(e){return e.getParam("code_dialog_width",600)};var n=function(t){return t.getParam("code_dialog_height",Math.min(e.DOM.getViewPort().h-200,500))};return{getMinWidth:t,getMinHeight:n}});i("tinymce.plugins.code.core.Content",[],function(){var e=function(e,t){e.focus();e.undoManager.transact(function(){e.setContent(t)});e.selection.setCursorLocation();e.nodeChanged()};var t=function(e){return e.getContent({source_view:true})};return{setContent:e,getContent:t}});i("tinymce.plugins.code.ui.Dialog",["tinymce.plugins.code.api.Settings","tinymce.plugins.code.core.Content"],function(e,t){var n=function(n){var r=e.getMinWidth(n);var i=e.getMinHeight(n);var a=n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:true,minWidth:r,minHeight:i,spellcheck:false,style:"direction: ltr; text-align: left"},onSubmit:function(e){t.setContent(n,e.data.code)}});a.find("#code").value(t.getContent(n))};return{open:n}});i("tinymce.plugins.code.api.Commands",["tinymce.plugins.code.ui.Dialog"],function(e){var t=function(t){t.addCommand("mceCodeEditor",function(){e.open(t)})};return{register:t}});i("tinymce.plugins.code.ui.Buttons",["tinymce.plugins.code.ui.Dialog"],function(e){var t=function(t){t.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){e.open(t)}});t.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){e.open(t)}})};return{register:t}});i("tinymce.plugins.code.Plugin",["tinymce.core.PluginManager","tinymce.plugins.code.api.Commands","tinymce.plugins.code.ui.Buttons"],function(e,t,n){e.add("code",function(e){t.register(e);n.register(e);return{}});return function(){}});r("tinymce.plugins.code.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};return e});a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.plugins.fullscreen.api.Api",[],function(){var e=function(e){return{isFullscreen:function(){return e.get()!==null}}};return{get:e}});a("global!document",document);a("global!window",window);i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")});i("tinymce.plugins.fullscreen.api.Events",[],function(){var e=function(e,t){e.fire("FullscreenStateChanged",{state:t})};return{fireFullscreenStateChanged:e}});i("tinymce.plugins.fullscreen.core.Actions",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.plugins.fullscreen.api.Events"],function(e,t,n,r){var i=n.DOM;var a=function(){var n,r,i=t,a=e;var o=a.body;if(o.offsetWidth){n=o.offsetWidth;r=o.offsetHeight}if(i.innerWidth&&i.innerHeight){n=i.innerWidth;r=i.innerHeight}return{w:n,h:r}};var o=function(){var e=i.getViewPort();return{x:e.x,y:e.y}};var s=function(e){t.scrollTo(e.x,e.y)};var u=function(n,u){var l=e.body,c=e.documentElement,f;var d,h,p;var v=u.get();var m=function(){i.setStyle(h,"height",a().h-(d.clientHeight-h.clientHeight))};var g=function(){i.unbind(t,"resize",m)};d=n.getContainer();f=d.style;h=n.getContentAreaContainer().firstChild;p=h.style;if(!v){var y={scrollPos:o(),containerWidth:f.width,containerHeight:f.height,iframeWidth:p.width,iframeHeight:p.height,resizeHandler:m,removeHandler:g};p.width=p.height="100%";f.width=f.height="";i.addClass(l,"mce-fullscreen");i.addClass(c,"mce-fullscreen");i.addClass(d,"mce-fullscreen");i.bind(t,"resize",m);n.on("remove",g);m();u.set(y);r.fireFullscreenStateChanged(n,true)}else{p.width=v.iframeWidth;p.height=v.iframeHeight;if(v.containerWidth){f.width=v.containerWidth}if(v.containerHeight){f.height=v.containerHeight}i.removeClass(l,"mce-fullscreen");i.removeClass(c,"mce-fullscreen");i.removeClass(d,"mce-fullscreen");s(v.scrollPos);i.unbind(t,"resize",v.resizeHandler);n.off("remove",v.removeHandler);u.set(null);r.fireFullscreenStateChanged(n,false)}};return{toggleFullscreen:u}});i("tinymce.plugins.fullscreen.api.Commands",["tinymce.plugins.fullscreen.core.Actions"],function(e){var t=function(t,n){t.addCommand("mceFullScreen",function(){e.toggleFullscreen(t,n)})};return{register:t}});i("tinymce.plugins.fullscreen.ui.Buttons",[],function(){var e=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};var t=function(t){t.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:true,cmd:"mceFullScreen",onPostRender:e(t),context:"view"});t.addButton("fullscreen",{active:false,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:e(t)})};return{register:t}});i("tinymce.plugins.fullscreen.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.fullscreen.api.Api","tinymce.plugins.fullscreen.api.Commands","tinymce.plugins.fullscreen.ui.Buttons"],function(e,t,n,r,i){t.add("fullscreen",function(t){var a=e(null);r.register(t,a);i.register(t);t.addShortcut("Ctrl+Shift+F","","mceFullScreen");return n.get(a)});return function(){}});r("tinymce.plugins.fullscreen.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.plugins.hr.api.Commands",[],function(){var e=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",false,"<hr />")})};return{register:e}});i("tinymce.plugins.hr.ui.Buttons",[],function(){var e=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};return{register:e}});i("tinymce.plugins.hr.Plugin",["tinymce.core.PluginManager","tinymce.plugins.hr.api.Commands","tinymce.plugins.hr.ui.Buttons"],function(e,t,n){e.add("hr",function(e){t.register(e);n.register(e)});return function(){}});r("tinymce.plugins.hr.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});a("global!Math",Math);a("global!RegExp",RegExp);i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.plugins.image.api.Settings",[],function(){var e=function(e){return e.settings.image_dimensions===false?false:true};var t=function(e){return e.settings.image_advtab===true?true:false};var n=function(e){return e.getParam("image_prepend_url","")};var r=function(e){return e.getParam("image_class_list")};var i=function(e){return e.settings.image_description===false?false:true};var a=function(e){return e.settings.image_title===true?true:false};var o=function(e){return e.settings.image_caption===true?true:false};var s=function(e){return e.getParam("image_list",false)};var u=function(e){return e.getParam("images_upload_url",false)};var l=function(e){return e.getParam("images_upload_handler",false)};var c=function(e){return e.getParam("images_upload_url")};var f=function(e){return e.getParam("images_upload_handler")};var d=function(e){return e.getParam("images_upload_base_path")};var h=function(e){return e.getParam("images_upload_credentials")};return{hasDimensions:e,hasAdvTab:t,getPrependUrl:n,getClassList:r,hasDescription:i,hasImageTitle:a,hasImageCaption:o,getImageList:s,hasUploadUrl:u,hasUploadHandler:l,getUploadUrl:c,getUploadHandler:f,getUploadBasePath:d,getUploadCredentials:h}});a("global!document",document);i("ephox.katamari.api.Global",[],function(){var e=typeof window!=="undefined"?window:Function("return this;")();return e});i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){var r=n!==undefined?n:e;for(var i=0;i<t.length&&r!==undefined&&r!==null;++i){r=r[t[i]]}return r};var n=function(e,n){var r=e.split(".");return t(r,n)};var r=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var i=function(t,n){var i=n!==undefined?n:e;for(var a=0;a<t.length;++a){i=r(i,t[a])}return i};var a=function(e,t){var n=e.split(".");return i(n,t)};return{path:t,resolve:n,forge:i,namespace:a}});i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};var n=function(e,n){var r=t(e,n);if(r===undefined){throw e+" not available on this browser"}return r};return{getOrDie:n}});i("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(e){return function(){var t=e.getOrDie("FileReader");return new t}});i("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")});i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")});i("tinymce.plugins.image.core.Utils",["global!Math","global!document","ephox.sand.api.FileReader","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.image.api.Settings"],function(e,t,n,r,i,a,o){var s=function(t,n){return e.max(parseInt(t,10),parseInt(n,10))};var u=function(e,n){var r=t.createElement("img");function i(e,t){if(r.parentNode){r.parentNode.removeChild(r)}n({width:e,height:t})}r.onload=function(){var e=s(r.width,r.clientWidth);var t=s(r.height,r.clientHeight);i(e,t)};r.onerror=function(){i()};var a=r.style;a.visibility="hidden";a.position="fixed";a.bottom=a.left=0;a.width=a.height="auto";t.body.appendChild(r);r.src=e};var l=function(e,t,n){function r(e,n){n=n||[];i.each(e,function(e){var i={text:e.text||e.title};if(e.menu){i.menu=r(e.menu)}else{i.value=e.value;t(i)}n.push(i)});return n}return r(e,n||[])};var c=function(e){if(e){e=e.replace(/px$/,"")}return e};var f=function(e){if(e.length>0&&/^[0-9]+$/.test(e)){e+="px"}return e};var d=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[0];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[0];e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0];e["margin-right"]=e["margin-right"]||t[1];e["margin-bottom"]=e["margin-bottom"]||t[2];e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e};var h=function(e,t){var n=o.getImageList(e);if(typeof n==="string"){a.send({url:n,success:function(e){t(JSON.parse(e))}})}else if(typeof n==="function"){n(t)}else{t(n)}};var p=function(e,t,n){function r(){n.onload=n.onerror=null;if(e.selection){e.selection.select(n);e.nodeChanged()}}n.onload=function(){if(!t.width&&!t.height&&o.hasDimensions(e)){e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight})}r()};n.onerror=r};var v=function(e){return new r(function(t,r){var i=new n;i.onload=function(){t(i.result)};i.onerror=function(){r(n.error.message)};i.readAsDataURL(e)})};return{getImageSize:u,buildListItems:l,removePixelSuffix:c,addPixelSuffix:f,mergeMargins:d,createImageList:h,waitLoadImage:p,blobToDataUri:v}});i("tinymce.plugins.image.ui.AdvTab",["tinymce.plugins.image.api.Settings","tinymce.plugins.image.core.Utils"],function(e,t){var n=function(n){return function(r){var i=n.dom;var a=r.control.rootControl;if(!e.hasAdvTab(n)){return}var o=a.toJSON();var s=i.parseStyle(o.style);a.find("#vspace").value("");a.find("#hspace").value("");s=t.mergeMargins(s);if(s["margin-top"]&&s["margin-bottom"]||s["margin-right"]&&s["margin-left"]){if(s["margin-top"]===s["margin-bottom"]){a.find("#vspace").value(t.removePixelSuffix(s["margin-top"]))}else{a.find("#vspace").value("")}if(s["margin-right"]===s["margin-left"]){a.find("#hspace").value(t.removePixelSuffix(s["margin-right"]))}else{a.find("#hspace").value("")}}if(s["border-width"]){a.find("#border").value(t.removePixelSuffix(s["border-width"]))}a.find("#style").value(i.serializeStyle(i.parseStyle(i.serializeStyle(s))))}};var r=function(e,t){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:n(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:function(n){t(e,n.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}};return{makeTab:r}});i("tinymce.plugins.image.ui.SizeManager",[],function(){var e=function(e,t){e.state.set("oldVal",e.value());t.state.set("oldVal",t.value())};var t=function(e,t){var n=e.find("#width")[0];var r=e.find("#height")[0];var i=e.find("#constrain")[0];if(n&&r&&i){t(n,r,i.checked())}};var n=function(t,n,r){var i=t.state.get("oldVal");var a=n.state.get("oldVal");var o=t.value();var s=n.value();if(r&&i&&a&&o&&s){if(o!==i){s=Math.round(o/i*s);if(!isNaN(s)){n.value(s)}}else{o=Math.round(s/a*o);if(!isNaN(o)){t.value(o)}}}e(t,n)};var r=function(n){t(n,e)};var i=function(e){t(e,n)};var a=function(){var e=function(e){i(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:true,text:"Constrain proportions"}]}};return{createUi:a,syncSize:r,updateSize:i}});i("tinymce.plugins.image.ui.MainTab",["tinymce.core.util.Tools","tinymce.plugins.image.api.Settings","tinymce.plugins.image.core.Utils","tinymce.plugins.image.ui.SizeManager"],function(e,t,n,r){var i=function(i,a){var o,s,u,l=i.meta||{};var c=i.control;var f=c.rootControl;var d=f.find("#image-list")[0];if(d){d.value(a.convertURL(c.value(),"src"))}e.each(l,function(e,t){f.find("#"+t).value(e)});if(!l.width&&!l.height){o=a.convertURL(c.value(),"src");s=t.getPrependUrl(a);u=new RegExp("^(?:[a-z]+:)?//","i");if(s&&!u.test(o)&&o.substring(0,s.length)!==s){o=s+o}c.value(o);n.getImageSize(a.documentBaseURI.toAbsolute(c.value()),function(e){if(e.width&&e.height&&t.hasDimensions(a)){f.find("#width").value(e.width);f.find("#height").value(e.height);r.updateSize(f)}})}};var a=function(e){e.meta=e.control.rootControl.toJSON()};var o=function(e,o){var s=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:true,onchange:function(t){i(t,e)},onbeforecall:a},o];if(t.hasDescription(e)){s.push({name:"alt",type:"textbox",label:"Image description"})}if(t.hasImageTitle(e)){s.push({name:"title",type:"textbox",label:"Image Title"})}if(t.hasDimensions(e)){s.push(r.createUi())}if(t.getClassList(e)){s.push({name:"class",type:"listbox",label:"Class",values:n.buildListItems(t.getClassList(e),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})}}})})}if(t.hasImageCaption(e)){s.push({name:"caption",type:"checkbox",label:"Caption"})}return s};var s=function(e,t){return{title:"General",type:"form",items:o(e,t)}};return{makeTab:s,getGeneralItems:o}});i("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};var n=function(e){return t().createObjectURL(e)};var r=function(e){t().revokeObjectURL(e)};return{createObjectURL:n,revokeObjectURL:r}});i("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")});i("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){var t=e.getOrDie("XMLHttpRequest");return new t}});a("global!window",window);i("tinymce.plugins.image.core.Uploader",["ephox.sand.api.XMLHttpRequest","global!document","global!window","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r,i){var a=function(){};var o=function(e,t){if(e){return e.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}return t};return function(t){var s=function(r,i,a,s){var u,l;u=new e;u.open("POST",t.url);u.withCredentials=t.credentials;u.upload.onprogress=function(e){s(e.loaded/e.total*100)};u.onerror=function(){a("Image upload failed due to a XHR Transport error. Code: "+u.status)};u.onload=function(){var e;if(u.status<200||u.status>=300){a("HTTP Error: "+u.status);return}e=JSON.parse(u.responseText);if(!e||typeof e.location!=="string"){a("Invalid JSON: "+u.responseText);return}i(o(t.basePath,e.location))};l=new n.FormData;l.append("file",r.blob(),r.filename());u.send(l)};var u=function(e,t){return new r(function(n,r){try{t(e,n,r,a)}catch(e){r(e.message)}})};var l=function(e){return e===s};var c=function(e){return!t.url&&l(t.handler)?r.reject("Upload url missing from the settings."):u(e,t.handler)};t=i.extend({credentials:false,handler:s},t);return{upload:c}}});i("tinymce.plugins.image.ui.UploadTab",["ephox.sand.api.URL","tinymce.core.ui.Factory","tinymce.plugins.image.api.Settings","tinymce.plugins.image.core.Utils","tinymce.plugins.image.core.Uploader"],function(e,t,n,r,i){var a=function(a){return function(o){var s=t.get("Throbber");var u=o.control.rootControl;var l=new s(u.getEl());var c=o.control.value();var f=e.createObjectURL(c);var d=new i({url:n.getUploadUrl(a),basePath:n.getUploadBasePath(a),credentials:n.getUploadCredentials(a),handler:n.getUploadHandler(a)});var h=function(){l.hide();e.revokeObjectURL(f)};l.show();return r.blobToDataUri(c).then(function(e){var t=a.editorUpload.blobCache.create({blob:c,blobUri:f,name:c.name?c.name.replace(/\.[^\.]+$/,""):null,base64:e.split(",")[1]});return d.upload(t).then(function(e){var t=u.find("#src");t.value(e);u.find("tabpanel")[0].activateTab(0);t.fire("change");h();return e})})["catch"](function(e){a.windowManager.alert(e);h()})}};var o=".jpg,.jpeg,.png,.gif";var s=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:o,onchange:a(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:o,height:100,onchange:a(e)}]}};return{makeTab:s}});i("tinymce.plugins.image.ui.Dialog",["global!Math","global!RegExp","tinymce.core.util.Tools","tinymce.plugins.image.api.Settings","tinymce.plugins.image.core.Utils","tinymce.plugins.image.ui.AdvTab","tinymce.plugins.image.ui.MainTab","tinymce.plugins.image.ui.SizeManager","tinymce.plugins.image.ui.UploadTab"],function(e,t,n,r,i,a,o,s,u){return function(e){var t=function(e,t){if(!r.hasAdvTab(e)){return}var n=e.dom;var a=t.toJSON();var o=n.parseStyle(a.style);o=i.mergeMargins(o);if(a.vspace){o["margin-top"]=o["margin-bottom"]=i.addPixelSuffix(a.vspace)}if(a.hspace){o["margin-left"]=o["margin-right"]=i.addPixelSuffix(a.hspace)}if(a.border){o["border-width"]=i.addPixelSuffix(a.border)}t.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))};function l(l){var c,f={},d,h,p=e.dom;var v;function m(){var r,a;s.updateSize(c);t(e,c);f=n.extend(f,c.toJSON());if(!f.alt){f.alt=""}if(!f.title){f.title=""}if(f.width===""){f.width=null}if(f.height===""){f.height=null}if(!f.style){f.style=null}f={src:f.src,alt:f.alt,title:f.title,width:f.width,height:f.height,style:f.style,caption:f.caption,class:f["class"]};e.undoManager.transact(function(){if(!f.src){if(d){var t=p.is(d.parentNode,"figure.image")?d.parentNode:d;p.remove(t);e.focus();e.nodeChanged();if(p.isEmpty(e.getBody())){e.setContent("");e.selection.setCursorLocation()}}return}if(f.title===""){f.title=null}if(!d){f.id="__mcenew";e.focus();e.selection.setContent(p.createHTML("img",f));d=p.get("__mcenew");p.setAttrib(d,"id",null)}else{p.setAttribs(d,f)}e.editorUpload.uploadImagesAuto();if(f.caption===false){if(p.is(d.parentNode,"figure.image")){r=d.parentNode;p.insertAfter(d,r);p.remove(r)}}if(f.caption===true){if(!p.is(d.parentNode,"figure.image")){a=d;d=d.cloneNode(true);r=p.create("figure",{class:"image"});r.appendChild(d);r.appendChild(p.create("figcaption",{contentEditable:true},"Caption"));r.contentEditable=false;var n=p.getParent(a,function(t){return e.schema.getTextBlockElements()[t.nodeName]});if(n){p.split(n,a,r)}else{p.replace(r,a)}e.selection.select(r)}return}i.waitLoadImage(e,f,d)})}d=e.selection.getNode();h=p.getParent(d,"figure.image");if(h){d=p.select("img",h)[0]}if(d&&(d.nodeName!=="IMG"||d.getAttribute("data-mce-object")||d.getAttribute("data-mce-placeholder"))){d=null}if(d){f={src:p.getAttrib(d,"src"),alt:p.getAttrib(d,"alt"),title:p.getAttrib(d,"title"),class:p.getAttrib(d,"class"),width:p.getAttrib(d,"width"),height:p.getAttrib(d,"height"),caption:!!h}}if(l){v={type:"listbox",label:"Image list",name:"image-list",values:i.buildListItems(l,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:f.src&&e.convertURL(f.src,"src"),onselect:function(e){var t=c.find("#alt");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}c.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){v=this}}}if(r.hasAdvTab(e)||r.hasUploadUrl(e)||r.hasUploadHandler(e)){var g=[o.makeTab(e,v)];if(r.hasAdvTab(e)){if(d){if(d.style.marginLeft&&d.style.marginRight&&d.style.marginLeft===d.style.marginRight){f.hspace=i.removePixelSuffix(d.style.marginLeft)}if(d.style.marginTop&&d.style.marginBottom&&d.style.marginTop===d.style.marginBottom){f.vspace=i.removePixelSuffix(d.style.marginTop)}if(d.style.borderWidth){f.border=i.removePixelSuffix(d.style.borderWidth)}f.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(d,"style")))}g.push(a.makeTab(e,t))}if(r.hasUploadUrl(e)||r.hasUploadHandler(e)){g.push(u.makeTab(e))}c=e.windowManager.open({title:"Insert/edit image",data:f,bodyType:"tabpanel",body:g,onSubmit:m})}else{c=e.windowManager.open({title:"Insert/edit image",data:f,body:o.getGeneralItems(e,v),onSubmit:m})}s.syncSize(c)}function c(){i.createImageList(e,l)}return{open:c}}});i("tinymce.plugins.image.api.Commands",["tinymce.plugins.image.ui.Dialog"],function(e){var t=function(t){t.addCommand("mceImage",e(t).open)};return{register:t}});i("tinymce.plugins.image.core.FilterContent",["tinymce.core.util.Tools"],function(e){var t=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)};var n=function(n){return function(r){var i=r.length,a;var o=function(e){e.attr("contenteditable",n?"true":null)};while(i--){a=r[i];if(t(a)){a.attr("contenteditable",n?"false":null);e.each(a.getAll("figcaption"),o)}}}};var r=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",n(true));e.serializer.addNodeFilter("figure",n(false))})};return{setup:r}});i("tinymce.plugins.image.ui.Buttons",["tinymce.plugins.image.ui.Dialog"],function(e){var t=function(t){t.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:e(t).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"});t.addMenuItem("image",{icon:"image",text:"Image",onclick:e(t).open,context:"insert",prependToContext:true})};return{register:t}});i("tinymce.plugins.image.Plugin",["tinymce.core.PluginManager","tinymce.plugins.image.api.Commands","tinymce.plugins.image.core.FilterContent","tinymce.plugins.image.ui.Buttons"],function(e,t,n,r){e.add("image",function(e){n.setup(e);r.register(e);t.register(e)});return function(){}});r("tinymce.plugins.image.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")});i("tinymce.plugins.link.api.Settings",[],function(){var e=function(e){return typeof e.link_assume_external_targets==="boolean"?e.link_assume_external_targets:false};var t=function(e){return typeof e.link_context_toolbar==="boolean"?e.link_context_toolbar:false};var n=function(e){return e.link_list};var r=function(e){return typeof e.default_link_target==="string"};var i=function(e){return e.default_link_target};var a=function(e){return e.target_list};var o=function(e,t){e.settings.target_list=t};var s=function(e){return a(e)!==false};var u=function(e){return e.rel_list};var l=function(e){return u(e)!==undefined};var c=function(e){return e.link_class_list};var f=function(e){return c(e)!==undefined};var d=function(e){return e.link_title!==false};var h=function(e){return typeof e.allow_unsafe_link_target==="boolean"?e.allow_unsafe_link_target:false};return{assumeExternalTargets:e,hasContextToolbar:t,getLinkList:n,hasDefaultLinkTarget:r,getDefaultLinkTarget:i,getTargetList:a,setTargetList:o,shouldShowTargetList:s,getRelList:u,hasRelList:l,getLinkClassList:c,hasLinkClassList:f,shouldShowLinkTitle:d,allowUnsafeLinkTarget:h}});a("global!document",document);a("global!window",window);i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")});i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")});i("tinymce.plugins.link.core.OpenUrl",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t,n,r){var i=function(t,n){e.body.appendChild(t);t.dispatchEvent(n);e.body.removeChild(t)};var a=function(a){if(!r.ie||r.ie>10){var o=e.createElement("a");o.target="_blank";o.href=a;o.rel="noreferrer noopener";var s=e.createEvent("MouseEvents");s.initMouseEvent("click",true,true,t,0,0,0,0,0,false,false,false,false,0,null);i(o,s)}else{var u=t.open("","_blank");if(u){u.opener=null;var l=u.document;l.open();l.write('<meta http-equiv="refresh" content="0; url='+n.DOM.encode(a)+'">');l.close()}}};return{open:a}});a("global!RegExp",RegExp);i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.plugins.link.core.Utils",["global!RegExp","tinymce.core.util.Tools","tinymce.plugins.link.api.Settings"],function(e,t,n){var r=function(e,n){var r=["noopener"];var i=e?e.split(/\s+/):[];var a=function(e){return t.trim(e.sort().join(" "))};var o=function(e){e=s(e);return e.length?e.concat(r):r};var s=function(e){return e.filter(function(e){return t.inArray(r,e)===-1})};i=n?o(i):s(i);return i.length?a(i):null};var i=function(e){return e.replace(/\uFEFF/g,"")};var a=function(e,t){t=t||e.selection.getNode();if(c(t)){return e.dom.select("a[href]",t)[0]}else{return e.dom.getParent(t,"a[href]")}};var o=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return i(n)};var s=function(e){return e&&e.nodeName==="A"&&e.href};var u=function(e){return t.grep(e,s).length>0};var l=function(e){if(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||e.indexOf("href=")===-1)){return false}return true};var c=function(e){return e&&e.nodeName==="FIGURE"&&/\bimage\b/i.test(e.className)};var f=function(e,t){return function(i){e.undoManager.transact(function(){var o=e.selection.getNode();var s=a(e,o);var u={href:i.href,target:i.target?i.target:null,rel:i.rel?i.rel:null,class:i["class"]?i["class"]:null,title:i.title?i.title:null};if(!n.hasRelList(e.settings)&&n.allowUnsafeLinkTarget(e.settings)===false){u.rel=r(u.rel,u.target==="_blank")}if(i.href===t.href){t.attach();t={}}if(s){e.focus();if(i.hasOwnProperty("text")){if("innerText"in s){s.innerText=i.text}else{s.textContent=i.text}}e.dom.setAttribs(s,u);e.selection.select(s);e.undoManager.add()}else{if(c(o)){p(e,o,u)}else if(i.hasOwnProperty("text")){e.insertContent(e.dom.createHTML("a",u,e.dom.encode(i.text)))}else{e.execCommand("mceInsertLink",false,u)}}})}};var d=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();if(c(t)){h(e,t)}else{e.execCommand("unlink")}})}};var h=function(e,t){var n,r;r=e.dom.select("img",t)[0];if(r){n=e.dom.getParents(r,"a[href]",t)[0];if(n){n.parentNode.insertBefore(r,n);e.dom.remove(n)}}};var p=function(e,t,n){var r,i;i=e.dom.select("img",t)[0];if(i){r=e.dom.create("a",n);i.parentNode.insertBefore(r,i);r.appendChild(i)}};return{link:f,unlink:d,isLink:s,hasLinks:u,isOnlyTextSelected:l,getAnchorElement:a,getAnchorText:o,toggleTargetRules:r}});i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")});i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")});i("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.Utils"],function(e,t,n,r,i){var a={};var o=function(e,t){var i=r.getLinkList(e.settings);if(typeof i==="string"){n.send({url:i,success:function(n){t(e,JSON.parse(n))}})}else if(typeof i==="function"){i(function(n){t(e,n)})}else{t(e,i)}};var s=function(e,n,r){var i=function(e,r){r=r||[];t.each(e,function(e){var t={text:e.text||e.title};if(e.menu){t.menu=i(e.menu)}else{t.value=e.value;if(n){n(t)}}r.push(t)});return r};return i(e,r||[])};var u=function(t,n,r){var i=t.selection.getRng();e.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(e){t.selection.setRng(i);r(e)})})};var l=function(e,n){var o={},l=e.selection,c=e.dom,f,d;var h,p,v,m,g,y,b,x,w;var _=function(e){var t=h.find("#text");if(!t.value()||e.lastControl&&t.value()===e.lastControl.text()){t.value(e.control.text())}h.find("#href").value(e.control.value())};var k=function(n){var r=[];t.each(e.dom.select("a:not([href])"),function(e){var t=e.name||e.id;if(t){r.push({text:t,value:"#"+t,selected:n.indexOf("#"+t)!==-1})}});if(r.length){r.unshift({text:"None",value:""});return{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:_}}};var C=function(){if(!d&&p&&!o.text){this.parent().parent().find("#text")[0].value(this.value())}};var T=function(n){var r=n.meta||{};if(m){m.value(e.convertURL(this.value(),"href"))}t.each(n.meta,function(e,t){var n=h.find("#"+t);if(t==="text"){if(d.length===0){n.value(e);o.text=e}}else{n.value(e)}});if(r.attach){a={href:this.value(),attach:r.attach}}if(!r.text){C.call(this)}};var S=function(e){e.meta=h.toJSON()};p=i.isOnlyTextSelected(l.getContent());f=i.getAnchorElement(e);o.text=d=i.getAnchorText(e.selection,f);o.href=f?c.getAttrib(f,"href"):"";if(f){o.target=c.getAttrib(f,"target")}else if(r.hasDefaultLinkTarget(e.settings)){o.target=r.getDefaultLinkTarget(e.settings)}if(w=c.getAttrib(f,"rel")){o.rel=w}if(w=c.getAttrib(f,"class")){o["class"]=w}if(w=c.getAttrib(f,"title")){o.title=w}if(p){v={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){o.text=this.value()}}}if(n){m={type:"listbox",label:"Link list",values:s(n,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:_,value:e.convertURL(o.href,"href"),onPostRender:function(){m=this}}}if(r.shouldShowTargetList(e.settings)){if(r.getTargetList(e.settings)===undefined){r.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}])}y={name:"target",type:"listbox",label:"Target",values:s(r.getTargetList(e.settings))}}if(r.hasRelList(e.settings)){g={name:"rel",type:"listbox",label:"Rel",values:s(r.getRelList(e.settings),function(t){if(r.allowUnsafeLinkTarget(e.settings)===false){t.value=i.toggleTargetRules(t.value,o.target==="_blank")}})}}if(r.hasLinkClassList(e.settings)){b={name:"class",type:"listbox",label:"Class",values:s(r.getLinkClassList(e.settings),function(t){if(t.value){t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})}}})}}if(r.shouldShowLinkTitle(e.settings)){x={name:"title",type:"textbox",label:"Title",value:o.title}}h=e.windowManager.open({title:"Insert link",data:o,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:true,label:"Url",onchange:T,onkeyup:C,onbeforecall:S},v,x,k(o.href),m,g,y,b],onSubmit:function(n){var s=r.assumeExternalTargets(e.settings);var l=i.link(e,a);var c=i.unlink(e);var f=t.extend({},o,n.data);var h=f.href;if(!h){c();return}if(!p||f.text===d){delete f.text}if(h.indexOf("@")>0&&h.indexOf("//")===-1&&h.indexOf("mailto:")===-1){u(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){if(e){f.href="mailto:"+h}l(f)});return}if(s===true&&!/^\w+:/i.test(h)||s===false&&/^\s*www[\.|\d\.]/i.test(h)){u(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){if(e){f.href="http://"+h}l(f)});return}l(f)}})};var c=function(e){o(e,l)};return{open:c}});i("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils","tinymce.plugins.link.ui.Dialog"],function(e,t,n,r,i){var a=function(e,t){return e.dom.getParent(t,"a[href]")};var o=function(e){return a(e,e.selection.getStart())};var s=function(e){var t=e.getAttribute("data-mce-href");return t?t:e.getAttribute("href")};var u=function(e){var t=e.plugins.contextmenu;return t?t.isContextMenuVisible():false};var l=function(e){return e.altKey===true&&e.shiftKey===false&&e.ctrlKey===false&&e.metaKey===false};var c=function(e,t){if(t){var r=s(t);if(/^#/.test(r)){var i=e.$(r);if(i.length){e.selection.scrollIntoView(i[0],true)}}else{n.open(t.href)}}};var f=function(e){return function(){i.open(e)}};var d=function(e){return function(){c(e,o(e))}};var h=function(e){return function(n){var i,a,o;if(t.hasContextToolbar(e.settings)&&!u(e)&&r.isLink(n)){i=e.selection;a=i.getRng();o=a.startContainer;if(o.nodeType===3&&i.isCollapsed()&&a.startOffset>0&&a.startOffset<o.data.length){return true}}return false}};var p=function(t){t.on("click",function(n){var r=a(t,n.target);if(r&&e.metaKeyPressed(n)){n.preventDefault();c(t,r)}});t.on("keydown",function(e){var n=o(t);if(n&&e.keyCode===13&&l(e)){e.preventDefault();c(t,n)}})};var v=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!r.getAnchorElement(e,n.element))})}};var m=function(e){return function(){var t=this;var n=function(e){if(r.hasLinks(e.parents)){t.show()}else{t.hide()}};if(!r.hasLinks(e.dom.getParents(e.selection.getStart()))){t.hide()}e.on("nodechange",n);t.on("remove",function(){e.off("nodechange",n)})}};return{openDialog:f,gotoSelectedLink:d,leftClickedOnAHref:h,setupGotoLinks:p,toggleActiveState:v,toggleViewLinkState:m}});i("tinymce.plugins.link.api.Commands",["tinymce.plugins.link.core.Actions"],function(e){var t=function(t){t.addCommand("mceLink",e.openDialog(t))};return{register:t}});i("tinymce.plugins.link.core.Keyboard",["tinymce.plugins.link.core.Actions"],function(e){var t=function(t){t.addShortcut("Meta+K","",e.openDialog(t))};return{setup:t}});i("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(e,t){var n=function(n){n.addButton("link",{active:false,icon:"link",tooltip:"Insert/edit link",onclick:e.openDialog(n),onpostrender:e.toggleActiveState(n)});n.addButton("unlink",{active:false,icon:"unlink",tooltip:"Remove link",onclick:t.unlink(n),onpostrender:e.toggleActiveState(n)});if(n.addContextToolbar){n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:e.gotoSelectedLink(n)})}};var r=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:e.gotoSelectedLink(t),onPostRender:e.toggleViewLinkState(t),prependToContext:true});t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:e.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:true})};var i=function(t){if(t.addContextToolbar){t.addContextToolbar(e.leftClickedOnAHref(t),"openlink | link unlink")}};return{setupButtons:n,setupMenuItems:r,setupContextToolbars:i}});i("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.api.Commands","tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Keyboard","tinymce.plugins.link.ui.Controls"],function(e,t,n,r,i){e.add("link",function(e){i.setupButtons(e);i.setupMenuItems(e);i.setupContextToolbars(e);n.setupGotoLinks(e);t.register(e);r.setup(e)});return function(){}});r("tinymce.plugins.link.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")});i("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")});i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")});i("tinymce.core.api.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.BookmarkManager")});i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")});i("tinymce.plugins.lists.core.NodeType",[],function(){var e=function(e){return e&&e.nodeType===3};var t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)};var n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)};var r=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)};var i=function(e){return e&&e.nodeName==="BR"};var a=function(e){return e.parentNode.firstChild===e};var o=function(e){return e.parentNode.lastChild===e};var s=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]};var u=function(e,t){return e&&e.nodeName in t};var l=function(e,t){if(!i(t)){return false}if(e.isBlock(t.nextSibling)&&!i(t.previousSibling)){return true}return false};var c=function(e,t,n){var r=e.isEmpty(t);if(n&&e.select("span[data-mce-type=bookmark]",t).length>0){return false}return r};var f=function(e,t){return e.isChildOf(t,e.getRoot())};return{isTextNode:e,isListNode:t,isListItemNode:n,isTableCellNode:r,isBr:i,isFirstChild:a,isLastChild:o,isTextBlock:s,isBlock:u,isBogusBr:l,isEmpty:c,isChildOfBody:f}});i("tinymce.plugins.lists.core.Range",["tinymce.core.api.dom.RangeUtils","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n,r){var i=e.getNode(n,r);if(t.isListItemNode(n)&&t.isTextNode(i)){var a=r>=n.childNodes.length?i.data.length:0;return{container:i,offset:a}}return{container:n,offset:r}};var r=function(e){var t=e.cloneRange();var r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var i=n(e.endContainer,e.endOffset);t.setEnd(i.container,i.offset);return t};return{getNormalizedEndPoint:n,normalizeRange:r}});i("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(e,t,n){var r=e.DOM;var i=function(e){var t={};var n=function(n){var i,a,o;a=e[n?"startContainer":"endContainer"];o=e[n?"startOffset":"endOffset"];if(a.nodeType===1){i=r.create("span",{"data-mce-type":"bookmark"});if(a.hasChildNodes()){o=Math.min(o,a.childNodes.length-1);if(n){a.insertBefore(i,a.childNodes[o])}else{r.insertAfter(i,a.childNodes[o])}}else{a.appendChild(i)}a=i;o=0}t[n?"startContainer":"endContainer"]=a;t[n?"startOffset":"endOffset"]=o};n(true);if(!e.collapsed){n()}return t};var a=function(e){function t(t){var n,i,a;var o=function(e){var t=e.parentNode.firstChild,n=0;while(t){if(t===e){return n}if(t.nodeType!==1||t.getAttribute("data-mce-type")!=="bookmark"){n++}t=t.nextSibling}return-1};n=a=e[t?"startContainer":"endContainer"];i=e[t?"startOffset":"endOffset"];if(!n){return}if(n.nodeType===1){i=o(n);n=n.parentNode;r.remove(a);if(!n.hasChildNodes()&&r.isBlock(n)){n.appendChild(r.create("br"))}}e[t?"startContainer":"endContainer"]=n;e[t?"startOffset":"endOffset"]=i}t(true);t();var i=r.createRng();i.setStart(e.startContainer,e.startOffset);if(e.endContainer){i.setEnd(e.endContainer,e.endOffset)}return n.normalizeRange(i)};return{createBookmark:i,resolveBookmark:a}});i("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=e.DOM;var i=function(e,t){var i,a=t.parentNode;if(a.nodeName==="LI"&&a.firstChild===t){i=a.previousSibling;if(i&&i.nodeName==="LI"){i.appendChild(t);if(n.isEmpty(e,a)){r.remove(a)}}else{r.setStyle(a,"listStyleType","none")}}if(n.isListNode(a)){i=a.previousSibling;if(i&&i.nodeName==="LI"){i.appendChild(t)}}};var a=function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){i(e,t)})};return{normalizeList:i,normalizeLists:a}});i("tinymce.core.dom.DomQuery",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DomQuery")});i("tinymce.plugins.lists.core.Selection",["tinymce.core.dom.DomQuery","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=function(e){var t=e.selection.getStart(true);return e.dom.getParent(t,"OL,UL,DL",l(e,t))};var i=function(e,t){return e&&t.length===1&&t[0]===e};var a=function(e){return t.grep(e.querySelectorAll("ol,ul,dl"),function(e){return n.isListNode(e)})};var o=function(e){var o=r(e);var s=e.selection.getSelectedBlocks();if(i(o,s)){return a(o)}else{return t.grep(s,function(e){return n.isListNode(e)&&o!==e})}};var s=function(n,r){var i=t.map(r,function(e){var t=n.dom.getParent(e,"li,dd,dt",l(n,e));return t?t:e});return e.unique(i)};var u=function(e){var r=e.selection.getSelectedBlocks();return t.grep(s(e,r),function(e){return n.isListItemNode(e)})};var l=function(e,t){var n=e.dom.getParents(t,"TD,TH");var r=n.length>0?n[0]:e.getBody();return r};return{getParentList:r,getSelectedSubLists:o,getSelectedListItems:u,getClosestListRootElm:l}});i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")});i("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=e.DOM;var i=function(e,i,a){var o,s,u=r.createFragment(),l;var c=e.schema.getBlockElements();if(e.settings.forced_root_block){a=a||e.settings.forced_root_block}if(a){s=r.create(a);if(s.tagName===e.settings.forced_root_block){r.setAttribs(s,e.settings.forced_root_block_attrs)}if(!n.isBlock(i.firstChild,c)){u.appendChild(s)}}if(i){while(o=i.firstChild){var f=o.nodeName;if(!l&&(f!=="SPAN"||o.getAttribute("data-mce-type")!=="bookmark")){l=true}if(n.isBlock(o,c)){u.appendChild(o);s=null}else{if(a){if(!s){s=r.create(a);u.appendChild(s)}s.appendChild(o)}else{u.appendChild(o)}}}}if(!e.settings.forced_root_block){u.appendChild(r.create("br"))}else{if(!l&&(!t.ie||t.ie>10)){s.appendChild(r.create("br",{"data-mce-bogus":"1"}))}}return u};return{createNewTextBlock:i}});i("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(e,t,n,r){var i=e.DOM;var a=function(e,a,o,s){var u,l,c,f;var d=function(e){r.each(c,function(t){e.parentNode.insertBefore(t,o.parentNode)});i.remove(e)};c=i.select('span[data-mce-type="bookmark"]',a);s=s||n.createNewTextBlock(e,o);u=i.createRng();u.setStartAfter(o);u.setEndAfter(a);l=u.extractContents();for(f=l.firstChild;f;f=f.firstChild){if(f.nodeName==="LI"&&e.dom.isEmpty(f)){i.remove(f);break}}if(!e.dom.isEmpty(l)){i.insertAfter(l,a)}i.insertAfter(s,a);if(t.isEmpty(e.dom,o.parentNode)){d(o.parentNode)}i.remove(o);if(t.isEmpty(e.dom,a)){i.remove(a)}};return{splitList:a}});i("tinymce.plugins.lists.actions.Outdent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList","tinymce.plugins.lists.core.TextBlock"],function(e,t,n,r,i,a,o){var s=e.DOM;var u=function(e,t){if(n.isEmpty(e,t)){s.remove(t)}};var l=function(e,t){var i=t.parentNode,l=i.parentNode,c;if(i===e.getBody()){return true}if(t.nodeName==="DD"){s.rename(t,"DT");return true}if(n.isFirstChild(t)&&n.isLastChild(t)){if(l.nodeName==="LI"){s.insertAfter(t,l);u(e.dom,l);s.remove(i)}else if(n.isListNode(l)){s.remove(i,true)}else{l.insertBefore(o.createNewTextBlock(e,t),i);s.remove(i)}return true}else if(n.isFirstChild(t)){if(l.nodeName==="LI"){s.insertAfter(t,l);t.appendChild(i);u(e.dom,l)}else if(n.isListNode(l)){l.insertBefore(t,i)}else{l.insertBefore(o.createNewTextBlock(e,t),i);s.remove(t)}return true}else if(n.isLastChild(t)){if(l.nodeName==="LI"){s.insertAfter(t,l)}else if(n.isListNode(l)){s.insertAfter(t,i)}else{s.insertAfter(o.createNewTextBlock(e,t),i);s.remove(t)}return true}if(l.nodeName==="LI"){i=l;c=o.createNewTextBlock(e,t,"LI")}else if(n.isListNode(l)){c=o.createNewTextBlock(e,t,"LI")}else{c=o.createNewTextBlock(e,t)}a.splitList(e,i,t,c);r.normalizeLists(e.dom,i.parentNode);return true};var c=function(e){var n=i.getSelectedListItems(e);if(n.length){var r=t.createBookmark(e.selection.getRng(true));var a,o;var s=i.getClosestListRootElm(e,e.selection.getStart(true));a=n.length;while(a--){var u=n[a].parentNode;while(u&&u!==s){o=n.length;while(o--){if(n[o]===u){n.splice(a,1);break}}u=u.parentNode}}for(a=0;a<n.length;a++){if(!l(e,n[a])&&a===0){break}}e.selection.setRng(t.resolveBookmark(r));e.nodeChanged();return true}};return{outdent:l,outdentSelection:c}});i("tinymce.plugins.lists.actions.ToggleList",["tinymce.core.api.dom.BookmarkManager","tinymce.core.util.Tools","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList"],function(e,t,n,r,i,a,o,s){var u=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)};var l=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})};var c=function(e,n,r){l(n,r["list-attributes"]);t.each(e.select("li",n),function(e){l(e,r["list-item-attributes"])})};var f=function(e,t,n){u(e,t,n);c(e,t,n)};var d=function(e,t,n,r){var a,o;a=t[n?"startContainer":"endContainer"];o=t[n?"startOffset":"endOffset"];if(a.nodeType===1){a=a.childNodes[Math.min(o,a.childNodes.length-1)]||a}if(!n&&i.isBr(a.nextSibling)){a=a.nextSibling}while(a.parentNode!==r){if(i.isTextBlock(e,a)){return a}if(/^(TD|TH)$/.test(a.parentNode.nodeName)){return a}a=a.parentNode}return a};var h=function(n,r,a){var o=[],s=n.dom;var u=d(n,r,true,a);var l=d(n,r,false,a);var c,f=[];for(var h=u;h;h=h.nextSibling){f.push(h);if(h===l){break}}t.each(f,function(t){if(i.isTextBlock(n,t)){o.push(t);c=null;return}if(s.isBlock(t)||i.isBr(t)){if(i.isBr(t)){s.remove(t)}c=null;return}var r=t.nextSibling;if(e.isBookmarkNode(t)){if(i.isTextBlock(n,r)||!r&&t.parentNode===a){c=null;return}}if(!c){c=s.create("p");t.parentNode.insertBefore(c,t);o.push(c)}c.appendChild(t)});return o};var p=function(e,t,n){var r=e.getStyle(t,"list-style-type");var i=n?n["list-style-type"]:"";i=i===null?"":i;return r===i};var v=function(e,n,a){var s=e.selection.getRng(true),u,l="LI";var c=o.getClosestListRootElm(e,e.selection.getStart(true));var d=e.dom;a=a?a:{};if(d.getContentEditable(e.selection.getNode())==="false"){return}n=n.toUpperCase();if(n==="DL"){l="DT"}u=r.createBookmark(s);t.each(h(e,s,c),function(t){var r,o;o=t.previousSibling;if(o&&i.isListNode(o)&&o.nodeName===n&&p(d,o,a)){r=o;t=d.rename(t,l);o.appendChild(t)}else{r=d.create(n);t.parentNode.insertBefore(r,t);r.appendChild(t);t=d.rename(t,l)}f(d,r,a);w(e.dom,r)});e.selection.setRng(r.resolveBookmark(u))};var m=function(e){var u=r.createBookmark(e.selection.getRng(true));var l=o.getClosestListRootElm(e,e.selection.getStart(true));var c=o.getSelectedListItems(e);var f=t.grep(c,function(t){return e.dom.isEmpty(t)});c=t.grep(c,function(t){return!e.dom.isEmpty(t)});t.each(f,function(t){if(i.isEmpty(e.dom,t)){n.outdent(e,t);return}});t.each(c,function(t){var n,r;if(t.parentNode===e.getBody()){return}for(n=t;n&&n!==l;n=n.parentNode){if(i.isListNode(n)){r=n}}s.splitList(e,r,t);a.normalizeLists(e.dom,r.parentNode)});e.selection.setRng(r.resolveBookmark(u))};var g=function(e,t){return e&&t&&i.isListNode(e)&&e.nodeName===t.nodeName};var y=function(e,t,n){var r=e.getStyle(t,"list-style-type",true);var i=e.getStyle(n,"list-style-type",true);return r===i};var b=function(e,t){return e.className===t.className};var x=function(e,t,n){return g(t,n)&&y(e,t,n)&&b(t,n)};var w=function(e,t){var n,r;n=t.nextSibling;if(x(e,t,n)){while(r=n.firstChild){t.appendChild(r)}e.remove(n)}n=t.previousSibling;if(x(e,t,n)){while(r=n.lastChild){t.insertBefore(r,t.firstChild)}e.remove(n)}};var _=function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);f(e,i,r)}else{f(e,t,r)}};var k=function(e,n,i,a,o){if(n.nodeName===a&&!C(o)){m(e,a)}else{var s=r.createBookmark(e.selection.getRng(true));t.each([n].concat(i),function(t){_(e.dom,t,a,o)});e.selection.setRng(r.resolveBookmark(s))}};var C=function(e){return"list-style-type"in e};var T=function(e,t,n,i){if(t===e.getBody()){return}if(t){if(t.nodeName===n&&!C(i)){m(e,n)}else{var a=r.createBookmark(e.selection.getRng(true));f(e.dom,t,i);w(e.dom,e.dom.rename(t,n));e.selection.setRng(r.resolveBookmark(a))}}else{v(e,n,i)}};var S=function(e,t,n){var r=o.getParentList(e);var i=o.getSelectedSubLists(e);n=n?n:{};if(r&&i.length>0){k(e,r,i,t,n)}else{T(e,r,t,n)}};return{toggleList:S,removeList:m,mergeWithAdjacentLists:w}});i("tinymce.plugins.lists.core.Delete",["tinymce.core.api.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.util.VK","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Range","tinymce.plugins.lists.core.Selection"],function(e,t,n,r,i,a,o,s,u){var l=function(n,r,i,o){var s=r.startContainer,u=r.startOffset;var l,c;if(s.nodeType===3&&(i?u<s.data.length:u>0)){return s}l=n.schema.getNonEmptyElements();if(s.nodeType===1){s=e.getNode(s,u)}c=new t(s,o);if(i){if(a.isBogusBr(n.dom,s)){c.next()}}while(s=c[i?"next":"prev2"]()){if(s.nodeName==="LI"&&!s.hasChildNodes()){return s}if(l[s.nodeName]){return s}if(s.nodeType===3&&s.data.length>0){return s}}};var c=function(e,t){var n=t.childNodes;return n.length===1&&!a.isListNode(n[0])&&e.isBlock(n[0])};var f=function(e,t){if(c(e,t)){e.remove(t.firstChild,true)}};var d=function(e,t,n){var r,i;i=c(e,n)?n.firstChild:n;f(e,t);if(!a.isEmpty(e,t,true)){while(r=t.firstChild){i.appendChild(r)}}};var h=function(e,t,n){var r,i,o=t.parentNode;if(!a.isChildOfBody(e,t)||!a.isChildOfBody(e,n)){return}if(a.isListNode(n.lastChild)){i=n.lastChild}if(o===n.lastChild){if(a.isBr(o.previousSibling)){e.remove(o.previousSibling)}}r=n.lastChild;if(r&&a.isBr(r)&&t.hasChildNodes()){e.remove(r)}if(a.isEmpty(e,n,true)){e.$(n).empty()}d(e,t,n);if(i){n.appendChild(i)}e.remove(t);if(a.isEmpty(e,o)&&o!==e.getRoot()){e.remove(o)}};var p=function(e,t,n){e.dom.$(n).empty();h(e.dom,t,n);e.selection.setCursorLocation(n)};var v=function(e,t,n,r){var a=e.dom;if(a.isEmpty(r)){p(e,n,r)}else{var o=i.createBookmark(t);h(a,n,r);e.selection.setRng(i.resolveBookmark(o))}};var m=function(e,t,n,r){var a=i.createBookmark(t);h(e.dom,n,r);var o=i.resolveBookmark(a);e.selection.setRng(o)};var g=function(e,t){var n=e.dom,i=e.selection;var o=i.getStart();var c=u.getClosestListRootElm(e,o);var f=n.getParent(i.getStart(),"LI",c);var d,h,p;if(f){d=f.parentNode;if(d===e.getBody()&&a.isEmpty(n,d)){return true}h=s.normalizeRange(i.getRng(true));p=n.getParent(l(e,h,t,c),"LI",c);if(p&&p!==f){if(t){v(e,h,p,f)}else{m(e,h,f,p)}return true}else if(!p){if(!t&&r.removeList(e,d.nodeName)){return true}}}return false};var y=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t);if(r&&e.isEmpty(r)){e.remove(r)}};var b=function(e,t){var n=e.dom;var i=e.selection.getStart();var a=u.getClosestListRootElm(e,i);var o=n.getParent(i,n.isBlock,a);if(o&&n.isEmpty(o)){var c=s.normalizeRange(e.selection.getRng(true));var f=n.getParent(l(e,c,t,a),"LI",a);if(f){e.undoManager.transact(function(){y(n,o,a);r.mergeWithAdjacentLists(n,f.parentNode);e.selection.select(f,true);e.selection.collapse(t)});return true}}return false};var x=function(e,t){return g(e,t)||b(e,t)};var w=function(e){var t=e.selection.getStart();var n=u.getClosestListRootElm(e,t);var r=e.dom.getParent(t,"LI,DT,DD",n);if(r||u.getSelectedListItems(e).length>0){e.undoManager.transact(function(){e.execCommand("Delete");o.normalizeLists(e.dom,e.getBody())});return true}return false};var _=function(e,t){return e.selection.isCollapsed()?x(e,t):w(e)};var k=function(e){e.on("keydown",function(t){if(t.keyCode===n.BACKSPACE){if(_(e,false)){t.preventDefault()}}else if(t.keyCode===n.DELETE){if(_(e,true)){t.preventDefault()}}})};return{setup:k,backspaceDelete:_}});i("tinymce.plugins.lists.api.Api",["tinymce.plugins.lists.core.Delete"],function(e){var t=function(t){return{backspaceDelete:function(n){e.backspaceDelete(t,n)}}};return{get:t}});i("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n,r){var i=e.DOM;var a=function(e,t){var r;if(n.isListNode(e)){while(r=e.firstChild){t.appendChild(r)}i.remove(e)}};var o=function(e){var t,r,o;if(e.nodeName==="DT"){i.rename(e,"DD");return true}t=e.previousSibling;if(t&&n.isListNode(t)){t.appendChild(e);return true}if(t&&t.nodeName==="LI"&&n.isListNode(t.lastChild)){t.lastChild.appendChild(e);a(e.lastChild,t.lastChild);return true}t=e.nextSibling;if(t&&n.isListNode(t)){t.insertBefore(e,t.firstChild);return true}t=e.previousSibling;if(t&&t.nodeName==="LI"){r=i.create(e.parentNode.nodeName);o=i.getStyle(e.parentNode,"listStyleType");if(o){i.setStyle(r,"listStyleType",o)}t.appendChild(r);r.appendChild(e);a(e.lastChild,r);return true}return false};var s=function(e){var n=r.getSelectedListItems(e);if(n.length){var i=t.createBookmark(e.selection.getRng(true));for(var a=0;a<n.length;a++){if(!o(n[a])&&a===0){break}}e.selection.setRng(t.resolveBookmark(i));e.nodeChanged();return true}};return{indentSelection:s}});i("tinymce.plugins.lists.api.Commands",["tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.actions.ToggleList"],function(e,t,n){var r=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}};var i=function(i){i.on("BeforeExecCommand",function(n){var r=n.command.toLowerCase(),a;if(r==="indent"){if(e.indentSelection(i)){a=true}}else if(r==="outdent"){if(t.outdentSelection(i)){a=true}}if(a){i.fire("ExecCommand",{command:n.command});n.preventDefault();return true}});i.addCommand("InsertUnorderedList",function(e,t){n.toggleList(i,"UL",t)});i.addCommand("InsertOrderedList",function(e,t){n.toggleList(i,"OL",t)});i.addCommand("InsertDefinitionList",function(e,t){n.toggleList(i,"DL",t)});i.addQueryStateHandler("InsertUnorderedList",r(i,"UL"));i.addQueryStateHandler("InsertOrderedList",r(i,"OL"));i.addQueryStateHandler("InsertDefinitionList",r(i,"DL"))};return{register:i}});i("tinymce.plugins.lists.api.Settings",[],function(){var e=function(e){return e.getParam("lists_indent_on_tab",true)};return{shouldIndentOnTab:e}});i("tinymce.plugins.lists.core.Keyboard",["tinymce.core.util.VK","tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.api.Settings","tinymce.plugins.lists.core.Delete"],function(e,t,n,r,i){var a=function(r){r.on("keydown",function(i){if(i.keyCode!==e.TAB||e.metaKeyPressed(i)){return}if(r.dom.getParent(r.selection.getStart(),"LI,DT,DD")){i.preventDefault();if(i.shiftKey){n.outdentSelection(r)}else{t.indentSelection(r)}}})};var o=function(e){if(r.shouldIndentOnTab(e)){a(e)}i.setup(e)};return{setup:o}});i("tinymce.plugins.lists.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r)){return n}}return-1};var i=function(n,i){return function(a){var o=a.control;n.on("NodeChange",function(n){var a=r(n.parents,t.isTableCellNode);var s=a!==-1?n.parents.slice(0,a):n.parents;var u=e.grep(s,t.isListNode);o.active(u.length>0&&u[0].nodeName===i)})}};var a=function(e){return function(r){var i=r.control;e.on("nodechange",function(){var r=n.getSelectedListItems(e);var a=r.length>0&&t.isFirstChild(r[0]);i.disabled(a)})}};var o=function(t){var n=function(t,n){var r=t.settings.plugins?t.settings.plugins:"";return e.inArray(r.split(/[ ,]/),n)!==-1};if(!n(t,"advlist")){t.addButton("numlist",{active:false,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:i(t,"OL")});t.addButton("bullist",{active:false,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:i(t,"UL")})}t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:a(t)})};return{register:o}});i("tinymce.plugins.lists.Plugin",["tinymce.core.PluginManager","tinymce.plugins.lists.api.Api","tinymce.plugins.lists.api.Commands","tinymce.plugins.lists.core.Keyboard","tinymce.plugins.lists.ui.Buttons"],function(e,t,n,r,i){e.add("lists",function(e){r.setup(e);i.register(e);n.register(e);return t.get(e)});return function(){}});r("tinymce.plugins.lists.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};return e});a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});a("global!window",window);i("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],function(e,t){var n=function(n){if(/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)&&t.get("powerpaste")){if(typeof e.console!=="undefined"&&e.console.log){e.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")}return true}else{return false}};return{hasProPlugin:n}});i("tinymce.plugins.paste.api.Api",[],function(e){var t=function(e,t){return{clipboard:e,quirks:t}};return{get:t}});i("tinymce.plugins.paste.api.Events",[],function(){var e=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})};var t=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})};var n=function(e,t){return e.fire("PastePlainTextToggle",{state:t})};var r=function(e,t){return e.fire("paste",{ieFake:t})};return{firePastePreProcess:e,firePastePostProcess:t,firePastePlainTextToggle:n,firePaste:r}});i("tinymce.plugins.paste.api.Settings",[],function(){var e=function(e){return e.getParam("paste_plaintext_inform",true)};var t=function(e){return e.getParam("paste_block_drop",false)};var n=function(e){return e.getParam("paste_data_images",false)};var r=function(e){return e.getParam("paste_filter_drop",true)};var i=function(e){return e.getParam("paste_preprocess")};var a=function(e){return e.getParam("paste_postprocess")};var o=function(e){return e.getParam("paste_webkit_styles")};var s=function(e){return e.getParam("paste_remove_styles_if_webkit",true)};var u=function(e){return e.getParam("paste_merge_formats",true)};var l=function(e){return e.getParam("smart_paste",true)};var c=function(e){return e.getParam("paste_as_text",false)};var f=function(e){return e.getParam("paste_retain_style_properties")};var d=function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,"+"-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,"+"td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)};var h=function(e){return e.getParam("paste_convert_word_fake_lists",true)};var p=function(e){return e.getParam("paste_enable_default_filters",true)};return{shouldPlainTextInform:e,shouldBlockDrop:t,shouldPasteDataImages:n,shouldFilterDrop:r,getPreProcess:i,getPostProcess:a,getWebkitStyles:o,shouldRemoveWebKitStyles:s,shouldMergeFormats:u,isSmartPasteEnabled:l,isPasteAsTextEnabled:c,getRetainStyleProps:f,getWordValidElements:d,shouldConvertWordFakeLists:h,shouldUseDefaultFilters:p}});i("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e,n){return n.get()===false&&t.shouldPlainTextInform(e)};var r=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})};var i=function(t,i,a){if(i.pasteFormat==="text"){i.pasteFormat="html";e.firePastePlainTextToggle(t,false)}else{i.pasteFormat="text";e.firePastePlainTextToggle(t,true);if(n(t,a)){r(t,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");a.set(true)}}t.focus()};return{togglePlainTextPaste:i}});i("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(e){var t=function(t,n,r){t.addCommand("mceTogglePlainTextPaste",function(){e.togglePlainTextPaste(t,n,r)});t.addCommand("mceInsertClipboardContent",function(e,t){if(t.content){n.pasteHtml(t.content,t.internal)}if(t.text){n.pasteText(t.text)}})};return{register:t}});a("global!Image",Image);a("global!navigator",navigator);i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")});i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")});i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")});i("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html";var t="\x3c!-- "+e+" --\x3e";var n=function(e){return t+e};var r=function(e){return e.replace(t,"")};var i=function(e){return e.indexOf(t)!==-1};return{mark:n,unmark:r,isMarked:i,internalHtmlMime:function(){return e}}});i("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")});i("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools","tinymce.core.html.Entities"],function(e,t){var n=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)};var r=function(e){return e.replace(/\r?\n/g,"<br>")};var i=function(e,n){var r,i=[];var a="<"+e;if(typeof n==="object"){for(r in n){if(n.hasOwnProperty(r)){i.push(r+'="'+t.encodeAllRaw(n[r])+'"')}}if(i.length){a+=" "+i.join(" ")}}return a+">"};var a=function(t,n,r){var a=t.split(/\n\n/);var o=i(n,r);var s="</"+n+">";var u=e.map(a,function(e){return e.split(/\n/).join("<br />")});var l=function(e){return o+e+s};return u.length===1?u[0]:e.map(u,l).join("")};var o=function(e,t,n){return t?a(e,t,n):r(e)};return{isPlainText:n,convert:o,toBRs:r,toBlockElements:a}});i("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){return function(n){var r;var i="%MCEPASTEBIN%";var a=function(){var e=n.dom,a=n.getBody();var o=n.dom.getViewPort(n.getWin()),s=o.y,u=20;var l;var c;r=n.selection.getRng();if(n.inline){c=n.selection.getScrollContainer();if(c&&c.scrollTop>0){s=c.scrollTop}}function f(t){var n,i,a,o=t.startContainer;n=t.getClientRects();if(n.length){return n[0]}if(!t.collapsed||o.nodeType!==1){return}a=o.childNodes[r.startOffset];while(a&&a.nodeType===3&&!a.data.length){a=a.nextSibling}if(!a){return}if(a.tagName==="BR"){i=e.doc.createTextNode("\ufeff");a.parentNode.insertBefore(i,a);t=e.createRng();t.setStartBefore(i);t.setEndAfter(i);n=t.getClientRects();e.remove(i)}if(n.length){return n[0]}}if(r.getClientRects){var d=f(r);if(d){u=s+(d.top-e.getPos(a).y)}else{u=s;var h=r.startContainer;if(h){if(h.nodeType===3&&h.parentNode!==a){h=h.parentNode}if(h.nodeType===1){u=e.getPos(h,c||a).y}}}}l=n.dom.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:true,"data-mce-bogus":"all",style:"position: absolute; top: "+u+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},i);if(t.ie||t.gecko){e.setStyle(l,"left",e.getStyle(a,"direction",true)==="rtl"?65535:-65535)}e.bind(l,"beforedeactivate focusin focusout",function(e){e.stopPropagation()});l.focus();n.selection.select(l,true)};var o=function(){if(s()){var e;while(e=n.dom.get("mcepastebin")){n.dom.remove(e);n.dom.unbind(e)}if(r){n.selection.setRng(r)}}r=null};var s=function(){return n.dom.get("mcepastebin")};var u=function(){var t,r,i,a,o;var s=function(e,t){e.appendChild(t);n.dom.remove(t,true)};r=e.grep(n.getBody().childNodes,function(e){return e.id==="mcepastebin"});t=r.shift();e.each(r,function(e){s(t,e)});a=n.dom.select("div[id=mcepastebin]",t);for(i=a.length-1;i>=0;i--){o=n.dom.create("div");t.insertBefore(o,a[i]);s(o,a[i])}return t?t.innerHTML:""};var l=function(){return r};var c=function(e){return e===i};var f=function(e){return e&&e.id==="mcepastebin"};var d=function(){var e=s();return f(e)&&c(e.innerHTML)};return{create:a,remove:o,getEl:s,getHtml:u,getLastRng:l,isDefault:d,isDefaultContent:c}}});i("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")});i("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")});i("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")});i("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")});i("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r){function i(e,t){r.each(t,function(t){if(t.constructor===RegExp){e=e.replace(t,"")}else{e=e.replace(t[0],t[1])}});return e}function a(e){var a=new n,o=new t({},a),s="";var u=a.getShortEndedElements();var l=r.makeMap("script noscript style textarea video audio iframe object"," ");var c=a.getBlockElements();function f(e){var t=e.name,n=e;if(t==="br"){s+="\n";return}if(u[t]){s+=" "}if(l[t]){s+=" ";return}if(e.type===3){s+=e.value}if(!e.shortEnded){if(e=e.firstChild){do{f(e)}while(e=e.next)}}if(c[t]&&n.next){s+="\n";if(t==="p"){s+="\n"}}}e=i(e,[/<!\[[^\]]+\]>/g]);f(o.parse(e));return s}function o(e){function t(e,t,n){if(!t&&!n){return" "}return"¬†"}e=i(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]);return e}function s(e){var t=0;return function(){return e+t++}}var u=function(){return e.userAgent.indexOf(" Edge/")!==-1};return{filter:i,innerText:a,trimHtml:o,createIdGenerator:s,isMsEdge:u}});i("tinymce.plugins.paste.core.WordFilter",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i,a,o){function s(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function u(e){var t,n;n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];e=e.replace(/^[\u00a0 ]+/,"");i.each(n,function(n){if(n.test(e)){t=true;return false}});return t}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function c(e){var n,r,i=1;function a(e){var t="";if(e.type===3){return e.value}if(e=e.firstChild){do{t+=a(e)}while(e=e.next)}return t}function o(e,t){if(e.type===3){if(t.test(e.value)){e.value=e.value.replace(t,"");return false}}if(e=e.firstChild){do{if(!o(e,t)){return false}}while(e=e.next)}return true}function s(e){if(e._listIgnore){e.remove();return}if(e=e.firstChild){do{s(e)}while(e=e.next)}}function c(e,a,u){var l=e._listLevel||i;if(l!==i){if(l<i){if(n){n=n.parent.parent}}else{r=n;n=null}}if(!n||n.name!==a){r=r||n;n=new t(a,1);if(u>1){n.attr("start",""+u)}e.wrap(n)}else{n.append(e)}e.name="li";if(l>i&&r){r.lastChild.append(n)}i=l;s(e);o(e,/^\u00a0+/);o(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);o(e,/^\u00a0+/)}var f=[],d=e.firstChild;while(typeof d!=="undefined"&&d!==null){f.push(d);d=d.walk();if(d!==null){while(typeof d!=="undefined"&&d.parent!==e){d=d.walk()}}}for(var h=0;h<f.length;h++){e=f[h];if(e.name==="p"&&e.firstChild){var p=a(e);if(l(p)){c(e,"ul");continue}if(u(p)){var v=/([0-9]+)\./.exec(p);var m=1;if(v){m=parseInt(v[1],10)}c(e,"ol",m);continue}if(e._listLevel){c(e,"ul",1);continue}n=null}else{r=n;n=null}}}function f(e,n,r,o){var s={},u,l=e.dom.parseStyle(o);i.each(l,function(t,i){switch(i){case"mso-list":u=/\w+ \w+([0-9]+)/i.exec(o);if(u){r._listLevel=parseInt(u[1],10)}if(/Ignore/i.test(t)&&r.firstChild){r._listIgnore=true;r.firstChild._listIgnore=true}break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":if(t!=="normal"){s[i]=t}return;case"mso-element":if(/^(comment|comment-list)$/i.test(t)){r.remove();return}break}if(i.indexOf("mso-comment")===0){r.remove();return}if(i.indexOf("mso-")===0){return}if(a.getRetainStyleProps(e)==="all"||n&&n[i]){s[i]=t}});if(/(bold)/i.test(s["font-weight"])){delete s["font-weight"];r.wrap(new t("b",1))}if(/(italic)/i.test(s["font-style"])){delete s["font-style"];r.wrap(new t("i",1))}s=e.dom.serializeStyle(s,r.name);if(s){return s}return null}var d=function(t,s){var u,l;u=a.getRetainStyleProps(t);if(u){l=i.makeMap(u.split(/[, ]/))}s=o.filter(s,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"¬†"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("¬†"):""}]]);var d=a.getWordValidElements(t);var h=new n({valid_elements:d,valid_children:"-li[p]"});i.each(h.elements,function(e){if(!e.attributes["class"]){e.attributes["class"]={};e.attributesOrder.push("class")}if(!e.attributes.style){e.attributes.style={};e.attributesOrder.push("style")}});var p=new e({},h);p.addAttributeFilter("style",function(e){var n=e.length,r;while(n--){r=e[n];r.attr("style",f(t,l,r,r.attr("style")));if(r.name==="span"&&r.parent&&!r.attributes.length){r.unwrap()}}});p.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.attr("class");if(/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r)){n.remove()}n.attr("class",null)}});p.addNodeFilter("del",function(e){var t=e.length;while(t--){e[t].remove()}});p.addNodeFilter("a",function(e){var t=e.length,n,r,i;while(t--){n=e[t];r=n.attr("href");i=n.attr("name");if(r&&r.indexOf("#_msocom_")!==-1){n.remove();continue}if(r&&r.indexOf("file://")===0){r=r.split("#")[1];if(r){r="#"+r}}if(!r&&!i){n.unwrap()}else{if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){n.unwrap();continue}n.attr({href:r,name:i})}}});var v=p.parse(s);if(a.shouldConvertWordFakeLists(t)){c(v)}s=new r({validate:t.settings.validate},h).serialize(v);return s};var h=function(e,t){return a.shouldUseDefaultFilters(e)?d(e,t):t};return{preProcess:h,isWordContent:s}});i("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(e,t){var n=function(e,t){return{content:e,cancelled:t}};var r=function(t,r,i,a){var o=t.dom.create("div",{style:"display:none"},r);var s=e.firePastePostProcess(t,o,i,a);return n(s.node.innerHTML,s.isDefaultPrevented())};var i=function(t,i,a,o){var s=e.firePastePreProcess(t,i,a,o);if(t.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()){return r(t,s.content,a,o)}else{return n(s.content,s.isDefaultPrevented())}};var a=function(e,n,r){var a=t.isWordContent(n);var o=a?t.preProcess(e,n):n;return i(e,o,r,a)};return{process:a}});i("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)};var r=function(e){return n(e)&&/.(gif|jpe?g|png)$/.test(e)};var i=function(e,t,n){e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')});return true};var a=function(e,t,n){e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",false,t)});return true};var o=function(e,t,r){return e.selection.isCollapsed()===false&&n(t)?a(e,t,r):false};var s=function(e,t,n){return r(t)?i(e,t,n):false};var u=function(e,n){e.insertContent(n,{merge:t.shouldMergeFormats(e),paste:true});return true};var l=function(t,n){e.each([o,s,u],function(e){return e(t,n,u)!==true})};var c=function(e,n){if(t.isSmartPasteEnabled(e)===false){u(e,n)}else{l(e,n)}};return{isImageUrl:r,isAbsoluteUrl:n,insertContent:c}});i("tinymce.plugins.paste.core.Clipboard",["global!Image","global!navigator","global!window","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.PasteBin","tinymce.plugins.paste.core.ProcessFilters","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){return function(v){var m=this,g=0;var y=new f(v);var b;var x="data:text/mce-internal,";var w=p.createIdGenerator("mceclip");m.pasteFormat=u.isPasteAsTextEnabled(v)?"text":"html";function _(e,t){var n=t?t:l.isMarked(e);var r=d.process(v,l.unmark(e),n);if(r.cancelled===false){h.insertContent(v,r.content)}}function k(e){e=v.dom.encode(e).replace(/\r\n/g,"\n");e=c.convert(e,v.settings.forced_root_block,v.settings.forced_root_block_attrs);_(e,false)}function C(e){var t={};if(e){if(e.getData){var n=e.getData("Text");if(n&&n.length>0){if(n.indexOf(x)===-1){t["text/plain"]=n}}}if(e.types){for(var r=0;r<e.types.length;r++){var i=e.types[r];try{t[i]=e.getData(i)}catch(e){t[i]=""}}}}return t}function T(e){var t=C(e.clipboardData||v.getDoc().dataTransfer);return p.isMsEdge()?a.extend(t,{"text/html":""}):t}function S(e){return R(e,"text/html")||R(e,"text/plain")}function E(e){var t;t=e.indexOf(",");if(t!==-1){return e.substr(t+1)}return null}function A(e,t){return e.images_dataimg_filter?e.images_dataimg_filter(t):true}function P(e){var t=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?v.dom.encode(t[1]):null}function O(t,n,r){if(t){v.selection.setRng(t);t=null}var i=n.result;var a=E(i);var o=w();var s=v.settings.images_reuse_filename&&r.name?P(r.name):o;var u=new e;u.src=i;if(A(v.settings,u)){var l=v.editorUpload.blobCache;var c,f;f=l.findFirst(function(e){return e.base64()===a});if(!f){c=l.create(o,r,a,s);l.add(c)}else{c=f}_('<img src="'+c.blobUri()+'">',false)}else{_('<img src="'+i+'">',false)}}function M(e,t){var r=e.clipboardData||e.dataTransfer;function i(r){var i,a,o,s=false;if(r){for(i=0;i<r.length;i++){a=r[i];if(/^image\/(jpeg|png|gif|bmp)$/.test(a.type)){var u=a.getAsFile?a.getAsFile():a;o=new n.FileReader;o.onload=O.bind(null,t,o,u);o.readAsDataURL(u);e.preventDefault();s=true}}}return s}if(v.settings.paste_data_images&&r){return i(r.items)||i(r.files)}}function N(e){var n=e.clipboardData;return t.userAgent.indexOf("Android")!==-1&&n&&n.items&&n.items.length===0}function R(e,t){return t in e&&e[t].length>0}function D(e){return o.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45}function B(){v.on("keydown",function(e){function n(e){if(D(e)&&!e.isDefaultPrevented()){y.remove()}}if(D(e)&&!e.isDefaultPrevented()){b=e.shiftKey&&e.keyCode===86;if(b&&r.webkit&&t.userAgent.indexOf("Version/")!==-1){return}e.stopImmediatePropagation();g=(new Date).getTime();if(r.ie&&b){e.preventDefault();s.firePaste(v,true);return}y.remove();y.create();v.once("keyup",n);v.once("paste",function(){v.off("keyup",n)})}});function e(e,t,n,r){var i,a;if(R(e,"text/html")){i=e["text/html"]}else{i=y.getHtml();r=r?r:l.isMarked(i);if(y.isDefaultContent(i)){n=true}}i=p.trimHtml(i);y.remove();a=r===false&&c.isPlainText(i);if(!i.length||a){n=true}if(n){if(R(e,"text/plain")&&a){i=e["text/plain"]}else{i=p.innerText(i)}}if(y.isDefaultContent(i)){if(!t){v.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")}return}if(n){k(i)}else{_(i,r)}}var n=function(){return y.getLastRng()||v.selection.getRng()};v.on("paste",function(t){var a=(new Date).getTime();var o=T(t);var s=(new Date).getTime()-a;var u=(new Date).getTime()-g-s<1e3;var c=m.pasteFormat==="text"||b;var f=R(o,l.internalHtmlMime());b=false;if(t.isDefaultPrevented()||N(t)){y.remove();return}if(!S(o)&&M(t,n())){y.remove();return}if(!u){t.preventDefault()}if(r.ie&&(!u||t.ieFake)&&!R(o,"text/html")){y.create();v.dom.bind(y.getEl(),"paste",function(e){e.stopPropagation()});v.getDoc().execCommand("Paste",false,null);o["text/html"]=y.getHtml()}if(R(o,"text/html")){t.preventDefault();if(!f){f=l.isMarked(o["text/html"])}e(o,u,c,f)}else{i.setEditorTimeout(v,function(){e(o,u,c,f)},0)}})}m.pasteHtml=_;m.pasteText=k;m.pasteImageData=M;m.getDataTransferItems=C;m.hasHtmlOrText=S;m.hasContentType=R;v.on("preInit",function(){B();v.parser.addNodeFilter("img",function(e,t,n){function i(e){return e.data&&e.data.paste===true}function a(e){if(!e.attr("data-mce-object")&&l!==r.transparentSrc){e.remove()}}function o(e){return e.indexOf("webkit-fake-url")===0}function s(e){return e.indexOf("data:")===0}if(!v.settings.paste_data_images&&i(n)){var u=e.length;while(u--){var l=e[u].attributes.map.src;if(!l){continue}if(o(l)){a(e[u])}else if(!v.settings.allow_html_data_urls&&s(l)){a(e[u])}}}})})}});a("global!setTimeout",setTimeout);i("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r){var i=function(){};var a=function(e){return t.iOS===false&&e!==undefined&&typeof e.setData==="function"&&r.isMsEdge()!==true};var o=function(e,t,r){if(a(e)){try{e.clearData();e.setData("text/html",t);e.setData("text/plain",r);e.setData(n.internalHtmlMime(),t);return true}catch(e){return false}}else{return false}};var s=function(e,t,n,r){if(o(e.clipboardData,t.html,t.text)){e.preventDefault();r()}else{n(t.html,r)}};var u=function(t){return function(r,i){var a=n.mark(r);var o=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"});var s=t.dom.create("div",{contenteditable:"true"},a);t.dom.setStyles(o,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"});o.appendChild(s);t.dom.add(t.getBody(),o);var u=t.selection.getRng();s.focus();var l=t.dom.createRng();l.selectNodeContents(s);t.selection.setRng(l);e(function(){o.parentNode.removeChild(o);t.selection.setRng(u);i()},0)}};var l=function(e){return{html:e.selection.getContent({contextual:true}),text:e.selection.getContent({format:"text"})}};var c=function(t){return function(n){if(t.selection.isCollapsed()===false){s(n,l(t),u(t),function(){e(function(){t.execCommand("Delete")},0)})}}};var f=function(e){return function(t){if(e.selection.isCollapsed()===false){s(t,l(e),u(e),i)}}};var d=function(e){e.on("cut",c(e));e.on("copy",f(e))};return{register:d}});i("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")});i("tinymce.plugins.paste.core.DragDrop",["tinymce.core.api.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i){var a=function(t,n){return e.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())};var o=function(e){var t=e["text/plain"];return t?t.indexOf("file://")===0:false};var s=function(e,t){e.focus();e.selection.setRng(t)};var u=function(e,u,l){if(n.shouldBlockDrop(e)){e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault();e.stopPropagation()})}if(!n.shouldPasteDataImages(e)){e.on("drop",function(e){var t=e.dataTransfer;if(t&&t.files&&t.files.length>0){e.preventDefault()}})}e.on("drop",function(c){var f,d;d=a(e,c);if(c.isDefaultPrevented()||l.get()){return}f=u.getDataTransferItems(c.dataTransfer);var h=u.hasContentType(f,r.internalHtmlMime());if((!u.hasHtmlOrText(f)||o(f))&&u.pasteImageData(c,d)){return}if(d&&n.shouldFilterDrop(e)){var p=f["mce-internal"]||f["text/html"]||f["text/plain"];if(p){c.preventDefault();t.setEditorTimeout(e,function(){e.undoManager.transact(function(){if(f["mce-internal"]){e.execCommand("Delete")}s(e,d);p=i.trimHtml(p);if(!f["text/html"]){u.pasteText(p)}else{u.pasteHtml(p,h)}})})}}});e.on("dragstart",function(e){l.set(true)});e.on("dragover dragend",function(t){if(n.shouldPasteDataImages(e)&&l.get()===false){t.preventDefault();s(e,a(e,t))}if(t.type==="dragend"){l.set(false)}})};return{setup:u}});i("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(e){var t=function(t){var n=t.plugins.paste;var r=e.getPreProcess(t);if(r){t.on("PastePreProcess",function(e){r.call(n,n,e)})}var i=e.getPostProcess(t);if(i){t.on("PastePostProcess",function(e){i.call(n,n,e)})}};return{setup:t}});i("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,r,i){function a(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function o(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function s(e,n){if(!i.isWordContent(n)){return n}var a=[];t.each(e.schema.getBlockElements(),function(e,t){a.push(t)});var o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+a.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");n=r.filter(n,[[o,"$1"]]);n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]);return n}function u(e,t,r,i){if(i||r){return t}var a=n.getWebkitStyles(e);if(n.shouldRemoveWebKitStyles(e)===false||a==="all"){return t}if(a){a=a.split(/[, ]/)}if(a){var o=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=o.parseStyle(o.decode(n),"span");var u={};if(a==="none"){return t+r}for(var l=0;l<a.length;l++){var c=i[a[l]],f=o.getStyle(s,a[l],true);if(/color/.test(a[l])){c=o.toHex(c);f=o.toHex(f)}if(f!==c){u[a[l]]=c}}u=o.serializeStyle(u,"span");if(u){return t+' style="'+u+'"'+r}return t+r})}else{t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r});return t}function l(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,true)})}var c=function(t){if(e.webkit){a(t,u)}if(e.ie){a(t,s);o(t,l)}};return{setup:c}});a("global!Array",Array);a("global!Error",Error);i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){};var r=function(e){return function(){return e()}};var i=function(e,t){return function(){return e(t.apply(null,arguments))}};var a=function(e){return function(){return e}};var o=function(e){return e};var s=function(e,t){return e===t};var u=function(t){var n=new e(arguments.length-1);for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}return function(){var r=new e(arguments.length);for(var i=0;i<r.length;i++){r[i]=arguments[i]}var a=n.concat(r);return t.apply(null,a)}};var l=function(e){return function(){return!e.apply(null,arguments)}};var c=function(e){return function(){throw new t(e)}};var f=function(e){return e()};var d=function(e){e()};var h=a(false);var p=a(true);return{noop:n,noarg:r,compose:i,constant:a,identity:o,tripleEquals:s,curry:u,not:l,die:c,apply:f,call:d,never:h,always:p}});i("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(e){var t=function(e,t,n){var r=n.control;r.active(t.pasteFormat==="text");e.on("PastePlainTextToggle",function(e){r.active(e.state)})};var n=function(n,r){var i=e.curry(t,n,r);n.addButton("pastetext",{active:false,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:i});n.addMenuItem("pastetext",{text:"Paste as text",selectable:true,active:r.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:i})};return{register:n}});i("tinymce.plugins.paste.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.paste.alien.DetectProPlugin","tinymce.plugins.paste.api.Api","tinymce.plugins.paste.api.Commands","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.DragDrop","tinymce.plugins.paste.core.PrePostProcess","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.ui.Buttons"],function(e,t,n,r,i,a,o,s,u,l,c){var f=e(false);t.add("paste",function(t){if(n.hasProPlugin(t)===false){var d=new a(t);var h=l.setup(t);var p=e(false);c.register(t,d);i.register(t,d,f);u.setup(t);o.register(t);s.setup(t,d,p);return r.get(d,h)}});return function(){}});r("tinymce.plugins.paste.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};return e});a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function e(e){return e&&e.nodeType===1&&e.contentEditable==="false"}function t(t,n,r,i,a){var o,s=[],u,l=0,c;var f,d,h;c=n.ownerDocument;f=a.getBlockElements();d=a.getWhiteSpaceElements();h=a.getShortEndedElements();function p(e,t){t=t||0;if(!e[0]){throw"findAndReplaceDOMText cannot handle zero-length matches"}var n=e.index;if(t>0){var r=e[t];if(!r){throw"Invalid capture group"}n+=e[0].indexOf(r);e[0]=r}return[n,n+e[0].length,[e[0]]]}function v(t){var n;if(t.nodeType===3){return t.data}if(d[t.nodeName]&&!f[t.nodeName]){return""}n="";if(e(t)){return"\n"}if(f[t.nodeName]||h[t.nodeName]){n+="\n"}if(t=t.firstChild){do{n+=v(t)}while(t=t.nextSibling)}return n}function m(t,n,r){var i,a,o,s,u=[],l=0,c=t,p=n.shift(),v=0;e:while(true){if(f[c.nodeName]||h[c.nodeName]||e(c)){l++}if(c.nodeType===3){if(!a&&c.length+l>=p[1]){a=c;s=p[1]-l}else if(i){u.push(c)}if(!i&&c.length+l>p[0]){i=c;o=p[0]-l}l+=c.length}if(i&&a){c=r({startNode:i,startNodeIndex:o,endNode:a,endNodeIndex:s,innerNodes:u,match:p[2],matchIndex:v});l-=a.length-s;i=null;a=null;u=[];p=n.shift();v++;if(!p){break}}else if((!d[c.nodeName]||f[c.nodeName])&&c.firstChild){if(!e(c)){c=c.firstChild;continue}}else if(c.nextSibling){c=c.nextSibling;continue}while(true){if(c.nextSibling){c=c.nextSibling;break}else if(c.parentNode!==t){c=c.parentNode}else{break e}}}}function g(e){var t;if(typeof e!=="function"){var n=e.nodeType?e:c.createElement(e);t=function(e,t){var r=n.cloneNode(false);r.setAttribute("data-mce-index",t);if(e){r.appendChild(c.createTextNode(e))}return r}}else{t=e}return function(e){var n,r,i,a=e.startNode,o=e.endNode,s=e.matchIndex;if(a===o){var u=a;i=u.parentNode;if(e.startNodeIndex>0){n=c.createTextNode(u.data.substring(0,e.startNodeIndex));i.insertBefore(n,u)}var l=t(e.match[0],s);i.insertBefore(l,u);if(e.endNodeIndex<u.length){r=c.createTextNode(u.data.substring(e.endNodeIndex));i.insertBefore(r,u)}u.parentNode.removeChild(u);return l}n=c.createTextNode(a.data.substring(0,e.startNodeIndex));r=c.createTextNode(o.data.substring(e.endNodeIndex));var f=t(a.data.substring(e.startNodeIndex),s);var d=[];for(var h=0,p=e.innerNodes.length;h<p;++h){var v=e.innerNodes[h];var m=t(v.data,s);v.parentNode.replaceChild(m,v);d.push(m)}var g=t(o.data.substring(0,e.endNodeIndex),s);i=a.parentNode;i.insertBefore(n,a);i.insertBefore(f,a);i.removeChild(a);i=o.parentNode;i.insertBefore(g,o);i.insertBefore(r,o);i.removeChild(o);return g}}u=v(n);if(!u){return}if(t.global){while(o=t.exec(u)){s.push(p(o,i))}}else{o=u.match(t);s.push(p(o,i))}if(s.length){l=s.length;m(n,s,g(r))}return l}return{findAndReplaceDOMText:t}});i("tinymce.plugins.searchreplace.core.Actions",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],function(e,t){var n=function(e){var t=e.getAttribute("data-mce-index");if(typeof t==="number"){return""+t}return t};var r=function(e,n,r){var i,a;a=e.dom.create("span",{"data-mce-bogus":1});a.className="mce-match-marker";i=e.getBody();h(e,n,false);return t.findAndReplaceDOMText(r,i,a,false,e.schema)};var i=function(e){var t=e.parentNode;if(e.firstChild){t.insertBefore(e.firstChild,e)}e.parentNode.removeChild(e)};var a=function(t,r){var i,a=[];i=e.toArray(t.getBody().getElementsByTagName("span"));if(i.length){for(var o=0;o<i.length;o++){var s=n(i[o]);if(s===null||!s.length){continue}if(s===r.toString()){a.push(i[o])}}}return a};var o=function(e,t,n){var r=t.get(),i=e.dom;n=n!==false;if(n){r++}else{r--}i.removeClass(a(e,t.get()),"mce-match-marker-selected");var o=a(e,r);if(o.length){i.addClass(a(e,r),"mce-match-marker-selected");e.selection.scrollIntoView(o[0]);return r}return-1};var s=function(e,t){var n=t.parentNode;e.remove(t);if(e.isEmpty(n)){e.remove(n)}};var u=function(e,t,n,i,a){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=n.replace(/\s/g,"\\s");n=a?"\\b"+n+"\\b":n;var s=r(e,t,new RegExp(n,i?"g":"gi"));if(s){t.set(-1);t.set(o(e,t,true))}return s};var l=function(e,t){var n=o(e,t,true);if(n!==-1){t.set(n)}};var c=function(e,t){var n=o(e,t,false);if(n!==-1){t.set(n)}};var f=function(e){var t=n(e);return t!==null&&t.length>0};var d=function(t,r,a,o,u){var d,h,m,g,y,b=r.get(),x;o=o!==false;m=t.getBody();h=e.grep(e.toArray(m.getElementsByTagName("span")),f);for(d=0;d<h.length;d++){var w=n(h[d]);g=y=parseInt(w,10);if(u||g===r.get()){if(a.length){h[d].firstChild.nodeValue=a;i(h[d])}else{s(t.dom,h[d])}while(h[++d]){g=parseInt(n(h[d]),10);if(g===y){s(t.dom,h[d])}else{d--;break}}if(o){b--}}else if(y>r.get()){h[d].setAttribute("data-mce-index",y-1)}}r.set(b);if(o){x=p(t,r);l(t,r)}else{x=v(t,r);c(t,r)}return!u&&x};var h=function(t,r,a){var o,s,u,l;s=e.toArray(t.getBody().getElementsByTagName("span"));for(o=0;o<s.length;o++){var c=n(s[o]);if(c!==null&&c.length){if(c===r.get().toString()){if(!u){u=s[o].firstChild}l=s[o].firstChild}i(s[o])}}if(u&&l){var f=t.dom.createRng();f.setStart(u,0);f.setEnd(l,l.data.length);if(a!==false){t.selection.setRng(f)}return f}};var p=function(e,t){return a(e,t.get()+1).length>0};var v=function(e,t){return a(e,t.get()-1).length>0};return{done:h,find:u,next:l,prev:c,replace:d,hasNext:p,hasPrev:v}});i("tinymce.plugins.searchreplace.api.Api",["tinymce.plugins.searchreplace.core.Actions"],function(e){var t=function(t,n){var r=function(r){return e.done(t,n,r)};var i=function(r,i,a){return e.find(t,n,r,i,a)};var a=function(){return e.next(t,n)};var o=function(){return e.prev(t,n)};var s=function(r,i,a){return e.replace(t,n,r,i,a)};return{done:r,find:i,next:a,prev:o,replace:s}};return{get:t}});i("tinymce.plugins.searchreplace.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.Actions"],function(e,t){var n=function(n,r){var i={},a;n.undoManager.add();a=e.trim(n.selection.getContent({format:"text"}));function o(){u.statusbar.find("#next").disabled(t.hasNext(n,r)===false);u.statusbar.find("#prev").disabled(t.hasPrev(n,r)===false)}function s(){n.windowManager.alert("Could not find the specified string.",function(){u.find("#find")[0].focus()})}var u=n.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){n.focus();t.done(n,r);n.undoManager.add()},onSubmit:function(e){var a,l,c,f;e.preventDefault();l=u.find("#case").checked();f=u.find("#words").checked();c=u.find("#find").value();if(!c.length){t.done(n,r,false);u.statusbar.items().slice(1).disabled(true);return}if(i.text===c&&i.caseState===l&&i.wholeWord===f){if(!t.hasNext(n,r)){s();return}t.next(n,r);o();return}a=t.find(n,r,c,l,f);if(!a){s()}u.statusbar.items().slice(1).disabled(a===0);o();i={text:c,caseState:l,wholeWord:f}},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:true,onclick:function(){if(!t.replace(n,r,u.find("#replace").value())){u.statusbar.items().slice(1).disabled(true);r.set(-1);i={}}}},{text:"Replace all",disabled:true,onclick:function(){t.replace(n,r,u.find("#replace").value(),true,true);u.statusbar.items().slice(1).disabled(true);i={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){t.prev(n,r);o()}},{text:"Next",name:"next",disabled:true,onclick:function(){t.next(n,r);o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:a},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})};return{open:n}});i("tinymce.plugins.searchreplace.api.Commands",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){var t=function(t,n){t.addCommand("SearchReplace",function(){e.open(t,n)})};return{register:t}});i("tinymce.plugins.searchreplace.ui.Buttons",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){var t=function(t,n){return function(){e.open(t,n)}};var n=function(e,n){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:t(e,n),separator:"before",context:"edit"});e.addButton("searchreplace",{tooltip:"Find and replace",onclick:t(e,n)});e.shortcuts.add("Meta+F","",t(e,n))};return{register:n}});i("tinymce.plugins.searchreplace.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.searchreplace.api.Api","tinymce.plugins.searchreplace.api.Commands","tinymce.plugins.searchreplace.ui.Buttons"],function(e,t,n,r,i){t.add("searchreplace",function(t){var a=e(-1);r.register(t,a);i.register(t,a);return n.get(t,a)});return function(){}});r("tinymce.plugins.searchreplace.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});a("global!Array",Array);a("global!Error",Error);i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){};var r=function(e){return function(){return e()}};var i=function(e,t){return function(){return e(t.apply(null,arguments))}};var a=function(e){return function(){return e}};var o=function(e){return e};var s=function(e,t){return e===t};var u=function(t){var n=new e(arguments.length-1);for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}return function(){var r=new e(arguments.length);for(var i=0;i<r.length;i++){r[i]=arguments[i]}var a=n.concat(r);return t.apply(null,a)}};var l=function(e){return function(){return!e.apply(null,arguments)}};var c=function(e){return function(){throw new t(e)}};var f=function(e){return e()};var d=function(e){e()};var h=a(false);var p=a(true);return{noop:n,noarg:r,compose:i,constant:a,identity:o,tripleEquals:s,curry:u,not:l,die:c,apply:f,call:d,never:h,always:p}});a("global!Object",Object);i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never;var r=e.always;var i=function(){return a};var a=function(){var a=function(e){return e.isNone()};var o=function(e){return e()};var s=function(e){return e};var u=function(){};var l={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:s,getOrThunk:o,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:s,orThunk:o,map:i,ap:i,each:u,bind:i,flatten:i,exists:n,forall:r,filter:i,equals:a,equals_:a,toArray:function(){return[]},toString:e.constant("none()")};if(t.freeze){t.freeze(l)}return l}();var o=function(e){var t=function(){return e};var s=function(){return c};var u=function(t){return o(t(e))};var l=function(t){return t(e)};var c={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:s,orThunk:s,map:u,ap:function(t){return t.fold(i,function(t){return o(t(e))})},each:function(t){t(e)},bind:l,flatten:t,exists:l,forall:l,filter:function(t){return t(e)?c:a},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return c};var s=function(e){return e===null||e===undefined?a:o(e)};return{some:o,none:i,from:s}});a("global!String",String);i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var i=function(){var e=t.prototype.indexOf;var n=function(t,n){return e.call(t,n)};var r=function(e,t){return x(e,t)};return e===undefined?r:n}();var a=function(t,n){var r=i(t,n);return r===-1?e.none():e.some(r)};var o=function(e,t){return i(e,t)>-1};var s=function(e,t){return b(e,t).isSome()};var u=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var l=function(e,t){var n=[];for(var r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n};var c=function(e,n){var r=e.length;var i=new t(r);for(var a=0;a<r;a++){var o=e[a];i[a]=n(o,a,e)}return i};var f=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t(i,n,e)}};var d=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r,n,e)}};var h=function(e,t){var n=[];var r=[];for(var i=0,a=e.length;i<a;i++){var o=e[i];var s=t(o,i,e)?n:r;s.push(o)}return{pass:n,fail:r}};var p=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var a=e[r];if(t(a,r,e)){n.push(a)}}return n};var v=function(e,t){if(e.length===0){return[]}else{var n=t(e[0]);var r=[];var i=[];for(var a=0,o=e.length;a<o;a++){var s=e[a];var u=t(s);if(u!==n){r.push(i);i=[]}n=u;i.push(s)}if(i.length!==0){r.push(i)}return r}};var m=function(e,t,n){d(e,function(e){n=t(n,e)});return n};var g=function(e,t,n){f(e,function(e){n=t(n,e)});return n};var y=function(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];if(n(a,r,t)){return e.some(a)}}return e.none()};var b=function(t,n){for(var r=0,i=t.length;r<i;r++){var a=t[r];if(n(a,r,t)){return e.some(r)}}return e.none()};var x=function(e,t){for(var n=0,r=e.length;n<r;++n){if(e[n]===t){return n}}return-1};var w=t.prototype.push;var _=function(e){var r=[];for(var i=0,a=e.length;i<a;++i){if(!t.prototype.isPrototypeOf(e[i])){throw new n("Arr.flatten item "+i+" was not an array, input: "+e)}w.apply(r,e[i])}return r};var k=function(e,t){var n=c(e,t);return _(n)};var C=function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(t(i,n,e)!==true){return false}}return true};var T=function(e,t){return e.length===t.length&&C(e,function(e,n){return e===t[n]})};var S=t.prototype.slice;var E=function(e){var t=S.call(e,0);t.reverse();return t};var A=function(e,t){return p(e,function(e){return!o(t,e)})};var P=function(e,t){var n={};for(var i=0,a=e.length;i<a;i++){var o=e[i];n[r(o)]=t(o,i)}return n};var O=function(e){return[e]};var M=function(e,t){var n=S.call(e,0);n.sort(t);return n};var N=function(t){return t.length===0?e.none():e.some(t[0])};var R=function(t){return t.length===0?e.none():e.some(t[t.length-1])};return{map:c,each:f,eachr:d,partition:h,filter:p,groupBy:v,indexOf:a,foldr:m,foldl:g,find:y,findIndex:b,flatten:_,bind:k,forall:C,exists:s,contains:o,equal:T,reverse:E,chunk:l,difference:A,mapToObject:P,pure:O,sort:M,range:u,head:N,last:R}});i("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys;var n=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t};return e===undefined?n:e}();var r=function(e,t){var r=n(e);for(var i=0,a=r.length;i<a;i++){var o=r[i];var s=e[o];t(s,o,e)}};var i=function(e,t){return a(e,function(e,n,r){return{k:n,v:t(e,n,r)}})};var a=function(e,t){var n={};r(e,function(r,i){var a=t(r,i,e);n[a.k]=a.v});return n};var o=function(e,t){var n={};var i={};r(e,function(e,r){var a=t(e,r)?n:i;a[r]=e});return{t:n,f:i}};var s=function(e,t){var n=[];r(e,function(e,r){n.push(t(e,r))});return n};var u=function(t,r){var i=n(t);for(var a=0,o=i.length;a<o;a++){var s=i[a];var u=t[s];if(r(u,s,t)){return e.some(u)}}return e.none()};var l=function(e){return s(e,function(e){return e})};var c=function(e){return l(e).length};return{bifilter:o,each:r,map:i,mapToArray:s,tupleMap:a,find:u,keys:n,values:l,size:c}});i("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var i=arguments;return function(){var a=new n(arguments.length);for(var o=0;o<a.length;o++){a[o]=arguments[o]}if(i.length!==a.length){throw new r('Wrong number of arguments to struct. Expected "['+i.length+']", got '+a.length+" arguments")}var s={};e.each(i,function(e,n){s[e]=t.constant(a[n])});return s}}});i("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(n===null){return"null"}var r=typeof n;if(r==="object"&&e.prototype.isPrototypeOf(n)){return"array"}if(r==="object"&&t.prototype.isPrototypeOf(n)){return"string"}return r};var r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}});i("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};var i=function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")};var a=function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))};var o=function(r,i){if(!t.isArray(i)){throw new n("The "+r+" fields must be an array. Was: "+i+".")}e.each(i,function(e){if(!t.isString(e)){throw new n("The value "+e+" in the "+r+" fields was not a string.")}})};var s=function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")};var u=function(t){var i=r(t);var a=e.find(i,function(e,t){return t<i.length-1&&e===i[t+1]});a.each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+i.join(", ")+"].")})};return{sort:r,reqMessage:i,unsuppMessage:a,validateStrArr:o,invalidTypeMessage:s,checkDupes:u}});i("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,i,a,o){return function(s,u){var l=s.concat(u);if(l.length===0){throw new a("You must specify at least one required or optional field.")}i.validateStrArr("required",s);i.validateStrArr("optional",u);i.checkDupes(l);return function(a){var c=n.keys(a);var f=e.forall(s,function(t){return e.contains(c,t)});if(!f){i.reqMessage(s,c)}var d=e.filter(c,function(t){return!e.contains(l,t)});if(d.length>0){i.unsuppMessage(d)}var h={};e.each(s,function(e){h[e]=t.constant(a[e])});e.each(u,function(e){h[e]=t.constant(o.prototype.hasOwnProperty.call(a,e)?r.some(a[e]):r.none())});return h}}});i("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}});i("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("width","height");var n=e.immutable("rows","columns");var r=e.immutable("row","column");var i=e.immutable("x","y");var a=e.immutable("element","rowspan","colspan");var o=e.immutable("element","rowspan","colspan","isNew");var s=e.immutable("element","rowspan","colspan","row","column");var u=e.immutable("element","cells","section");var l=e.immutable("element","isNew");var c=e.immutable("element","cells","section","isNew");var f=e.immutable("cells","section");var d=e.immutable("details","section");var h=e.immutable("startRow","startCol","finishRow","finishCol");return{dimensions:t,grid:n,address:r,coords:i,extended:s,detail:a,detailnew:o,rowdata:u,elementnew:l,rowdatanew:c,rowcells:f,rowdetails:d,bounds:h}});i("global!console",[],function(){if(typeof console==="undefined"){console={log:function(){}}}return console});a("global!document",document);i("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Error","global!console","global!document"],function(e,t,n,r,i){var a=function(e,t){var n=t||i;var a=n.createElement("div");a.innerHTML=e;if(!a.hasChildNodes()||a.childNodes.length>1){r.error("HTML does not have a single root node",e);throw"HTML must have a single root node"}return u(a.childNodes[0])};var o=function(e,t){var n=t||i;var r=n.createElement(e);return u(r)};var s=function(e,t){var n=t||i;var r=n.createTextNode(e);return u(r)};var u=function(t){if(t===null||t===undefined){throw new n("Node cannot be null or undefined")}return{dom:e.constant(t)}};var l=function(e,n,r){return t.from(e.dom().elementFromPoint(n,r)).map(u)};return{fromHtml:a,fromTag:o,fromText:s,fromDom:u,fromPoint:l}});i("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});i("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,i,a){var o=r.ELEMENT;var s=r.DOCUMENT;var u=function(e,t){var n=e.dom();if(n.nodeType!==o){return false}else if(n.matches!==undefined){return n.matches(t)}else if(n.msMatchesSelector!==undefined){return n.msMatchesSelector(t)}else if(n.webkitMatchesSelector!==undefined){return n.webkitMatchesSelector(t)}else if(n.mozMatchesSelector!==undefined){return n.mozMatchesSelector(t)}else{throw new i("Browser lacks native selectors")}};var l=function(e){return e.nodeType!==o&&e.nodeType!==s||e.childElementCount===0};var c=function(t,r){var i=r===undefined?a:r.dom();return l(i)?[]:e.map(i.querySelectorAll(t),n.fromDom)};var f=function(e,r){var i=r===undefined?a:r.dom();return l(i)?t.none():t.from(i.querySelector(e)).map(n.fromDom)};return{all:c,is:u,one:f}});i("ephox.sugar.alien.Recurse",[],function(){var e=function(e,t){var n=[];var r=function(e){n.push(e);return t(e)};var i=t(e);do{i=i.bind(r)}while(i.isSome());return n};return{toArray:e}});i("ephox.katamari.api.Global",[],function(){var e=typeof window!=="undefined"?window:Function("return this;")();return e});i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){var r=n!==undefined?n:e;for(var i=0;i<t.length&&r!==undefined&&r!==null;++i){r=r[t[i]]}return r};var n=function(e,n){var r=e.split(".");return t(r,n)};var r=function(e,t){if(e[t]===undefined||e[t]===null){e[t]={}}return e[t]};var i=function(t,n){var i=n!==undefined?n:e;for(var a=0;a<t.length;++a){i=r(i,t[a])}return i};var a=function(e,t){var n=e.split(".");return i(n,t)};return{path:t,resolve:n,forge:i,namespace:a}});i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};var n=function(e,n){var r=t(e,n);if(r===undefined){throw e+" not available on this browser"}return r};return{getOrDie:n}});i("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){var t=e.getOrDie("Node");return t};var n=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0};var r=function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)};var i=function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)};return{documentPositionPreceding:r,documentPositionContainedBy:i}});i("ephox.katamari.api.Thunk",[],function(){var e=function(e){var t=false;var n;return function(){if(!t){t=true;n=e.apply(null,arguments)}return n}};return{cached:e}});a("global!Number",Number);i("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t)){return r}}return undefined};var i=function(e,n){var i=r(e,n);if(!i){return{major:0,minor:0}}var a=function(e){return t(n.replace(i,"$"+e))};return s(a(1),a(2))};var a=function(e,t){var r=n(t).toLowerCase();if(e.length===0){return o()}return i(e,r)};var o=function(){return s(0,0)};var s=function(e,t){return{major:e,minor:t}};return{nu:s,detect:a,unknown:o}});i("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge";var r="Chrome";var i="IE";var a="Opera";var o="Firefox";var s="Safari";var u=function(e,t){return function(){return t===e}};var l=function(){return c({current:undefined,version:t.unknown()})};var c=function(e){var t=e.current;var l=e.version;return{current:t,version:l,isEdge:u(n,t),isChrome:u(r,t),isIE:u(i,t),isOpera:u(a,t),isFirefox:u(o,t),isSafari:u(s,t)}};return{unknown:l,nu:c,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(i),opera:e.constant(a),firefox:e.constant(o),safari:e.constant(s)}});i("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows";var r="iOS";var i="Android";var a="Linux";var o="OSX";var s="Solaris";var u="FreeBSD";var l=function(e,t){return function(){return t===e}};var c=function(){return f({current:undefined,version:t.unknown()})};var f=function(e){var t=e.current;var c=e.version;return{current:t,version:c,isWindows:l(n,t),isiOS:l(r,t),isAndroid:l(i,t),isOSX:l(o,t),isLinux:l(a,t),isSolaris:l(s,t),isFreeBSD:l(u,t)}};return{unknown:c,nu:f,windows:e.constant(n),ios:e.constant(r),android:e.constant(i),linux:e.constant(a),osx:e.constant(o),solaris:e.constant(s),freebsd:e.constant(u)}});i("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var i=t.isiOS()&&/ipad/i.test(r)===true;var a=t.isiOS()&&!i;var o=t.isAndroid()&&t.version.major===3;var s=t.isAndroid()&&t.version.major===4;var u=i||o||s&&/mobile/i.test(r)===true;var l=t.isiOS()||t.isAndroid();var c=l&&!u;var f=n.isSafari()&&t.isiOS()&&/safari/i.test(r)===false;return{isiPad:e.constant(i),isiPhone:e.constant(a),isTablet:e.constant(u),isPhone:e.constant(c),isTouch:e.constant(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(f)}}});i("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var i=n(r).toLowerCase();return e.find(t,function(e){return e.search(i)})};var i=function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})};var a=function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})};return{detectBrowser:i,detectOs:a}});i("ephox.katamari.str.StrAppend",[],function(){var e=function(e,t){return t+e};var t=function(e,t){return e+t};var n=function(e,t){return e.substring(t)};var r=function(e,t){return e.substring(0,e.length-t)};return{addToStart:e,addToEnd:t,removeFromStart:n,removeFromEnd:r}});i("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){var n=function(e,t){return e.substr(0,t)};var r=function(e,t){return e.substr(e.length-t,e.length)};var i=function(t){return t===""?e.none():e.some(t.substr(0,1))};var a=function(t){return t===""?e.none():e.some(t.substring(1))};return{first:n,last:r,head:i,tail:a}});i("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){if(t===""){return true}if(e.length<t.length){return false}var r=e.substr(n,n+t.length);return r===t};var i=function(e,t){var n=function(e){var t=typeof e;return t==="string"||t==="number"};return e.replace(/\${([^{}]*)}/g,function(e,r){var i=t[r];return n(i)?i:e})};var a=function(t,n){return f(t,n)?e.removeFromStart(t,n.length):t};var o=function(t,n){return d(t,n)?e.removeFromEnd(t,n.length):t};var s=function(t,n){return f(t,n)?t:e.addToStart(t,n)};var u=function(t,n){return d(t,n)?t:e.addToEnd(t,n)};var l=function(e,t){return e.indexOf(t)!==-1};var c=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)};var f=function(e,t){return r(e,t,0)};var d=function(e,t){return r(e,t,e.length-t.length)};var h=function(e){return e.replace(/^\s+|\s+$/g,"")};var p=function(e){return e.replace(/^\s+/g,"")};var v=function(e){return e.replace(/\s+$/g,"")};return{supplant:i,startsWith:f,removeLeading:a,removeTrailing:o,ensureLeading:s,ensureTrailing:u,endsWith:d,contains:l,trim:h,lTrim:p,rTrim:v,capitalize:c}});i("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var r=function(e){return function(n){return t.contains(n,e)}};var i=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var n=t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit");return n}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}];var a=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(i),oses:e.constant(a)}});i("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,i){var a=function(a){var o=i.browsers();var s=i.oses();var u=r.detectBrowser(o,a).fold(e.unknown,e.nu);var l=r.detectOs(s,a).fold(t.unknown,t.nu);var c=n(l,u,a);return{browser:u,os:l,deviceType:c}};return{detect:a}});a("global!navigator",navigator);i("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){var r=e.cached(function(){var e=n.userAgent;return t.detect(e)});return{detect:r}});i("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,i){var a=function(e,t){return e.dom()===t.dom()};var o=function(e,t){return e.dom().isEqualNode(t.dom())};var s=function(n,r){return e.exists(r,t.curry(a,n))};var u=function(e,t){var n=e.dom(),r=t.dom();return n===r?false:n.contains(r)};var l=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())};var c=r.detect().browser;var f=c.isIE()?l:u;return{eq:a,isEqualNode:o,member:s,contains:f,is:i.is}});i("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,i,a,o,s){var u=function(e){return s.fromDom(e.dom().ownerDocument)};var l=function(e){var t=u(e);return s.fromDom(t.dom().documentElement)};var c=function(e){var t=e.dom();var n=t.ownerDocument.defaultView;return s.fromDom(n)};var f=function(e){var t=e.dom();return r.from(t.parentNode).map(s.fromDom)};var d=function(e){return f(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return o.eq(e,t)})})};var h=function(t,r){var i=e.isFunction(r)?r:n.constant(false);var a=t.dom();var o=[];while(a.parentNode!==null&&a.parentNode!==undefined){var u=a.parentNode;var l=s.fromDom(u);o.push(l);if(i(l)===true){break}else{a=u}}return o};var p=function(e){var n=function(n){return t.filter(n,function(t){return!o.eq(e,t)})};return f(e).map(x).map(n).getOr([])};var v=function(e){var t=e.dom();return r.from(t.offsetParent).map(s.fromDom)};var m=function(e){var t=e.dom();return r.from(t.previousSibling).map(s.fromDom)};var g=function(e){var t=e.dom();return r.from(t.nextSibling).map(s.fromDom)};var y=function(e){return t.reverse(a.toArray(e,m))};var b=function(e){return a.toArray(e,g)};var x=function(e){var n=e.dom();return t.map(n.childNodes,s.fromDom)};var w=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(s.fromDom)};var _=function(e){return w(e,0)};var k=function(e){return w(e,e.dom().childNodes.length-1)};var C=function(e){return e.dom().childNodes.length};var T=function(e){return e.dom().hasChildNodes()};var S=i.immutable("element","offset");var E=function(e,t){var n=x(e);return n.length>0&&t<n.length?S(n[t],0):S(e,t)};return{owner:u,defaultView:c,documentElement:l,parent:f,findIndex:d,parents:h,siblings:p,prevSibling:m,offsetParent:v,prevSiblings:y,nextSibling:g,nextSiblings:b,children:x,child:w,firstChild:_,lastChild:k,childNodesCount:C,hasChildNodes:T,leaf:E}});i("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var i=function(e,n){return a(e,n,t.constant(true))};var a=function(t,i,o){return e.bind(r.children(t),function(e){return n.is(e,i)?o(e)?[e]:[]:a(e,i,o)})};return{firstLayer:i,filterFirstLayer:a}});i("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){var t=e.dom().nodeName;return t.toLowerCase()};var n=function(e){return e.dom().nodeType};var r=function(e){return e.dom().nodeValue};var i=function(e){return function(t){return n(t)===e}};var a=function(r){return n(r)===e.COMMENT||t(r)==="#comment"};var o=i(e.ELEMENT);var s=i(e.TEXT);var u=i(e.DOCUMENT);return{name:t,type:n,value:r,isElement:o,isText:s,isDocument:u,isComment:a}});i("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,i,a){var o=function(t,n,r){if(e.isString(r)||e.isBoolean(r)||e.isNumber(r)){t.setAttribute(n,r+"")}else{a.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t);throw new i("Attribute value was not simple")}};var s=function(e,t,n){o(e.dom(),t,n)};var u=function(e,t){var r=e.dom();n.each(t,function(e,t){o(r,t,e)})};var l=function(e,t){var n=e.dom().getAttribute(t);return n===null?undefined:n};var c=function(e,t){var n=e.dom();return n&&n.hasAttribute?n.hasAttribute(t):false};var f=function(e,t){e.dom().removeAttribute(t)};var d=function(e){var t=e.dom().attributes;return t===undefined||t===null||t.length===0};var h=function(e){return t.foldl(e.dom().attributes,function(e,t){e[t.name]=t.value;return e},{})};var p=function(e,t,n){if(c(e,n)&&!c(t,n)){s(t,n,l(e,n))}};var v=function(e,n,i){if(!r.isElement(e)||!r.isElement(n)){return}t.each(i,function(t){p(e,n,t)})};return{clone:h,set:s,setAll:u,get:l,has:c,remove:f,hasNone:d,transfer:v}});i("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var i=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)};var a=e.cached(function(){return o(t.fromDom(r))});var o=function(e){var n=e.dom().body;if(n===null||n===undefined){throw"Body is not available yet"}return t.fromDom(n)};return{body:a,getBody:o,inBody:i}});i("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return s(t.body(),e)};var i=function(t,r,i){return e.filter(n.parents(t,i),r)};var a=function(t,r){return e.filter(n.siblings(t),r)};var o=function(t,r){return e.filter(n.children(t),r)};var s=function(t,r){var i=[];e.each(n.children(t),function(e){if(r(e)){i=i.concat([e])}i=i.concat(s(e,r))});return i};return{all:r,ancestors:i,siblings:a,children:o,descendants:s}});i("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){var n=function(e){return t.all(e)};var r=function(n,r,i){return e.ancestors(n,function(e){return t.is(e,r)},i)};var i=function(n,r){return e.siblings(n,function(e){return t.is(e,r)})};var a=function(n,r){return e.children(n,function(e){return t.is(e,r)})};var o=function(e,n){return t.all(n,e)};return{all:n,ancestors:r,siblings:i,children:a,descendants:o}});i("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,i,a,o){return n(i,a)?t.some(i):e.isFunction(o)&&o(i)?t.none():r(i,a,o)}});i("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,i,a,o,s){var u=function(e){return h(i.body(),e)};var l=function(t,i,a){var s=t.dom();var u=e.isFunction(a)?a:n.constant(false);while(s.parentNode){s=s.parentNode;var l=o.fromDom(s);if(i(l)){return r.some(l)}else if(u(l)){break}}return r.none()};var c=function(e,t,n){var r=function(e){return t(e)};return s(r,l,e,t,n)};var f=function(e,t){var n=e.dom();if(!n.parentNode){return r.none()}return d(o.fromDom(n.parentNode),function(n){return!a.eq(e,n)&&t(n)})};var d=function(e,r){var i=t.find(e.dom().childNodes,n.compose(r,o.fromDom));return i.map(o.fromDom)};var h=function(e,t){var n=function(e){for(var i=0;i<e.childNodes.length;i++){if(t(o.fromDom(e.childNodes[i]))){return r.some(o.fromDom(e.childNodes[i]))}var a=n(e.childNodes[i]);if(a.isSome()){return a}}return r.none()};return n(e.dom())};return{first:u,ancestor:l,closest:c,sibling:f,child:d,descendant:h}});i("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(e){return t.one(e)};var i=function(n,r,i){return e.ancestor(n,function(e){return t.is(e,r)},i)};var a=function(n,r){return e.sibling(n,function(e){return t.is(e,r)})};var o=function(n,r){return e.child(n,function(e){return t.is(e,r)})};var s=function(e,n){return t.one(n,e)};var u=function(e,r,a){return n(t.is,i,e,r,a)};return{first:r,ancestor:i,sibling:a,child:o,descendant:s,closest:u}});a("global!parseInt",parseInt);i("ephox.snooker.api.TableLookup",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse","global!parseInt"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=function(r,i,a){var s=a!==undefined?a:t.constant(false);if(s(i)){return n.none()}if(e.contains(r,o.name(i))){return n.some(i)}var c=function(e){return l.is(e,"table")||s(e)};return u.ancestor(i,r.join(","),c)};var h=function(e,t){return d(["td","th"],e,t)};var p=function(e){return i.firstLayer(e,"th,td")};var v=function(e,t){return d(["caption","tr","tbody","tfoot","thead"],e,t)};var m=function(e,t){return c.parent(t).map(function(t){return s.children(t,e)})};var g=t.curry(m,"th,td");var y=t.curry(m,"tr");var b=function(e){return u.descendant(e,"th,td")};var x=function(e,t){return u.closest(e,"table",t)};var w=function(e,t){return d(["tr"],e,t)};var _=function(e){return i.firstLayer(e,"tr")};var k=function(e,t){return f(a.get(e,t),10)};var C=function(e,t,n){var i=k(e,t);var a=k(e,n);return r.grid(i,a)};return{cell:h,firstCell:b,cells:p,neighbourCells:g,table:x,row:w,rows:_,notCell:v,neighbourRows:y,attr:k,grid:C}});i("ephox.snooker.model.DetailsList",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=function(o){var s=n.rows(o);return e.map(s,function(o){var s=o;var u=a.parent(s);var l=u.bind(function(e){var t=i.name(e);return t==="tfoot"||t==="thead"||t==="tbody"?t:"tbody"});var c=e.map(n.cells(o),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1;var i=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,i)});return t.rowdata(s,c,l)})};var s=function(i,a){return e.map(i,function(i){var o=e.map(n.cells(i),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1;var i=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,i)});return t.rowdata(i,o,a.section())})};return{fromTable:o,fromPastedRows:s}});a("global!Math",Math);i("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(e,t,n,r,i){var a=function(e,t){return e+","+t};var o=function(e,t,r){var i=e.access()[a(t,r)];return i!==undefined?n.some(i):n.none()};var s=function(e,t,r){var i=u(e,function(e){return r(t,e.element())});return i.length>0?n.some(i[0]):n.none()};var u=function(t,n){var r=e.bind(t.all(),function(e){return e.cells()});return e.filter(r,n)};var l=function(n){var o={};var s=[];var u=n.length;var l=0;e.each(n,function(t,n){var u=[];e.each(t.cells(),function(e,t){var s=0;while(o[a(n,s)]!==undefined){s++}var c=r.extended(e.element(),e.rowspan(),e.colspan(),n,s);for(var f=0;f<e.colspan();f++){for(var d=0;d<e.rowspan();d++){var h=n+d;var p=s+f;var v=a(h,p);o[v]=c;l=i.max(l,p+1)}}u.push(c)});s.push(r.rowdata(t.element(),u,t.section()))});var c=r.grid(u,l);return{grid:t.constant(c),access:t.constant(o),all:t.constant(s)}};var c=function(t){var n=e.map(t.all(),function(e){return e.cells()});return e.flatten(n)};return{generate:l,getAt:o,findItem:s,filterItems:u,justCells:c}});i("ephox.sugar.impl.Style",[],function(){var e=function(e){return e.style!==undefined};return{isSupported:e}});a("global!window",window);i("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,i,a,o,s,u,l,c,f,d){var h=function(t,n,r){if(!e.isString(r)){f.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t);throw new c("CSS value must be a string: "+r)}if(u.isSupported(t)){t.style.setProperty(n,r)}};var p=function(e,t){if(u.isSupported(e)){e.style.removeProperty(t)}};var v=function(e,t,n){var r=e.dom();h(r,t,n)};var m=function(e,t){var r=e.dom();n.each(t,function(e,t){h(r,t,e)})};var g=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){p(r,t)},function(e){h(r,t,e)})})};var y=function(e,t){var n=e.dom();var r=d.getComputedStyle(n);var i=r.getPropertyValue(t);var o=i===""&&!a.inBody(e)?b(n,t):i;return o===null?undefined:o};var b=function(e,t){return u.isSupported(e)?e.style.getPropertyValue(t):""};var x=function(e,t){var n=e.dom();var i=b(n,t);return r.from(i).filter(function(e){return e.length>0})};var w=function(e){var t={};var n=e.dom();if(u.isSupported(n)){for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}}return t};var _=function(e,t,n){var r=o.fromTag(e);v(r,t,n);var i=x(r,t);return i.isSome()};var k=function(e,t){var n=e.dom();p(n,t);if(i.has(e,"style")&&l.trim(i.get(e,"style"))===""){i.remove(e,"style")}};var C=function(e,t){var n=i.get(e,"style");var r=t(e);var a=n===undefined?i.remove:i.set;a(e,"style",n);return r};var T=function(e,t){var n=e.dom();var r=t.dom();if(u.isSupported(n)&&u.isSupported(r)){r.style.cssText=n.style.cssText}};var S=function(e){return e.dom().offsetWidth};var E=function(e,t,n){x(e,n).each(function(e){if(x(t,n).isNone()){v(t,n,e)}})};var A=function(e,n,r){if(!s.isElement(e)||!s.isElement(n)){return}t.each(r,function(t){E(e,n,t)})};return{copy:T,set:v,preserve:C,setAll:m,setOptions:g,remove:k,get:y,getRaw:x,getAllRaw:w,isValidValue:_,reflow:S,transfer:A}});i("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){var r=e.parent(t);r.each(function(e){e.dom().insertBefore(n.dom(),t.dom())})};var n=function(n,r){var a=e.nextSibling(n);a.fold(function(){var t=e.parent(n);t.each(function(e){i(e,r)})},function(e){t(e,r)})};var r=function(t,n){var r=e.firstChild(t);r.fold(function(){i(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})};var i=function(e,t){e.dom().appendChild(t.dom())};var a=function(n,r,a){e.child(n,a).fold(function(){i(n,r)},function(e){t(e,r)})};var o=function(e,n){t(e,n);i(n,e)};return{before:t,after:n,prepend:r,append:i,appendAt:a,wrap:o}});i("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){var n=function(n,r){e.each(r,function(e){t.before(n,e)})};var r=function(n,r){e.each(r,function(e,i){var a=i===0?n:r[i-1];t.after(a,e)})};var i=function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})};var a=function(n,r){e.each(r,function(e){t.append(n,e)})};return{before:n,after:r,prepend:i,append:a}});i("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t){t.dom().textContent="";e.each(n.children(t),function(e){i(e)})};var i=function(e){var t=e.dom();if(t.parentNode!==null){t.parentNode.removeChild(t)}};var a=function(e){var r=n.children(e);if(r.length>0){t.before(e,r)}i(e)};return{empty:r,remove:i,unwrap:a}});i("ephox.snooker.api.CopySelected",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Struct","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Selectors"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=n.immutable("minRow","minCol","maxRow","maxCol");var h=function(e,n){var r=e.grid().columns();var i=e.grid().rows();var a=i;var o=r;var s=0;var u=0;t.each(e.access(),function(e){if(n(e)){var t=e.row();var r=t+e.rowspan()-1;var i=e.column();var l=i+e.colspan()-1;if(t<a){a=t}else if(r>s){s=r}if(i<o){o=i}else if(l>u){u=l}}});return d(a,o,s,u)};var p=function(e,t,n){var r=e[n].element();var i=u.fromTag("td");l.append(i,u.fromTag("br"));var a=t?l.append:l.prepend;a(r,i)};var v=function(e,t,n,r){var a=t.grid().columns();var o=t.grid().rows();for(var s=0;s<o;s++){var u=false;for(var l=0;l<a;l++){if(!(s<n.minRow()||s>n.maxRow()||l<n.minCol()||l>n.maxCol())){var c=i.getAt(t,s,l).filter(r).isNone();if(c){p(e,u,s)}else{u=true}}}}};var m=function(t,n){var r=e.filter(a.firstLayer(t,"tr"),function(e){return e.dom().childElementCount===0});e.each(r,c.remove);if(n.minCol()===n.maxCol()||n.minRow()===n.maxRow()){e.each(a.firstLayer(t,"th,td"),function(e){o.remove(e,"rowspan");o.remove(e,"colspan")})}o.remove(t,"width");o.remove(t,"height");s.remove(t,"width");s.remove(t,"height")};var g=function(t,n){var o=function(e){return f.is(e.element(),n)};var s=r.fromTable(t);var u=i.generate(s);var l=h(u,o);var d="th:not("+n+")"+",td:not("+n+")";var p=a.filterFirstLayer(t,"th,td",function(e){return f.is(e,d)});e.each(p,c.remove);v(s,u,l,o);m(t,l);return t};return{extract:g}});i("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=function(e,n){return t.fromDom(e.dom().cloneNode(n))};var s=function(e){return o(e,false)};var u=function(e){return o(e,true)};var l=function(n,r){var i=t.fromTag(r);var a=e.clone(n);e.setAll(i,a);return i};var c=function(e,t){var n=l(e,t);var i=a.children(u(e));r.append(n,i);return n};var f=function(e,t){var o=l(e,t);n.before(e,o);var s=a.children(e);r.append(o,s);i.remove(e);return o};return{shallow:s,shallowAs:l,deep:u,copy:c,mutate:f}});i("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,i){var a=function(e){if(!r(e)){throw new n("Can only get "+i+" value of a "+i+" node")}return l(e).getOr("")};var o=function(e){try{return s(e)}catch(e){return t.none()}};var s=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()};var u=e.detect().browser;var l=u.isIE()&&u.version.major===10?o:s;var c=function(e,t){if(!r(e)){throw new n("Can only set raw "+i+" value of a "+i+" node")}e.dom().nodeValue=t};return{get:a,getOption:l,set:c}}});i("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");var r=function(e){return n.get(e)};var i=function(e){return n.getOption(e)};var a=function(e,t){n.set(e,t)};return{get:r,getOption:i,set:a}});i("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var i=function(e){return t.name(e)==="img"?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})};var a=function(e,t){return i(e)===t};var o=function(e,t){return t===0};var s="¬†";var u=function(e){return n.getOption(e).filter(function(e){return e.trim().length!==0||e.indexOf(s)>-1}).isSome()};var l=["img","br"];var c=function(n){var r=u(n);return r||e.contains(l,t.name(n))};return{getEnd:i,isEnd:a,isStart:o,isCursorPosition:c}});i("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var i=function(e){return t.descendant(e,r.isCursorPosition)};var a=function(e){return o(e,r.isCursorPosition)};var o=function(t,r){var i=function(t){var a=n.children(t);for(var o=a.length-1;o>=0;o--){var s=a[o];if(r(s)){return e.some(s)}var u=i(s);if(u.isSome()){return u}}return e.none()};return i(t)};return{first:i,last:a}});i("ephox.snooker.api.TableFill",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=function(){var e=a.fromTag("td");r.append(e,a.fromTag("br"));return e};var h=function(e,n,r){var a=i.copy(e,n);t.each(r,function(e,t){if(e===null){s.remove(a,t)}else{s.set(a,t,e)}});return a};var p=function(e){return e};var v=function(e){return function(){return a.fromTag("tr",e.dom())}};var m=function(t,a,o){var s=f.first(t);return s.map(function(s){var u=o.join(",");var c=l.ancestors(s,u,function(e){return n.eq(e,t)});return e.foldr(c,function(e,t){var n=i.shallow(t);r.append(e,n);return n},a)}).getOr(a)};var g=function(e,t,n){var i=function(t){var i=c.owner(t.element());var s=a.fromTag(o.name(t.element()),i.dom());var l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]);var f=l.length>0?m(t.element(),s,l):s;r.append(f,a.fromTag("br"));u.copy(t.element(),s);u.remove(s,"height");if(t.colspan()!==1){u.remove(t.element(),"width")}e(t.element(),s);return s};return{row:v(t),cell:i,replace:h,gap:d}};var y=function(e){return{row:v(e),cell:d,replace:p,gap:d}};return{cellOperations:g,paste:y}});i("ephox.sugar.api.node.Elements",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r){var i=function(e,i){var a=i||r;var o=a.createElement("div");o.innerHTML=e;return n.children(t.fromDom(o))};var a=function(n,r){return e.map(n,function(e){return t.fromTag(e,r)})};var o=function(n,r){return e.map(n,function(e){return t.fromText(e,r)})};var s=function(n){return e.map(n,t.fromDom)};return{fromHtml:i,fromTags:a,fromText:o,fromDom:s}});i("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]});i("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.Compare","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m){return function(){var g=function(e){return o.fromDom(e.dom().cloneNode(false))};var y=function(n){if(!l.isElement(n)){return false}if(l.name(n)==="body"){return true}return t.contains(e,l.name(n))};var b=function(e){if(!l.isElement(e)){return false}return t.contains(["br","img","hr","input"],l.name(e))};var x=function(e,t){return e.dom().compareDocumentPosition(t.dom())};var w=function(e,t){var n=r.clone(e);r.setAll(t,n)};return{up:n.constant({selector:p.ancestor,closest:p.closest,predicate:f.ancestor,all:m.parents}),down:n.constant({selector:h.descendants,predicate:c.descendants}),styles:n.constant({get:a.get,getRaw:a.getRaw,set:a.set,remove:a.remove}),attrs:n.constant({get:r.get,set:r.set,remove:r.remove,copyTo:w}),insert:n.constant({before:s.before,after:s.after,afterAll:u.after,append:s.append,appendAll:u.append,prepend:s.prepend,wrap:s.wrap}),remove:n.constant({unwrap:d.unwrap,remove:d.remove}),create:n.constant({nu:o.fromTag,clone:g,text:o.fromText}),query:n.constant({comparePosition:x,prevSibling:m.prevSibling,nextSibling:m.nextSibling}),property:n.constant({children:m.children,name:l.name,parent:m.parent,isText:l.isText,isComment:l.isComment,isElement:l.isElement,getText:v.get,setText:v.set,isBoundary:y,isEmptyTag:b}),eq:i.eq,is:i.is}}});i("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n,r){var i=r.immutable("left","right");var a=function(n,r,i){var a=n.property().children(r);var o=e.findIndex(a,t.curry(n.eq,i));return o.map(function(e){return{before:t.constant(a.slice(0,e)),after:t.constant(a.slice(e+1))}})};var o=function(e,t,n){return a(e,t,n).map(function(n){var r=e.create().clone(t);e.insert().appendAll(r,n.after());e.insert().after(t,r);return i(t,r)})};var s=function(e,t,n){return a(e,t,n).map(function(r){var a=e.create().clone(t);e.insert().appendAll(a,r.before().concat([n]));e.insert().appendAll(t,r.after());e.insert().before(t,a);return i(a,t)})};var u=function(e,t,i,a){var o=r.immutable("first","second","splits");var s=function(t,r,u){var l=o(t,n.none(),u);if(i(t)){return o(t,r,u)}else{return e.property().parent(t).bind(function(r){return a(e,r,t).map(function(e){var t=[{first:e.left,second:e.right}];var a=i(r)?r:e.left();return s(a,n.some(e.right()),u.concat(t))}).getOr(l)})}};return s(t,n.none(),[])};return{breakToLeft:s,breakToRight:o,breakPath:u}});i("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t,n){var r=function(e,t,n,r){var i=n[0];var a=n.slice(1);return r(e,t,i,a)};var i=function(e,t,i){return i.length>0?r(e,t,i,a):n.none()};var a=function(t,n,r,i){var a=n(t,r);return e.foldr(i,function(e,r){var i=n(t,r);return o(t,e,i)},a)};var o=function(e,n,r){return n.bind(function(n){return r.filter(t.curry(e.eq,n))})};return{oneAll:i}});i("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(e,t,n,r){var i=function(e,n){return t.curry(e.eq,n)};var a=function(t,a,o,s){var u=t.property().children(a);if(t.eq(a,o[0])){return n.some([o[0]])}if(t.eq(a,s[0])){return n.some([s[0]])}var l=function(n){var r=e.reverse(n);var o=e.findIndex(r,i(t,a)).getOr(-1);var s=o<r.length-1?r[o+1]:r[o];return e.findIndex(u,i(t,s))};var c=l(o);var f=l(s);return c.bind(function(e){return f.map(function(t){var n=r.min(e,t);var i=r.max(e,t);return u.slice(n,i+1)})})};var o=function(n,r,a,o){var s=o!==undefined?o:t.constant(false);var u=[r].concat(n.up().all(r));var l=[a].concat(n.up().all(a));var c=function(t){var n=e.findIndex(t,s);return n.fold(function(){return t},function(e){return t.slice(0,e+1)})};var f=c(u);var d=c(l);var h=e.find(f,function(t){return e.exists(d,i(n,t))});return{firstpath:t.constant(f),secondpath:t.constant(d),shared:t.constant(h)}};var s=function(e,t,n){var r=o(e,t,n);return r.shared().bind(function(t){return a(e,t,r.firstpath(),r.secondpath())})};return{subset:s,ancestors:o}});i("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(e,t,n){var r=function(e,n,r){return t.oneAll(e,n,r)};var i=function(e,t,r){return n.subset(e,t,r)};var a=function(e,t,r,i){return n.ancestors(e,t,r,i)};var o=function(t,n,r){return e.breakToLeft(t,n,r)};var s=function(t,n,r){return e.breakToRight(t,n,r)};var u=function(t,n,r,i){return e.breakPath(t,n,r,i)};return{sharedOne:r,subset:i,ancestors:a,breakToLeft:o,breakToRight:s,breakPath:u}});i("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(e,t){var n=e();var r=function(e,r){return t.sharedOne(n,function(t,n){return e(n)},r)};var i=function(e,r){return t.subset(n,e,r)};var a=function(e,r,i){return t.ancestors(n,e,r,i)};var o=function(e,r){return t.breakToLeft(n,e,r)};var s=function(e,r){return t.breakToRight(n,e,r)};var u=function(e,r,i){return t.breakPath(n,e,r,function(e,t,n){return i(t,n)})};return{sharedOne:r,subset:i,ancestors:a,breakToLeft:o,breakToRight:s,breakPath:u}});i("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(e,t,n){var r=function(e,t){var n=t.column();var r=t.column()+t.colspan()-1;var i=t.row();var a=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&(i<=e.finishRow()&&a>=e.startRow())};var i=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};var a=function(r,a){var o=true;var s=e.curry(i,a);for(var u=a.startRow();u<=a.finishRow();u++){for(var l=a.startCol();l<=a.finishCol();l++){o=o&&n.getAt(r,u,l).exists(s)}}return o?t.some(a):t.none()};return{inSelection:r,isWithin:i,isRectangular:a}});i("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(e,t,n,r,i){var a=function(t,n){return e.bounds(i.min(t.row(),n.row()),i.min(t.column(),n.column()),i.max(t.row()+t.rowspan()-1,n.row()+n.rowspan()-1),i.max(t.column()+t.colspan()-1,n.column()+n.colspan()-1))};var o=function(e,n,i){var o=t.findItem(e,n,r.eq);var s=t.findItem(e,i,r.eq);return o.bind(function(e){return s.map(function(t){return a(e,t)})})};var s=function(e,t,r){return o(e,t,r).bind(function(t){return n.isRectangular(e,t)})};return{getAnyBox:o,getBox:s}});i("ephox.snooker.selection.CellFinder",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,i,a){var o=function(e,t,r,i){return n.findItem(e,t,a.eq).bind(function(t){var a=r>0?t.row()+t.rowspan()-1:t.row();var o=i>0?t.column()+t.colspan()-1:t.column();var s=n.getAt(e,a+r,o+i);return s.map(function(e){return e.element()})})};var s=function(a,o,s){return i.getAnyBox(a,o,s).map(function(i){var o=n.filterItems(a,t.curry(r.inSelection,i));return e.map(o,function(e){return e.element()})})};var u=function(e,t){var r=function(e,t){return a.contains(t,e)};return n.findItem(e,t,r).bind(function(e){return e.element()})};return{moveBy:o,intercepts:s,parentCell:u}});i("ephox.snooker.api.TablePositions",["ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellFinder","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,i,a){var o=function(t,n,i){return e.table(t).bind(function(e){var a=c(e);return r.moveBy(a,t,n,i)})};var s=function(e,t,n){var i=c(e);return r.intercepts(i,t,n)};var u=function(e,t,n,i,o){var s=c(e);var u=a.eq(e,n)?t:r.parentCell(s,t);var l=a.eq(e,o)?i:r.parentCell(s,i);return r.intercepts(s,u,l)};var l=function(e,t,n){var r=c(e);return i.getBox(r,t,n)};var c=function(e){var r=t.fromTable(e);return n.generate(r)};return{moveBy:o,intercepts:s,nestedIntercepts:u,getBox:l}});i("ephox.darwin.selection.CellSelection",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.robin.api.dom.DomParent","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors"],function(e,t,n,r,i,a,o,s,u){var l=function(e,t){return s.ancestor(e,"table")};var c=function(e,t,o){if(a.eq(e,t)){return n.some([e])}else{return l(e,o).bind(function(n){return l(t,o).bind(function(u){if(a.eq(n,u)){return i.intercepts(n,e,t)}else if(a.contains(n,u)){return i.nestedIntercepts(n,e,n,t,u)}else if(a.contains(u,n)){return i.nestedIntercepts(u,e,n,t,u)}else{return r.ancestors(e,t).shared().bind(function(r){return s.closest(r,"table",o).bind(function(r){return i.nestedIntercepts(r,e,n,t,u)})})}})})}};var f=function(e,t){var r=o.descendants(e,t);return r.length>0?n.some(r):n.none()};var d=function(t,n){return e.find(t,function(e){return u.is(e,n)})};var h=function(e,n,i){return s.descendant(e,n).bind(function(n){return s.descendant(e,i).bind(function(e){return r.sharedOne(l,[n,e]).map(function(r){return{first:t.constant(n),last:t.constant(e),table:t.constant(r)}})})})};var p=function(e,n){return s.ancestor(e,"table").bind(function(r){return s.descendant(r,n).bind(function(n){return c(n,e).map(function(r){return{boxes:t.constant(r),start:t.constant(n),finish:t.constant(e)}})})})};var v=function(e,t,n,r,a){return d(e,a).bind(function(e){return i.moveBy(e,t,n).bind(function(e){return p(e,r)})})};return{identify:c,retrieve:f,shiftSelection:v,getEdges:h}});i("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,i){var a=function(t,n){return e.retrieve(t,n)};var o=function(a,o,s){return e.getEdges(a,o,s).bind(function(e){var o=function(e){return r.eq(a,e)};var s=i.ancestor(e.first(),"thead,tfoot,tbody,table",o);var u=i.ancestor(e.last(),"thead,tfoot,tbody,table",o);return s.bind(function(i){return u.bind(function(a){return r.eq(i,a)?n.getBox(e.table(),e.first(),e.last()):t.none()})})})};return{retrieve:a,retrieveBox:o}});i("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(e){var t="data-mce-selected";var n="td["+t+"],th["+t+"]";var r="["+t+"]";var i="data-mce-first-selected";var a="td["+i+"],th["+i+"]";var o="data-mce-last-selected";var s="td["+o+"],th["+o+"]";return{selected:e.constant(t),selectedSelector:e.constant(n),attributeSelector:e.constant(r),firstSelected:e.constant(i),firstSelectedSelector:e.constant(a),lastSelected:e.constant(o),lastSelectedSelector:e.constant(s)}});i("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,i,a){var o=function(o){if(!n.isArray(o)){throw new i("cases must be an array")}if(o.length===0){throw new i("there must be at least one case")}var s=[];var u={};e.each(o,function(l,c){var f=t.keys(l);if(f.length!==1){throw new i("one and only one name per case")}var d=f[0];var h=l[d];if(u[d]!==undefined){throw new i("duplicate key detected:"+d)}else if(d==="cata"){throw new i("cannot have a case named cata (sorry)")}else if(!n.isArray(h)){throw new i("case arguments must be an array")}s.push(d);u[d]=function(){var n=arguments.length;if(n!==h.length){throw new i("Wrong number of arguments to case "+d+". Expected "+h.length+" ("+h+"), got "+n)}var u=new r(n);for(var l=0;l<u.length;l++){u[l]=arguments[l]}var f=function(n){var r=t.keys(n);if(s.length!==r.length){throw new i("Wrong number of arguments to match. Expected: "+s.join(",")+"\nActual: "+r.join(","))}var a=e.forall(s,function(t){return e.contains(r,t)});if(!a){throw new i("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+s.join(", "))}return n[d].apply(null,u)};return{fold:function(){if(arguments.length!==o.length){throw new i("Wrong number of arguments to fold. Expected "+o.length+", got "+arguments.length)}var e=arguments[c];return e.apply(null,u)},match:f,log:function(e){a.log(e,{constructors:s,constructor:d,params:u})}}}});return u};return{generate:o}});i("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);var n=function(e,t,n,r){return e.fold(t,n,r)};return{cata:n,none:t.none,multiple:t.multiple,single:t.single}});i("tinymce.plugins.table.queries.CellOperations",["ephox.darwin.api.TableSelection","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,i,a,o){var s=function(e,t){return o.cata(t.get(),n.constant([]),n.identity,n.constant([e]))};var u=function(e,n){var a=function(e){return i.has(e,"rowspan")&&parseInt(i.get(e,"rowspan"),10)>1||i.has(e,"colspan")&&parseInt(i.get(e,"colspan"),10)>1};var o=s(e,n);return o.length>0&&t.forall(o,a)?r.some(o):r.none()};var l=function(t,i){return o.cata(i.get(),r.none,function(i,o){if(i.length===0){return r.none()}return e.retrieveBox(t,a.firstSelectedSelector(),a.lastSelectedSelector()).bind(function(e){return i.length>1?r.some({bounds:n.constant(e),cells:n.constant(i)}):r.none()})},r.none)};return{mergable:l,unmergable:u,selection:s}});i("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(e,t,n,r){var i=function(n){return{element:e.constant(n),mergable:t.none,unmergable:t.none,selection:e.constant([n])}};var a=function(t,n,i){return{element:e.constant(i),mergable:e.constant(r.mergable(n,t)),unmergable:e.constant(r.unmergable(i,t)),selection:e.constant(r.selection(i,t))}};var o=function(e){return i(e)};var s=n.immutable("element","clipboard","generators");var u=function(n,i,a,o,s){return{element:e.constant(a),mergable:t.none,unmergable:t.none,selection:e.constant(r.selection(a,n)),clipboard:e.constant(o),generators:e.constant(s)}};return{noMenu:i,forMenu:a,notCell:o,paste:s,pasteRows:u}});i("tinymce.plugins.table.actions.Clipboard",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopySelected","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.node.Node","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,i,a,o,s,u,l,c,f,d){var h=function(e){return a.table(e[0]).map(o.deep).map(function(e){return[r.extract(e,f.attributeSelector())]})};var p=function(e,t){return e.selection.serializer.serialize(t.dom(),{})};var v=function(r,o,f,v){r.on("BeforeGetContent",function(n){var i=function(t){n.preventDefault();h(t).each(function(t){n.content=e.map(t,function(e){return p(r,e)}).join("")})};if(n.selection===true){d.cata(o.get(),t.noop,i,t.noop)}});r.on("BeforeSetContent",function(t){if(t.selection===true&&t.paste===true){var o=n.from(r.dom.getParent(r.selection.getStart(),"th,td"));o.each(function(n){var o=s.fromDom(n);var d=a.table(o);d.bind(function(n){var a=e.filter(u.fromHtml(t.content),function(e){return l.name(e)!=="meta"});if(a.length===1&&l.name(a[0])==="table"){t.preventDefault();var d=s.fromDom(r.getDoc());var h=i.paste(d);var p=c.paste(o,a[0],h);f.pasteCells(n,p).each(function(e){r.selection.setRng(e);r.focus();v.clear(n)})}})})}})};return{registerEvents:v}});i("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll"],function(e,t,n,r,i){var a=function(){return n.fromTag("table")};var o=function(){return n.fromTag("tbody")};var s=function(){return n.fromTag("tr")};var u=function(){return n.fromTag("th")};var l=function(){return n.fromTag("td")};var c=function(c,f,d,h){var p=a();t.setAll(p,{"border-collapse":"collapse",width:"100%"});e.set(p,"border","1");var v=o();r.append(p,v);var m=[];for(var g=0;g<c;g++){var y=s();for(var b=0;b<f;b++){var x=g<d||b<h?u():l();if(b<h){e.set(x,"scope","row")}if(g<d){e.set(x,"scope","col")}r.append(x,n.fromTag("br"));t.set(x,"width",100/f+"%");r.append(y,x)}m.push(y)}i.append(v,m);return p};return{render:c}});i("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(e){return{render:e.render}});i("ephox.sugar.api.properties.Html",["ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a){var o=function(e){return e.dom().innerHTML};var s=function(o,s){var u=a.owner(o);var l=u.dom();var c=e.fromDom(l.createDocumentFragment());var f=t.fromHtml(s,l);r.append(c,f);i.empty(o);n.append(o,c)};var u=function(t){var r=e.fromTag("div");var i=e.fromDom(t.dom().cloneNode(true));n.append(r,i);return o(r)};return{get:o,set:s,getOuter:u}});i("tinymce.plugins.table.actions.InsertTable",["ephox.katamari.api.Fun","ephox.snooker.api.TableRender","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Html","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,i,a){var o=function(e,t){e.selection.select(t.dom(),true);e.selection.collapse(true)};var s=function(t,n){a.descendant(n,"td,th").each(e.curry(o,t))};var u=function(e,a,o){var u;var l=t.render(o,a,0,0);r.set(l,"id","__mce");var c=i.getOuter(l);e.insertContent(c);u=e.dom.get("__mce");e.dom.setAttrib(u,"id",null);e.$("tr",u).each(function(t,n){e.fire("newrow",{node:n});e.$("th,td",n).each(function(t,n){e.fire("newcell",{node:n})})});e.dom.setAttribs(u,e.settings.table_default_attributes||{});e.dom.setStyles(u,e.settings.table_default_styles||{});s(e,n.fromDom(u));return u};return{insert:u}});i("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(e,t,n,r){return function(i,a){var o=function(t,n){if(!e.isNumber(n)&&!n.match(/^[0-9]+$/)){throw i+".set accepts only positive integer values. Value was "+n}var a=t.dom();if(r.isSupported(a)){a.style[i]=n+"px"}};var s=function(e){var t=a(e);if(t<=0||t===null){var r=n.get(e,i);return parseFloat(r)||0}return t};var u=s;var l=function(e,r){return t.foldl(r,function(t,r){var i=n.get(e,r);var a=i===undefined?0:parseInt(i,10);return isNaN(a)?t:t+a},0)};var c=function(e,t,n){var r=l(e,n);var i=t>r?t-r:0;return i};return{set:o,get:s,getOuter:u,aggregate:l,max:c}}});i("ephox.sugar.api.view.Height",["ephox.sugar.api.node.Body","ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t,n){var r=n("height",function(t){return e.inBody(t)?t.dom().getBoundingClientRect().height:t.dom().offsetHeight});var i=function(e,t){r.set(e,t)};var a=function(e){return r.get(e)};var o=function(e){return r.getOuter(e)};var s=function(e,n){var i=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"];var a=r.max(e,n,i);t.set(e,"max-height",a+"px")};return{set:i,get:a,getOuter:o,setMax:s}});i("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t){var n=t("width",function(e){return e.dom().offsetWidth});var r=function(e,t){n.set(e,t)};var i=function(e){return n.get(e)};var a=function(e){return n.getOuter(e)};var o=function(t,r){var i=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"];var a=n.max(t,r,i);e.set(t,"max-width",a+"px")};return{set:r,get:i,getOuter:a,setMax:o}});i("ephox.snooker.resize.RuntimeSize",["ephox.sand.api.PlatformDetection","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width"],function(e,t,n,r){var i=e.detect();var a=function(){return i.browser.isIE()||i.browser.isEdge()};var o=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n};var s=function(e,n,r){return o(t.get(e,n),r)};var u=function(e){var n=s(e,"padding-top",0);var r=s(e,"padding-bottom",0);var i=s(e,"border-top-width",0);var a=s(e,"border-bottom-width",0);var o=e.dom().getBoundingClientRect().height;var u=t.get(e,"box-sizing");var l=i+a;return u==="border-box"?o:o-n-r-l};var l=function(e){return s(e,"width",r.get(e))};var c=function(e){return a()?u(e):s(e,"height",n.get(e))};return{getWidth:l,getHeight:c}});i("ephox.snooker.resize.Sizes",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.snooker.api.TableLookup","ephox.snooker.resize.RuntimeSize","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width","global!Math","global!parseInt"],function(e,t,n,r,i,a,o,s,u,l,c,f){var d=/(\d+(\.\d+)?)(\w|%)*/;var h=/(\d+(\.\d+)?)%/;var p=/(\d+(\.\d+)?)px|em/;var v=function(e,t){s.set(e,"width",t+"px")};var m=function(e,t){s.set(e,"width",t+"%")};var g=function(e,t){s.set(e,"height",t+"px")};var y=function(e){return s.getRaw(e,"height").getOrThunk(function(){return i.getHeight(e)+"px"})};var b=function(e,t,n,i){var a=r.table(e).map(function(e){var r=n(e);return c.floor(t/100*r)}).getOr(t);i(e,a);return a};var x=function(e,t,r,i){var o=f(e,10);return n.endsWith(e,"%")&&a.name(t)!=="table"?b(t,o,r,i):o};var w=function(e){var t=y(e);if(!t){return u.get(e)}return x(t,e,u.get,g)};var _=function(e,t,n){var r=n(e);var i=k(e,t);return r/i};var k=function(e,t){return o.has(e,t)?f(o.get(e,t),10):1};var C=function(e){var n=s.getRaw(e,"width");return n.fold(function(){return t.from(o.get(e,"width"))},function(e){return t.some(e)})};var T=function(e,t){return e/t.pixelWidth()*100};var S=function(e,t,n){if(h.test(t)){var r=h.exec(t);return parseFloat(r[1],10)}else{var i=l.get(e);var a=f(i,10);return T(a,n)}};var E=function(e,t){var n=C(e);return n.fold(function(){var n=l.get(e);var r=f(n,10);return T(r,t)},function(n){return S(e,n,t)})};var A=function(e,t){return e/100*t.pixelWidth()};var P=function(e,t,n){if(p.test(t)){var r=p.exec(t);return f(r[1],10)}else if(h.test(t)){var i=h.exec(t);var a=parseFloat(i[1],10);return A(a,n)}else{var o=l.get(e);return f(o,10)}};var O=function(e,t){var n=C(e);return n.fold(function(){var t=l.get(e);var n=f(t,10);return n},function(n){return P(e,n,t)})};var M=function(e){return _(e,"rowspan",w)};var N=function(n){var r=C(n);return r.bind(function(n){if(d.test(n)){var r=d.exec(n);return t.some({width:e.constant(r[1]),unit:e.constant(r[3])})}else{return t.none()}})};var R=function(e,t,n){s.set(e,"width",t+n)};return{percentageBasedSizeRegex:e.constant(h),pixelBasedSizeRegex:e.constant(p),setPixelWidth:v,setPercentageWidth:m,setHeight:g,getPixelWidth:O,getPercentageWidth:E,getGenericWidth:N,setGenericWidth:R,getHeight:M,getRawWidth:C}});i("ephox.snooker.api.CellMutations",["ephox.snooker.resize.Sizes"],function(e){var t=function(t,n){var r=e.getGenericWidth(t);r.each(function(r){var i=r.width()/2;e.setGenericWidth(t,i,r.unit());e.setGenericWidth(n,i,r.unit())})};return{halve:t}});i("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(e){var t=function(n,r){var i=function(e,i){return t(n+e,r+i)};return{left:e.constant(n),top:e.constant(r),translate:i}};return t});i("ephox.sugar.api.dom.Dom",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!document"],function(e,t,n,r,i,a){var o=function(r,o){var s=o||n.fromDom(a.documentElement);return i.ancestor(r,e.curry(t.eq,s)).isSome()};var s=function(e){var t=e.dom();if(t===t.window){return e}return r.isDocument(e)?t.defaultView||t.parentWindow:null};return{attached:o,windowOf:s}});i("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(e,t,n){var r=function(t){var n=t.getBoundingClientRect();return e(n.left,n.top)};var i=function(e,t){return e!==undefined?e:t!==undefined?t:0};var a=function(e){var r=e.dom().ownerDocument;var a=r.body;var o=t.windowOf(n.fromDom(r));var u=r.documentElement;var l=i(o.pageYOffset,u.scrollTop);var c=i(o.pageXOffset,u.scrollLeft);var f=i(u.clientTop,a.clientTop);var d=i(u.clientLeft,a.clientLeft);return s(e).translate(c-d,l-f)};var o=function(t){var n=t.dom();return e(n.offsetLeft,n.offsetTop)};var s=function(i){var a=i.dom();var o=a.ownerDocument;var s=o.body;var u=n.fromDom(o.documentElement);if(s===a){return e(s.offsetLeft,s.offsetTop)}if(!t.attached(i,u)){return e(0,0)}return r(a)};return{absolute:a,relative:o,viewport:s}});i("ephox.snooker.resize.BarPositions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Struct","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,i,a){var o=n.immutable("row","y");var s=n.immutable("col","x");var u=function(e){var t=i.absolute(e);return t.left()+a.getOuter(e)};var l=function(e){return i.absolute(e).left()};var c=function(e,t){return s(e,l(t))};var f=function(e,t){return s(e,u(t))};var d=function(e){return i.absolute(e).top()};var h=function(e,t){return o(e,d(t))};var p=function(e,t){return o(e,d(t)+r.getOuter(t))};var v=function(t,n,r){if(r.length===0){return[]}var i=e.map(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})});var a=r[r.length-1].map(function(e){return n(r.length-1,e)});return i.concat([a])};var m=function(e,t){return-e};var g={delta:t.identity,positions:t.curry(v,h,p),edge:d};var y={delta:t.identity,edge:l,positions:t.curry(v,c,f)};var b={delta:m,edge:u,positions:t.curry(v,f,c)};return{height:g,rtl:b,ltr:y}});i("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(e){return{ltr:e.ltr,rtl:e.rtl}});i("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(e){return function(t){var n=function(n){return t(n).isRtl()?e.rtl:e.ltr};var r=function(e,t){return n(t).delta(e,t)};var i=function(e,t){return n(t).positions(e,t)};var a=function(e){return n(e).edge(e)};return{delta:r,edge:a,positions:i}}});i("ephox.snooker.api.TableGridSize",["ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse"],function(e,t){var n=function(n){var r=e.fromTable(n);var i=t.generate(r);return i.grid()};return{getGridSize:n}});i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t;var r=function(){return n};var i=function(e){n=e};var a=function(){return e(r())};return{get:r,set:i,clone:a}};return e});i("ephox.katamari.api.Contracts",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Type","ephox.katamari.util.BagUtils","global!Error"],function(e,t,n,r,i,a){var o=function(e,t){return s(e,t,{validate:r.isFunction,label:"function"})};var s=function(t,r,o){if(r.length===0){throw new a("You must specify at least one required field.")}i.validateStrArr("required",r);i.checkDupes(r);return function(a){var s=n.keys(a);var u=e.forall(r,function(t){return e.contains(s,t)});if(!u){i.reqMessage(r,s)}t(r,s);var l=e.filter(r,function(e){return!o.validate(a[e],e)});if(l.length>0){i.invalidTypeMessage(l,o.label)}return a}};var u=function(t,n){var r=e.filter(n,function(n){return!e.contains(t,n)});if(r.length>0){i.unsuppMessage(r)}};var l=t.noop;return{exactly:t.curry(o,u),ensure:t.curry(o,l),ensureWith:t.curry(s,l)}});i("ephox.snooker.api.Generators",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Cell","ephox.katamari.api.Contracts","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r,i,a,o,s){var u=function(e){var n=a.has(e,"colspan")?s(a.get(e,"colspan"),10):1;var r=a.has(e,"rowspan")?s(a.get(e,"rowspan"),10):1;return{element:t.constant(e),colspan:t.constant(n),rowspan:t.constant(r)}};var l=function(e,t){d(e);var i=r(n.none());var a=t!==undefined?t:u;var o=function(t){return e.cell(t)};var s=function(e){var t=a(e);return o(t)};var l=function(e){var t=s(e);if(i.get().isNone()){i.set(n.some(t))}c=n.some({item:e,replacement:t});return t};var c=n.none();var f=function(e,t){return c.fold(function(){return l(e)},function(n){return t(e,n.item)?n.replacement:l(e)})};return{getOrInit:f,cursor:i.get}};var c=function(t,i){return function(a){var o=r(n.none());d(a);var s=[];var u=function(t,n){return e.find(s,function(e){return n(e.item,t)})};var l=function(e){var r=a.replace(e,i,{scope:t});s.push({item:e,sub:r});if(o.get().isNone()){o.set(n.some(r))}return r};var c=function(e,t){return u(e,t).fold(function(){return l(e)},function(n){return t(e,n.item)?n.sub:l(e)})};return{replaceOrInit:c,cursor:o.get}}};var f=function(e){d(e);var i=r(n.none());var a=function(r){if(i.get().isNone()){i.set(n.some(r))}return function(){var n=e.cell({element:t.constant(r),colspan:t.constant(1),rowspan:t.constant(1)});o.remove(n,"width");o.remove(r,"width");return n}};return{combine:a,cursor:i.get}};var d=i.exactly(["cell","row","replace","gap"]);return{modification:l,transform:c,merging:f}});i("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(e){var t=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];var n=function(t,n){var r=t.property().name(n);return e.contains(["ol","ul"],r)};var r=function(n,r){var i=n.property().name(r);return e.contains(t,i)};var i=function(t,n){var r=t.property().name(n);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)};var a=function(t,n){var r=t.property().name(n);return e.contains(["h1","h2","h3","h4","h5","h6"],r)};var o=function(t,n){return e.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(n))};var s=function(t,n){return e.contains(["br","img","hr","input"],t.property().name(n))};var u=function(e,t){return e.property().name(t)==="iframe"};var l=function(e,t){return!(r(e,t)||s(e,t))&&e.property().name(t)!=="li"};return{isBlock:r,isList:n,isFormatting:i,isHeading:a,isContainer:o,isEmptyTag:s,isFrame:u,isInline:l}});i("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(e,t){var n=e();var r=function(e){return t.isBlock(n,e)};var i=function(e){return t.isList(n,e)};var a=function(e){return t.isFormatting(n,e)};var o=function(e){return t.isHeading(n,e)};var s=function(e){return t.isContainer(n,e)};var u=function(e){return t.isEmptyTag(n,e)};var l=function(e){return t.isFrame(n,e)};var c=function(e){return t.isInline(n,e)};return{isBlock:r,isList:i,isFormatting:a,isHeading:o,isContainer:s,isEmptyTag:u,isFrame:l,isInline:c}});i("ephox.snooker.api.TableContent",["ephox.katamari.api.Arr","ephox.robin.api.dom.DomStructure","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,i,a,o,s,u,l,c){var f=function(f){var d=function(e){return o.name(e)==="br"};var h=function(t){return e.forall(t,function(e){return d(e)||o.isText(e)&&s.get(e).trim().length===0})};var p=function(e){return o.name(e)==="li"||u.ancestor(e,t.isList).isSome()};var v=function(e){return l.nextSibling(e).map(function(e){if(t.isBlock(e)){return true}if(t.isEmptyTag(e)){return o.name(e)==="img"?false:true}}).getOr(false)};var m=function(e){return c.last(e).bind(function(r){var i=v(r);return l.parent(r).map(function(o){return i===true||p(o)||d(r)||t.isBlock(o)&&!n.eq(e,o)?[]:[a.fromTag("br")]})}).getOr([])};var g=function(){var t=e.bind(f,function(e){var t=l.children(e);return h(t)?[]:t.concat(m(e))});return t.length===0?[a.fromTag("br")]:t};var y=g();i.empty(f[0]);r.append(f[0],y)};return{merge:f}});i("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(e,t){var n=function(e,t,n){var r=e.cells();var a=r.slice(0,t);var o=r.slice(t);var s=a.concat([n]).concat(o);return i(e,s)};var r=function(e,t,n){var r=e.cells();r[t]=n};var i=function(e,n){return t.rowcells(n,e.section())};var a=function(n,r){var i=n.cells();var a=e.map(i,r);return t.rowcells(a,n.section())};var o=function(e,t){return e.cells()[t]};var s=function(e,t){return o(e,t).element()};var u=function(e){return e.cells().length};return{addCell:n,setCells:i,mutateCell:r,getCell:o,getCellElement:s,mapCells:a,cellLength:u}});i("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e,t){return t};var i=function(t,n){var r=e.isObject(t)&&e.isObject(n);return r?o(t,n):n};var a=function(e){return function(){var r=new t(arguments.length);for(var i=0;i<r.length;i++){r[i]=arguments[i]}if(r.length===0){throw new n("Can't merge zero objects")}var a={};for(var o=0;o<r.length;o++){var s=r[o];for(var u in s){if(s.hasOwnProperty(u)){a[u]=e(a[u],s[u])}}}return a}};var o=a(i);var s=a(r);return{deepMerge:o,merge:s}});i("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){var t=function(e){var t=[];var n=function(e){t.push(e)};for(var r=0;r<e.length;r++){e[r].each(n)}return t};var n=function(t,n){for(var r=0;r<t.length;r++){var i=n(t[r],r);if(i.isSome()){return i}}return e.none()};var r=function(t,n){var r=[];for(var i=0;i<t.length;i++){var a=t[i];if(a.isSome()){r.push(a.getOrDie())}else{return e.none()}}return e.some(n.apply(null,r))};return{cat:t,findMap:n,liftN:r}});i("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(t,r){return e.map(t,function(e){return n.getCell(e,r)})};var i=function(e,t){return e[t]};var a=function(t,n){if(t.length===0){return 0}var r=t[0];var i=e.findIndex(t,function(e){return!n(r.element(),e.element())});return i.fold(function(){return t.length},function(e){return e})};var o=function(e,n,o,s){var u=i(e,n).cells().slice(o);var l=a(u,s);var c=r(e,o).slice(n);var f=a(c,s);return{colspan:t.constant(l),rowspan:t.constant(f)}};return{subgrid:o}});i("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(e,t,n,r){var i=function(r,i){var a=e.map(r,function(t,n){return e.map(t.cells(),function(e,t){return false})});var o=function(e,t,n,r){for(var i=e;i<e+n;i++){for(var o=t;o<t+r;o++){a[i][o]=true}}};return e.map(r,function(s,u){var l=e.bind(s.cells(),function(e,s){if(a[u][s]===false){var l=n.subgrid(r,u,s,i);o(u,s,l.rowspan(),l.colspan());return[t.detailnew(e.element(),l.rowspan(),l.colspan(),e.isNew())]}else{return[]}});return t.rowdetails(l,s.section())})};var a=function(e,n,i){var a=[];for(var o=0;o<e.grid().rows();o++){var s=[];for(var u=0;u<e.grid().columns();u++){var l=r.getAt(e,o,u).map(function(e){return t.elementnew(e.element(),i)}).getOrThunk(function(){return t.elementnew(n.gap(),true)});s.push(l)}var c=t.rowcells(s,e.all()[o].section());a.push(c)}return a};return{toDetails:i,toGrid:a}});i("ephox.snooker.operate.Redraw",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e,t,r,i){if(r===i){n.remove(e,t)}else{n.set(e,t,r)}};var f=function(n,s){var f=[];var d=[];var h=function(t,s){var h=u.child(n,s).getOrThunk(function(){var e=r.fromTag(s,l.owner(n).dom());i.append(n,e);return e});o.empty(h);var p=e.map(t,function(t){if(t.isNew()){f.push(t.element())}var n=t.element();o.empty(n);e.each(t.cells(),function(e){if(e.isNew()){d.push(e.element())}c(e.element(),"colspan",e.colspan(),1);c(e.element(),"rowspan",e.rowspan(),1);i.append(n,e.element())});return n});a.append(h,p)};var p=function(e){u.child(n,e).bind(o.remove)};var v=function(e,t){if(e.length>0){h(e,t)}else{p(t)}};var m=[];var g=[];var y=[];e.each(s,function(e){switch(e.section()){case"thead":m.push(e);break;case"tbody":g.push(e);break;case"tfoot":y.push(e);break}});v(m,"thead");v(g,"tbody");v(y,"tfoot");return{newRows:t.constant(f),newCells:t.constant(d)}};var d=function(t){var n=e.map(t,function(t){var n=s.shallow(t.element());e.each(t.cells(),function(e){var t=s.deep(e.element());c(t,"colspan",e.colspan(),1);c(t,"rowspan",e.rowspan(),1);i.append(n,t)});return n});return n};return{render:f,copy:d}});i("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(e,t,n,r){var i=function(e,t){var n=[];for(var r=0;r<e;r++){n.push(t(r))}return n};var a=function(e,t){var n=[];for(var r=e;r<t;r++){n.push(r)}return n};var o=function(t,n){var r=[];e.each(t,function(e,i){if(i<t.length-1&&!n(e,t[i+1])){r.push(e)}else if(i===t.length-1){r.push(e)}});return r};var s=function(i,a){if(a<0||a>=i.length-1){return t.none()}var o=i[a].fold(function(){var t=e.reverse(i.slice(0,a));return n.findMap(t,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:0})});var s=i[a+1].fold(function(){var e=i.slice(a+1);return n.findMap(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:1})});return o.bind(function(e){return s.map(function(t){var n=t.delta+e.delta;return r.abs(t.value-e.value)/n})})};return{repeat:i,range:a,unique:o,deduce:s}});i("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(e,t,n,r,i){var a=function(n){var a=n.grid();var s=i.range(0,a.columns());var u=i.range(0,a.rows());return e.map(s,function(i){var a=function(){return e.bind(u,function(e){return r.getAt(n,e,i).filter(function(e){return e.column()===i}).fold(t.constant([]),function(e){return[e]})})};var s=function(e){return e.colspan()===1};var l=function(){return r.getAt(n,0,i)};return o(a,s,l)})};var o=function(t,r,i){var a=t();var o=e.find(a,r);var s=o.orThunk(function(){return n.from(a[0]).orThunk(i)});return s.map(function(e){return e.element()})};var s=function(n){var a=n.grid();var s=i.range(0,a.rows());var u=i.range(0,a.columns());return e.map(s,function(i){var a=function(){return e.bind(u,function(e){return r.getAt(n,i,e).filter(function(e){return e.row()===i}).fold(t.constant([]),function(e){return[e]})})};var s=function(e){return e.rowspan()===1};var l=function(){return r.getAt(n,i,0)};return o(a,s,l)})};return{columns:a,rows:s}});i("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(e,t,n){var r=function(r,i,a,o,s){var u=n.fromTag("div");t.setAll(u,{position:"absolute",left:i-o/2+"px",top:a+"px",height:s+"px",width:o+"px"});e.set(u,"data-column",r);return u};var i=function(r,i,a,o,s){var u=n.fromTag("div");t.setAll(u,{position:"absolute",left:i+"px",top:a-s/2+"px",height:s+"px",width:o+"px"});e.set(u,"data-row",r);return u};return{col:r,row:i}});i("ephox.katamari.api.Namespace",[],function(){var e=function(e){var t=e.replace(/\./g,"-");var n=function(e){return t+"-"+e};return{resolve:n}};return{css:e}});i("ephox.snooker.style.Styles",["ephox.katamari.api.Namespace"],function(e){var t=e.css("ephox-snooker");return{resolve:t.resolve}});i("ephox.sugar.api.properties.Toggler",[],function(){return function(e,t,n){var r=n||false;var i=function(){t();r=true};var a=function(){e();r=false};var o=function(){var e=r?a:i;e()};var s=function(){return r};return{on:i,off:a,toggle:o,isOn:s}}});i("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(e,t){var n=function(e,n){var r=t.get(e,n);return r===undefined||r===""?[]:r.split(" ")};var r=function(e,r,i){var a=n(e,r);var o=a.concat([i]);t.set(e,r,o.join(" "))};var i=function(r,i,a){var o=e.filter(n(r,i),function(e){return e!==a});if(o.length>0){t.set(r,i,o.join(" "))}else{t.remove(r,i)}};return{read:n,add:r,remove:i}});i("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(e,t){var n=function(e){return e.dom().classList!==undefined};var r=function(e){return t.read(e,"class")};var i=function(e,n){return t.add(e,"class",n)};var a=function(e,n){return t.remove(e,"class",n)};var o=function(t,n){if(e.contains(r(t),n)){a(t,n)}else{i(t,n)}};return{get:r,add:i,remove:a,toggle:o,supports:n}});i("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(e,t,n){var r=function(e,t){if(n.supports(e)){e.dom().classList.add(t)}else{n.add(e,t)}};var i=function(e){var r=n.supports(e)?e.dom().classList:n.get(e);if(r.length===0){t.remove(e,"class")}};var a=function(e,t){if(n.supports(e)){var r=e.dom().classList;r.remove(t)}else{n.remove(e,t)}i(e)};var o=function(e,t){return n.supports(e)?e.dom().classList.toggle(t):n.toggle(e,t)};var s=function(t,r){var i=n.supports(t);var a=t.dom().classList;var o=function(){if(i){a.remove(r)}else{n.remove(t,r)}};var s=function(){if(i){a.add(r)}else{n.add(t,r)}};return e(o,s,u(t,r))};var u=function(e,t){return n.supports(e)&&e.dom().classList.contains(t)};return{add:r,remove:a,toggle:o,toggler:s,has:u}});i("ephox.snooker.resize.Bars",["ephox.katamari.api.Arr","ephox.snooker.lookup.Blocks","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.Bar","ephox.snooker.style.Styles","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p=a.resolve("resizer-bar");var v=a.resolve("resizer-rows");var m=a.resolve("resizer-cols");var g=7;var y=function(t){var n=c.descendants(t.parent(),"."+p);e.each(n,s.remove)};var b=function(t,n,r){var i=t.origin();e.each(n,function(e,n){e.each(function(e){var n=r(i,e);u.add(n,p);o.append(t.parent(),n)})})};var x=function(e,t,n,r){b(e,t,function(e,t){var a=i.col(t.col(),t.x()-e.left(),n.top()-e.top(),g,r);u.add(a,m);return a})};var w=function(e,t,n,r){b(e,t,function(e,t){var a=i.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,g);u.add(a,v);return a})};var _=function(e,t,n,r,i,a){var o=d.absolute(t);var s=n.length>0?i.positions(n,t):[];w(e,s,o,h.getOuter(t));var u=r.length>0?a.positions(r,t):[];x(e,u,o,f.getOuter(t))};var k=function(e,i,a,o){y(e,i);var s=n.fromTable(i);var u=r.generate(s);var l=t.rows(u);var c=t.columns(u);_(e,i,l,c,a,o)};var C=function(t,n){var r=c.descendants(t.parent(),"."+p);e.each(r,n)};var T=function(e){C(e,function(e){l.set(e,"display","none")})};var S=function(e){C(e,function(e){l.set(e,"display","block")})};var E=function(e){return u.has(e,v)};var A=function(e){return u.has(e,m)};return{refresh:k,hide:T,show:S,destroy:y,isRowBar:E,isColBar:A}});i("ephox.snooker.model.RunOperation",["ephox.katamari.api.Arr","ephox.katamari.api.Merger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw","ephox.snooker.resize.BarPositions","ephox.snooker.resize.Bars","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=function(e,t){return u.toGrid(e,t,false)};var m=function(t,n){var r=function(e){var t=i.findMap(e,function(e){return p.parent(e.element()).map(function(e){var t=p.parent(e).isNone();return a.elementnew(e,t)})});return t.getOrThunk(function(){return a.elementnew(n.row(),true)})};return e.map(t,function(e){var t=r(e.details());return a.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})};var g=function(e,t){var n=u.toDetails(e,h.eq);return m(n,t)};var y=function(t,n){var r=e.flatten(e.map(t.all(),function(e){return e.cells()}));return e.find(r,function(e){return h.eq(n,e.element())})};var b=function(e,t,i,a,o){return function(u,p,m,y,b){var x=s.fromTable(p);var w=l.generate(x);var _=t(w,m).map(function(t){var r=v(w,y);var i=e(r,t,h.eq,o(y));var a=g(i.grid(),y);return{grid:n.constant(a),cursor:i.cursor}});return _.fold(function(){return r.none()},function(e){var t=c.render(p,e.grid());i(p,e.grid(),b);a(p);d.refresh(u,p,f.height,b);return r.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}};var x=function(e,t){return o.cell(t.element()).bind(function(t){return y(e,t)})};var w=function(e,n){return o.cell(n.element()).bind(function(r){return y(e,r).map(function(e){return t.merge(e,{generators:n.generators,clipboard:n.clipboard})})})};var _=function(n,a){var s=e.map(a.selection(),function(e){return o.cell(e).bind(function(e){return y(n,e)})});var u=i.cat(s);return u.length>0?r.some(t.merge({cells:u},{generators:a.generators,clipboard:a.clipboard})):r.none()};var k=function(e,t){return t.mergable()};var C=function(e,t){return t.unmergable()};var T=function(t,n){var a=e.map(n.selection(),function(e){return o.cell(e).bind(function(e){return y(t,e)})});var s=i.cat(a);return s.length>0?r.some(s):r.none()};return{run:b,toDetailList:g,onCell:x,onCells:T,onPaste:w,onPasteRows:_,onMergable:k,onUnmergable:C}});i("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){var i=function(e){return r===e};var a=function(e){return n(r)};var o=function(e){return n(r)};var s=function(e){return n(e(r))};var u=function(e){e(r)};var l=function(e){return e(r)};var c=function(e,t){return t(r)};var f=function(e){return e(r)};var d=function(e){return e(r)};var h=function(){return t.some(r)};return{is:i,isValue:e.constant(true),isError:e.constant(false),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:a,orThunk:o,fold:c,map:s,each:u,bind:l,exists:f,forall:d,toOption:h}};var r=function(n){var i=function(e){return e()};var a=function(){return e.die(n)()};var o=function(e){return e};var s=function(e){return e()};var u=function(e){return r(n)};var l=function(e){return r(n)};var c=function(e,t){return e(n)};return{is:e.constant(false),isValue:e.constant(false),isError:e.constant(true),getOr:e.identity,getOrThunk:i,getOrDie:a,or:o,orThunk:s,fold:c,map:u,each:e.noop,bind:l,exists:e.constant(false),forall:e.constant(true),toOption:t.none}};return{value:n,error:r}});i("ephox.snooker.model.Fitment",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Result","ephox.snooker.api.Structs","ephox.snooker.model.GridRow","ephox.snooker.util.Util","global!Array","global!Error","global!Math"],function(e,t,n,r,i,a,o,s,u){var l=function(e,r,a){if(e.row()>=r.length||e.column()>i.cellLength(r[0])){return n.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column())}var o=r.slice(e.row());var s=o[0].cells().slice(e.column());var u=i.cellLength(a[0]);var l=a.length;return n.value({rowDelta:t.constant(o.length-l),colDelta:t.constant(s.length-u)})};var c=function(e,n){var r=i.cellLength(e[0]);var a=i.cellLength(n[0]);return{rowDelta:t.constant(0),colDelta:t.constant(r-a)}};var f=function(t,n){return e.map(t,function(){return r.elementnew(n.cell(),true)})};var d=function(e,t,n){return e.concat(a.repeat(t,function(t){return i.setCells(e[e.length-1],f(e[e.length-1].cells(),n))}))};var h=function(t,n,r){return e.map(t,function(e){return i.setCells(e,e.cells().concat(f(a.range(0,n),r)))})};var p=function(e,n,r){var i=n.colDelta()<0?h:t.identity;var a=n.rowDelta()<0?d:t.identity;var o=i(e,u.abs(n.colDelta()),r);var s=a(o,u.abs(n.rowDelta()),r);return s};return{measure:l,measureWidth:c,tailor:p}});i("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n,r){var i=function(e,t,i,a){if(e.length===0){return e}for(var o=t.startRow();o<=t.finishRow();o++){for(var s=t.startCol();s<=t.finishCol();s++){r.mutateCell(e[o],s,n.elementnew(a(),false))}}return e};var a=function(e,t,i,a){var o=true;for(var s=0;s<e.length;s++){for(var u=0;u<r.cellLength(e[0]);u++){var l=r.getCellElement(e[s],u);var c=i(l,t);if(c===true&&o===false){r.mutateCell(e[s],u,n.elementnew(a(),true))}else if(c===true){o=false}}}return e};var o=function(t,n){return e.foldl(t,function(t,r){return e.exists(t,function(e){return n(e.element(),r.element())})?t:t.concat([r])},[])};var s=function(i,a,s,u){if(a>0&&a<i.length){var l=i[a-1].cells();var c=o(l,s);e.each(c,function(e){var o=t.none();for(var l=a;l<i.length;l++){for(var c=0;c<r.cellLength(i[0]);c++){var f=i[l].cells()[c];var d=s(f.element(),e.element());if(d){if(o.isNone()){o=t.some(u())}o.each(function(e){r.mutateCell(i[l],c,n.elementnew(e,true))})}}}})}return i};return{merge:i,unmerge:a,splitRows:s}});i("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow","ephox.snooker.operate.MergingOperations"],function(e,t,n,r,i){var a=function(t,n,i,a){var o=r.getCell(t[n],i);var s=e.curry(a,o.element());var u=t[n];return t.length>1&&r.cellLength(u)>1&&(i>0&&s(r.getCellElement(u,i-1))||i<u.length-1&&s(r.getCellElement(u,i+1))||n>0&&s(r.getCellElement(t[n-1],i))||n<t.length-1&&s(r.getCellElement(t[n+1],i)))};var o=function(e,n,o,s,u){var l=e.row();var c=e.column();var f=o.length;var d=r.cellLength(o[0]);var h=l+f;var p=c+d;for(var v=l;v<h;v++){for(var m=c;m<p;m++){if(a(n,v,m,u)){i.unmerge(n,r.getCellElement(n[v],m),u,s.cell)}var g=r.getCellElement(o[v-l],m-c);var y=s.replace(g);r.mutateCell(n[v],m,t.elementnew(y,true))}}return n};var s=function(e,t,r,i,a){var s=n.measure(e,t,r);return s.map(function(s){var u=n.tailor(t,s,i);return o(e,u,r,i,a)})};var u=function(e,t,r,a,o){i.splitRows(t,e,o,a.cell);var s=n.measureWidth(r,t);var u=n.tailor(r,s,a);var l=n.measureWidth(t,u);var c=n.tailor(t,l,a);return c.slice(0,e).concat(u).concat(c.slice(e,c.length))};return{merge:s,insert:u}});i("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(e,r,i,a,o){var s=e.slice(0,r);var u=e.slice(r);var l=n.mapCells(e[i],function(i,s){var u=r>0&&r<e.length&&a(n.getCellElement(e[r-1],s),n.getCellElement(e[r],s));var l=u?n.getCell(e[r],s):t.elementnew(o(i.element(),a),true);return l});return s.concat([l]).concat(u)};var i=function(r,i,a,o,s){return e.map(r,function(e){var r=i>0&&i<n.cellLength(e)&&o(n.getCellElement(e,i-1),n.getCellElement(e,i));var u=r?n.getCell(e,i):t.elementnew(s(n.getCellElement(e,a),o),true);return n.addCell(e,i,u)})};var a=function(r,i,a,o,s){var u=a+1;return e.map(r,function(e,r){var l=r===i;var c=l?t.elementnew(s(n.getCellElement(e,a),o),true):n.getCell(e,a);return n.addCell(e,u,c)})};var o=function(e,r,i,a,o){var s=r+1;var u=e.slice(0,s);var l=e.slice(s);var c=n.mapCells(e[r],function(e,n){var r=n===i;return r?t.elementnew(o(e.element(),a),true):e});return u.concat([c]).concat(l)};var s=function(n,r,i){var a=e.map(n,function(e){var n=e.cells().slice(0,r).concat(e.cells().slice(i+1));return t.rowcells(n,e.section())});return e.filter(a,function(e){return e.cells().length>0})};var u=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))};return{insertRowAt:r,insertColumnAt:i,splitCellIntoColumns:a,splitCellIntoRows:o,deleteRowsAt:u,deleteColumnsAt:s}});i("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(r,i,a,o){var s=function(t){return e.exists(i,function(e){return a(t.element(),e.element())})};return e.map(r,function(e){return n.mapCells(e,function(e){return s(e)?t.elementnew(o(e.element(),a),true):e})})};var i=function(e,t,r,i){return n.getCellElement(e[t],r)!==undefined&&(t>0&&i(n.getCellElement(e[t-1],r),n.getCellElement(e[t],r)))};var a=function(e,t,r){return t>0&&r(n.getCellElement(e,t-1),n.getCellElement(e,t))};var o=function(t,o,s,u){var l=e.bind(t,function(e,r){var u=i(t,r,o,s)||a(e,o,s);return u?[]:[n.getCell(e,o)]});return r(t,l,s,u)};var s=function(t,n,o,s){var u=t[n];var l=e.bind(u.cells(),function(e,r){var s=i(t,n,r,o)||a(u,r,o);return s?[]:[e]});return r(t,l,o,s)};return{replaceColumn:o,replaceRow:s}});i("ephox.snooker.calc.ColumnContext",[],function(){var e=function(){return a(function(e,t,n,r,i){return e()})};var t=function(e){return a(function(t,n,r,i,a){return n(e)})};var n=function(e,t){return a(function(n,r,i,a,o){return i(e,t)})};var r=function(e,t,n){return a(function(r,i,a,o,s){return o(e,t,n)})};var i=function(e,t){return a(function(n,r,i,a,o){return o(e,t)})};var a=function(e){return{fold:e}};return{none:e,only:t,left:n,middle:r,right:i}});i("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(e,t,n,r){var i=function(e,t){if(e.length===0){return n.none()}if(e.length===1){return n.only(0)}if(t===0){return n.left(0,1)}if(t===e.length-1){return n.right(t-1,t)}if(t>0&&t<e.length-1){return n.middle(t-1,t,t+1)}return n.none()};var a=function(n,a,o,s){var u=n.slice(0);var l=i(n,a);var c=function(n){return e.map(n,t.constant(0))};var f=t.constant(c(u));var d=function(e){return s.singleColumnWidth(u[e],o)};var h=function(e,t){if(o>=0){var n=r.max(s.minCellWidth(),u[t]-o);return c(u.slice(0,e)).concat([o,n-u[t]]).concat(c(u.slice(t+1)))}else{var i=r.max(s.minCellWidth(),u[e]+o);var a=u[e]-i;return c(u.slice(0,e)).concat([i-u[e],a]).concat(c(u.slice(t+1)))}};var p=h;var v=function(e,t,n){return h(t,n)};var m=function(e,t){if(o>=0){return c(u.slice(0,t)).concat([o])}else{var n=r.max(s.minCellWidth(),u[t]+o);return c(u.slice(0,t)).concat([n-u[t]])}};return l.fold(f,d,p,v,m)};return{determine:a}});i("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r){var i=function(e,n){return t.has(e,n)&&r(t.get(e,n),10)>1};var a=function(e){return i(e,"colspan")};var o=function(e){return i(e,"rowspan")};var s=function(e,t){return r(n.get(e,t),10)};return{hasColspan:a,hasRowspan:o,minWidth:e.constant(10),minHeight:e.constant(10),getInt:s}});i("ephox.snooker.resize.ColumnSizes",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.lookup.Blocks","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.snooker.util.Util","ephox.sugar.api.properties.Css"],function(e,t,n,r,i,a,o){var s=function(e,t,n){return o.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})};var u=function(e){return s(e,"width",r.getPixelWidth)};var l=function(e){return s(e,"height",r.getHeight)};var c=function(r,o,s,u,l){var c=n.columns(r);var f=e.map(c,function(e){return e.map(o.edge)});return e.map(c,function(e,n){var r=e.filter(t.not(i.hasColspan));return r.fold(function(){var e=a.deduce(f,n);return u(e)},function(e){return s(e,l)})})};var f=function(e){return e.map(function(e){return e+"px"}).getOr("")};var d=function(e,t){return c(e,t,u,f)};var h=function(e,t,n){return c(e,t,r.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)};var p=function(e,t,n){return c(e,t,r.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)};var v=function(r,o,s,u){var l=n.rows(r);var c=e.map(l,function(e){return e.map(o.edge)});return e.map(l,function(e,n){var r=e.filter(t.not(i.hasRowspan));return r.fold(function(){var e=a.deduce(c,n);return u(e)},function(e){return s(e)})})};var m=function(e,t){return v(e,t,r.getHeight,function(e){return e.getOrThunk(i.minHeight)})};var g=function(e,t){return v(e,t,l,f)};return{getRawWidths:d,getPixelWidths:p,getPercentageWidths:h,getPixelHeights:m,getRawHeights:g}});i("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(e,t,n,r){var i=function(e,t,n){var r=0;for(var i=e;i<t;i++){r+=n[i]!==undefined?n[i]:0}return r};var a=function(r,a){var o=n.justCells(r);return e.map(o,function(e){var n=i(e.column(),e.column()+e.colspan(),a);return{element:e.element,width:t.constant(n),colspan:e.colspan}})};var o=function(r,a){var o=n.justCells(r);return e.map(o,function(e){var n=i(e.row(),e.row()+e.rowspan(),a);return{element:e.element,height:t.constant(n),rowspan:e.rowspan}})};var s=function(n,r){return e.map(n.all(),function(e,n){return{element:e.element,height:t.constant(r[n])}})};return{recalculateWidth:a,recalculateHeight:o,matchRowHeight:s}});i("ephox.snooker.resize.TableSize",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.sugar.api.view.Width","global!Math"],function(e,t,n,r,i,a,o){var s=function(e,o){var s=parseFloat(e,10);var u=a.get(o);var l=function(e){return e/u*100};var c=function(e,t){return[100-e]};var f=function(){return i.minWidth()/u*100};var d=function(e,t,n){var i=s+n;r.setPercentageWidth(e,i)};return{width:t.constant(s),pixelWidth:t.constant(u),getWidths:n.getPercentageWidths,getCellDelta:l,singleColumnWidth:c,minCellWidth:f,setElementWidth:r.setPercentageWidth,setTableWidth:d}};var u=function(a){var s=parseInt(a,10);var u=t.identity;var l=function(e,t){var n=o.max(i.minWidth(),e+t);return[n-e]};var c=function(t,n,i){var a=e.foldr(n,function(e,t){return e+t},0);r.setPixelWidth(t,a)};return{width:t.constant(s),pixelWidth:t.constant(s),getWidths:n.getPixelWidths,getCellDelta:u,singleColumnWidth:l,minCellWidth:i.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:c}};var l=function(e,t){if(r.percentageBasedSizeRegex().test(t)){var n=r.percentageBasedSizeRegex().exec(t);return s(n[1],e)}else if(r.pixelBasedSizeRegex().test(t)){var i=r.pixelBasedSizeRegex().exec(t);return u(i[1])}else{var o=a.get(e);return u(o)}};var c=function(e){var t=r.getRawWidth(e);return t.fold(function(){var t=a.get(e);return u(t)},function(t){return l(e,t)})};return{getTableSize:c}});i("ephox.snooker.resize.Adjustments",["ephox.katamari.api.Arr","ephox.snooker.calc.Deltas","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Recalculations","ephox.snooker.resize.Sizes","ephox.snooker.resize.TableSize","ephox.snooker.util.CellUtils","global!Math"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e){return r.generate(e)};var f=function(t){return e.foldr(t,function(e,t){return e+t},0)};var d=function(e){var t=n.fromTable(e);return c(t)};var h=function(n,r,i,o){var u=s.getTableSize(n);var l=u.getCellDelta(r);var c=d(n);var f=u.getWidths(c,o,u);var h=t.determine(f,i,l,u);var p=e.map(h,function(e,t){return e+f[t]});var v=a.recalculateWidth(c,p);e.each(v,function(e){u.setElementWidth(e.element(),e.width())});if(i===c.grid().columns()-1){u.setTableWidth(n,p,l)}};var p=function(t,n,r,s){var c=d(t);var h=i.getPixelHeights(c,s);var p=e.map(h,function(e,t){return r===t?l.max(n+e,u.minHeight()):e});var v=a.recalculateHeight(c,p);var m=a.matchRowHeight(c,p);e.each(m,function(e){o.setHeight(e.element(),e.height())});e.each(v,function(e){o.setHeight(e.element(),e.height())});var g=f(p);o.setHeight(t,g)};var v=function(t,n,r){var i=s.getTableSize(t);var o=c(n);var u=i.getWidths(o,r,i);var l=a.recalculateWidth(o,u);e.each(l,function(e){i.setElementWidth(e.element(),e.width())});var f=e.foldr(u,function(e,t){return t+e},0);if(l.length>0){i.setElementWidth(t,f)}};return{adjustWidth:h,adjustHeight:p,adjustWidthTo:v}});i("ephox.snooker.api.TableOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.Generators","ephox.snooker.api.Structs","ephox.snooker.api.TableContent","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.GridRow","ephox.snooker.model.RunOperation","ephox.snooker.model.TableMerge","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.MergingOperations","ephox.snooker.operate.ModificationOperations","ephox.snooker.operate.TransformOperations","ephox.snooker.resize.Adjustments","ephox.sugar.api.dom.Remove"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y){var b=function(e){var t=s.cells(e);if(t.length===0){y.remove(e)}};var x=r.immutable("grid","cursor");var w=function(e,t,n){return _(e,t,n).orThunk(function(){return _(e,0,0)})};var _=function(e,t,r){return n.from(e[t]).bind(function(e){return n.from(e.cells()[r]).bind(function(e){return n.from(e.element())})})};var k=function(e,t,n){return x(e,_(e,t,n))};var C=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.row()===n.row()})?t:t.concat([n])},[]).sort(function(e,t){return e.row()-t.row()})};var T=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.column()===n.column()})?t:t.concat([n])},[]).sort(function(e,t){return e.column()-t.column()})};var S=function(e,t,n,r){var i=t.row();var a=t.row();var o=v.insertRowAt(e,a,i,n,r.getOrInit);return k(o,a,t.column())};var E=function(t,n,r,i){var a=n[0].row();var o=n[0].row();var s=C(n);var u=e.foldl(s,function(e,t){return v.insertRowAt(e,o,a,r,i.getOrInit)},t);return k(u,o,n[0].column())};var A=function(e,t,n,r){var i=t.row();var a=t.row()+t.rowspan();var o=v.insertRowAt(e,a,i,n,r.getOrInit);return k(o,a,t.column())};var P=function(t,n,r,i){var a=C(n);var o=a[a.length-1].row();var s=a[a.length-1].row()+a[a.length-1].rowspan();var u=e.foldl(a,function(e,t){return v.insertRowAt(e,s,o,r,i.getOrInit)},t);return k(u,s,n[0].column())};var O=function(e,t,n,r){var i=t.column();var a=t.column();var o=v.insertColumnAt(e,a,i,n,r.getOrInit);return k(o,t.row(),a)};var M=function(t,n,r,i){var a=T(n);var o=a[0].column();var s=a[0].column();var u=e.foldl(a,function(e,t){return v.insertColumnAt(e,s,o,r,i.getOrInit)},t);return k(u,n[0].row(),s)};var N=function(e,t,n,r){var i=t.column();var a=t.column()+t.colspan();var o=v.insertColumnAt(e,a,i,n,r.getOrInit);return k(o,t.row(),a)};var R=function(t,n,r,i){var a=n[n.length-1].column();var o=n[n.length-1].column()+n[n.length-1].colspan();var s=T(n);var u=e.foldl(s,function(e,t){return v.insertColumnAt(e,o,a,r,i.getOrInit)},t);return k(u,n[0].row(),o)};var D=function(e,t,n,r){var i=m.replaceRow(e,t.row(),n,r.replaceOrInit);return k(i,t.row(),t.column())};var B=function(e,t,n,r){var i=m.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(i,t.row(),t.column())};var L=function(e,t,n,r){var i=m.replaceRow(e,t.row(),n,r.replaceOrInit);return k(i,t.row(),t.column())};var I=function(e,t,n,r){var i=m.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(i,t.row(),t.column())};var F=function(e,t,n,r){var i=v.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return k(i,t.row(),t.column())};var j=function(e,t,n,r){var i=v.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return k(i,t.row(),t.column())};var z=function(e,t,n,r){var i=T(t);var a=v.deleteColumnsAt(e,i[0].column(),i[i.length-1].column());var o=w(a,t[0].row(),t[0].column());return x(a,o)};var H=function(e,t,n,r){var i=C(t);var a=v.deleteRowsAt(e,i[0].row(),i[i.length-1].row());var o=w(a,t[0].row(),t[0].column());return x(a,o)};var U=function(e,r,i,a){var s=r.cells();o.merge(s);var u=p.merge(e,r.bounds(),i,t.constant(s[0]));return x(u,n.from(s[0]))};var W=function(t,r,i,a){var o=e.foldr(r,function(e,t){return p.unmerge(e,t,i,a.combine(t))},t);return x(o,n.from(r[0]))};var V=function(e,t,r,i){var o=function(e,t){var n=u.fromTable(e);var r=h.generate(n);return d.toGrid(r,t,true)};var s=o(t.clipboard(),t.generators());var l=a.address(t.row(),t.column());var c=f.merge(l,e,s,t.generators(),r);return c.fold(function(){return x(e,n.some(t.element()))},function(e){var n=w(e,t.row(),t.column());return x(e,n)})};var q=function(e,t,n){var r=u.fromPastedRows(e,n);var i=h.generate(r);return d.toGrid(i,t,true)};var K=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[0].row();var o=q(t.clipboard(),t.generators(),i);var s=f.insert(a,e,o,t.generators(),n);var u=w(s,t.cells[0].row(),t.cells[0].column());return x(s,u)};var Y=function(e,t,n,r){var i=e[t.cells[0].row()];var a=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan();var o=q(t.clipboard(),t.generators(),i);var s=f.insert(a,e,o,t.generators(),n);var u=w(s,t.cells[0].row(),t.cells[0].column());return x(s,u)};var $=g.adjustWidthTo;return{insertRowBefore:c.run(S,c.onCell,t.noop,t.noop,i.modification),insertRowsBefore:c.run(E,c.onCells,t.noop,t.noop,i.modification),insertRowAfter:c.run(A,c.onCell,t.noop,t.noop,i.modification),insertRowsAfter:c.run(P,c.onCells,t.noop,t.noop,i.modification),insertColumnBefore:c.run(O,c.onCell,$,t.noop,i.modification),insertColumnsBefore:c.run(M,c.onCells,$,t.noop,i.modification),insertColumnAfter:c.run(N,c.onCell,$,t.noop,i.modification),insertColumnsAfter:c.run(R,c.onCells,$,t.noop,i.modification),splitCellIntoColumns:c.run(F,c.onCell,$,t.noop,i.modification),splitCellIntoRows:c.run(j,c.onCell,t.noop,t.noop,i.modification),eraseColumns:c.run(z,c.onCells,$,b,i.modification),eraseRows:c.run(H,c.onCells,t.noop,b,i.modification),makeColumnHeader:c.run(B,c.onCell,t.noop,t.noop,i.transform("row","th")),unmakeColumnHeader:c.run(I,c.onCell,t.noop,t.noop,i.transform(null,"td")),makeRowHeader:c.run(D,c.onCell,t.noop,t.noop,i.transform("col","th")),unmakeRowHeader:c.run(L,c.onCell,t.noop,t.noop,i.transform(null,"td")),mergeCells:c.run(U,c.onMergable,t.noop,t.noop,i.merging),unmergeCells:c.run(W,c.onUnmergable,$,t.noop,i.merging),pasteCells:c.run(V,c.onPaste,$,t.noop,i.modification),pasteRowsBefore:c.run(K,c.onPasteRows,t.noop,t.noop,i.modification),pasteRowsAfter:c.run(Y,c.onPasteRows,t.noop,t.noop,i.modification)}});i("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t){var n=function(e){return t.fromDom(e.getBody())};var r=function(t){return function(r){return e.eq(r,n(t))}};var i=function(e){return e?e.replace(/px$/,""):""};var a=function(e){if(/^[0-9]+$/.test(e)){e+="px"}return e};return{getBody:n,getIsRoot:r,addSizeSuffix:a,removePxSuffix:i}});i("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(e){var t=function(e,t){return function(r){return n(r)==="rtl"?t:e}};var n=function(t){return e.get(t,"direction")==="rtl"?"rtl":"ltr"};return{onDirection:t,getDirection:n}});i("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(e,t){var n={isRtl:e.constant(false)};var r={isRtl:e.constant(true)};var i=function(e){var i=t.getDirection(e);return i==="rtl"?r:n};return{directionAt:i}});i("tinymce.plugins.table.actions.TableActions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CellMutations","ephox.snooker.api.TableDirection","ephox.snooker.api.TableFill","ephox.snooker.api.TableGridSize","ephox.snooker.api.TableOperations","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h){return function(p,v){var m=function(e){return l.name(d.getBody(e))==="table"};var g=function(e){var t=o.getGridSize(e);return m(p)===false||t.rows()>1};var y=function(e){var t=o.getGridSize(e);return m(p)===false||t.columns()>1};var b=function(e){p.fire("newrow",{node:e.dom()});return e.dom()};var x=function(e){p.fire("newcell",{node:e.dom()});return e.dom()};var w;if(p.settings.table_clone_elements!==false){if(typeof p.settings.table_clone_elements=="string"){w=p.settings.table_clone_elements.split(/[ ,]/)}else if(Array.isArray(p.settings.table_clone_elements)){w=p.settings.table_clone_elements}}var _=n.from(w);var k=function(t,r,o,s){return function(l,d){var v=f.descendants(l,"td[data-mce-style],th[data-mce-style]");e.each(v,function(e){c.remove(e,"data-mce-style")});var m=s();var g=u.fromDom(p.getDoc());var y=i(h.directionAt);var w=a.cellOperations(o,g,_);return r(l)?t(m,l,d,w,y).bind(function(t){e.each(t.newRows(),function(e){b(e)});e.each(t.newCells(),function(e){x(e)});return t.cursor().map(function(e){var t=p.dom.createRng();t.setStart(e.dom(),0);t.setEnd(e.dom(),0);return t})}):n.none()}};var C=k(s.eraseRows,g,t.noop,v);var T=k(s.eraseColumns,y,t.noop,v);var S=k(s.insertRowsBefore,t.always,t.noop,v);var E=k(s.insertRowsAfter,t.always,t.noop,v);var A=k(s.insertColumnsBefore,t.always,r.halve,v);var P=k(s.insertColumnsAfter,t.always,r.halve,v);var O=k(s.mergeCells,t.always,t.noop,v);var M=k(s.unmergeCells,t.always,t.noop,v);var N=k(s.pasteRowsBefore,t.always,t.noop,v);var R=k(s.pasteRowsAfter,t.always,t.noop,v);var D=k(s.pasteCells,t.always,t.noop,v);return{deleteRow:C,deleteColumn:T,insertRowsBefore:S,insertRowsAfter:E,insertColumnsBefore:A,insertColumnsAfter:P,mergeCells:O,unmergeCells:M,pasteRowsBefore:N,pasteRowsAfter:R,pasteCells:D}}});i("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(e,t,n,r,i){var a=function(a,o,s){var u=e.fromTable(a);var l=r.generate(u);var c=t.onCells(l,o);return c.map(function(e){var r=n.toGrid(l,s,false);var a=r.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());var o=t.toDetailList(a,s);return i.copy(o)})};return{copyRows:a}});i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")});i("tinymce.plugins.table.actions.Styles",["tinymce.core.util.Tools"],function(e){var t=function(e,t,n){var r=e.select("td,th",t),i;var a=function(t,r){for(var i=0;i<r.length;i++){var a=e.getStyle(r[i],n);if(typeof t==="undefined"){t=a}if(t!=a){return""}}return t};i=a(i,r);return i};var n=function(e,t,n){if(n){e.formatter.apply("align"+n,{},t)}};var r=function(e,t,n){if(n){e.formatter.apply("valign"+n,{},t)}};var i=function(t,n){e.each("left center right".split(" "),function(e){t.formatter.remove("align"+e,{},n)})};var a=function(t,n){e.each("top middle bottom".split(" "),function(e){t.formatter.remove("valign"+e,{},n)})};return{applyAlign:n,applyVAlign:r,unApplyAlign:i,unApplyVAlign:a,getTDTHOverallStyle:t}});i("tinymce.plugins.table.ui.Helpers",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util"],function(e,t,n){var r=function(e,n,r){var i=function(e,r){r=r||[];t.each(e,function(e){var t={text:e.text||e.title};if(e.menu){t.menu=i(e.menu)}else{t.value=e.value;if(n){n(t)}}r.push(t)});return r};return i(e,r||[])};var i=function(e,t){var r=e.dom;var i=t.control.rootControl;var a=i.toJSON();var o=r.parseStyle(a.style);if(t.control.name()==="style"){i.find("#borderStyle").value(o["border-style"]||"")[0].fire("select");i.find("#borderColor").value(o["border-color"]||"")[0].fire("change");i.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change");i.find("#width").value(o.width||"").fire("change");i.find("#height").value(o.height||"").fire("change")}else{o["border-style"]=a.borderStyle;o["border-color"]=a.borderColor;o["background-color"]=a.backgroundColor;o.width=a.width?n.addSizeSuffix(a.width):"";o.height=a.height?n.addSizeSuffix(a.height):""}i.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(o))))};var a=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style"));var r={};if(n["border-style"]){r.borderStyle=n["border-style"]}if(n["border-color"]){r.borderColor=n["border-color"]}if(n["background-color"]){r.backgroundColor=n["background-color"]}r.style=e.serializeStyle(n);return r};var o=function(t){var n=function(){var e=t.settings.color_picker_callback;if(e){return function(n){return e.call(t,function(e){n.control.value(e).fire("change")},n.control.value())}}};return{title:"Advanced",type:"form",defaults:{onchange:e.curry(i,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:e.curry(i,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:n()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n()}]}]}};return{createStyleForm:o,buildListItems:r,updateStyleField:i,extractAdvancedStyles:a}});i("tinymce.plugins.table.ui.TableDialog",["ephox.katamari.api.Fun","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,i,a,o){function s(e,t,n,r){if(t.tagName==="TD"||t.tagName==="TH"){e.setStyle(t,n,r)}else{if(t.children){for(var i=0;i<t.children.length;i++){s(e,t.children[i],n,r)}}}}var u=function(e,t){var r=e.dom;var a={width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"),cellpadding:r.getAttrib(t,"data-mce-cell-padding")||r.getAttrib(t,"cellpadding")||i.getTDTHOverallStyle(e.dom,t,"padding"),border:r.getAttrib(t,"data-mce-border")||r.getAttrib(t,"border")||i.getTDTHOverallStyle(e.dom,t,"border"),borderColor:r.getAttrib(t,"data-mce-border-color"),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class")};n.each("left center right".split(" "),function(n){if(e.formatter.matchNode(t,"align"+n)){a.align=n}});if(e.settings.table_advtab!==false){n.extend(a,o.extractAdvancedStyles(r,t))}return a};var l=function(e,t,r){var i=e.dom;var o={},u={};o["class"]=r["class"];u.height=a.addSizeSuffix(r.height);if(i.getAttrib(t,"width")&&!e.settings.table_style_by_css){o.width=a.removePxSuffix(r.width)}else{u.width=a.addSizeSuffix(r.width)}if(e.settings.table_style_by_css){u["border-width"]=a.addSizeSuffix(r.border);u["border-spacing"]=a.addSizeSuffix(r.cellspacing);n.extend(o,{"data-mce-border-color":r.borderColor,"data-mce-cell-padding":r.cellpadding,"data-mce-border":r.border})}else{n.extend(o,{border:r.border,cellpadding:r.cellpadding,cellspacing:r.cellspacing})}if(e.settings.table_style_by_css){if(t.children){for(var l=0;l<t.children.length;l++){s(i,t.children[l],{"border-width":a.addSizeSuffix(r.border),"border-color":r.borderColor,padding:a.addSizeSuffix(r.cellpadding)})}}}if(r.style){n.extend(u,i.parseStyle(r.style))}else{u=n.extend({},i.parseStyle(i.getAttrib(t,"style")),u)}o.style=i.serializeStyle(u);i.setAttribs(t,o)};var c=function(e,n,a){var s=e.dom;var u;var c;o.updateStyleField(e,a);c=a.control.rootControl.toJSON();if(c["class"]===false){delete c["class"]}e.undoManager.transact(function(){if(!n){n=r.insert(e,c.cols||1,c.rows||1)}l(e,n,c);u=s.select("caption",n)[0];if(u&&!c.caption){s.remove(u)}if(!u&&c.caption){u=s.create("caption");u.innerHTML=!t.ie?'<br data-mce-bogus="1"/>':"¬†";n.insertBefore(u,n.firstChild)}i.unApplyAlign(e,n);if(c.align){i.applyAlign(e,n,c.align)}e.focus();e.addVisual()})};var f=function(t,n){var r=t.dom,i,a,s,l,f={},d;if(n===true){i=r.getParent(t.selection.getStart(),"table");if(i){f=u(t,i)}}else{a={label:"Cols",name:"cols"};s={label:"Rows",name:"rows"}}if(t.settings.table_class_list){if(f["class"]){f["class"]=f["class"].replace(/\s*mce\-item\-table\s*/g,"")}l={name:"class",type:"listbox",label:"Class",values:o.buildListItems(t.settings.table_class_list,function(e){if(e.value){e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})}}})}}d={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:false,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:t.settings.table_appearance_options!==false?[a,s,{label:"Width",name:"width",onchange:e.curry(o.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(o.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[a,s,{label:"Width",name:"width",onchange:e.curry(o.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(o.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},l]};if(t.settings.table_advtab!==false){t.windowManager.open({title:"Table properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:d},o.createStyleForm(t)],onsubmit:e.curry(c,t,i)})}else{t.windowManager.open({title:"Table properties",data:f,body:d,onsubmit:e.curry(c,t,i)})}};return{open:f}});i("tinymce.plugins.table.ui.RowDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,i){var a=function(e,n){var r=e.dom;var a={height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),class:r.getAttrib(n,"class")};a.type=n.parentNode.nodeName.toLowerCase();t.each("left center right".split(" "),function(t){if(e.formatter.matchNode(n,"align"+t)){a.align=t}});if(e.settings.table_row_advtab!==false){t.extend(a,i.extractAdvancedStyles(r,n))}return a};var o=function(e,t,n){var r=e.getParent(t,"table");var i=t.parentNode;var a=e.select(n,r)[0];if(!a){a=e.create(n);if(r.firstChild){if(r.firstChild.nodeName==="CAPTION"){e.insertAfter(a,r.firstChild)}else{r.insertBefore(a,r.firstChild)}}else{r.appendChild(a)}}a.appendChild(t);if(!i.hasChildNodes()){e.remove(i)}};function s(e,a,s){var u=e.dom;var l;function c(e,t,n){if(n){u.setAttrib(e,t,n)}}function f(e,t,n){if(n){u.setStyle(e,t,n)}}i.updateStyleField(e,s);l=s.control.rootControl.toJSON();e.undoManager.transact(function(){t.each(a,function(t){c(t,"scope",l.scope);c(t,"style",l.style);c(t,"class",l["class"]);f(t,"height",r.addSizeSuffix(l.height));if(l.type!==t.parentNode.nodeName.toLowerCase()){o(e.dom,t,l.type)}if(a.length===1){n.unApplyAlign(e,t)}if(l.align){n.applyAlign(e,t,l.align)}});e.focus()})}var u=function(n){var r=n.dom,o,u,l,c,f,d=[],h;o=n.dom.getParent(n.selection.getStart(),"table");u=n.dom.getParent(n.selection.getStart(),"td,th");t.each(o.rows,function(e){t.each(e.cells,function(t){if(r.getAttrib(t,"data-mce-selected")||t==u){d.push(e);return false}})});l=d[0];if(!l){return}if(d.length>1){f={height:"",scope:"",class:"",align:"",type:l.parentNode.nodeName.toLowerCase()}}else{f=a(n,l)}if(n.settings.table_row_class_list){c={name:"class",type:"listbox",label:"Class",values:i.buildListItems(n.settings.table_row_class_list,function(e){if(e.value){e.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[e.value]})}}})}}h={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},c]};if(n.settings.table_row_advtab!==false){n.windowManager.open({title:"Row properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:h},i.createStyleForm(r)],onsubmit:e.curry(s,n,d)})}else{n.windowManager.open({title:"Row properties",data:f,body:h,onsubmit:e.curry(s,n,d)})}};return{open:u}});i("tinymce.plugins.table.ui.CellDialog",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.actions.Styles","tinymce.plugins.table.alien.Util","tinymce.plugins.table.ui.Helpers"],function(e,t,n,r,i){var a=function(e,t){e.style.cssText+=";"+t};var o=function(e,n){var r=e.dom;var a={width:r.getStyle(n,"width")||r.getAttrib(n,"width"),height:r.getStyle(n,"height")||r.getAttrib(n,"height"),scope:r.getAttrib(n,"scope"),class:r.getAttrib(n,"class")};a.type=n.nodeName.toLowerCase();t.each("left center right".split(" "),function(t){if(e.formatter.matchNode(n,"align"+t)){a.align=t}});t.each("top middle bottom".split(" "),function(t){if(e.formatter.matchNode(n,"valign"+t)){a.valign=t}});if(e.settings.table_cell_advtab!==false){t.extend(a,i.extractAdvancedStyles(r,n))}return a};var s=function(e,o,s){var u=e.dom;var l;function c(e,t,n){if(n){u.setAttrib(e,t,n)}}function f(e,t,n){if(n){u.setStyle(e,t,n)}}i.updateStyleField(e,s);l=s.control.rootControl.toJSON();e.undoManager.transact(function(){t.each(o,function(t){c(t,"scope",l.scope);if(o.length===1){c(t,"style",l.style)}else{a(t,l.style)}c(t,"class",l["class"]);f(t,"width",r.addSizeSuffix(l.width));f(t,"height",r.addSizeSuffix(l.height));if(l.type&&t.nodeName.toLowerCase()!==l.type){t=u.rename(t,l.type)}if(o.length===1){n.unApplyAlign(e,t);n.unApplyVAlign(e,t)}if(l.align){n.applyAlign(e,t,l.align)}if(l.valign){n.applyVAlign(e,t,l.valign)}});e.focus()})};var u=function(t){var n,r,a,u=[];u=t.dom.select("td[data-mce-selected],th[data-mce-selected]");n=t.dom.getParent(t.selection.getStart(),"td,th");if(!u.length&&n){u.push(n)}n=n||u[0];if(!n){return}if(u.length>1){r={width:"",height:"",scope:"",class:"",align:"",style:"",type:n.nodeName.toLowerCase()}}else{r=o(t,n)}if(t.settings.table_cell_class_list){a={name:"class",type:"listbox",label:"Class",values:i.buildListItems(t.settings.table_cell_class_list,function(e){if(e.value){e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})}}})}}var l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:false,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:e.curry(i.updateStyleField,t)},{label:"Height",name:"height",onchange:e.curry(i.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},a]};if(t.settings.table_cell_advtab!==false){t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:r,body:[{title:"General",type:"form",items:l},i.createStyleForm(t)],onsubmit:e.curry(s,t,u)})}else{t.windowManager.open({title:"Cell properties",data:r,body:l,onsubmit:e.curry(s,t,u)})}};return{open:u}});i("tinymce.plugins.table.actions.TableCommands",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopyRows","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog","tinymce.plugins.table.ui.RowDialog","tinymce.plugins.table.ui.CellDialog"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v){var m=c.each;var g=n.none();var y=function(){return g.fold(function(){return},function(t){return e.map(t,function(e){return e.dom()})})};var b=function(t){var r=e.map(t,l.fromDom);g=n.from(r)};var x=function(c,y,b,x){var w=f.getIsRoot(c);var _=function(){var e=l.fromDom(c.dom.getParent(c.selection.getStart(),"th,td"));var n=a.table(e,w);n.filter(t.not(w)).each(function(e){var t=l.fromText("");o.after(e,t);s.remove(e);var n=c.dom.createRng();n.setStart(t.dom(),0);n.setEnd(t.dom(),0);c.selection.setRng(n)})};var k=function(){return l.fromDom(c.dom.getParent(c.selection.getStart(),"th,td"))};var C=function(e){return a.table(e,w)};var T=function(e){var t=k();var n=C(t);n.each(function(n){var r=d.forMenu(x,n,t);e(n,r).each(function(e){c.selection.setRng(e);c.focus();b.clear(n)})})};var S=function(e){var a=k();var o=C(a);return o.bind(function(e){var o=l.fromDom(c.getDoc());var s=d.forMenu(x,e,a);var u=i.cellOperations(t.noop,o,n.none());return r.copyRows(e,s,u)})};var E=function(t){g.each(function(n){var r=e.map(n,function(e){return u.deep(e)});var a=k();var o=C(a);o.bind(function(e){var n=l.fromDom(c.getDoc());var o=i.paste(n);var s=d.pasteRows(x,e,a,r,o);t(e,s).each(function(t){c.selection.setRng(t);c.focus();b.clear(e)})})})};m({mceTableSplitCells:function(){T(y.unmergeCells)},mceTableMergeCells:function(){T(y.mergeCells)},mceTableInsertRowBefore:function(){T(y.insertRowsBefore)},mceTableInsertRowAfter:function(){T(y.insertRowsAfter)},mceTableInsertColBefore:function(){T(y.insertColumnsBefore)},mceTableInsertColAfter:function(){T(y.insertColumnsAfter)},mceTableDeleteCol:function(){T(y.deleteColumn)},mceTableDeleteRow:function(){T(y.deleteRow)},mceTableCutRow:function(e){g=S();T(y.deleteRow)},mceTableCopyRow:function(e){g=S()},mceTablePasteRowBefore:function(e){E(y.pasteRowsBefore)},mceTablePasteRowAfter:function(e){E(y.pasteRowsAfter)},mceTableDelete:_},function(e,t){c.addCommand(t,e)});m({mceInsertTable:t.curry(h.open,c),mceTableProps:t.curry(h.open,c,true),mceTableRowProps:t.curry(p.open,c),mceTableCellProps:t.curry(v.open,c)},function(e,t){c.addCommand(t,function(t,n){e(n)})})};return{registerCommands:x,getClipboardRows:y,setClipboardRows:b}});i("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(e,t,n,r,i){var a=function(r){var a=t.from(r.dom().documentElement).map(n.fromDom).getOr(r);return{parent:e.constant(a),view:e.constant(r),origin:e.constant(i(0,0))}};var o=function(t,n){var i=e.curry(r.absolute,n);return{parent:e.constant(n),view:e.constant(t),origin:i}};var s=function(t,n){return{parent:e.constant(n),view:e.constant(t),origin:e.constant(i(0,0))}};return{only:a,detached:o,body:s}});i("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(e,t){return function(n){var r=t.immutable.apply(null,n);var i=[];var a=function(e){if(e===undefined){throw"Event bind error: undefined handler"}i.push(e)};var o=function(t){i=e.filter(i,function(e){return e!==t})};var s=function(){var t=r.apply(null,arguments);e.each(i,function(e){e(t)})};return{bind:a,unbind:o,trigger:s}}});i("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(e){var t=function(t){var n=e.map(t,function(e){return{bind:e.bind,unbind:e.unbind}});var r=e.map(t,function(e){return e.trigger});return{registry:n,trigger:r}};return{create:t}});i("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(e){var t=e.exactly(["compare","extract","mutate","sink"]);var n=e.exactly(["element","start","stop","destroy"]);var r=e.exactly(["forceDrop","drop","move","delayDrop"]);return{mode:t,sink:n,api:r}});i("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(e){var t=e.css("ephox-dragster");return{resolve:t.resolve}});i("ephox.dragster.detect.Blocker",["ephox.dragster.style.Styles","ephox.katamari.api.Merger","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Remove"],function(e,t,n,r,i,a){return function(o){var s=t.merge({layerClass:e.resolve("blocker")},o);var u=i.fromTag("div");r.setAll(u,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"});n.add(u,e.resolve("blocker"));n.add(u,s.layerClass);var l=function(){return u};var c=function(){a.remove(u)};return{element:l,destroy:c}}});i("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(e,t){var n=function(t,n,r,i,a,o,s){return{target:e.constant(t),x:e.constant(n),y:e.constant(r),stop:i,prevent:a,kill:o,raw:e.constant(s)}};var r=function(r,i){return function(a){if(!r(a)){return}var o=t.fromDom(a.target);var s=function(){a.stopPropagation()};var u=function(){a.preventDefault()};var l=e.compose(u,s);var c=n(o,a.clientX,a.clientY,s,u,l,a);i(c)}};var i=function(t,n,i,a,o){var u=r(i,a);t.dom().addEventListener(n,u,o);return{unbind:e.curry(s,t,n,u,o)}};var a=function(e,t,n,r){return i(e,t,n,r,false)};var o=function(e,t,n,r){return i(e,t,n,r,true)};var s=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};return{bind:a,capture:o}});i("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(e,t){var n=e.constant(true);var r=function(e,r,i){return t.bind(e,r,n,i)};var i=function(e,r,i){return t.capture(e,r,n,i)};return{bind:r,capture:i}});i("ephox.dragster.api.MouseDrag",["ephox.dragster.api.DragApis","ephox.dragster.detect.Blocker","ephox.katamari.api.Option","ephox.sugar.api.view.Position","ephox.sugar.api.events.DomEvent","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove"],function(e,t,n,r,i,a,o){var s=function(e,t){return r(t.left()-e.left(),t.top()-e.top())};var u=function(e){return n.some(r(e.x(),e.y()))};var l=function(e,t){e.mutate(t.left(),t.top())};var c=function(n,r){var s=t(r);var u=i.bind(s.element(),"mousedown",n.forceDrop);var l=i.bind(s.element(),"mouseup",n.drop);var c=i.bind(s.element(),"mousemove",n.move);var f=i.bind(s.element(),"mouseout",n.delayDrop);var d=function(){s.destroy();l.unbind();c.unbind();f.unbind();u.unbind()};var h=function(e){a.append(e,s.element())};var p=function(){o.remove(s.element())};return e.sink({element:s.element,start:h,stop:p,destroy:d})};return e.mode({compare:s,extract:u,sink:c,mutate:l})});i("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t,n){return function(){var r=e.none();var i=function(){r=e.none()};var a=function(t,n){var i=r.map(function(e){return t.compare(e,n)});r=e.some(n);return i};var o=function(e,t){var n=t.extract(e);n.each(function(e){var n=a(t,e);n.each(function(e){s.trigger.move(e)})})};var s=n.create({move:t(["info"])});return{onEvent:o,reset:i,events:s.registry}}});i("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(e){return function(t){var n=function(e,t){};return{onEvent:n,reset:e.noop}}});i("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],function(e,t){return function(){var n=t();var r=e();var i=n;var a=function(){i.reset();i=r};var o=function(){i.reset();i=n};var s=function(e,t){i.onEvent(e,t)};var u=function(){return i===r};return{on:a,off:o,isOn:u,onEvent:s,events:r.events}}});a("global!clearTimeout",clearTimeout);a("global!setTimeout",setTimeout);i("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){var n=function(n,r){var i=null;var a=null;var o=function(){if(i!==null){e(i);i=null;a=null}};var s=function(){a=arguments;if(i===null){i=t(function(){n.apply(null,a);i=null;a=null},r)}};return{cancel:o,throttle:s}};var r=function(n,r){var i=null;var a=function(){if(i!==null){e(i);i=null}};var o=function(){var e=arguments;if(i===null){i=t(function(){n.apply(null,e);i=null;e=null},r)}};return{cancel:a,throttle:o}};var i=function(n,r){var i=null;var a=function(){if(i!==null){e(i);i=null}};var o=function(){var a=arguments;if(i!==null){e(i)}i=t(function(){n.apply(null,a);i=null;a=null},r)};return{cancel:a,throttle:o}};return{adaptable:n,first:r,last:i}});i("ephox.dragster.core.Dragging",["ephox.dragster.api.DragApis","ephox.dragster.detect.Movement","ephox.katamari.api.Throttler","ephox.porkbun.Event","ephox.porkbun.Events","global!Array"],function(e,t,n,r,i,a){var o=function(o,s,u){var l=false;var c=i.create({start:r([]),stop:r([])});var f=t();var d=function(){b.stop();if(f.isOn()){f.off();c.trigger.stop()}};var h=n.last(d,200);var p=function(e){b.start(e);f.on();c.trigger.start()};var v=function(e,t){h.cancel();f.onEvent(e,s)};f.events.move.bind(function(e){s.mutate(o,e.info())});var m=function(){l=true};var g=function(){l=false};var y=function(e){return function(){var t=a.prototype.slice.call(arguments,0);if(l){return e.apply(null,t)}}};var b=s.sink(e.api({forceDrop:d,drop:y(d),move:y(v),delayDrop:y(h.throttle)}),u);var x=function(){b.destroy()};return{element:b.element,go:p,on:m,off:g,destroy:x,events:c.registry}};return{setup:o}});i("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(e,t,n){var r=function(n,r){var i=r!==undefined?r:{};var a=i.mode!==undefined?i.mode:e;return t.setup(n,a,r)};return{transform:r}});i("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t){return function(){var n=t.create({drag:e(["xDelta","yDelta"])});var r=function(e,t){n.trigger.drag(e,t)};return{mutate:r,events:n.registry}}});i("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(e,t,n,r){return function(){var i=n.create({drag:t(["xDelta","yDelta","target"])});var a=e.none();var o=r();o.events.drag.bind(function(e){a.each(function(t){i.trigger.drag(e.xDelta(),e.yDelta(),t)})});var s=function(t){a=e.some(t)};var u=function(){return a};return{assign:s,get:u,mutate:o.mutate,events:i.registry}}});i("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){var t=function(t){return e.first(t).isSome()};var n=function(t,n,r){return e.ancestor(t,n,r).isSome()};var r=function(t,n){return e.sibling(t,n).isSome()};var i=function(t,n){return e.child(t,n).isSome()};var a=function(t,n){return e.descendant(t,n).isSome()};var o=function(t,n,r){return e.closest(t,n,r).isSome()};return{any:t,ancestor:n,sibling:r,child:i,descendant:a,closest:o}});i("ephox.snooker.resize.BarManager",["ephox.dragster.api.Dragger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.BarMutation","ephox.snooker.resize.Bars","ephox.snooker.style.Styles","ephox.snooker.util.CellUtils","ephox.sugar.api.dom.Compare","ephox.sugar.api.events.DomEvent","ephox.sugar.api.node.Body","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorExists","ephox.sugar.api.search.SelectorFind","global!parseInt"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g,y){var b=s.resolve("resizer-bar-dragging");return function(s,x,w){var _=a();var k=e.transform(_,{});var C=n.none();var T=function(e,t){return n.from(h.get(e,t))};_.events.drag.bind(function(e){T(e.target(),"data-row").each(function(t){var n=u.getInt(e.target(),"top");v.set(e.target(),"top",n+e.yDelta()+"px")});T(e.target(),"data-column").each(function(t){var n=u.getInt(e.target(),"left");v.set(e.target(),"left",n+e.xDelta()+"px")})});var S=function(e,t){var n=u.getInt(e,t);var r=y(h.get(e,"data-initial-"+t),10);return n-r};k.events.stop.bind(function(){_.get().each(function(e){C.each(function(t){T(e,"data-row").each(function(n){var r=S(e,"top");h.remove(e,"data-initial-top");R.trigger.adjustHeight(t,r,y(n,10))});T(e,"data-column").each(function(n){var r=S(e,"left");h.remove(e,"data-initial-left");R.trigger.adjustWidth(t,r,y(n,10))});o.refresh(s,t,w,x)})})});var E=function(e,t){R.trigger.startAdjust();_.assign(e);h.set(e,"data-initial-"+t,y(v.get(e,t),10));p.add(e,b);v.set(e,"opacity","0.2");k.go(s.parent())};var A=c.bind(s.parent(),"mousedown",function(e){if(o.isRowBar(e.target())){E(e.target(),"top")}if(o.isColBar(e.target())){E(e.target(),"left")}});var P=function(e){return l.eq(e,s.view())};var O=c.bind(s.view(),"mouseover",function(e){if(d.name(e.target())==="table"||m.ancestor(e.target(),"table",P)){C=d.name(e.target())==="table"?n.some(e.target()):g.ancestor(e.target(),"table",P);C.each(function(e){o.refresh(s,e,w,x)})}else if(f.inBody(e.target())){o.destroy(s)}});var M=function(){A.unbind();O.unbind();k.destroy();o.destroy(s)};var N=function(e){o.refresh(s,e,w,x)};var R=i.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:M,refresh:N,on:k.on,off:k.off,hideBars:t.curry(o.hide,s),showBars:t.curry(o.show,s),events:R.registry}}});i("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(e,t,n,r,i){return function(a,o){var s=i.height;var u=r(a,o,s);var l=t.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});u.events.adjustHeight.bind(function(e){l.trigger.beforeResize(e.table());var t=s.delta(e.delta(),e.table());n.adjustHeight(e.table(),t,e.row(),s);l.trigger.afterResize(e.table())});u.events.startAdjust.bind(function(e){l.trigger.startDrag()});u.events.adjustWidth.bind(function(e){l.trigger.beforeResize(e.table());var t=o.delta(e.delta(),e.table());n.adjustWidth(e.table(),t,e.column(),o);l.trigger.afterResize(e.table())});return{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:l.registry}}});i("tinymce.plugins.table.actions.TableWire",["ephox.snooker.api.ResizeWire","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","tinymce.plugins.table.alien.Util"],function(e,t,n,r,i,a,o){var s=function(){var e=i.fromTag("div");a.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"});t.append(r.body(),e);return e};var u=function(t,n){return t.inline?e.body(o.getBody(t),s()):e.only(i.fromDom(t.getDoc()))};var l=function(e,t){if(e.inline){n.remove(t.parent())}};return{get:u,remove:l}});i("tinymce.plugins.table.actions.ResizeHandler",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.ResizeWire","ephox.snooker.api.TableDirection","ephox.snooker.api.TableResize","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.actions.TableWire","tinymce.plugins.table.queries.Direction","tinymce.core.util.Tools"],function(e,t,n,r,i,a,o,s,u,l,c){return function(f){var d=t.none();var h=t.none();var p=t.none();var v=/(\d+(\.\d+)?)%/;var m,g;var y=function(e){return e.nodeName==="TABLE"};var b=function(e){return f.dom.getStyle(e,"width")||f.dom.getAttrib(e,"width")};var x=function(){return h};var w=function(){return p.getOr(n.only(a.fromDom(f.getBody())))};var _=function(){h.each(function(e){e.destroy()});p.each(function(e){u.remove(f,e)})};f.on("init",function(){var n=r(l.directionAt);var a=u.get(f);p=t.some(a);if(f.settings.object_resizing&&f.settings.table_resize_bars!==false&&(f.settings.object_resizing===true||f.settings.object_resizing==="table")){var c=i(a,n);c.on();c.events.startDrag.bind(function(e){d=t.some(f.selection.getRng())});c.events.afterResize.bind(function(t){var n=t.table();var r=s.descendants(n,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){o.remove(e,"data-mce-style")});d.each(function(e){f.selection.setRng(e);f.focus()});f.undoManager.add()});h=t.some(c)}});f.on("ObjectResizeStart",function(e){if(y(e.target)){m=e.width;g=b(e.target)}});f.on("ObjectResized",function(e){if(y(e.target)){var t=e.target;if(v.test(g)){var n=parseFloat(v.exec(g)[1],10);var r=e.width*n/m;f.dom.setStyle(t,"width",r+"%")}else{var i=[];c.each(t.rows,function(e){c.each(e.cells,function(e){var t=f.dom.getStyle(e,"width",true);i.push({cell:e,width:t})})});c.each(i,function(e){f.dom.setStyle(e.cell,"width",e.width);f.dom.setAttrib(e.cell,"width",null)})}}});return{lazyResize:x,lazyWire:w,destroy:_}}});i("ephox.snooker.api.CellLocation",[],function(){var e=function(e){return i(function(t,n,r,i){return t(e)})};var t=function(e){return i(function(t,n,r,i){return n(e)})};var n=function(e,t){return i(function(n,r,i,a){return i(e,t)})};var r=function(e){return i(function(t,n,r,i){return i(e)})};var i=function(e){return{fold:e}};return{none:e,first:t,middle:n,last:r}});i("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,i){var a=function(n,a){return r.table(n,a).bind(function(a){var o=r.cells(a);var s=e.findIndex(o,function(e){return i.eq(n,e)});return s.map(function(e){return{index:t.constant(e),all:t.constant(o)}})})};var o=function(e,t){var r=a(e,t);return r.fold(function(){return n.none(e)},function(t){return t.index()+1<t.all().length?n.middle(e,t.all()[t.index()+1]):n.last(e)})};var s=function(e,t){var r=a(e,t);return r.fold(function(){return n.none()},function(t){return t.index()-1>=0?n.middle(e,t.all()[t.index()-1]):n.first(e)})};return{next:o,prev:s}});i("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt","ephox.katamari.api.Fun"],function(e,t){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]);var r=function(e,t,n,r){return e.fold(t,n,r)};var i=function(e){return e.fold(t.identity,t.identity,t.identity)};return{before:n.before,on:n.on,after:n.after,cata:r,getStart:i}});i("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i){var a=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]);var o=t.immutable("start","soffset","finish","foffset");var s=function(e){return a.exact(e.start(),e.soffset(),e.finish(),e.foffset())};var u=function(e){return e.match({domRange:function(e){return n.fromDom(e.startContainer)},relative:function(e,t){return i.getStart(e)},exact:function(e,t,n,r){return e}})};var l=function(e){var t=u(e);return r.defaultView(t)};return{domRange:a.domRange,relative:a.relative,exact:a.exact,exactFromRange:s,range:o,getWin:l}});i("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,t,r,i){var a=n.owner(e);var o=a.dom().createRange();o.setStart(e.dom(),t);o.setEnd(r.dom(),i);return o};var i=function(e,n,i,a){var o=r(e,n,i,a);return t.fromDom(o.commonAncestorContainer)};var a=function(t,n,i,a){var o=r(t,n,i,a);var s=e.eq(t,i)&&n===a;return o.collapsed&&!s};return{after:a,commonAncestorContainer:i}});i("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){var r=function(r,i){var a=i||n;var o=a.createDocumentFragment();e.each(r,function(e){o.appendChild(e.dom())});return t.fromDom(o)};return{fromElements:r}});i("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r){var i=function(e,t){var n=e.document.createRange();a(n,t);return n};var a=function(e,t){e.selectNodeContents(t.dom())};var o=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1};var s=function(e){return e.document.createRange()};var u=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})};var l=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})};var c=function(e,t){p(e);e.insertNode(t.dom())};var f=function(e,t,r,i){return n.eq(e,r)&&t===i};var d=function(e,t,n){var r=e.document.createRange();u(r,t);l(r,n);return r};var h=function(e,t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a};var p=function(e){e.deleteContents()};var v=function(e){var t=e.cloneContents();return r.fromDom(t)};var m=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}};var g=function(e){var n=e.getClientRects();var r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(m):t.none()};var y=function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(m):t.none()};var b=function(e){return e.toString()};return{create:s,replaceWith:c,selectNodeContents:i,selectNodeContentsUsing:a,isCollapsed:f,relativeToNative:d,exactToNative:h,deleteContents:p,cloneFragment:v,getFirstRect:g,getBounds:y,isWithin:o,toString:b}});i("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,t,n,r,i,a){var o=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);var s=function(e,t,n){return t(i.fromDom(n.startContainer),n.startOffset,i.fromDom(n.endContainer),n.endOffset)};var u=function(e,i){return i.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(t,i){return{ltr:r.cached(function(){return a.relativeToNative(e,t,i)}),rtl:r.cached(function(){return n.some(a.relativeToNative(e,i,t))})}},exact:function(t,i,o,s){return{ltr:r.cached(function(){return a.exactToNative(e,t,i,o,s)}),rtl:r.cached(function(){return n.some(a.exactToNative(e,o,s,t,i))})}}})};var l=function(e,t){var n=t.ltr();if(n.collapsed){var r=t.rtl().filter(function(e){return e.collapsed===false});return r.map(function(e){return o.rtl(i.fromDom(e.endContainer),e.endOffset,i.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return s(e,o.ltr,n)})}else{return s(e,o.ltr,n)}};var c=function(e,t){var n=u(e,t);return l(e,n)};var f=function(e,t){var n=c(e,t);return n.match({ltr:function(t,n,r,i){var a=e.document.createRange();a.setStart(t.dom(),n);a.setEnd(r.dom(),i);return a},rtl:function(t,n,r,i){var a=e.document.createRange();a.setStart(r.dom(),i);a.setEnd(t.dom(),n);return a}})};return{ltr:o.ltr,rtl:o.rtl,diagnose:c,asLtrRange:f}});i("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){var t=function(t,n,r,i,a){if(a===0){return 0}else if(n===i){return a-1}var o=i;for(var s=1;s<a;s++){var u=t(s);var l=e.abs(n-u.left);if(r>u.bottom){}else if(r<u.top||l>o){return s-1}else{o=l}}return 0};var n=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};return{inRect:n,searchForPoint:t}});i("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,t,n,r,i){var a=function(e,t,i,a,o){var s=function(n){var r=e.dom().createRange();r.setStart(t.dom(),n);r.collapse(true);return r};var u=function(e){var t=s(e);return t.getBoundingClientRect()};var l=n.get(t).length;var c=r.searchForPoint(u,i,a,o.right,l);return s(c)};var o=function(n,i,o,s){var u=n.dom().createRange();u.selectNode(i.dom());var l=u.getClientRects();var c=t.findMap(l,function(t){return r.inRect(t,o,s)?e.some(t):e.none()});return c.map(function(e){return a(n,i,o,s,e)})};return{locate:o}});i("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,t,n,r,i,a,o){var s=function(n,a,o,s){var l=n.dom().createRange();var c=r.children(a);return t.findMap(c,function(t){l.selectNode(t.dom());return i.inRect(l.getBoundingClientRect(),o,s)?u(n,t,o,s):e.none()})};var u=function(e,t,r,i){var o=n.isText(t)?a.locate:s;return o(e,t,r,i)};var l=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect();var s=o.max(a.left,o.min(a.right,n));var l=o.max(a.top,o.min(a.bottom,r));return u(e,t,s,l)};return{locate:l}});i("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n){var r=true;var i=false;var a=function(e,t){return t-e.left<e.right-t?r:i};var o=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());r.collapse(n);return r};var s=function(e,t,i){var s=e.dom().createRange();s.selectNode(t.dom());var u=s.getBoundingClientRect();var l=a(u,i);var c=l===r?n.first:n.last;return c(t).map(function(t){return o(e,t,l)})};var u=function(t,n,r){var i=n.dom().getBoundingClientRect();var s=a(i,r);return e.some(o(t,n,s))};var l=function(e,n,r){var i=t.children(n).length===0?u:s;return i(e,n,r)};return{search:l}});i("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,t,n,r,i,a,o,s){var u=function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(n.offsetNode===null){return e.none()}var r=t.dom().createRange();r.setStart(n.offsetNode,n.offset);r.collapse();return e.some(r)})};var l=function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))};var c=function(e,t,n,r){var a=e.dom().createRange();a.selectNode(t.dom());var o=a.getBoundingClientRect();var u=s.max(o.left,s.min(o.right,n));var l=s.max(o.top,s.min(o.bottom,r));return i.locate(e,t,u,l)};var f=function(e,r,i){return t.fromPoint(e,r,i).bind(function(t){var o=function(){return a.search(e,t,r)};return n.children(t).length===0?o():c(e,t,r,i).orThunk(o)})};var d=o.caretPositionFromPoint?u:o.caretRangeFromPoint?l:f;var h=function(e,n,i){var a=t.fromDom(e.document);return d(a,n,i).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})};return{fromPoint:h}});i("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r,i,a,o){var s=function(t,n,o,s){var u=a.create(t);var l=i.is(n,s)?[n]:[];var c=l.concat(r.descendants(n,s));return e.filter(c,function(e){a.selectNodeContentsUsing(u,e);return a.isWithin(o,u)})};var u=function(e,r,i){var a=o.asLtrRange(e,r);var u=t.fromDom(a.commonAncestorContainer);return n.isElement(u)?s(e,u,a,i):[]};return{find:u}});i("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i){var a=function(t,r){var a=n.name(t);if("input"===a){return i.after(t)}else if(!e.contains(["br","img"],a)){return i.on(t,r)}else{return r===0?i.before(t):i.after(t)}};var o=function(e,t){var n=e.fold(i.before,a,i.after);var o=t.fold(i.before,a,i.after);return r.relative(n,o)};var s=function(e,t,n,i){var o=a(e,t);var s=a(n,i);return r.relative(o,s)};var u=function(e){return e.match({domRange:function(e){var n=t.fromDom(e.startContainer);var r=t.fromDom(e.endContainer);return s(n,e.startOffset,r,e.endOffset)},relative:o,exact:s})};return{beforeSpecial:a,preprocess:u,preprocessRelative:o,preprocessExact:s}});i("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,t,n,r,i,a,o,s,u,l,c){var f=function(t,n){e.from(t.getSelection()).each(function(e){e.removeAllRanges();e.addRange(n)})};var d=function(e,t,n,r,i){var a=o.exactToNative(e,t,n,r,i);f(e,a)};var h=function(e,t,n){return l.find(e,t,n)};var p=function(e,t){return s.diagnose(e,t).match({ltr:function(t,n,r,i){d(e,t,n,r,i)},rtl:function(t,n,r,i){var a=e.getSelection();if(a.extend){a.collapse(t.dom(),n);a.extend(r.dom(),i)}else{d(e,r,i,t,n)}}})};var v=function(e,t,n,r,i){var a=c.preprocessExact(t,n,r,i);p(e,a)};var m=function(e,t,n){var r=c.preprocessRelative(t,n);p(e,r)};var g=function(e){var t=a.getWin(e).dom();var n=function(e,n,r,i){return o.exactToNative(t,e,n,r,i)};var r=c.preprocess(e);return s.diagnose(t,r).match({ltr:n,rtl:n})};var y=function(t){if(t.rangeCount>0){var r=t.getRangeAt(0);var i=t.getRangeAt(t.rangeCount-1);return e.some(a.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(i.endContainer),i.endOffset))}else{return e.none()}};var b=function(r){var i=n.fromDom(r.anchorNode);var o=n.fromDom(r.focusNode);return t.after(i,r.anchorOffset,o,r.focusOffset)?e.some(a.range(n.fromDom(r.anchorNode),r.anchorOffset,n.fromDom(r.focusNode),r.focusOffset)):y(r)};var x=function(e,t){var n=o.selectNodeContents(e,t);f(e,n)};var w=function(e,t){var r=o.selectNodeContents(e,t);return a.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)};var _=function(t){var n=t.getSelection();return n.rangeCount>0?b(n):e.none()};var k=function(e){return _(e).map(function(e){return a.exact(e.start(),e.soffset(),e.finish(),e.foffset())})};var C=function(e,t){var n=s.asLtrRange(e,t);return o.getFirstRect(n)};var T=function(e,t){var n=s.asLtrRange(e,t);return o.getBounds(n)};var S=function(e,t,n){return u.fromPoint(e,t,n)};var E=function(e,t){var n=s.asLtrRange(e,t);return o.toString(n)};var A=function(e){var t=e.getSelection();t.removeAllRanges()};var P=function(e,t){var n=s.asLtrRange(e,t);return o.cloneFragment(n)};var O=function(e,t,n){var i=s.asLtrRange(e,t);var a=r.fromElements(n,e.document);o.replaceWith(i,a)};var M=function(e,t){var n=s.asLtrRange(e,t);o.deleteContents(n)};return{setExact:v,getExact:_,get:k,setRelative:m,toNative:g,setToElement:x,clear:A,clone:P,replace:O,deleteAt:M,forElement:w,getFirstRect:C,getBounds:T,getAtPoint:S,findWithin:h,getAsString:E}});i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")});i("tinymce.plugins.table.queries.TabContext",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.CellNavigation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.CursorPosition","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.WindowSelection","tinymce.core.util.VK","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=function(e,t,r,i){return b(e,t,n.next(r),i)};var m=function(e,t,r,i){return b(e,t,n.prev(r),i)};var g=function(e,t){var n=c.exact(t,0,t,0);return f.toNative(n)};var y=function(t,n){var r=s.descendants(n,"tr");return e.last(r).bind(function(e){return u.descendant(e,"td,th").map(function(e){return g(t,e)})})};var b=function(e,n,i,a,o){return i.fold(t.none,t.none,function(t,n){return l.first(n).map(function(t){return g(e,t)})},function(t){return r.table(t,n).bind(function(n){var r=p.noMenu(t);e.undoManager.transact(function(){a.insertRowsAfter(n,r)});return y(e,n)})})};var x=["table","li","dl"];var w=function(t,n,s,u){if(t.keyCode===d.TAB){var l=h.getBody(n);var c=function(t){var n=o.name(t);return i.eq(t,l)||e.contains(x,n)};var f=n.selection.getRng();if(f.collapsed){var p=a.fromDom(f.startContainer);r.cell(p,c).each(function(e){t.preventDefault();var r=t.shiftKey?m:v;var i=r(n,c,e,s,u);i.each(function(e){n.selection.setRng(e)})})}}};return{handle:w}});i("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("selection","kill");return{response:t}});i("ephox.darwin.api.SelectionKeys",[],function(){var e=function(e){return function(t){return t===e}};var t=e(38);var n=e(40);var r=function(e){return e>=37&&e<=40};return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:t,isDown:n,isNavigation:r}});i("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r){var i=function(n,i){var a=r.asLtrRange(n,i);return{start:e.constant(t.fromDom(a.startContainer)),soffset:e.constant(a.startOffset),finish:e.constant(t.fromDom(a.endContainer)),foffset:e.constant(a.endOffset)}};var a=function(t,r,i,a){return{start:e.constant(n.on(t,r)),finish:e.constant(n.on(i,a))}};return{convertToRange:i,makeSitus:a}});i("ephox.darwin.api.WindowBridge",["ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.api.selection.WindowSelection"],function(e,t,n,r,i,a,o,s){return function(u){var l=function(e,t){return r.from(u.document.elementFromPoint(e,t)).map(i.fromDom)};var c=function(e){return e.dom().getBoundingClientRect()};var f=function(e,r,i,o){var l=a.exact(e,r,i,o);return s.getFirstRect(u,l).map(function(e){return n.map(e,t.apply)})};var d=function(){return s.get(u).map(function(t){return e.convertToRange(u,t)})};var h=function(t){var n=a.relative(t.start(),t.finish());return e.convertToRange(u,n)};var p=function(e,n){return s.getAtPoint(u,e,n).map(function(e){return{start:t.constant(o.on(e.start(),e.soffset())),finish:t.constant(o.on(e.finish(),e.foffset()))}})};var v=function(){s.clear(u)};var m=function(e){s.setToElement(u,e)};var g=function(e){s.setExact(u,e.start(),e.soffset(),e.finish(),e.foffset())};var y=function(e,t){s.setRelative(u,e,t)};var b=function(){return u.innerHeight};var x=function(){return u.scrollY};var w=function(e,t){u.scrollBy(e,t)};return{elementFromPoint:l,getRect:c,getRangedRect:f,getSelection:d,fromSitus:h,situsFromPoint:p,clearSelection:v,setSelection:g,setRelativeSelection:y,selectContents:m,getInnerHeight:b,getScrollY:x,scrollBy:w}}});i("ephox.darwin.keyboard.KeySelection",["ephox.darwin.api.Responses","ephox.darwin.selection.CellSelection","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e,t,n,r,s,u,l){if(!(a.eq(n,s)&&r===u)){return o.closest(n,"td,th",t).bind(function(n){return o.closest(s,"td,th",t).bind(function(r){return f(e,t,n,r,l)})})}else{return i.none()}};var f=function(r,o,u,l,c){if(!a.eq(u,l)){var f=t.identify(u,l,o).getOr([]);if(f.length>0){c(r,f,u,l);return i.some(e.response(i.some(n.makeSitus(u,0,u,s.getEnd(u))),true))}}return i.none()};var d=function(e,n,r,i,a){var o=function(e){a.clear(r);a.selectRange(r,e.boxes(),e.start(),e.finish());return e.boxes()};return t.shiftSelection(i,e,n,a.firstSelectedSelector(),a.lastSelectedSelector()).map(o)};return{sync:c,detect:f,update:d}});i("ephox.darwin.keyboard.Carets",["ephox.katamari.api.Struct"],function(e){var t=e.immutableBag(["left","top","right","bottom"],[]);var n=function(e,n){return t({left:e.left(),top:e.top()+n,right:e.right(),bottom:e.bottom()+n})};var r=function(e,n){return t({left:e.left(),top:e.top()-n,right:e.right(),bottom:e.bottom()-n})};var i=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n-r,right:e.right(),bottom:n})};var a=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n,right:e.right(),bottom:n+r})};var o=function(e,n,r){return t({left:e.left()+n,top:e.top()+r,right:e.right()+n,bottom:e.bottom()+r})};var s=function(e){return e.top()};var u=function(e){return e.bottom()};var l=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"};return{nu:t,moveUp:r,moveDown:n,moveBottomTo:i,moveTopTo:a,getTop:s,getBottom:u,translate:o,toString:l}});i("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var i=function(e,n,i){if(i>=0&&i<r.getEnd(n)){return e.getRangedRect(n,i,n,i+1)}else if(i>0){return e.getRangedRect(n,i-1,n,i)}return t.none()};var a=function(t){return e.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})};var o=function(e,n){return t.some(e.getRect(n))};var s=function(e,r,s){if(n.isElement(r)){return o(e,r,s).map(a)}else if(n.isText(r)){return i(e,r,s).map(a)}else{return t.none()}};var u=function(e,i){if(n.isElement(i)){return o(e,i).map(a)}else if(n.isText(i)){return e.getRangedRect(i,0,i,r.getEnd(i)).map(a)}else{return t.none()}};return{getBoxAt:s,getEntireBox:u}});i("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n){var r=n.immutable("item","mode");var i=function(e,t,n,i){var o=i!==undefined?i:a;return e.property().parent(t).map(function(e){return r(e,o)})};var a=function(e,t,n,i){var a=i!==undefined?i:o;return n.sibling(e,t).map(function(e){return r(e,a)})};var o=function(e,t,n,i){var a=i!==undefined?i:o;var s=e.property().children(t);var u=n.first(s);return u.map(function(e){return r(e,a)})};var s=[{current:i,next:a,fallback:t.none()},{current:a,next:o,fallback:t.some(i)},{current:o,next:o,fallback:t.some(a)}];var u=function(t,n,r,i,a){var o=a!==undefined?a:s;var l=e.find(o,function(e){return e.current===r});return l.bind(function(e){return e.current(t,n,i,e.next).orThunk(function(){return e.fallback.bind(function(e){return u(t,n,e,i)})})})};return{backtrack:i,sidestep:a,advance:o,go:u}});i("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(e){var t=function(){var t=function(e,t){return e.query().prevSibling(t)};var n=function(t){return t.length>0?e.some(t[t.length-1]):e.none()};return{sibling:t,first:n}};var n=function(){var t=function(e,t){return e.query().nextSibling(t)};var n=function(t){return t.length>0?e.some(t[0]):e.none()};return{sibling:t,first:n}};return{left:t,right:n}});i("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n){var r=function(n,i,a,o,s,u){var l=t.go(n,i,o,s);return l.bind(function(t){if(u(t.item())){return e.none()}else{return a(t.item())?e.some(t.item()):r(n,t.item(),a,t.mode(),s,u)}})};var i=function(e,i,a,o){return r(e,i,a,t.sidestep,n.left(),o)};var a=function(e,i,a,o){return r(e,i,a,t.sidestep,n.right(),o)};return{left:i,right:a}});i("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n,r){var i=function(e,t){return e.property().children(t).length===0};var a=function(t,n,r){return s(t,n,e.curry(i,t),r)};var o=function(t,n,r){return u(t,n,e.curry(i,t),r)};var s=function(e,n,r,i){return t.left(e,n,r,i)};var u=function(e,n,r,i){return t.right(e,n,r,i)};var l=function(){return{left:r.left,right:r.right}};var c=function(e,t,r,i,a){return n.go(e,t,r,i,a)};return{before:a,after:o,seekLeft:s,seekRight:u,walkers:l,walk:c,backtrack:n.backtrack,sidestep:n.sidestep,advance:n.advance}});i("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(e,t){var n=e();var r=function(e,r,i){return t.gather(n,e,r,i)};var i=function(e,r){return t.before(n,e,r)};var a=function(e,r){return t.after(n,e,r)};var o=function(e,r,i){return t.seekLeft(n,e,r,i)};var s=function(e,r,i){return t.seekRight(n,e,r,i)};var u=function(){return t.walkers()};var l=function(e,r,i,a){return t.walk(n,e,r,i,a)};return{gather:r,before:i,after:a,seekLeft:o,seekRight:s,walkers:u,walk:l}});i("ephox.darwin.keyboard.Retries",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.dom.DomGather","ephox.robin.api.dom.DomStructure","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!Math"],function(e,t,n,r,i,a,o,s,u,l){var c=5;var f=100;var d=n.generate([{none:[]},{retry:["caret"]}]);var h=function(e,t){return e.left()<t.left()||l.abs(t.right()-e.left())<1||e.left()>t.right()};var p=function(e,n,i){return u.closest(n,o.isBlock).fold(r.constant(false),function(n){return t.getEntireBox(e,n).exists(function(e){return h(i,e)})})};var v=function(t,n,r,i,a){var o=e.moveDown(a,c);if(l.abs(r.bottom()-i.bottom())<1){return d.retry(o)}else if(r.top()>a.bottom()){return d.retry(o)}else if(r.top()===a.bottom()){return d.retry(e.moveDown(a,1))}else{return p(t,n,a)?d.retry(e.translate(o,c,0)):d.none()}};var m=function(t,n,r,i,a){var o=e.moveUp(a,c);if(l.abs(r.top()-i.top())<1){return d.retry(o)}else if(r.bottom()<a.top()){return d.retry(o)}else if(r.bottom()===a.top()){return d.retry(e.moveUp(a,1))}else{return p(t,n,a)?d.retry(e.translate(o,c,0)):d.none()}};var g={point:e.getTop,adjuster:m,move:e.moveUp,gather:a.before};var y={point:e.getBottom,adjuster:v,move:e.moveDown,gather:a.after};var b=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return s.name(e)==="table"}).isSome()};var x=function(e,t,n,r,i){return w(e,t,n,t.move(r,c),i)};var w=function(e,n,r,a,o){if(o===0){return i.some(a)}if(b(e,a.left(),n.point(a))){return x(e,n,r,a,o-1)}return e.situsFromPoint(a.left(),n.point(a)).bind(function(s){return s.start().fold(i.none,function(s,u){return t.getEntireBox(e,s,u).bind(function(t){return n.adjuster(e,s,t,r,a).fold(i.none,function(t){return w(e,n,r,t,o-1)})}).orThunk(function(){return i.some(a)})},i.none)})};var _=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+c)};var k=function(e,t){return e.situsFromPoint(t.left(),t.top()-c)};var C=function(e,t,n){if(e.point(t)>n.getInnerHeight()){return i.some(e.point(t)-n.getInnerHeight())}else if(e.point(t)<0){return i.some(-e.point(t))}else{return i.none()}};var T=function(e,t,n){var r=e.move(n,c);var i=w(t,e,n,r,f).getOr(r);return C(e,i,t).fold(function(){return t.situsFromPoint(i.left(),e.point(i))},function(n){t.scrollBy(0,n);return t.situsFromPoint(i.left(),e.point(i)-n)})};return{tryUp:r.curry(T,g),tryDown:r.curry(T,y),ieTryUp:k,ieTryDown:_,getJumpSize:r.constant(c)}});i("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,i){var a=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]);var o=function(e,t,n){var r=e.getRect(t);var i=e.getRect(n);return i.right>r.left&&i.left<r.right};var s=function(e,s,l,c,f,d,h){return r.closest(c,"td,th",h).bind(function(l){return r.closest(s,"td,th",h).map(function(r){if(!n.eq(l,r)){return t.sharedOne(u,[l,r]).fold(function(){return o(e,r,l)?a.success():d(r)},function(e){return d(r)})}else{return n.eq(c,l)&&i.getEnd(l)===f?d(r):a.none("in same cell")}})}).getOr(a.none("default"))};var u=function(e){return r.closest(e,"tr")};var l=function(e,t,n,r,i){return e.fold(t,n,r,i)};return{verify:s,cata:l,adt:a}});i("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("element","offset");var n=e.immutable("element","deltaOffset");var r=e.immutable("element","start","finish");var i=e.immutable("begin","end");var a=e.immutable("element","text");return{point:t,delta:n,range:r,points:i,text:a}});i("ephox.sugar.api.search.ElementAddress",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,i,a,o,s,u){var l=r.immutable("ancestor","descendants","element","index");var c=r.immutable("parent","children","element","index");var f=function(e,t){return a.closest(e,function(e){return u.parent(e).exists(function(e){return i.eq(e,t)})})};var d=function(e){return u.parent(e).bind(function(t){var n=u.children(t);return h(n,e).map(function(r){return c(t,n,e,r)})})};var h=function(n,r){return e.findIndex(n,t.curry(i.eq,r))};var p=function(e,t){return u.parent(e).bind(function(n){var r=o.children(n,t);return h(r,e).map(function(t){return c(n,r,e,t)})})};var v=function(e,t,n){return s.closest(e,t).bind(function(t){var r=o.descendants(t,n);return h(r,e).map(function(n){return l(t,r,e,n)})})};return{childOf:f,indexOf:h,indexInParent:d,selectorsInParent:p,descendantsInAncestor:v}});i("ephox.darwin.navigation.BrTags",["ephox.darwin.navigation.BeforeAfter","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.ElementAddress","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i,a,o,s,u,l){var c=function(e){return i.name(e)==="br"};var f=function(e,t,r){return t(e,r).bind(function(e){return i.isText(e)&&a.get(e).trim().length===0?f(e,t,r):n.some(e)})};var d=function(e,t,n){return n.traverse(t).orThunk(function(){return f(t,n.gather,e)}).map(n.relative)};var h=function(e,t){return s.child(e,t).filter(c).orThunk(function(){return s.child(e,t-1).filter(c)})};var p=function(e,t,n,r){return h(t,n).bind(function(t){return r.traverse(t).fold(function(){return f(t,r.gather,e).map(r.relative)},function(e){return o.indexInParent(e).map(function(e){return l.on(e.parent(),e.index())})})})};var v=function(e,n,r,i){var a=c(n)?d(e,n,i):p(e,n,r,i);return a.map(function(e){return{start:t.constant(e),finish:t.constant(e)}})};var m=function(t){return e.cata(t,function(e){return n.none("BR ADT: none")},function(){return n.none()},function(e){return n.some(r.point(e,0))},function(e){return n.some(r.point(e,u.getEnd(e)))})};return{tryBr:v,process:m}});i("ephox.darwin.keyboard.TableKeys",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.darwin.navigation.BrTags","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,i,a,o,s,u,l){var c=20;var f=s.detect();var d=function(e,t,n){return e.getSelection().bind(function(s){return i.tryBr(t,s.finish(),s.foffset(),n).fold(function(){return a.some(o.point(s.finish(),s.foffset()))},function(a){var o=e.fromSitus(a);var u=r.verify(e,s.finish(),s.foffset(),o.finish(),o.foffset(),n.failure,t);return i.process(u)})})};var h=function(t,n,i,o,s,c){if(c===0){return a.none()}return m(t,n,i,o,s).bind(function(f){var d=t.fromSitus(f);var v=r.verify(t,i,o,d.finish(),d.foffset(),s.failure,n);return r.cata(v,function(){return a.none()},function(){return a.some(f)},function(r){if(u.eq(i,r)&&o===0){return p(t,i,o,e.moveUp,s)}else{return h(t,n,r,0,s,c-1)}},function(r){if(u.eq(i,r)&&o===l.getEnd(r)){return p(t,i,o,e.moveDown,s)}else{return h(t,n,r,l.getEnd(r),s,c-1)}})})};var p=function(e,r,i,a,o){return t.getBoxAt(e,r,i).bind(function(t){return v(e,o,a(t,n.getJumpSize()))})};var v=function(e,t,n){if(f.browser.isChrome()||f.browser.isSafari()||f.browser.isFirefox()||f.browser.isEdge()){return t.otherRetry(e,n)}else if(f.browser.isIE()){return t.ieRetry(e,n)}else{return a.none()}};var m=function(e,n,r,i,a){return t.getBoxAt(e,r,i).bind(function(t){return v(e,a,t)})};var g=function(e,t,n){return d(e,t,n).bind(function(r){return h(e,t,r.element(),r.offset(),n,c).map(e.fromSitus)})};return{handle:g}});i("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){var t=function(t){return e.first(t).isSome()};var n=function(t,n,r){return e.ancestor(t,n,r).isSome()};var r=function(t,n,r){return e.closest(t,n,r).isSome()};var i=function(t,n){return e.sibling(t,n).isSome()};var a=function(t,n){return e.child(t,n).isSome()};var o=function(t,n){return e.descendant(t,n).isSome()};return{any:t,ancestor:n,closest:r,sibling:i,child:a,descendant:o}});i("ephox.darwin.keyboard.VerticalMovement",["ephox.darwin.api.Responses","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.TableKeys","ephox.darwin.selection.Util","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p){var v=s.detect();var m=function(e,t){return l.ancestor(e,function(e){return d.parent(e).exists(function(e){return u.eq(e,t)})})};var g=function(e,t,r,i,s){return f.closest(i,"td,th",t).bind(function(i){return f.closest(i,"table",t).bind(function(u){if(!m(s,u)){return o.none()}return n.handle(e,t,r).bind(function(e){return f.closest(e.finish(),"td,th",t).map(function(t){return{start:a.constant(i),finish:a.constant(t),range:a.constant(e)}})})})})};var y=function(t,n,i,a,s,u){if(v.browser.isIE()){return o.none()}else{return u(a,n).orThunk(function(){return g(t,n,i,a,s).map(function(t){var n=t.range();return e.response(o.some(r.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),true)})})}};var b=function(t,n){return f.closest(t,"tr",n).bind(function(t){return f.closest(t,"table",n).bind(function(n){var i=c.descendants(n,"tr");if(u.eq(t,i[0])){return d.prevSibling(n).bind(p.last).map(function(t){var n=h.getEnd(t);return e.response(o.some(r.makeSitus(t,n,t,n)),true)})}else{return o.none()}})})};var x=function(t,n){return f.closest(t,"tr",n).bind(function(t){return f.closest(t,"table",n).bind(function(n){var i=c.descendants(n,"tr");if(u.eq(t,i[i.length-1])){return d.nextSibling(n).bind(p.first).map(function(t){return e.response(o.some(r.makeSitus(t,0,t,0)),true)})}else{return o.none()}})})};var w=function(e,n,r,i,a,o,s){return g(e,r,i,a,o).bind(function(e){return t.detect(n,r,e.start(),e.finish(),s)})};return{navigate:y,select:w,firstUpCheck:b,lastDownCheck:x}});i("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r){var i=function(e,t){return r.closest(e,"td,th",t)};return function(r,a,o,s){var u=t.none();var l=function(){u=t.none()};var c=function(e){s.clear(a);u=i(e.target(),o)};var f=function(t){u.each(function(u){s.clear(a);i(t.target(),o).each(function(t){var i=e.identify(u,t,o).getOr([]);if(i.length>1||i.length===1&&!n.eq(u,t)){s.selectRange(a,i,u,t);r.selectContents(t)}})})};var d=function(){u.each(l)};return{mousedown:c,mouseover:f,mouseup:d}}});i("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i){return{down:{traverse:r.nextSibling,gather:n.after,relative:i.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:t.adt.failedDown},up:{traverse:r.prevSibling,gather:n.before,relative:i.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:t.adt.failedUp}}});i("ephox.darwin.api.InputHandlers",["ephox.darwin.api.Responses","ephox.darwin.api.SelectionKeys","ephox.darwin.api.WindowBridge","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.VerticalMovement","ephox.darwin.mouse.MouseSelection","ephox.darwin.navigation.KeyDirection","ephox.darwin.selection.CellSelection","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.selection.Situ"],function(e,t,n,r,i,a,o,s,u,l,c,f,d){var h=f.immutable("rows","cols");var p=function(e,t,r,i){var o=n(e);var s=a(o,t,r,i);return{mousedown:s.mousedown,mouseover:s.mouseover,mouseup:s.mouseup}};var v=function(a,f,p,v){var m=n(a);var g=function(){v.clear(f);return l.none()};var y=function(n,a,y,b,x,w){var _=n.raw().which;var k=n.raw().shiftKey===true;var C=s.retrieve(f,v.selectedSelector()).fold(function(){if(t.isDown(_)&&k){return u.curry(i.select,m,f,p,o.down,b,a,v.selectRange)}else if(t.isUp(_)&&k){return u.curry(i.select,m,f,p,o.up,b,a,v.selectRange)}else if(t.isDown(_)){return u.curry(i.navigate,m,p,o.down,b,a,i.lastDownCheck)}else if(t.isUp(_)){return u.curry(i.navigate,m,p,o.up,b,a,i.firstUpCheck)}else{return l.none}},function(n){var i=function(i){return function(){var a=c.findMap(i,function(e){return r.update(e.rows(),e.cols(),f,n,v)});return a.fold(function(){return s.getEdges(f,v.firstSelectedSelector(),v.lastSelectedSelector()).map(function(n){var r=t.isDown(_)||w.isForward(_)?d.after:d.before;m.setRelativeSelection(d.on(n.first(),0),r(n.table()));v.clear(f);return e.response(l.none(),true)})},function(t){return l.some(e.response(l.none(),true))})}};if(t.isDown(_)&&k){return i([h(+1,0)])}else if(t.isUp(_)&&k){return i([h(-1,0)])}else if(w.isBackward(_)&&k){return i([h(0,-1),h(-1,0)])}else if(w.isForward(_)&&k){return i([h(0,+1),h(+1,0)])}else if(t.isNavigation(_)&&k===false){return g}else{return l.none}});return C()};var b=function(e,n,i,a,o){return s.retrieve(f,v.selectedSelector()).fold(function(){var s=e.raw().which;var u=e.raw().shiftKey===true;if(u===false){return l.none()}if(t.isNavigation(s)){return r.sync(f,p,n,i,a,o,v.selectRange)}else{return l.none()}},l.none)};return{keydown:y,keyup:b}};return{mouse:p,keyboard:v}});i("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(e,t,n,r){var i=function(n,r){e.each(r,function(e){t.add(n,e)})};var a=function(n,r){e.each(r,function(e){t.remove(n,e)})};var o=function(n,r){e.each(r,function(e){t.toggle(n,e)})};var s=function(n,r){return e.forall(r,function(e){return t.has(n,e)})};var u=function(n,r){return e.exists(r,function(e){return t.has(n,e)})};var l=function(e){var t=e.dom().classList;var n=new r(t.length);for(var i=0;i<t.length;i++){n[i]=t.item(i)}return n};var c=function(e){return n.supports(e)?l(e):n.get(e)};return{add:i,remove:a,toggle:o,hasAll:s,hasAny:u,get:c}});i("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(e,t){var n=function(t){return function(n){e.add(n,t)}};var r=function(t){return function(n){e.remove(n,t)}};var i=function(e){return function(n){t.remove(n,e)}};var a=function(t){return function(n){return e.has(n,t)}};return{addClass:n,removeClass:r,removeClasses:i,hasClass:a}});i("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,i){var a=function(t){var a=r.addClass(t.selected());var o=r.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]);var s=function(n){var r=i.descendants(n,t.selectedSelector());e.each(r,o)};var u=function(r,i,o,u){s(r);e.each(i,a);n.add(o,t.firstSelected());n.add(u,t.lastSelected())};return{clear:s,selectRange:u,selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}};var o=function(n){var r=function(e){t.remove(e,n.selected());t.remove(e,n.firstSelected());t.remove(e,n.lastSelected())};var a=function(e){t.set(e,n.selected(),"1")};var o=function(t){var a=i.descendants(t,n.selectedSelector());e.each(a,r)};var s=function(r,i,s,u){o(r);e.each(i,a);t.set(s,n.firstSelected(),"1");t.set(u,n.lastSelected(),"1")};return{clear:o,selectRange:s,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}};return{byClass:a,byAttr:o}});i("tinymce.plugins.table.selection.CellSelection",["ephox.darwin.api.InputHandlers","ephox.darwin.api.SelectionAnnotation","ephox.darwin.api.SelectionKeys","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.SelectionDirection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.selection.Ephemera"],function(e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,v,m,g){return function(y,b){var x=a.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]);var w=i.none();var _=t.byAttr(g);y.on("init",function(t){var a=y.getWin();var g=v.getBody(y);var k=v.getIsRoot(y);var C=function(){var e=y.selection;var t=u.fromDom(e.getStart());var n=u.fromDom(e.getEnd());var a=o.table(t);var l=o.table(n);var c=a.bind(function(e){return l.bind(function(t){return s.eq(e,t)?i.some(true):i.none()})});c.fold(function(){_.clear(g)},r.noop)};var T=e.mouse(a,g,k,_);var S=e.keyboard(a,g,k,_);var E=function(e,t){if(t.kill()){e.kill()}t.selection().each(function(e){var t=h.relative(e.start(),e.finish());var n=p.asLtrRange(a,t);y.selection.setRng(n)})};var A=function(e){var t=N(e);if(t.raw().shiftKey&&n.isNavigation(t.raw().which)){var r=y.selection.getRng();var i=u.fromDom(r.startContainer);var a=u.fromDom(r.endContainer);S.keyup(t,i,r.startOffset,a,r.endOffset).each(function(e){E(t,e)})}};var P=function(e){return!f.has(e,"data-mce-bogus")&&l.name(e)!=="br"&&!(l.isText(e)&&c.get(e).length===0)};var O=function(){var e=u.fromDom(y.getBody());var t=d.lastChild(e);var n=function(e){return d.prevSibling(e).bind(function(e){return P(e)?i.some(e):n(e)})};return t.bind(function(e){return P(e)?i.some(e):n(e)})};var M=function(e){var t=N(e);b().each(function(e){e.hideBars()});if(e.which===40){O().each(function(e){if(l.name(e)==="table"){if(y.settings.forced_root_block){y.dom.add(y.getBody(),y.settings.forced_root_block,y.settings.forced_root_block_attrs,"<br/>")}else{y.dom.add(y.getBody(),"br")}}})}var r=y.selection.getRng();var i=u.fromDom(y.selection.getStart());var a=u.fromDom(r.startContainer);var o=u.fromDom(r.endContainer);var s=m.directionAt(i).isRtl()?n.rtl:n.ltr;S.keydown(t,a,r.startOffset,o,r.endOffset,s).each(function(e){E(t,e)});b().each(function(e){e.showBars()})};var N=function(e){var t=u.fromDom(e.target);var n=function(){e.stopPropagation()};var i=function(){e.preventDefault()};var a=r.compose(i,n);return{target:r.constant(t),x:r.constant(e.x),y:r.constant(e.y),stop:n,prevent:i,kill:a,raw:r.constant(e)}};var R=function(e){return e.button===0};var D=function(e){if(e.buttons===undefined){return true}return(e.buttons&1)!==0};var B=function(e){if(R(e)){T.mousedown(N(e))}};var L=function(e){if(D(e)){T.mouseover(N(e))}};var I=function(e){if(R){T.mouseup(N(e))}};y.on("mousedown",B);y.on("mouseover",L);y.on("mouseup",I);y.on("keyup",A);y.on("keydown",M);y.on("nodechange",C);w=i.some(x({mousedown:B,mouseover:L,mouseup:I,keyup:A,keydown:M}))});var k=function(){w.each(function(e){})};return{clear:_.clear,destroy:k}}});i("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r){return function(i){var a=function(){var a=t.getBody(i);return e.retrieve(a,n.selectedSelector()).fold(function(){if(i.selection.getStart()===undefined){return r.none()}else{return r.single(i.selection)}},function(e){return r.multiple(e)})};return{get:a}}});i("tinymce.plugins.table.ui.Buttons",["ephox.katamari.api.Fun","tinymce.core.util.Tools","tinymce.plugins.table.ui.TableDialog"],function(e,t,n){var r=t.each;var i=function(t){var i=[];r("inserttable tableprops deletetable | cell row column".split(" "),function(e){if(e=="|"){i.push({text:"-"})}else{i.push(t.menuItems[e])}});t.addButton("table",{type:"menubutton",title:"Table",menu:i});function a(e){return function(){t.execCommand(e)}}t.addButton("tableprops",{title:"Table properties",onclick:e.curry(n.open,t,true),icon:"table"});t.addButton("tabledelete",{title:"Delete table",onclick:a("mceTableDelete")});t.addButton("tablecellprops",{title:"Cell properties",onclick:a("mceTableCellProps")});t.addButton("tablemergecells",{title:"Merge cells",onclick:a("mceTableMergeCells")});t.addButton("tablesplitcells",{title:"Split cell",onclick:a("mceTableSplitCells")});t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:a("mceTableInsertRowBefore")});t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:a("mceTableInsertRowAfter")});t.addButton("tabledeleterow",{title:"Delete row",onclick:a("mceTableDeleteRow")});t.addButton("tablerowprops",{title:"Row properties",onclick:a("mceTableRowProps")});t.addButton("tablecutrow",{title:"Cut row",onclick:a("mceTableCutRow")});t.addButton("tablecopyrow",{title:"Copy row",onclick:a("mceTableCopyRow")});t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:a("mceTablePasteRowBefore")});t.addButton("tablepasterowafter",{title:"Paste row after",onclick:a("mceTablePasteRowAfter")});t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:a("mceTableInsertColBefore")});t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:a("mceTableInsertColAfter")});t.addButton("tabledeletecol",{title:"Delete column",onclick:a("mceTableDeleteCol")})};var a=function(e){var t=function(t){var n=e.dom.is(t,"table")&&e.getBody().contains(t);return n};var n=e.settings.table_toolbar;if(n===""||n===false){return}if(!n){n="tableprops tabledelete | "+"tableinsertrowbefore tableinsertrowafter tabledeleterow | "+"tableinsertcolbefore tableinsertcolafter tabledeletecol"}e.addContextToolbar(t,n)};return{addButtons:i,addToolbars:a}});i("tinymce.plugins.table.ui.MenuItems",["ephox.katamari.api.Fun","ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Element","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.ui.TableDialog"],function(e,t,n,r,i,a,o,s){var u=function(u,l){var c=n.none();var f=[];var d=[];var h=[];var p=[];var v=function(e){e.disabled(true)};var m=function(e){e.disabled(false)};var g=function(){var e=this;f.push(e);c.fold(function(){v(e)},function(t){m(e)})};var y=function(){var e=this;d.push(e);c.fold(function(){v(e)},function(t){m(e)})};var b=function(){var e=this;h.push(e);c.fold(function(){v(e)},function(t){e.disabled(t.mergable().isNone())})};var x=function(){var e=this;p.push(e);c.fold(function(){v(e)},function(t){e.disabled(t.unmergable().isNone())})};var w=function(){c.fold(function(){t.each(f,v);t.each(d,v);t.each(h,v);t.each(p,v)},function(e){t.each(f,m);t.each(d,m);t.each(h,function(t){t.disabled(e.mergable().isNone())});t.each(p,function(t){t.disabled(e.unmergable().isNone())})})};u.on("init",function(){u.on("nodechange",function(e){var t=n.from(u.dom.getParent(u.selection.getStart(),"th,td"));c=t.bind(function(e){var t=i.fromDom(e);var n=r.table(t);return n.map(function(e){return o.forMenu(l,e,t)})});w()})});var _=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++){e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+n)+'" href="#" '+'data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>'}e+="</tr>"}e+="</table>";e+='<div class="mce-text-center" role="presentation">1 x 1</div>';return e};var k=function(e,t,n,r){var i=r.getEl().getElementsByTagName("table")[0];var a,o,s,u,l;var c=r.isRtl()||r.parent().rel=="tl-tr";i.nextSibling.innerHTML=t+1+" x "+(n+1);if(c){t=9-t}for(o=0;o<10;o++){for(a=0;a<10;a++){u=i.rows[o].childNodes[a].firstChild;l=(c?a>=t:a<=t)&&o<=n;e.dom.toggleClass(u,"mce-active",l);if(l){s=u}}}return s.parentNode};var C=u.settings.table_grid===false?{text:"Table",icon:"table",context:"table",onclick:e.curry(s.open,u)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(e){if(e.aria){this.parent().hideAll();e.stopImmediatePropagation();s.open(u)}},onshow:function(){k(u,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(e,"mce-active");u.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:_(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t=e.target,n,r;if(t.tagName.toUpperCase()=="A"){n=parseInt(t.getAttribute("data-mce-x"),10);r=parseInt(t.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel=="tl-tr"){n=9-n}if(n!==this.lastX||r!==this.lastY){k(u,n,r,e.control);this.lastX=n;this.lastY=r}}},onclick:function(e){var t=this;if(e.target.tagName.toUpperCase()=="A"){e.preventDefault();e.stopPropagation();t.parent().cancel();u.undoManager.transact(function(){a.insert(u,t.lastX+1,t.lastY+1)});u.addVisual()}}}]};function T(e){return function(){u.execCommand(e)}}var S={text:"Table properties",context:"table",onPostRender:g,onclick:e.curry(s.open,u,true)};var E={text:"Delete table",context:"table",onPostRender:g,cmd:"mceTableDelete"};var A={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:T("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:T("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:T("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:T("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:T("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:T("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:T("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:T("mceTablePasteRowAfter"),onPostRender:y}]};var P={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:T("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:T("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:T("mceTableDeleteCol"),onPostRender:y}]};var O={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:T("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:T("mceTableMergeCells"),onPostRender:b},{text:"Split cell",onclick:T("mceTableSplitCells"),onPostRender:x}]};u.addMenuItem("inserttable",C);u.addMenuItem("tableprops",S);u.addMenuItem("deletetable",E);u.addMenuItem("row",A);u.addMenuItem("column",P);u.addMenuItem("cell",O)};return{addMenuItems:u}});i("tinymce.plugins.table.Plugin",["tinymce.core.PluginManager","tinymce.plugins.table.actions.Clipboard","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.TableActions","tinymce.plugins.table.actions.TableCommands","tinymce.plugins.table.actions.ResizeHandler","tinymce.plugins.table.queries.TabContext","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.Selections","tinymce.plugins.table.ui.Buttons","tinymce.plugins.table.ui.MenuItems"],function(e,t,n,r,i,a,o,s,u,l,c,f){function d(e){var d=this;var h=a(e);var p=s(e,h.lazyResize);var v=r(e,h.lazyWire);var m=l(e);i.registerCommands(e,v,p,m);t.registerEvents(e,m,v,p);f.addMenuItems(e,m);c.addButtons(e);c.addToolbars(e);e.on("PreInit",function(){e.serializer.addTempAttr(u.firstSelected());e.serializer.addTempAttr(u.lastSelected())});if(e.settings.table_tab_navigation!==false){e.on("keydown",function(t){o.handle(t,e,v,h.lazyWire)})}e.on("remove",function(){h.destroy();p.destroy()});d.insertTable=function(t,r){return n.insert(e,t,r)};d.setClipboardRows=i.setClipboardRows;d.getClipboardRows=i.getClipboardRows}e.add("table",d);return function(){}});r("tinymce.plugins.table.Plugin")()})();(function(){var e={};var t=function(t){var n=e[t];var i=n.deps;var a=n.defn;var o=i.length;var s=new Array(o);for(var u=0;u<o;++u){s[u]=r(i[u])}var l=a.apply(null,s);if(l===undefined){throw"module ["+t+"] returned undefined"}n.instance=l};var n=function(t,n,r){if(typeof t!=="string"){throw"module id must be a string"}else if(n===undefined){throw"no dependencies for "+t}else if(r===undefined){throw"no definition function for "+t}e[t]={deps:n,defn:r,instance:undefined}};var r=function(n){var r=e[n];if(r===undefined){throw"module ["+n+"] was undefined"}else if(r.instance===undefined){t(n)}return r.instance};var i=n;var a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve);i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")});i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")});i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")});i("tinymce.plugins.textcolor.api.Settings",[],function(){var e=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];var t=function(t){return t.getParam("textcolor_map",e)};var n=function(e){return e.getParam("forecolor_map",t(e))};var r=function(e){return e.getParam("backcolor_map",t(e))};var i=function(e){return e.getParam("textcolor_rows",5)};var a=function(e){return e.getParam("textcolor_cols",8)};var o=function(e){return e.getParam("forecolor_rows",i(e))};var s=function(e){return e.getParam("backcolor_rows",i(e))};var u=function(e){return e.getParam("forecolor_cols",a(e))};var l=function(e){return e.getParam("backcolor_cols",a(e))};var c=function(e){return e.getParam("color_picker_callback",null)};var f=function(e){return typeof c(e)==="function"};return{getForeColorMap:n,getBackColorMap:r,getForeColorRows:o,getBackColorRows:s,getForeColorCols:u,getBackColorCols:l,getColorPickerCallback:c,hasColorPicker:f}});i("tinymce.plugins.textcolor.core.TextColor",[],function(){var e=function(e,t){var n;e.dom.getParents(e.selection.getStart(),function(e){var r;if(r=e.style[t==="forecolor"?"color":"background-color"]){n=r}});return n};var t=function(e){var t,n=[];for(t=0;t<e.length;t+=2){n.push({text:e[t+1],color:"#"+e[t]})}return n};var n=function(e,t,n){e.undoManager.transact(function(){e.focus();e.formatter.apply(t,{value:n});e.nodeChanged()})};var r=function(e,t){e.undoManager.transact(function(){e.focus();e.formatter.remove(t,{value:null},null,true);e.nodeChanged()})};return{getCurrentColor:e,mapColors:t,applyFormat:n,removeFormat:r}});i("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")});i("tinymce.plugins.textcolor.ui.ColorPickerHtml",["tinymce.core.dom.DOMUtils","tinymce.core.util.I18n","tinymce.plugins.textcolor.api.Settings","tinymce.plugins.textcolor.core.TextColor"],function(e,t,n,r){var i=function(n,i,a,o){var s,u,l,c,f,d,h,p=0,v=e.DOM.uniqueId("mcearia");var m=function(e,n){var r=e==="transparent";return'<td class="mce-grid-cell'+(r?" mce-colorbtn-trans":"")+'">'+'<div id="'+v+"-"+p+++'"'+' data-mce-color="'+(e?e:"")+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(e?"background-color: "+e:"")+'"'+' title="'+t.translate(n)+'">'+(r?"&#215;":"")+"</div>"+"</td>"};s=r.mapColors(a);s.push({text:t.translate("No color"),color:"transparent"});l='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';c=s.length-1;for(d=0;d<i;d++){l+="<tr>";for(f=0;f<n;f++){h=d*n+f;if(h>c){l+="<td></td>"}else{u=s[h];l+=m(u.color,u.text)}}l+="</tr>"}if(o){l+="<tr>"+'<td colspan="'+n+'" class="mce-custom-color-btn">'+'<div id="'+v+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" '+'role="button" tabindex="-1" aria-labelledby="'+v+'-c" style="width: 100%">'+'<button type="button" role="presentation" tabindex="-1">'+t.translate("Custom...")+"</button>"+"</div>"+"</td>"+"</tr>";l+="<tr>";for(f=0;f<n;f++){l+=m("","Custom color")}l+="</tr>"}l+="</tbody></table>";return l};return{getHtml:i}});i("tinymce.plugins.textcolor.ui.Buttons",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.textcolor.api.Settings","tinymce.plugins.textcolor.core.TextColor","tinymce.plugins.textcolor.ui.ColorPickerHtml"],function(e,t,n,r,i){var a=function e(t,n){t.style.background=n;t.setAttribute("data-mce-color",n)};var o=function(e){return function(t){var n=t.control;if(n._color){r.applyFormat(e,n.settings.format,n._color)}else{r.removeFormat(e,n.settings.format)}}};var s=function(i,o){return function(s){var u=this.parent(),l;var c=r.getCurrentColor(i,u.settings.format);var f=function(e){u.hidePanel();u.color(e);r.applyFormat(i,u.settings.format,e)};var d=function(){u.hidePanel();u.resetColor();r.removeFormat(i,u.settings.format)};if(e.DOM.getParent(s.target,".mce-custom-color-btn")){u.hidePanel();var h=n.getColorPickerCallback(i);h.call(i,function(e){var n=u.panel.getEl().getElementsByTagName("table")[0];var r,i,s;r=t.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild});for(s=0;s<r.length;s++){i=r[s];if(!i.getAttribute("data-mce-color")){break}}if(s===o){for(s=0;s<o-1;s++){a(r[s],r[s+1].getAttribute("data-mce-color"))}}a(i,e);f(e)},c)}l=s.target.getAttribute("data-mce-color");if(l){if(this.lastId){e.DOM.get(this.lastId).setAttribute("aria-selected",false)}s.target.setAttribute("aria-selected",true);this.lastId=s.target.id;if(l==="transparent"){d()}else{f(l)}}else if(l!==null){u.hidePanel()}}};var u=function(e,t){return function(){var r=t?n.getForeColorCols(e):n.getBackColorCols(e);var a=t?n.getForeColorRows(e):n.getBackColorRows(e);var o=t?n.getForeColorMap(e):n.getBackColorMap(e);var s=n.hasColorPicker(e);return i.getHtml(r,a,o,s)}};var l=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:u(e,true),onclick:s(e,n.getForeColorCols(e))},onclick:o(e)});e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:u(e,false),onclick:s(e,n.getBackColorCols(e))},onclick:o(e)})};return{register:l}});i("tinymce.plugins.textcolor.Plugin",["tinymce.core.PluginManager","tinymce.plugins.textcolor.ui.Buttons"],function(e,t){e.add("textcolor",function(e){t.register(e)});return function(){}});r("tinymce.plugins.textcolor.Plugin")()})();const hd=new URL(window.location.href);const pd={menu:{edit:{title:"Edit",items:"undo redo | cut copy paste | selectall | searchreplace"},insert:{title:"Insert",items:"image link | inserttable hr"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | removeformat"},tools:{title:"Tools",items:"code fullscreen"}},toolbar:["bold italic underline | forecolor backcolor styleselect formatselect fontselect fontsizeselect | image link unlink","alignleft aligncenter alignright alignjustify alignnone | bullist numlist | outdent indent blockquote"],plugins:["code","hr","lists","link","image","paste","searchreplace","fullscreen","table","textcolor"],min_height:300,branding:false,relative_urls:false,remove_script_host:true,document_base_url:`${hd.origin}${hd.pathname}tinymce`,skin:"lightgray",skin_url:"skins/lightgray",theme:"modern",theme_url:"themes/modern/theme.js",body_class:"Wyswyg__body",mobile:{theme:"mobile",theme_url:"themes/mobile/theme.js"}};var vd=function(){this.editor=null;this.on("mount",()=>{dd.init(to({},pd,{selector:`.Wyswyg__editor${this._riot_id}`,init_instance_callback:e=>{this.editor=e;!!this.opts.val&&this.editor.setContent(this.opts.val);this.editor.on("Change",this.handleEditorChange);this.editor.on("focus",this.handleEditorFocus);this.editor.on("blur",this.handleEditorBlur)}}))}).on("before-unmount",()=>{dd.remove(`.Wyswyg__editor${this._riot_id}`);this.editor.off("Change",this.handleEditorChange);this.editor.off("focus",this.handleEditorFocus);this.editor.off("blur",this.handleEditorBlur);this.editor.destroy();this.editor=null});this.handleEditorChange=fd(()=>{if(!this.opts.onchange){return}const e=this.editor.getContent();this.opts.onchange(e)},1e3);this.handleEditorFocus=(()=>{if(!this.opts.onfocus){return}this.opts.onfocus()});this.handleEditorBlur=(()=>{if(!this.opts.onblur){return}this.opts.onblur()});this.handleBlockerTap=(e=>{e.stopPropagation()})};i.tag2("viron-wyswyg",'<form class="Wyswyg__form"> <textarea class="Wyswyg__editor{_riot_id}"></textarea> </form> <div class="Wyswyg__blocker" if="{opts.ispreview}" onclick="{getClickHandler(\'handleBlockerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBlockerTap\')}"></div>',"","class=\"Wyswyg {'Wyswyg--disabled': opts.isdisabled, 'Wyswyg--preview': opts.ispreview, 'Wyswyg--error': opts.haserror}\"",function(e){this.external(vd)});var md=function(){};i.tag2("viron-parameters-error",'<div class="Parameters_Error__message">{opts.message} </div>',"",'class="Parameters_Error"',function(e){this.external(md)});function gd(e){return ul(e)&&e%1===0}var yd=gd;const bd="textinput";const xd="textarea";const wd="html";const _d="numberinput";const kd="checkbox";const Cd="select";const Td="uploader";const Sd="wyswyg";const Ed="pug";const Ad="null";const Pd="autocomplete";const Od="base64";const Md=e=>{const t=Al(e);const n=e=>{let t;if(xo(e)){t=fo}else if(lu(e)){t=fu}else{return}t(e,(t,r)=>{if(vf(t)){e[r]=undefined}if(xo(t)||lu(t)){n(t)}})};n(t);return t};const Nd=(e,t)=>{const n=e.name;const r=e.default;const i=e.required;const a=e.in;if(!xf(t[n])){return}if(!xf(r)){t[n]=Al(r);return}if(!i){return}if(ql(["formData","header","path","query"],a)){return}const o=e.schema;if(ql(["boolean","integer","number","null","string"],o.type)){return}if(o.type==="object"){t[n]={};Rd(o,t[n])}if(o.type==="array"){t=[];const e=o.minItems;if(yd(e)&&e>0){cf(e,()=>{t.push(Dd(o.items))})}}};const Rd=(e,t)=>{if(t===void 0)t={};const n=e.properties;const r=e.required||[];fo(n,(e,n)=>{if(ql(["boolean","integer","number","null","string"],e.type)){if(!xf(t[n])){return}if(xf(e.default)){return}t[n]=e.default}if(e.type==="object"){if(!ql(r,n)){return}t[n]={};Rd(e,t[n])}if(e.type==="array"){if(!ql(r,n)){return}t[n]=[];const i=e.minItems;if(yd(i)&&i>0){cf(i,()=>{t[n].push(Dd(e.items))})}}});return t};const Dd=e=>{if(lu(e)){e=e[0]}if(ql(["boolean","integer","number","null","string"],e.type)){return e.default}if(e.type==="object"&&e){return Rd(e)}if(e.type==="array"){if(!e.required){return undefined}const t=[];const n=e.minItems;if(yd(n)&&n>0){cf(n,()=>{t.push(Dd(e.items))})}return t}return undefined};var Bd={getUIType:e=>{if(!!e.enum){return Cd}if(!!e["x-autocomplete"]){return Pd}const t=e.type;const n=e.format;switch(t){case"string":switch(n){case"date-time":return bd;case"multiline":return xd;case"wyswyg":return Sd;case"pug":return Ed;case"html":return wd;case"base64":return Od;default:return bd}case"number":case"integer":return _d;case"boolean":return kd;case"file":return Td;case"null":return Ad;default:break}},getSpreadStyle:e=>{if(!!e.enum){return"spreadMedium"}switch(e.type){case"string":switch(e.format){case"base64":return"spreadSmall";case"multiline":case"wyswyg":case"pug":case"html":return"spreadFull";case"date-time":return"spreadMedium";default:return"spreadLarge"}case"number":case"integer":return"spreadMedium";case"boolean":case"file":case"null":default:return"spreadSmall"}},generateInitialVal:(e,t)=>{if(e===void 0)e=[];if(t===void 0)t={};const n=Md(t);fu(e,e=>{Nd(e,n)});return n},generateDefaultProperties:Rd,generateDefaultItem:Dd,trimNull:Md};var Ld;function Id(){return Ld.apply(null,arguments)}function Fd(e){Ld=e}function jd(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function zd(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Hd(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(e.hasOwnProperty(t)){return false}}return true}}function Ud(e){return e===void 0}function Wd(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function Vd(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function qd(e,t){var n=[],r;for(r=0;r<e.length;++r){n.push(t(e[r],r))}return n}function Kd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yd(e,t){for(var n in t){if(Kd(t,n)){e[n]=t[n]}}if(Kd(t,"toString")){e.toString=t.toString}if(Kd(t,"valueOf")){e.valueOf=t.valueOf}return e}function $d(e,t,n,r){return Sm(e,t,n,r,true).utc()}function Gd(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function Xd(e){if(e._pf==null){e._pf=Gd()}return e._pf}var Zd;if(Array.prototype.some){Zd=Array.prototype.some}else{Zd=function(e){var t=Object(this);var n=t.length>>>0;for(var r=0;r<n;r++){if(r in t&&e.call(this,t[r],r,t)){return true}}return false}}function Jd(e){if(e._isValid==null){var t=Xd(e);var n=Zd.call(t.parsedDateParts,function(e){return e!=null});var r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=r}else{return r}}return e._isValid}function Qd(e){var t=$d(NaN);if(e!=null){Yd(Xd(t),e)}else{Xd(t).userInvalidated=true}return t}var eh=Id.momentProperties=[];function th(e,t){var n,r,i;if(!Ud(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!Ud(t._i)){e._i=t._i}if(!Ud(t._f)){e._f=t._f}if(!Ud(t._l)){e._l=t._l}if(!Ud(t._strict)){e._strict=t._strict}if(!Ud(t._tzm)){e._tzm=t._tzm}if(!Ud(t._isUTC)){e._isUTC=t._isUTC}if(!Ud(t._offset)){e._offset=t._offset}if(!Ud(t._pf)){e._pf=Xd(t)}if(!Ud(t._locale)){e._locale=t._locale}if(eh.length>0){for(n=0;n<eh.length;n++){r=eh[n];i=t[r];if(!Ud(i)){e[r]=i}}}return e}var nh=false;function rh(e){th(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(nh===false){nh=true;Id.updateOffset(this);nh=false}}function ih(e){return e instanceof rh||e!=null&&e._isAMomentObject!=null}function ah(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function oh(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=ah(t)}return n}function sh(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0,o;for(o=0;o<r;o++){if(n&&e[o]!==t[o]||!n&&oh(e[o])!==oh(t[o])){a++}}return a+i}function uh(e){if(Id.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function lh(e,t){var n=true;return Yd(function(){if(Id.deprecationHandler!=null){Id.deprecationHandler(null,e)}if(n){var r=[];var i;for(var a=0;a<arguments.length;a++){i="";if(typeof arguments[a]==="object"){i+="\n["+a+"] ";for(var o in arguments[0]){i+=o+": "+arguments[0][o]+", "}i=i.slice(0,-2)}else{i=arguments[a]}r.push(i)}uh(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var ch={};function fh(e,t){if(Id.deprecationHandler!=null){Id.deprecationHandler(e,t)}if(!ch[e]){uh(t);ch[e]=true}}Id.suppressDeprecationWarnings=false;Id.deprecationHandler=null;function dh(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function hh(e){var t,n;for(n in e){t=e[n];if(dh(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ph(e,t){var n=Yd({},e),r;for(r in t){if(Kd(t,r)){if(zd(e[r])&&zd(t[r])){n[r]={};Yd(n[r],e[r]);Yd(n[r],t[r])}else if(t[r]!=null){n[r]=t[r]}else{delete n[r]}}}for(r in e){if(Kd(e,r)&&!Kd(t,r)&&zd(e[r])){n[r]=Yd({},n[r])}}return n}function vh(e){if(e!=null){this.set(e)}}var mh;if(Object.keys){mh=Object.keys}else{mh=function(e){var t,n=[];for(t in e){if(Kd(e,t)){n.push(t)}}return n}}var gh={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function yh(e,t,n){var r=this._calendar[e]||this._calendar["sameElse"];return dh(r)?r.call(t,n):r}var bh={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function xh(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var wh="Invalid date";function _h(){return this._invalidDate}var kh="%d";var Ch=/\d{1,2}/;function Th(e){return this._ordinal.replace("%d",e)}var Sh={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Eh(e,t,n,r){var i=this._relativeTime[n];return dh(i)?i(e,t,n,r):i.replace(/%d/i,e)}function Ah(e,t){var n=this._relativeTime[e>0?"future":"past"];return dh(n)?n(t):n.replace(/%s/i,t)}var Ph={};function Oh(e,t){var n=e.toLowerCase();Ph[n]=Ph[n+"s"]=Ph[t]=e}function Mh(e){return typeof e==="string"?Ph[e]||Ph[e.toLowerCase()]:undefined}function Nh(e){var t={},n,r;for(r in e){if(Kd(e,r)){n=Mh(r);if(n){t[n]=e[r]}}}return t}var Rh={};function Dh(e,t){Rh[e]=t}function Bh(e){var t=[];for(var n in e){t.push({unit:n,priority:Rh[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function Lh(e,t,n){var r=""+Math.abs(e),i=t-r.length,a=e>=0;return(a?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Ih=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var Fh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var jh={};var zh={};function Hh(e,t,n,r){var i=r;if(typeof r==="string"){i=function(){return this[r]()}}if(e){zh[e]=i}if(t){zh[t[0]]=function(){return Lh(i.apply(this,arguments),t[1],t[2])}}if(n){zh[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function Uh(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function Wh(e){var t=e.match(Ih),n,r;for(n=0,r=t.length;n<r;n++){if(zh[t[n]]){t[n]=zh[t[n]]}else{t[n]=Uh(t[n])}}return function(n){var i="",a;for(a=0;a<r;a++){i+=dh(t[a])?t[a].call(n,e):t[a]}return i}}function Vh(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=qh(t,e.localeData());jh[t]=jh[t]||Wh(t);return jh[t](e)}function qh(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}Fh.lastIndex=0;while(n>=0&&Fh.test(e)){e=e.replace(Fh,r);Fh.lastIndex=0;n-=1}return e}var Kh=/\d/;var Yh=/\d\d/;var $h=/\d{3}/;var Gh=/\d{4}/;var Xh=/[+-]?\d{6}/;var Zh=/\d\d?/;var Jh=/\d\d\d\d?/;var Qh=/\d\d\d\d\d\d?/;var ep=/\d{1,3}/;var tp=/\d{1,4}/;var np=/[+-]?\d{1,6}/;var rp=/\d+/;var ip=/[+-]?\d+/;var ap=/Z|[+-]\d\d:?\d\d/gi;var op=/Z|[+-]\d\d(?::?\d\d)?/gi;var sp=/[+-]?\d+(\.\d{1,3})?/;var up=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var lp={};function cp(e,t,n){lp[e]=dh(t)?t:function(e,r){return e&&n?n:t}}function fp(e,t){if(!Kd(lp,e)){return new RegExp(dp(e))}return lp[e](t._strict,t._locale)}function dp(e){return hp(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function hp(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pp={};function vp(e,t){var n,r=t;if(typeof e==="string"){e=[e]}if(Wd(t)){r=function(e,n){n[t]=oh(e)}}for(n=0;n<e.length;n++){pp[e[n]]=r}}function mp(e,t){vp(e,function(e,n,r,i){r._w=r._w||{};t(e,r._w,r,i)})}function gp(e,t,n){if(t!=null&&Kd(pp,e)){pp[e](t,n._a,n,e)}}var yp=0;var bp=1;var xp=2;var wp=3;var _p=4;var kp=5;var Cp=6;var Tp=7;var Sp=8;Hh("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});Hh(0,["YY",2],0,function(){return this.year()%100});Hh(0,["YYYY",4],0,"year");Hh(0,["YYYYY",5],0,"year");Hh(0,["YYYYYY",6,true],0,"year");Oh("year","y");Dh("year",1);cp("Y",ip);cp("YY",Zh,Yh);cp("YYYY",tp,Gh);cp("YYYYY",np,Xh);cp("YYYYYY",np,Xh);vp(["YYYYY","YYYYYY"],yp);vp("YYYY",function(e,t){t[yp]=e.length===2?Id.parseTwoDigitYear(e):oh(e)});vp("YY",function(e,t){t[yp]=Id.parseTwoDigitYear(e)});vp("Y",function(e,t){t[yp]=parseInt(e,10)});function Ep(e){return Ap(e)?366:365}function Ap(e){return e%4===0&&e%100!==0||e%400===0}Id.parseTwoDigitYear=function(e){return oh(e)+(oh(e)>68?1900:2e3)};var Pp=Mp("FullYear",true);function Op(){return Ap(this.year())}function Mp(e,t){return function(n){if(n!=null){Rp(this,e,n);Id.updateOffset(this,t);return this}else{return Np(this,e)}}}function Np(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Rp(e,t,n){if(e.isValid()&&!isNaN(n)){if(t==="FullYear"&&Ap(e.year())&&e.month()===1&&e.date()===29){e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Fp(n,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](n)}}}function Dp(e){e=Mh(e);if(dh(this[e])){return this[e]()}return this}function Bp(e,t){if(typeof e==="object"){e=Nh(e);var n=Bh(e);for(var r=0;r<n.length;r++){this[n[r].unit](e[n[r].unit])}}else{e=Mh(e);if(dh(this[e])){return this[e](t)}}return this}function Lp(e,t){return(e%t+t)%t}var Ip;if(Array.prototype.indexOf){Ip=Array.prototype.indexOf}else{Ip=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function Fp(e,t){if(isNaN(e)||isNaN(t)){return NaN}var n=Lp(t,12);e+=(t-n)/12;return n===1?Ap(e)?29:28:31-n%7%2}Hh("M",["MM",2],"Mo",function(){return this.month()+1});Hh("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Hh("MMMM",0,0,function(e){return this.localeData().months(this,e)});Oh("month","M");Dh("month",8);cp("M",Zh);cp("MM",Zh,Yh);cp("MMM",function(e,t){return t.monthsShortRegex(e)});cp("MMMM",function(e,t){return t.monthsRegex(e)});vp(["M","MM"],function(e,t){t[bp]=oh(e)-1});vp(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);if(i!=null){t[bp]=i}else{Xd(n).invalidMonth=e}});var jp=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var zp="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function Hp(e,t){if(!e){return jd(this._months)?this._months:this._months["standalone"]}return jd(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||jp).test(t)?"format":"standalone"][e.month()]}var Up="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Wp(e,t){if(!e){return jd(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return jd(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[jp.test(t)?"format":"standalone"][e.month()]}function Vp(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(r=0;r<12;++r){a=$d([2e3,r]);this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){i=Ip.call(this._shortMonthsParse,o);return i!==-1?i:null}else{i=Ip.call(this._longMonthsParse,o);return i!==-1?i:null}}else{if(t==="MMM"){i=Ip.call(this._shortMonthsParse,o);if(i!==-1){return i}i=Ip.call(this._longMonthsParse,o);return i!==-1?i:null}else{i=Ip.call(this._longMonthsParse,o);if(i!==-1){return i}i=Ip.call(this._shortMonthsParse,o);return i!==-1?i:null}}}function qp(e,t,n){var r,i,a;if(this._monthsParseExact){return Vp.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(r=0;r<12;r++){i=$d([2e3,r]);if(n&&!this._longMonthsParse[r]){this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[r]){a="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e)){return r}else if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e)){return r}else if(!n&&this._monthsParse[r].test(e)){return r}}}function Kp(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=oh(t)}else{t=e.localeData().monthsParse(t);if(!Wd(t)){return e}}}n=Math.min(e.date(),Fp(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function Yp(e){if(e!=null){Kp(this,e);Id.updateOffset(this,true);return this}else{return Np(this,"Month")}}function $p(){return Fp(this.year(),this.month())}var Gp=up;function Xp(e){if(this._monthsParseExact){if(!Kd(this,"_monthsRegex")){Qp.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!Kd(this,"_monthsShortRegex")){this._monthsShortRegex=Gp}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var Zp=up;function Jp(e){if(this._monthsParseExact){if(!Kd(this,"_monthsRegex")){Qp.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!Kd(this,"_monthsRegex")){this._monthsRegex=Zp}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function Qp(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,a;for(i=0;i<12;i++){a=$d([2e3,i]);t.push(this.monthsShort(a,""));n.push(this.months(a,""));r.push(this.months(a,""));r.push(this.monthsShort(a,""))}t.sort(e);n.sort(e);r.sort(e);for(i=0;i<12;i++){t[i]=hp(t[i]);n[i]=hp(n[i])}for(i=0;i<24;i++){r[i]=hp(r[i])}this._monthsRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function ev(e,t,n,r,i,a,o){var s=new Date(e,t,n,r,i,a,o);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function tv(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function nv(e,t,n){var r=7+t-n,i=(7+tv(e,0,r).getUTCDay()-t)%7;return-i+r-1}function rv(e,t,n,r,i){var a=(7+n-r)%7,o=nv(e,r,i),s=1+7*(t-1)+a+o,u,l;if(s<=0){u=e-1;l=Ep(u)+s}else if(s>Ep(e)){u=e+1;l=s-Ep(e)}else{u=e;l=s}return{year:u,dayOfYear:l}}function iv(e,t,n){var r=nv(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,a,o;if(i<1){o=e.year()-1;a=i+av(o,t,n)}else if(i>av(e.year(),t,n)){a=i-av(e.year(),t,n);o=e.year()+1}else{o=e.year();a=i}return{week:a,year:o}}function av(e,t,n){var r=nv(e,t,n),i=nv(e+1,t,n);return(Ep(e)-r+i)/7}Hh("w",["ww",2],"wo","week");Hh("W",["WW",2],"Wo","isoWeek");Oh("week","w");Oh("isoWeek","W");Dh("week",5);Dh("isoWeek",5);cp("w",Zh);cp("ww",Zh,Yh);cp("W",Zh);cp("WW",Zh,Yh);mp(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=oh(e)});function ov(e){return iv(e,this._week.dow,this._week.doy).week}var sv={dow:0,doy:6};function uv(){return this._week.dow}function lv(){return this._week.doy}function cv(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function fv(e){var t=iv(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Hh("d",0,"do","day");Hh("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Hh("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Hh("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Hh("e",0,0,"weekday");Hh("E",0,0,"isoWeekday");Oh("day","d");Oh("weekday","e");Oh("isoWeekday","E");Dh("day",11);Dh("weekday",11);Dh("isoWeekday",11);cp("d",Zh);cp("e",Zh);cp("E",Zh);cp("dd",function(e,t){return t.weekdaysMinRegex(e)});cp("ddd",function(e,t){return t.weekdaysShortRegex(e)});cp("dddd",function(e,t){return t.weekdaysRegex(e)});mp(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);if(i!=null){t.d=i}else{Xd(n).invalidWeekday=e}});mp(["d","e","E"],function(e,t,n,r){t[r]=oh(e)});function dv(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function hv(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var pv="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function vv(e,t){if(!e){return jd(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return jd(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var mv="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function gv(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var yv="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function bv(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function xv(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(r=0;r<7;++r){a=$d([2e3,1]).day(r);this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){i=Ip.call(this._weekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=Ip.call(this._shortWeekdaysParse,o);return i!==-1?i:null}else{i=Ip.call(this._minWeekdaysParse,o);return i!==-1?i:null}}else{if(t==="dddd"){i=Ip.call(this._weekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._minWeekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=Ip.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._weekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._minWeekdaysParse,o);return i!==-1?i:null}else{i=Ip.call(this._minWeekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._weekdaysParse,o);if(i!==-1){return i}i=Ip.call(this._shortWeekdaysParse,o);return i!==-1?i:null}}}function wv(e,t,n){var r,i,a;if(this._weekdaysParseExact){return xv.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(r=0;r<7;r++){i=$d([2e3,1]).day(r);if(n&&!this._fullWeekdaysParse[r]){this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i");this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[r]){a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e)){return r}else if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e)){return r}else if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e)){return r}else if(!n&&this._weekdaysParse[r].test(e)){return r}}}function _v(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=dv(e,this.localeData());return this.add(e-t,"d")}else{return t}}function kv(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Cv(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=hv(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Tv=up;function Sv(e){if(this._weekdaysParseExact){if(!Kd(this,"_weekdaysRegex")){Mv.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!Kd(this,"_weekdaysRegex")){this._weekdaysRegex=Tv}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Ev=up;function Av(e){if(this._weekdaysParseExact){if(!Kd(this,"_weekdaysRegex")){Mv.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!Kd(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Ev}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Pv=up;function Ov(e){if(this._weekdaysParseExact){if(!Kd(this,"_weekdaysRegex")){Mv.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!Kd(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Pv}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Mv(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],a,o,s,u,l;for(a=0;a<7;a++){o=$d([2e3,1]).day(a);s=this.weekdaysMin(o,"");u=this.weekdaysShort(o,"");l=this.weekdays(o,"");t.push(s);n.push(u);r.push(l);i.push(s);i.push(u);i.push(l)}t.sort(e);n.sort(e);r.sort(e);i.sort(e);for(a=0;a<7;a++){n[a]=hp(n[a]);r[a]=hp(r[a]);i[a]=hp(i[a])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Nv(){return this.hours()%12||12}function Rv(){return this.hours()||24}Hh("H",["HH",2],0,"hour");Hh("h",["hh",2],0,Nv);Hh("k",["kk",2],0,Rv);Hh("hmm",0,0,function(){return""+Nv.apply(this)+Lh(this.minutes(),2)});Hh("hmmss",0,0,function(){return""+Nv.apply(this)+Lh(this.minutes(),2)+Lh(this.seconds(),2)});Hh("Hmm",0,0,function(){return""+this.hours()+Lh(this.minutes(),2)});Hh("Hmmss",0,0,function(){return""+this.hours()+Lh(this.minutes(),2)+Lh(this.seconds(),2)});function Dv(e,t){Hh(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Dv("a",true);Dv("A",false);Oh("hour","h");Dh("hour",13);function Bv(e,t){return t._meridiemParse}cp("a",Bv);cp("A",Bv);cp("H",Zh);cp("h",Zh);cp("k",Zh);cp("HH",Zh,Yh);cp("hh",Zh,Yh);cp("kk",Zh,Yh);cp("hmm",Jh);cp("hmmss",Qh);cp("Hmm",Jh);cp("Hmmss",Qh);vp(["H","HH"],wp);vp(["k","kk"],function(e,t,n){var r=oh(e);t[wp]=r===24?0:r});vp(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e});vp(["h","hh"],function(e,t,n){t[wp]=oh(e);Xd(n).bigHour=true});vp("hmm",function(e,t,n){var r=e.length-2;t[wp]=oh(e.substr(0,r));t[_p]=oh(e.substr(r));Xd(n).bigHour=true});vp("hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[wp]=oh(e.substr(0,r));t[_p]=oh(e.substr(r,2));t[kp]=oh(e.substr(i));Xd(n).bigHour=true});vp("Hmm",function(e,t,n){var r=e.length-2;t[wp]=oh(e.substr(0,r));t[_p]=oh(e.substr(r))});vp("Hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[wp]=oh(e.substr(0,r));t[_p]=oh(e.substr(r,2));t[kp]=oh(e.substr(i))});function Lv(e){return(e+"").toLowerCase().charAt(0)==="p"}var Iv=/[ap]\.?m?\.?/i;function Fv(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var jv=Mp("Hours",true);var zv={calendar:gh,longDateFormat:bh,invalidDate:wh,ordinal:kh,dayOfMonthOrdinalParse:Ch,relativeTime:Sh,months:zp,monthsShort:Up,week:sv,weekdays:pv,weekdaysMin:yv,weekdaysShort:mv,meridiemParse:Iv};var Hv={};var Uv={};var Wv;function Vv(e){return e?e.toLowerCase().replace("_","-"):e}function qv(e){var t=0,n,r,i,a;while(t<e.length){a=Vv(e[t]).split("-");n=a.length;r=Vv(e[t+1]);r=r?r.split("-"):null;while(n>0){i=Kv(a.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&sh(a,r,true)>=n-1){break}n--}t++}return null}function Kv(e){var t=null;if(!Hv[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=Wv._abbr;var n=require;n("./locale/"+e);Yv(t)}catch(e){}}return Hv[e]}function Yv(e,t){var n;if(e){if(Ud(t)){n=Xv(e)}else{n=$v(e,t)}if(n){Wv=n}}return Wv._abbr}function $v(e,t){if(t!==null){var n=zv;t.abbr=e;if(Hv[e]!=null){fh("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=Hv[e]._config}else if(t.parentLocale!=null){if(Hv[t.parentLocale]!=null){n=Hv[t.parentLocale]._config}else{if(!Uv[t.parentLocale]){Uv[t.parentLocale]=[]}Uv[t.parentLocale].push({name:e,config:t});return null}}Hv[e]=new vh(ph(n,t));if(Uv[e]){Uv[e].forEach(function(e){$v(e.name,e.config)})}Yv(e);return Hv[e]}else{delete Hv[e];return null}}function Gv(e,t){if(t!=null){var n,r,i=zv;r=Kv(e);if(r!=null){i=r._config}t=ph(i,t);n=new vh(t);n.parentLocale=Hv[e];Hv[e]=n;Yv(e)}else{if(Hv[e]!=null){if(Hv[e].parentLocale!=null){Hv[e]=Hv[e].parentLocale}else if(Hv[e]!=null){delete Hv[e]}}}return Hv[e]}function Xv(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return Wv}if(!jd(e)){t=Kv(e);if(t){return t}e=[e]}return qv(e)}function Zv(){return mh(Hv)}function Jv(e){var t;var n=e._a;if(n&&Xd(e).overflow===-2){t=n[bp]<0||n[bp]>11?bp:n[xp]<1||n[xp]>Fp(n[yp],n[bp])?xp:n[wp]<0||n[wp]>24||n[wp]===24&&(n[_p]!==0||n[kp]!==0||n[Cp]!==0)?wp:n[_p]<0||n[_p]>59?_p:n[kp]<0||n[kp]>59?kp:n[Cp]<0||n[Cp]>999?Cp:-1;if(Xd(e)._overflowDayOfYear&&(t<yp||t>xp)){t=xp}if(Xd(e)._overflowWeeks&&t===-1){t=Tp}if(Xd(e)._overflowWeekday&&t===-1){t=Sp}Xd(e).overflow=t}return e}function Qv(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function em(e){var t=new Date(Id.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function tm(e){var t,n,r=[],i,a;if(e._d){return}i=em(e);if(e._w&&e._a[xp]==null&&e._a[bp]==null){nm(e)}if(e._dayOfYear!=null){a=Qv(e._a[yp],i[yp]);if(e._dayOfYear>Ep(a)||e._dayOfYear===0){Xd(e)._overflowDayOfYear=true}n=tv(a,0,e._dayOfYear);e._a[bp]=n.getUTCMonth();e._a[xp]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=r[t]=i[t]}for(;t<7;t++){e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[wp]===24&&e._a[_p]===0&&e._a[kp]===0&&e._a[Cp]===0){e._nextDay=true;e._a[wp]=0}e._d=(e._useUTC?tv:ev).apply(null,r);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[wp]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==e._d.getDay()){Xd(e).weekdayMismatch=true}}function nm(e){var t,n,r,i,a,o,s,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;o=4;n=Qv(t.GG,e._a[yp],iv(Em(),1,4).year);r=Qv(t.W,1);i=Qv(t.E,1);if(i<1||i>7){u=true}}else{a=e._locale._week.dow;o=e._locale._week.doy;var l=iv(Em(),a,o);n=Qv(t.gg,e._a[yp],l.year);r=Qv(t.w,l.week);if(t.d!=null){i=t.d;if(i<0||i>6){u=true}}else if(t.e!=null){i=t.e+a;if(t.e<0||t.e>6){u=true}}else{i=a}}if(r<1||r>av(n,a,o)){Xd(e)._overflowWeeks=true}else if(u!=null){Xd(e)._overflowWeekday=true}else{s=rv(n,r,i,a,o);e._a[yp]=s.year;e._dayOfYear=s.dayOfYear}}var rm=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var im=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var am=/Z|[+-]\d\d(?::?\d\d)?/;var om=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var sm=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var um=/^\/?Date\((\-?\d+)/i;function lm(e){var t,n,r=e._i,i=rm.exec(r)||im.exec(r),a,o,s,u;if(i){Xd(e).iso=true;for(t=0,n=om.length;t<n;t++){if(om[t][1].exec(i[1])){o=om[t][0];a=om[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(i[3]){for(t=0,n=sm.length;t<n;t++){if(sm[t][1].exec(i[3])){s=(i[2]||" ")+sm[t][0];break}}if(s==null){e._isValid=false;return}}if(!a&&s!=null){e._isValid=false;return}if(i[4]){if(am.exec(i[4])){u="Z"}else{e._isValid=false;return}}e._f=o+(s||"")+(u||"");bm(e)}else{e._isValid=false}}var cm=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function fm(e,t,n,r,i,a){var o=[dm(e),Up.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];if(a){o.push(parseInt(a,10))}return o}function dm(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function hm(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function pm(e,t,n){if(e){var r=mv.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i){Xd(n).weekdayMismatch=true;n._isValid=false;return false}}return true}var vm={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function mm(e,t,n){if(e){return vm[e]}else if(t){return 0}else{var r=parseInt(n,10);var i=r%100,a=(r-i)/100;return a*60+i}}function gm(e){var t=cm.exec(hm(e._i));if(t){var n=fm(t[4],t[3],t[2],t[5],t[6],t[7]);if(!pm(t[1],n,e)){return}e._a=n;e._tzm=mm(t[8],t[9],t[10]);e._d=tv.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);Xd(e).rfc2822=true}else{e._isValid=false}}function ym(e){var t=um.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}lm(e);if(e._isValid===false){delete e._isValid}else{return}gm(e);if(e._isValid===false){delete e._isValid}else{return}Id.createFromInputFallback(e)}Id.createFromInputFallback=lh("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});Id.ISO_8601=function(){};Id.RFC_2822=function(){};function bm(e){if(e._f===Id.ISO_8601){lm(e);return}if(e._f===Id.RFC_2822){gm(e);return}e._a=[];Xd(e).empty=true;var t=""+e._i,n,r,i,a,o,s=t.length,u=0;i=qh(e._f,e._locale).match(Ih)||[];for(n=0;n<i.length;n++){a=i[n];r=(t.match(fp(a,e))||[])[0];if(r){o=t.substr(0,t.indexOf(r));if(o.length>0){Xd(e).unusedInput.push(o)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(zh[a]){if(r){Xd(e).empty=false}else{Xd(e).unusedTokens.push(a)}gp(a,r,e)}else if(e._strict&&!r){Xd(e).unusedTokens.push(a)}}Xd(e).charsLeftOver=s-u;if(t.length>0){Xd(e).unusedInput.push(t)}if(e._a[wp]<=12&&Xd(e).bigHour===true&&e._a[wp]>0){Xd(e).bigHour=undefined}Xd(e).parsedDateParts=e._a.slice(0);Xd(e).meridiem=e._meridiem;e._a[wp]=xm(e._locale,e._a[wp],e._meridiem);tm(e);Jv(e)}function xm(e,t,n){var r;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){r=e.isPM(n);if(r&&t<12){t+=12}if(!r&&t===12){t=0}return t}else{return t}}function wm(e){var t,n,r,i,a;if(e._f.length===0){Xd(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){a=0;t=th({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];bm(t);if(!Jd(t)){continue}a+=Xd(t).charsLeftOver;a+=Xd(t).unusedTokens.length*10;Xd(t).score=a;if(r==null||a<r){r=a;n=t}}Yd(e,n||t)}function _m(e){if(e._d){return}var t=Nh(e._i);e._a=qd([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});tm(e)}function km(e){var t=new rh(Jv(Cm(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Cm(e){var t=e._i,n=e._f;e._locale=e._locale||Xv(e._l);if(t===null||n===undefined&&t===""){return Qd({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(ih(t)){return new rh(Jv(t))}else if(Vd(t)){e._d=t}else if(jd(n)){wm(e)}else if(n){bm(e)}else{Tm(e)}if(!Jd(e)){e._d=null}return e}function Tm(e){var t=e._i;if(Ud(t)){e._d=new Date(Id.now())}else if(Vd(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){ym(e)}else if(jd(t)){e._a=qd(t.slice(0),function(e){return parseInt(e,10)});tm(e)}else if(zd(t)){_m(e)}else if(Wd(t)){e._d=new Date(t)}else{Id.createFromInputFallback(e)}}function Sm(e,t,n,r,i){var a={};if(n===true||n===false){r=n;n=undefined}if(zd(e)&&Hd(e)||jd(e)&&e.length===0){e=undefined}a._isAMomentObject=true;a._useUTC=a._isUTC=i;a._l=n;a._i=e;a._f=t;a._strict=r;return km(a)}function Em(e,t,n,r){return Sm(e,t,n,r,false)}var Am=lh("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Em.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return Qd()}});var Pm=lh("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Em.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return Qd()}});function Om(e,t){var n,r;if(t.length===1&&jd(t[0])){t=t[0]}if(!t.length){return Em()}n=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](n)){n=t[r]}}return n}function Mm(){var e=[].slice.call(arguments,0);return Om("isBefore",e)}function Nm(){var e=[].slice.call(arguments,0);return Om("isAfter",e)}var Rm=function(){return Date.now?Date.now():+new Date};var Dm=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Bm(e){for(var t in e){if(!(Ip.call(Dm,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var n=false;for(var r=0;r<Dm.length;++r){if(e[Dm[r]]){if(n){return false}if(parseFloat(e[Dm[r]])!==oh(e[Dm[r]])){n=true}}}return true}function Lm(){return this._isValid}function Im(){return ag(NaN)}function Fm(e){var t=Nh(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Bm(t);this._milliseconds=+c+l*1e3+u*6e4+s*1e3*60*60;this._days=+o+a*7;this._months=+i+r*3+n*12;this._data={};this._locale=Xv();this._bubble()}function jm(e){return e instanceof Fm}function zm(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function Hm(e,t){Hh(e,0,0,function(){var e=this.utcOffset();var n="+";if(e<0){e=-e;n="-"}return n+Lh(~~(e/60),2)+t+Lh(~~e%60,2)})}Hm("Z",":");Hm("ZZ","");cp("Z",op);cp("ZZ",op);vp(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=Wm(op,e)});var Um=/([\+\-]|\d\d)/gi;function Wm(e,t){var n=(t||"").match(e);if(n===null){return null}var r=n[n.length-1]||[];var i=(r+"").match(Um)||["-",0,0];var a=+(i[1]*60)+oh(i[2]);return a===0?0:i[0]==="+"?a:-a}function Vm(e,t){var n,r;if(t._isUTC){n=t.clone();r=(ih(e)||Vd(e)?e.valueOf():Em(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);Id.updateOffset(n,false);return n}else{return Em(e).local()}}function qm(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}Id.updateOffset=function(){};function Km(e,t,n){var r=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=Wm(op,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&t){i=qm(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(r!==e){if(!t||this._changeInProgress){cg(this,ag(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;Id.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:qm(this)}}function Ym(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function $m(e){return this.utcOffset(0,e)}function Gm(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(qm(this),"m")}}return this}function Xm(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=Wm(ap,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function Zm(e){if(!this.isValid()){return false}e=e?Em(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function Jm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Qm(){if(!Ud(this._isDSTShifted)){return this._isDSTShifted}var e={};th(e,this);e=Cm(e);if(e._a){var t=e._isUTC?$d(e._a):Em(e._a);this._isDSTShifted=this.isValid()&&sh(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function eg(){return this.isValid()?!this._isUTC:false}function tg(){return this.isValid()?this._isUTC:false}function ng(){return this.isValid()?this._isUTC&&this._offset===0:false}var rg=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var ig=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ag(e,t){var n=e,r=null,i,a,o;if(jm(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(Wd(e)){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(r=rg.exec(e))){i=r[1]==="-"?-1:1;n={y:0,d:oh(r[xp])*i,h:oh(r[wp])*i,m:oh(r[_p])*i,s:oh(r[kp])*i,ms:oh(zm(r[Cp]*1e3))*i}}else if(!!(r=ig.exec(e))){i=r[1]==="-"?-1:r[1]==="+"?1:1;n={y:og(r[2],i),M:og(r[3],i),w:og(r[4],i),d:og(r[5],i),h:og(r[6],i),m:og(r[7],i),s:og(r[8],i)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){o=ug(Em(n.from),Em(n.to));n={};n.ms=o.milliseconds;n.M=o.months}a=new Fm(n);if(jm(e)&&Kd(e,"_locale")){a._locale=e._locale}return a}ag.fn=Fm.prototype;ag.invalid=Im;function og(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function sg(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function ug(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=Vm(t,e);if(e.isBefore(t)){n=sg(e,t)}else{n=sg(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function lg(e,t){return function(n,r){var i,a;if(r!==null&&!isNaN(+r)){fh(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=n;n=r;r=a}n=typeof n==="string"?+n:n;i=ag(n,r);cg(this,i,e);return this}}function cg(e,t,n,r){var i=t._milliseconds,a=zm(t._days),o=zm(t._months);if(!e.isValid()){return}r=r==null?true:r;if(o){Kp(e,Np(e,"Month")+o*n)}if(a){Rp(e,"Date",Np(e,"Date")+a*n)}if(i){e._d.setTime(e._d.valueOf()+i*n)}if(r){Id.updateOffset(e,a||o)}}var fg=lg(1,"add");var dg=lg(-1,"subtract");function hg(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function pg(e,t){var n=e||Em(),r=Vm(n,this).startOf("day"),i=Id.calendarFormat(this,r)||"sameElse";var a=t&&(dh(t[i])?t[i].call(this,n):t[i]);return this.format(a||this.localeData().calendar(i,this,Em(n)))}function vg(){return new rh(this)}function mg(e,t){var n=ih(e)?e:Em(e);if(!(this.isValid()&&n.isValid())){return false}t=Mh(!Ud(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function gg(e,t){var n=ih(e)?e:Em(e);if(!(this.isValid()&&n.isValid())){return false}t=Mh(!Ud(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function yg(e,t,n,r){r=r||"()";return(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function bg(e,t){var n=ih(e)?e:Em(e),r;if(!(this.isValid()&&n.isValid())){return false}t=Mh(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{r=n.valueOf();return this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()}}function xg(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function wg(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function _g(e,t,n){var r,i,a,o;if(!this.isValid()){return NaN}r=Vm(e,this);if(!r.isValid()){return NaN}i=(r.utcOffset()-this.utcOffset())*6e4;t=Mh(t);switch(t){case"year":o=kg(this,r)/12;break;case"month":o=kg(this,r);break;case"quarter":o=kg(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ah(o)}function kg(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,a;if(t-r<0){i=e.clone().add(n-1,"months");a=(t-r)/(r-i)}else{i=e.clone().add(n+1,"months");a=(t-r)/(i-r)}return-(n+a)||0}Id.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Id.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Cg(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Tg(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return Vh(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(dh(Date.prototype.toISOString)){return this.toDate().toISOString()}return Vh(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Sg(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var n="["+e+'("]';var r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var i="-MM-DD[T]HH:mm:ss.SSS";var a=t+'[")]';return this.format(n+r+i+a)}function Eg(e){if(!e){e=this.isUtc()?Id.defaultFormatUtc:Id.defaultFormat}var t=Vh(this,e);return this.localeData().postformat(t)}function Ag(e,t){if(this.isValid()&&(ih(e)&&e.isValid()||Em(e).isValid())){return ag({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Pg(e){return this.from(Em(),e)}function Og(e,t){if(this.isValid()&&(ih(e)&&e.isValid()||Em(e).isValid())){return ag({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Mg(e){return this.to(Em(),e)}function Ng(e){var t;if(e===undefined){return this._locale._abbr}else{t=Xv(e);if(t!=null){this._locale=t}return this}}var Rg=lh("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Dg(){return this._locale}function Bg(e){e=Mh(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Lg(e){e=Mh(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Ig(){return this._d.valueOf()-(this._offset||0)*6e4}function Fg(){return Math.floor(this.valueOf()/1e3)}function jg(){return new Date(this.valueOf())}function zg(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Hg(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ug(){return this.isValid()?this.toISOString():null}function Wg(){return Jd(this)}function Vg(){return Yd({},Xd(this))}function qg(){return Xd(this).overflow}function Kg(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Hh(0,["gg",2],0,function(){return this.weekYear()%100});Hh(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Yg(e,t){Hh(0,[e,e.length],0,t)}Yg("gggg","weekYear");Yg("ggggg","weekYear");Yg("GGGG","isoWeekYear");Yg("GGGGG","isoWeekYear");Oh("weekYear","gg");Oh("isoWeekYear","GG");Dh("weekYear",1);Dh("isoWeekYear",1);cp("G",ip);cp("g",ip);cp("GG",Zh,Yh);cp("gg",Zh,Yh);cp("GGGG",tp,Gh);cp("gggg",tp,Gh);cp("GGGGG",np,Xh);cp("ggggg",np,Xh);mp(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=oh(e)});mp(["gg","GG"],function(e,t,n,r){t[r]=Id.parseTwoDigitYear(e)});function $g(e){return Jg.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Gg(e){return Jg.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Xg(){return av(this.year(),1,4)}function Zg(){var e=this.localeData()._week;return av(this.year(),e.dow,e.doy)}function Jg(e,t,n,r,i){var a;if(e==null){return iv(this,r,i).year}else{a=av(e,r,i);if(t>a){t=a}return Qg.call(this,e,t,n,r,i)}}function Qg(e,t,n,r,i){var a=rv(e,t,n,r,i),o=tv(a.year,0,a.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}Hh("Q",0,"Qo","quarter");Oh("quarter","Q");Dh("quarter",7);cp("Q",Kh);vp("Q",function(e,t){t[bp]=(oh(e)-1)*3});function ey(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Hh("D",["DD",2],"Do","date");Oh("date","D");Dh("date",9);cp("D",Zh);cp("DD",Zh,Yh);cp("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});vp(["D","DD"],xp);vp("Do",function(e,t){t[xp]=oh(e.match(Zh)[0],10)});var ty=Mp("Date",true);Hh("DDD",["DDDD",3],"DDDo","dayOfYear");Oh("dayOfYear","DDD");Dh("dayOfYear",4);cp("DDD",ep);cp("DDDD",$h);vp(["DDD","DDDD"],function(e,t,n){n._dayOfYear=oh(e)});function ny(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Hh("m",["mm",2],0,"minute");Oh("minute","m");Dh("minute",14);cp("m",Zh);cp("mm",Zh,Yh);vp(["m","mm"],_p);var ry=Mp("Minutes",false);Hh("s",["ss",2],0,"second");Oh("second","s");Dh("second",15);cp("s",Zh);cp("ss",Zh,Yh);vp(["s","ss"],kp);var iy=Mp("Seconds",false);Hh("S",0,0,function(){return~~(this.millisecond()/100)});Hh(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Hh(0,["SSS",3],0,"millisecond");Hh(0,["SSSS",4],0,function(){return this.millisecond()*10});Hh(0,["SSSSS",5],0,function(){return this.millisecond()*100});Hh(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Hh(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Hh(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Hh(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Oh("millisecond","ms");Dh("millisecond",16);cp("S",ep,Kh);cp("SS",ep,Yh);cp("SSS",ep,$h);var ay;for(ay="SSSS";ay.length<=9;ay+="S"){cp(ay,rp)}function oy(e,t){t[Cp]=oh(("0."+e)*1e3)}for(ay="S";ay.length<=9;ay+="S"){vp(ay,oy)}var sy=Mp("Milliseconds",false);Hh("z",0,0,"zoneAbbr");Hh("zz",0,0,"zoneName");function uy(){return this._isUTC?"UTC":""}function ly(){return this._isUTC?"Coordinated Universal Time":""}var cy=rh.prototype;cy.add=fg;cy.calendar=pg;cy.clone=vg;cy.diff=_g;cy.endOf=Lg;cy.format=Eg;cy.from=Ag;cy.fromNow=Pg;cy.to=Og;cy.toNow=Mg;cy.get=Dp;cy.invalidAt=qg;cy.isAfter=mg;cy.isBefore=gg;cy.isBetween=yg;cy.isSame=bg;cy.isSameOrAfter=xg;cy.isSameOrBefore=wg;cy.isValid=Wg;cy.lang=Rg;cy.locale=Ng;cy.localeData=Dg;cy.max=Pm;cy.min=Am;cy.parsingFlags=Vg;cy.set=Bp;cy.startOf=Bg;cy.subtract=dg;cy.toArray=zg;cy.toObject=Hg;cy.toDate=jg;cy.toISOString=Tg;cy.inspect=Sg;cy.toJSON=Ug;cy.toString=Cg;cy.unix=Fg;cy.valueOf=Ig;cy.creationData=Kg;cy.year=Pp;cy.isLeapYear=Op;cy.weekYear=$g;cy.isoWeekYear=Gg;cy.quarter=cy.quarters=ey;cy.month=Yp;cy.daysInMonth=$p;cy.week=cy.weeks=cv;cy.isoWeek=cy.isoWeeks=fv;cy.weeksInYear=Zg;cy.isoWeeksInYear=Xg;cy.date=ty;cy.day=cy.days=_v;cy.weekday=kv;cy.isoWeekday=Cv;cy.dayOfYear=ny;cy.hour=cy.hours=jv;cy.minute=cy.minutes=ry;cy.second=cy.seconds=iy;cy.millisecond=cy.milliseconds=sy;cy.utcOffset=Km;cy.utc=$m;cy.local=Gm;cy.parseZone=Xm;cy.hasAlignedHourOffset=Zm;cy.isDST=Jm;cy.isLocal=eg;cy.isUtcOffset=tg;cy.isUtc=ng;cy.isUTC=ng;cy.zoneAbbr=uy;cy.zoneName=ly;cy.dates=lh("dates accessor is deprecated. Use date instead.",ty);cy.months=lh("months accessor is deprecated. Use month instead",Yp);cy.years=lh("years accessor is deprecated. Use year instead",Pp);cy.zone=lh("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ym);cy.isDSTShifted=lh("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Qm);function fy(e){return Em(e*1e3)}function dy(){return Em.apply(null,arguments).parseZone()}function hy(e){return e}var py=vh.prototype;py.calendar=yh;py.longDateFormat=xh;py.invalidDate=_h;py.ordinal=Th;py.preparse=hy;py.postformat=hy;py.relativeTime=Eh;py.pastFuture=Ah;py.set=hh;py.months=Hp;py.monthsShort=Wp;py.monthsParse=qp;py.monthsRegex=Jp;py.monthsShortRegex=Xp;py.week=ov;py.firstDayOfYear=lv;py.firstDayOfWeek=uv;py.weekdays=vv;py.weekdaysMin=bv;py.weekdaysShort=gv;py.weekdaysParse=wv;py.weekdaysRegex=Sv;py.weekdaysShortRegex=Av;py.weekdaysMinRegex=Ov;py.isPM=Lv;py.meridiem=Fv;function vy(e,t,n,r){var i=Xv();var a=$d().set(r,t);return i[n](a,e)}function my(e,t,n){if(Wd(e)){t=e;e=undefined}e=e||"";if(t!=null){return vy(e,t,n,"month")}var r;var i=[];for(r=0;r<12;r++){i[r]=vy(e,r,n,"month")}return i}function gy(e,t,n,r){if(typeof e==="boolean"){if(Wd(t)){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(Wd(t)){n=t;t=undefined}t=t||""}var i=Xv(),a=e?i._week.dow:0;if(n!=null){return vy(t,(n+a)%7,r,"day")}var o;var s=[];for(o=0;o<7;o++){s[o]=vy(t,(o+a)%7,r,"day")}return s}function yy(e,t){return my(e,t,"months")}function by(e,t){return my(e,t,"monthsShort")}function xy(e,t,n){return gy(e,t,n,"weekdays")}function wy(e,t,n){return gy(e,t,n,"weekdaysShort")}function _y(e,t,n){return gy(e,t,n,"weekdaysMin")}Yv("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=oh(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Id.lang=lh("moment.lang is deprecated. Use moment.locale instead.",Yv);Id.langData=lh("moment.langData is deprecated. Use moment.localeData instead.",Xv);var ky=Math.abs;function Cy(){var e=this._data;this._milliseconds=ky(this._milliseconds);this._days=ky(this._days);this._months=ky(this._months);e.milliseconds=ky(e.milliseconds);e.seconds=ky(e.seconds);e.minutes=ky(e.minutes);e.hours=ky(e.hours);e.months=ky(e.months);e.years=ky(e.years);return this}function Ty(e,t,n,r){var i=ag(t,n);e._milliseconds+=r*i._milliseconds;e._days+=r*i._days;e._months+=r*i._months;return e._bubble()}function Sy(e,t){return Ty(this,e,t,1)}function Ey(e,t){return Ty(this,e,t,-1)}function Ay(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Py(){var e=this._milliseconds;var t=this._days;var n=this._months;var r=this._data;var i,a,o,s,u;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=Ay(My(n)+t)*864e5;t=0;n=0}r.milliseconds=e%1e3;i=ah(e/1e3);r.seconds=i%60;a=ah(i/60);r.minutes=a%60;o=ah(a/60);r.hours=o%24;t+=ah(o/24);u=ah(Oy(t));n+=u;t-=Ay(My(u));s=ah(n/12);n%=12;r.days=t;r.months=n;r.years=s;return this}function Oy(e){return e*4800/146097}function My(e){return e*146097/4800}function Ny(e){if(!this.isValid()){return NaN}var t;var n;var r=this._milliseconds;e=Mh(e);if(e==="month"||e==="year"){t=this._days+r/864e5;n=this._months+Oy(t);return e==="month"?n:n/12}else{t=this._days+Math.round(My(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}}function Ry(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+oh(this._months/12)*31536e6}function Dy(e){return function(){return this.as(e)}}var By=Dy("ms");var Ly=Dy("s");var Iy=Dy("m");var Fy=Dy("h");var jy=Dy("d");var zy=Dy("w");var Hy=Dy("M");var Uy=Dy("y");function Wy(){return ag(this)}function Vy(e){e=Mh(e);return this.isValid()?this[e+"s"]():NaN}function qy(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ky=qy("milliseconds");var Yy=qy("seconds");var $y=qy("minutes");var Gy=qy("hours");var Xy=qy("days");var Zy=qy("months");var Jy=qy("years");function Qy(){return ah(this.days()/7)}var eb=Math.round;var tb={ss:44,s:45,m:45,h:22,d:26,M:11};function nb(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function rb(e,t,n){var r=ag(e).abs();var i=eb(r.as("s"));var a=eb(r.as("m"));var o=eb(r.as("h"));var s=eb(r.as("d"));var u=eb(r.as("M"));var l=eb(r.as("y"));var c=i<=tb.ss&&["s",i]||i<tb.s&&["ss",i]||a<=1&&["m"]||a<tb.m&&["mm",a]||o<=1&&["h"]||o<tb.h&&["hh",o]||s<=1&&["d"]||s<tb.d&&["dd",s]||u<=1&&["M"]||u<tb.M&&["MM",u]||l<=1&&["y"]||["yy",l];c[2]=t;c[3]=+e>0;c[4]=n;return nb.apply(null,c)}function ib(e){if(e===undefined){return eb}if(typeof e==="function"){eb=e;return true}return false}function ab(e,t){if(tb[e]===undefined){return false}if(t===undefined){return tb[e]}tb[e]=t;if(e==="s"){tb.ss=t-1}return true}function ob(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var n=rb(this,!e,t);if(e){n=t.pastFuture(+this,n)}return t.postformat(n)}var sb=Math.abs;function ub(e){return(e>0)-(e<0)||+e}function lb(){if(!this.isValid()){return this.localeData().invalidDate()}var e=sb(this._milliseconds)/1e3;var t=sb(this._days);var n=sb(this._months);var r,i,a;r=ah(e/60);i=ah(r/60);e%=60;r%=60;a=ah(n/12);n%=12;var o=a;var s=n;var u=t;var l=i;var c=r;var f=e?e.toFixed(3).replace(/\.?0+$/,""):"";var d=this.asSeconds();if(!d){return"P0D"}var h=d<0?"-":"";var p=ub(this._months)!==ub(d)?"-":"";var v=ub(this._days)!==ub(d)?"-":"";var m=ub(this._milliseconds)!==ub(d)?"-":"";return h+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(u?v+u+"D":"")+(l||c||f?"T":"")+(l?m+l+"H":"")+(c?m+c+"M":"")+(f?m+f+"S":"")}var cb=Fm.prototype;cb.isValid=Lm;cb.abs=Cy;cb.add=Sy;cb.subtract=Ey;cb.as=Ny;cb.asMilliseconds=By;cb.asSeconds=Ly;cb.asMinutes=Iy;cb.asHours=Fy;cb.asDays=jy;cb.asWeeks=zy;cb.asMonths=Hy;cb.asYears=Uy;cb.valueOf=Ry;cb._bubble=Py;cb.clone=Wy;cb.get=Vy;cb.milliseconds=Ky;cb.seconds=Yy;cb.minutes=$y;cb.hours=Gy;cb.days=Xy;cb.weeks=Qy;cb.months=Zy;cb.years=Jy;cb.humanize=ob;cb.toISOString=lb;cb.toString=lb;cb.toJSON=lb;cb.locale=Ng;cb.localeData=Dg;cb.toIsoString=lh("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lb);cb.lang=Rg;Hh("X",0,0,"unix");Hh("x",0,0,"valueOf");cp("x",ip);cp("X",sp);vp("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)});vp("x",function(e,t,n){n._d=new Date(oh(e))});Id.version="2.19.2";Fd(Em);Id.fn=cy;Id.min=Mm;Id.max=Nm;Id.now=Rm;Id.utc=$d;Id.unix=fy;Id.months=yy;Id.isDate=Vd;Id.locale=Yv;Id.invalid=Qd;Id.duration=ag;Id.isMoment=ih;Id.weekdays=xy;Id.parseZone=dy;Id.localeData=Xv;Id.isDuration=jm;Id.monthsShort=by;Id.weekdaysMin=_y;Id.defineLocale=$v;Id.updateLocale=Gv;Id.locales=Zv;Id.weekdaysShort=wy;Id.normalizeUnits=Mh;Id.relativeTimeRounding=ib;Id.relativeTimeThreshold=ab;Id.calendarFormat=hg;Id.prototype=cy;"use strict";var fb={rfc3986:{}};fb.generate=function(){var e="|";var t="0-9";var n="["+t+"]";var r="a-zA-Z";var i="["+r+"]";fb.rfc3986.cidr=n+e+"[1-2]"+n+e+"3"+"[0-2]";var a=t+"A-Fa-f";var o="["+a+"]";var s=r+t+"-\\._~";var u="!\\$&'\\(\\)\\*\\+,;=";var l="%"+a;var c=s+l+u+":@";var f="["+c+"]";var d="0?";var h="(?:"+d+d+n+e+d+"[1-9]"+n+e+"1"+n+n+e+"2"+"[0-4]"+n+e+"25"+"[0-5])";fb.rfc3986.IPv4address="(?:"+h+"\\.){3}"+h;var p=o+"{1,4}";var v="(?:"+p+":"+p+"|"+fb.rfc3986.IPv4address+")";var m="(?:"+p+":){6}"+v;var g="::(?:"+p+":){5}"+v;var y="(?:"+p+")?::(?:"+p+":){4}"+v;var b="(?:(?:"+p+":){0,1}"+p+")?::(?:"+p+":){3}"+v;var x="(?:(?:"+p+":){0,2}"+p+")?::(?:"+p+":){2}"+v;var w="(?:(?:"+p+":){0,3}"+p+")?::"+p+":"+v;var _="(?:(?:"+p+":){0,4}"+p+")?::"+v;var k="(?:(?:"+p+":){0,5}"+p+")?::"+p;var C="(?:(?:"+p+":){0,6}"+p+")?::";fb.rfc3986.IPv6address="(?:"+m+e+g+e+y+e+b+e+x+e+w+e+_+e+k+e+C+")";fb.rfc3986.IPvFuture="v"+o+"+\\.["+s+u+":]+";fb.rfc3986.scheme=i+"["+r+t+"+-\\.]*";var T="["+s+l+u+":]*";fb.rfc3986.IPLiteral="\\[(?:"+fb.rfc3986.IPv6address+e+fb.rfc3986.IPvFuture+")\\]";var S="["+s+l+u+"]{0,255}";var E="(?:"+fb.rfc3986.IPLiteral+e+fb.rfc3986.IPv4address+e+S+")";var A=n+"*";var P="(?:"+T+"@)?"+E+"(?::"+A+")?";var O=f+"*";var M=f+"+";var N="(?:\\/"+O+")*";var R="\\/(?:"+M+N+")?";var D=M+N;fb.rfc3986.hierPart="(?:"+"(?:\\/\\/"+P+N+")"+e+R+e+D+")";fb.rfc3986.query="["+c+"\\/\\?]*(?=#|$)";fb.rfc3986.fragment="["+c+"\\/\\?]*";fb.rfc3986.uri="^(?:"+fb.rfc3986.scheme+":"+fb.rfc3986.hierPart+")(?:\\?"+fb.rfc3986.query+")?"+"(?:#"+fb.rfc3986.fragment+")?$"};fb.generate();var db=fb.rfc3986;const hb={isValid:true,message:""};const pb=(e,t)=>{const n=to({},hb);if(!ro(t,"multipleOf")){return n}const r=t.multipleOf;if(!ul(r)||r<0){return n}if(e%r!==0){n.isValid=false;n.message=`${r}„ÅßÂâ≤„ÇäÂàá„Çå„ÇãÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const vb=(e,t)=>{const n=to({},hb);if(!ro(t,"maximum")){return n}const r=t.maximum;if(!ul(r)){return n}const i=!!t.exclusiveMaximum;if(i){if(e>=r){n.isValid=false;n.message=`${r}„Çà„ÇäÂ∞è„Åï„ÅÑÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}else{if(e>r){n.isValid=false;n.message=`${r}‰ª•‰∏ã„ÅÆÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}return n};const mb=(e,t)=>{const n=to({},hb);if(!ro(t,"minimum")){return n}const r=t.minimum;if(!ul(r)){return n}const i=!!t.exclusiveMinimum;if(i){if(e<=r){n.isValid=false;n.message=`${r}„Çà„ÇäÂ§ß„Åç„ÅÑÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}else{if(e<r){n.isValid=false;n.message=`${r}‰ª•‰∏ä„ÅÆÊï∞ÂÄ§„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}}return n};const gb=(e,t)=>{const n=to({},hb);if(!ro(t,"maxLength")){return n}const r=t.maxLength;if(!yd(r)||r<0){return n}if(e.length>r){n.isValid=false;n.message=`ÊñáÂ≠óÊï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const yb=(e,t)=>{const n=to({},hb);const r=t.minLength||0;if(e.length<r){n.isValid=false;n.message=`ÊñáÂ≠óÊï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const bb=(e,t)=>{const n=to({},hb);if(!ro(t,"pattern")){return n}const r=t.pattern;if(!e.match(r)){n.isValid=false;n.message=`${r}„Å´„Éû„ÉÉ„ÉÅ„Åï„Åõ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const xb=(e,t)=>{const n=to({},hb);let r;let i;if(ro(t,"items")){r=t.items}else{r={}}if(ro(t,"additionalItems")){i=t.additionalItems}else{i={}}if(xf(r)||xo(r)){return n}if(hf(i)&&i||xo(i)){return n}if(hf(i)&&!i&&lu(r)){if(e.length<=r.length){return n}}n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r.length}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n};const wb=(e,t)=>{const n=to({},hb);if(!ro(t,"maxItems")){return n}const r=t.maxItems;if(!yd(r)||r<0){return n}if(e.length>r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const _b=(e,t)=>{const n=to({},hb);const r=t.minItems||0;if(e.length<r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const kb=(e,t)=>{const n=to({},hb);const r=t.uniqueItems||false;if(!r){return n}if(e.length!==ol(e,(e,t)=>{e=JSON.stringify(Al(e));t=JSON.stringify(Al(t));return e===t}).length){n.isValid=false;n.message="ÂÜÖÂÆπ„ÅåÈáçË§á„Åó„Å™„ÅÑË¶ÅÁ¥†„ÅßÊßãÊàê„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";return n}return n};const Cb=(e,t)=>{const n=to({},hb);if(!ro(t,"maxProperties")){return n}const r=t.maxProperties;if(!yd(r)||r<0){return n}if(Ol(e)>r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Tb=(e,t)=>{const n=to({},hb);const r=t.minProperties||0;if(Ol(e)<r){n.isValid=false;n.message=`Ë¶ÅÁ¥†Êï∞„Çí${r}‰ª•‰∏ä„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`;return n}return n};const Sb=(e,t)=>{const n=to({},hb);if(!ro(t,"required")){return n}const r=t.required;if(!lu(r)||!r.length){return n}fu(r,r=>{if(!ro(e,r)){n.isValid=false;const e=t.properties[r].description?`(${t.properties[r].description})`:"";n.message=`Ë¶ÅÁ¥†„Å´${r}${e}„ÇíÂê´„ÇÅ„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}});return n};const Eb=(e,t)=>{const n=to({},hb);let r;if(!ro(t,"properties")){}else{}if(!ro(t,"patternProperties")){}else{}if(!ro(t,"additionalProperties")){r={}}else{r=t.additionalProperties}if(hf(r)&&r||xo(r)){return n}if(hf(r)&&!r){}return n};const Ab=(e,t)=>{const n=to({},hb);return n};const Pb=(e,t)=>{const n=to({},hb);if(!ro(t,"enum")){return n}const r=t.enum;if(!lu(r)){return n}let i=false;fu(r,t=>{if(e===t){i=true}});if(!i){n.isValid=false;n.message=`${JSON.stringify(r)}„ÅÆ„ÅÑ„Åö„Çå„Åã„ÅÆÂÄ§„ÇíË®≠ÂÆö„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const Ob=(e,t)=>{const n=to({},hb);if(!ro(t,"type")){return n}let r;if(lu(t.type)){r=t.type}else{r=[t.type]}let i=false;fu(r,t=>{switch(t){case"integer":case"number":if(ul(e)){i=true}break;case"string":if(gf(e)){i=true}break;case"array":if(lu(e)){i=true}break;case"object":if(xo(e)){i=true}break;case"boolean":if(hf(e)){i=true}break;case"null":if(vf(e)){i=true}break;case"file":if(!!e&&gf(e.name)){i=true}break;default:break}});if(!i){n.isValid=false;n.message=`Âûã„Çí${JSON.stringify(r)}„ÅÆ„ÅÑ„Åö„Çå„Åã„Å´„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ`}return n};const Mb=(e,t)=>{const n=to({},hb);if(!ro(t,"allOf")){return n}const r=t.allOf;if(!lu(r)){return n}return n};const Nb=(e,t)=>{const n=to({},hb);if(!ro(t,"anyOf")){return n}const r=t.anyOf;if(!lu(r)){return n}return n};const Rb=(e,t)=>{const n=to({},hb);if(!ro(t,"oneOf")){return n}const r=t.oneOf;if(!lu(r)){return n}return n};const Db=(e,t)=>{const n=to({},hb);if(!ro(t,"not")){return n}const r=t.not;if(!lu(r)){return n}return n};const Bb=(e,t)=>{const n=to({},hb);if(!ro(t,"definitions")){return n}const r=t.definitions;if(!lu(r)){return n}return n};const Lb=(e,t)=>{const n=to({},hb);if(!ro(t,"format")){return n}const r=t.format;if(!gf(r)){return n}switch(r){case"date-time":{if(!gf(e)){return n}const t=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T([01]\d|2[0-3]):([0-5]\d):([0-5]\d|60)(\.\d+)?(([Zz])|([\+\-])([01]\d|2[0-3]):([0-5]\d))$/;const r=e.match(t);if(vf(r)){n.isValid=false;n.message='"date-time"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}const i=Id(e).isValid();if(!i){n.isValid=false;n.message="Â≠òÂú®„Åô„ÇãÊó•‰ªò„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ";return n}break}case"email":{if(!gf(e)){return n}const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;const r=e.match(t);if(vf(r)){n.isValid=false;n.message='"email"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"hostname":{if(!gf(e)){return n}if(e.length>255){n.isValid=false;n.message='"hostname"„ÅØ255ÊñáÂ≠ó‰ª•ÂÜÖ„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}const t=/^[a-z\d]([a-z\d\-]{0,61}[a-z\d])?(\.[a-z\d]([a-z\d\-]{0,61}[‚Äå‚Äãa-z\d])?)*$/i;const r=e.match(t);if(vf(r)){n.isValid=false;n.message='"hostname"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"ipv4":{if(!gf(e)){return n}const t=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;const r=e.match(t);if(vf(r)){n.isValid=false;n.message='"ipv4"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"ipv6":{if(!gf(e)){return n}if(e.match(/::/)){let t=7;if(e.match(/((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)){t=6}if(e.match(/^::/)){e=e.replace("::","0::")}if(e.match(/::$/)){e=e.replace("::","::0")}while(e.match(/:/g).length<t){e=e.replace("::",":0::")}e=e.replace("::",":0:")}let t=[/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/,/^([0-9a-fA-F]{1,4}:){6}((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/];let r=false;fu(t,t=>{const n=e.match(t);if(!vf(n)){r=true}});if(!r){n.isValid=false;n.message='"ipv6"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}case"uri":{if(!gf(e)){return n}const t=db.uri;const r=e.match(t);if(vf(r)){n.isValid=false;n.message='"uri"„Å´Ââá„Å£„Åü„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';return n}break}default:break}return n};var Ib={errors:(e,t)=>{const n=[];if(xf(e)){if(t.required){return["ÂøÖÈ†àÈ†ÖÁõÆ„Åß„Åô„ÄÇ"]}return n}const r=Ob(e,t);if(!r.isValid){return[r.message]}const i=t.type;switch(i){case"number":n.push(pb(e,t));n.push(vb(e,t));n.push(mb(e,t));break;case"string":n.push(gb(e,t));n.push(yb(e,t));n.push(bb(e,t));break;case"array":n.push(xb(e,t));n.push(wb(e,t));n.push(_b(e,t));n.push(kb(e,t));break;case"object":n.push(Cb(e,t));n.push(Tb(e,t));n.push(Sb(e,t));n.push(Eb(e,t));n.push(Ab(e,t));break;default:break}n.push(Pb(e,t));n.push(Mb(e,t));n.push(Nb(e,t));n.push(Rb(e,t));n.push(Db(e,t));n.push(Bb(e,t));n.push(Lb(e,t));return Gu(Yl(n,e=>{return e.isValid}),e=>{return e.message})}};const Fb=e=>{if(nd(e)){return false}return ul(e)};var jb=function(){const e=this.riotx.get();const t=this.opts.formobject;this.title=t.name;if(t.required){this.title=`${this.title} *`}this.description=t.description;this.autocompleteConfig=t["x-autocomplete"];this.accept=t["x-accept"]||"*";this.mimeType=t["x-mime-type"];this.placeholder=t.example;this.isDisabled=this.opts.isdisabled;if(t.readOnly){this.isDisabled=true}this.uiType=(()=>{if(!this.opts.ispreview&&!t.readOnly||t.type!=="string"||!this.opts.val){return Bd.getUIType(t)}const e=this.opts.val.split(".");if(e.length<2){return Bd.getUIType(t)}const n=e[e.length-1];if(ql(["png","jpg","jpeg","gif"],n)){return"image"}return Bd.getUIType(t)})();this.errors=[];this.hasError=false;const n=()=>{this.errors=Ib.errors(this.opts.val,t);this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};this.isFocus=false;this.getSelectOptions=(()=>{const e=[];if(xf(this.opts.val)){e.push({label:"-- select an option --",value:undefined,isSelected:true,isDiabled:true})}fu(t.enum,(t,n)=>{e.push({id:`select_${n}`,label:t,value:t,isSelected:t===this.opts.val})});return e});this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.isMobile=e.getter("layout.isMobile");this.update()});n();this.on("update",()=>{n()});const r=e=>{if(!this.opts.onchange){return}this.opts.onchange(this.opts.identifier,e)};const i=()=>{if(!this.isFocus){return}if(!this.hasError){return}if(this.opts.ispreview){return}if(this.isMobile){return}const t=this.refs.body;const n=t.getBoundingClientRect();e.action("popovers.add","viron-parameters-error",{message:this.errors[0]},{x:n.left+n.width/2,y:n.top,width:n.width,direction:"B",isError:true,watchElm:t})};this.handleBodyTap=(e=>{e.stopPropagation()});this.handleFormFocus=(()=>{this.isFocus=true;this.update();this.closeAllFloats();i()});this.handleFormBlur=(()=>{this.isFocus=false;this.update()});this.handleTextinputChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleTextareaChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleHtmlChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handlePugChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleNumberinputChange=(e=>{let t;if(!Fb(e)){t=undefined}else{t=e}r(t)});this.handleCheckboxChange=(e=>{r(e)});this.handleSelectChange=(e=>{const t=qu(e,e=>{return e.isSelected});const n=t?t.label:undefined;r(n)});this.handleUploaderChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleBase64Change=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)});this.handleAutocompleteChange=(e=>{switch(t.type){case"string":if(!e){e=undefined}break;case"number":case"integer":if(!e){e=undefined}else{e=Number(e);if(!Fb(e)){e=undefined}}break}r(e)});this.handleWyswygChange=(e=>{let t;if(!e){t=undefined}else{t=e}r(t)})};i.tag2("viron-parameters-form",'<div class="Parameters_Form__head" if="{uiType !== \'checkbox\'}"> <div class="Parameters_Form__title">{title}</div> <div class="Parameters_Form__description" if="{!!description}">{description}</div> </div> <div class="Parameters_Form__error" if="{isMobile &amp;&amp; isFocus &amp;&amp; hasError &amp;&amp; !opts.ispreview}">{errors[0]}</div> <div class="Parameters_Form__body" ref="body" onclick="{getClickHandler(\'handleBodyTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBodyTap\')}"> <virtual if="{uiType === \'textinput\'}"> <viron-textinput val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleTextinputChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-textinput> </virtual> <virtual if="{uiType === \'textarea\'}"> <viron-textarea val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleTextareaChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-textarea> </virtual> <virtual if="{uiType === \'numberinput\'}"> <viron-numberinput val="{opts.val}" theme="{opts.theme}" placeholder="{placeholder}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleNumberinputChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-numberinput> </virtual> <virtual if="{uiType === \'checkbox\'}"> <viron-checkbox ischecked="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" label="{title}" onchange="{handleCheckboxChange}"></viron-checkbox> </virtual> <virtual if="{uiType === \'select\'}"> <viron-select options="{getSelectOptions()}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleSelectChange}"></viron-select> </virtual> <virtual if="{uiType === \'uploader\'}"> <viron-uploader accept="{accept}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleUploaderChange}"></viron-uploader> </virtual> <virtual if="{uiType === \'base64\'}"> <viron-base64 val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" mimetype="{mimeType}" onchange="{handleBase64Change}"></viron-base64> </virtual> <virtual if="{uiType === \'html\'}"> <viron-html val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleHtmlChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-html> </virtual> <virtual if="{uiType === \'pug\'}"> <viron-pug val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handlePugChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-pug> </virtual> <virtual if="{uiType === \'autocomplete\'}"> <viron-autocomplete val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" config="{autocompleteConfig}" onchange="{handleAutocompleteChange}" onfocus="{handleFormFocus}" onblur="{handleFormBlur}"></viron-autocomplete> </virtual> <virtual if="{uiType === \'wyswyg\'}"> <viron-wyswyg val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isDisabled}" iserror="{hasError}" onchange="{handleWyswygChange}"></viron-wyswyg> </virtual> <virtual if="{uiType === \'image\'}"> <viron-image val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview || isDisabled}"></viron-image> </virtual> <virtual if="{uiType === \'null\'}"> <div>NULL</div> </virtual> </div>',"","class=\"Parameters_Form {'Parameters_Form--preview': opts.ispreview}\"",function(e){this.external(jb)});i.tag2("viron-icon-arrow-up",'<svg viewbox="-3494.002 14063 16.002 10.037"> <path d="M1706.943-16726.971l-5.963-5.963-1.433-1.434a.122.122,0,0,1-.019-.021l-.384-.385a.2.2,0,0,1,0-.283l7.8-7.8a.2.2,0,0,1,.281,0l1.84,1.842a.2.2,0,0,1,0,.281l-5.82,5.82,5.82,5.818a.2.2,0,0,1,0,.281l-1.84,1.842a.2.2,0,0,1-.141.059A.2.2,0,0,1,1706.943-16726.971Z" transform="translate(-20220.914 12363.916) rotate(90)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconArrowUp {opts.class}"',function(e){});var zb=function(){const e=this.propertiesObject=this.opts.propertiesobject;this.errors=[];this.hasError=false;const t=()=>{this.errors=Ib.errors(this.opts.val,to({required:this.opts.required},e));this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};t();this.on("update",()=>{t()});this.isFormMode=(e=>{return ql(["boolean","integer","number","null","string"],e.type)});this.isPropertiesMode=(e=>{return e.type==="object"});this.isItemsMode=(e=>{return e.type==="array"});this.getVal=(e=>{if(!xo(this.opts.val)){return undefined}return this.opts.val[e]});this.getFormObject=((t,n)=>{const r=Al(n);r.name=t;r.required=ql(e.required,t);return r});this.getPropertiesObject=((e,t)=>{const n=Al(t);return n});this.getSchemaObject=((e,t)=>{const n=Al(t);return n});this.getRequired=(t=>{return ql(e.required,t)});this.getSpreadStyle=((e,t)=>{if(ql(["array","object"],t.type)){return"spreadFull"}const n=this.getFormObject(e,t);return Bd.getSpreadStyle(n)});this.handlePropertyChange=((e,t)=>{if(!this.opts.onchange){return}let n=this.opts.val||{};n[e]=t;fo(n,(e,t)=>{if(xf(e)){delete n[t]}});if(!Ol(n)){n=undefined}this.opts.onchange(this.opts.identifier,n)});this.handlePropertyValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-properties",'<div class="Parameters_Properties__head"> <div class="Parameters_Properties__label">{opts.label}{opts.required ? \' *\' : \'\'}</div> </div> <div class="Parameters_Properties__error" if="{hasError}">{errors[0]}</div> <div class="Parameters_Properties__body"> <div class="Parameters_Properties__item {\'Parameters_Properties__item--\' + parent.getSpreadStyle(key, property)}" each="{property, key in propertiesObject.properties}"> <virtual if="{isFormMode(property)}"> <viron-parameters-form no-reorder identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" formobject="{parent.getFormObject(key, property)}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-form> </virtual> <virtual if="{isPropertiesMode(property)}"> <viron-parameters-properties no-reorder label="{key}" identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" required="{parent.getRequired(key)}" propertiesobject="{parent.getPropertiesObject(key, property)}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-properties> </virtual> <virtual if="{isItemsMode(property)}"> <viron-parameters-items no-reorder label="{key}" identifier="{key}" val="{parent.getVal(key)}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" required="{parent.getRequired(key)}" schemaobject="{parent.getSchemaObject(key, property)}" onchange="{parent.handlePropertyChange}" onvalidate="{parent.handlePropertyValidate}"></viron-parameters-items> </virtual> </div> </div>',"",'class="Parameters_Properties"',function(e){this.external(zb)});function Hb(e,t){if(t==null){return e}var n=e.length,r=-1,i=t.length;while(++r<i){e[n+r]=t[r]}return e}var Ub=Hb;var Wb=Object.keys||function(e){var t=[];fo(e,function(e,n){t.push(n)});return t};var Vb=Wb;var qb=function(){const e=this.schemaObject=this.opts.schemaobject;const t=this.opts.schemaobject.items;this.isFormMode=ql(["boolean","integer","number","null","string"],t.type);this.isPropertiesMode=t.type==="object";this.isItemsMode=t.type==="array";if(this.isFormMode){const e=Al(t);this.formObject=e}if(this.isPropertiesMode){const e=Al(t);this.propertiesObject=e}if(this.isItemsMode){const e=Al(t.items);this.itemsObject=e}this.errors=[];this.hasError=false;const n=()=>{this.errors=Ib.errors(this.opts.val,to({required:this.opts.required},e));this.hasError=!!this.errors.length;if(!this.opts.onvalidate){return}this.opts.onvalidate(this._riot_id,!this.hasError)};this.itemsOpened=[];cf((this.opts.val||[]).length,e=>{this.itemsOpened[e]=false});n();this.on("update",()=>{n()});this.isItemOpened=(e=>{return this.itemsOpened[e]});this.getBriefItemTitle=((e,t)=>{if(this.isFormMode){switch(this.formObject.type){case"string":return e||"-";case"number":case"integer":return xf(e)?"-":String(e);case"boolean":return hf(e)?String(e):"-";case"file":return"file";case"null":return vf(e)?"null":"-";default:return"-"}}if(this.isPropertiesMode){let t;const n=this.propertiesObject.properties;const r=Vb(n);fu(r,n=>{if(!xf(t)){return}if(xf(e[n])){return}if(xo(e[n])){t="{Object}"}else if(lu(e[n])){t="[Array]"}else{t=String(e[n])}});if(!t){t="-"}return t}if(this.isItemsMode){return`[${t}]`}return"-"});this.getBriefItemDescription=(e=>{if(!this.isPropertiesMode){return"-"}let t="";const n=this.propertiesObject.properties;const r=Vb(n);fu(r,r=>{const i=n[r].description||r;let a="-";if(!xf(e[r])){if(xo(e[r])){a="{Object}"}else if(lu(e[r])){a="[Array]"}else{a=String(e[r])}}t=`${t} ${i}:${a}`});return t});this.handleAddButtonTap=(()=>{if(this.opts.ispreview){return}if(!this.opts.onchange){return}let e=this.opts.val||[];let t=null;if(this.isFormMode){t=this.formObject.default}else if(this.isPropertiesMode){t=Bd.generateDefaultProperties(this.propertiesObject)}else if(this.isItemsMode){t=[]}e=Ub([t],e);this.itemsOpened=Ub([false],this.itemsOpened);this.update();this.opts.onchange(this.opts.identifier,e)});this.handleOpenAllButtonTap=(()=>{this.itemsOpened=Gu(this.itemsOpened,()=>{return true});this.update()});this.handleRemoveButtonTap=(e=>{if(this.opts.ispreview){return}if(!this.opts.onchange){return}const t=e.item.idx;let n=this.opts.val;n.splice(t,1);if(!n.length){n=undefined}this.itemsOpened.splice(t,1);this.update();this.opts.onchange(this.opts.identifier,n)});this.handleCloseButtonTap=(e=>{const t=e.item.idx;this.itemsOpened[t]=false;this.update()});this.handleItemBriefTap=(e=>{const t=e.item.idx;this.itemsOpened[t]=true;this.update()});this.handleItemChange=((e,t)=>{if(!this.opts.onchange){return}const n=this.opts.val;n[e]=t;this.opts.onchange(this.opts.identifier,n)});this.handleItemValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-items",'<div class="Parameters_Items__head"> <div class="Parameters_Items__addButton" if="{!opts.ispreview}" onclick="{getClickHandler(\'handleAddButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleAddButtonTap\')}"> <viron-icon-plus></viron-icon-plus> </div> <div class="Parameters_Items__headContent"> <div class="Parameters_Items__label">{opts.label}{opts.required ? \' *\' : \'\'}</div> <div class="Parameters_Items__error" if="{hasError}">{errors[0]}</div> </div> <div class="Parameters_Items__openButton" if="{!!opts.val &amp;&amp; !!opts.val.length}" onclick="{getClickHandler(\'handleOpenAllButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOpenAllButtonTap\')}">È†ÖÁõÆ„Çí„Åô„Åπ„Å¶Èñã„Åè</div> </div> <div class="Parameters_Items__body" if="{!!opts.val &amp;&amp; !!opts.val.length}"> <div class="Parameters_Items__item {\'Parameters_Items__item--opened\': parent.isItemOpened(idx)}" each="{val, idx in opts.val}"> <div class="Parameters_Items__itemDetail"> <div class="Parameters_Items__itemHead"> <div class="Parameters_Items__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-arrow-up></viron-icon-arrow-up> </div> <div class="Parameters_Items__removeButton" if="{!parent.opts.ispreview}" onclick="{getClickHandler(\'handleRemoveButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRemoveButtonTap\')}">„Åì„ÅÆÈ†ÖÁõÆ„ÇíÂâäÈô§</div> </div> <div class="Parameters_Items__itemBody"> <virtual if="{parent.isFormMode}"> <viron-parameters-form no-reorder identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" formobject="{parent.formObject}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-form> </virtual> <virtual if="{parent.isPropertiesMode}"> <viron-parameters-properties no-reorder label="{parent.opts.label}[{idx}]" identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" propertiesobject="{parent.propertiesObject}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-properties> </virtual> <virtual if="{parent.isItemsMode}"> <viron-parameters-items no-reorder label="{parent.opts.label}[{idx}]" identifier="{idx}" val="{val}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" schemaobject="{parent.schemaObject.items}" onchange="{parent.handleItemChange}" onvalidate="{parent.handleItemValidate}"></viron-parameters-items> </virtual> </div> </div> <div class="Parameters_Items__itemBrief" onclick="{getClickHandler(\'handleItemBriefTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemBriefTap\')}"> <div class="Parameters_Items__itemBriefTitle">{parent.getBriefItemTitle(val, idx)}</div> <div class="Parameters_Items__itemBriefDescription" if="{parent.isPropertiesMode}">{parent.getBriefItemDescription(val)}</div> <div class="Parameters_Items__itemBriefOpenButton"> <viron-icon-arrow-down></viron-icon-arrow-down> </div> </div> </div> </div>',"","class=\"Parameters_Items {'Parameters_Items--preview': opts.ispreview}\"",function(e){this.external(qb)});var Kb=function(){const e=this.parameterObject=this.opts.parameterobject;this.isFormMode=false;this.formObject=null;this.isFormDisabled=false;this.isPropertiesMode=false;this.propertiesObject=null;this.propertiesLabel=null;this.isItemsMode=false;this.schemaObject=null;this.itemsLabel=null;this.spreadStyle="spreadSmall";if(ql(["query","header","path","formData"],e.in)){if(ql(["string","number","integer","boolean","file"],e.type)){this.isFormMode=true;const t=Al(e);delete t.in;this.formObject=t;this.spreadStyle=Bd.getSpreadStyle(t);if(e.in==="path"&&e.name===this.opts.primary){this.isFormDisabled=true}}else{this.isItemsMode=true;const t=Al(e);this.schemaObject=t;this.itemsLabel=e.description||e.name;this.spreadStyle="spreadFull"}}else{const t=e.schema;if(ql(["boolean","integer","number","null","string"],t.type)){this.isFormMode=true;const t=Al(e.schema);this.formObject=t;this.spreadStyle=Bd.getSpreadStyle(t)}else if(t.type==="object"){this.isPropertiesMode=true;const n=Al(t);this.propertiesObject=n;this.propertiesLabel=e.description||e.name;this.spreadStyle="spreadFull"}else{this.isItemsMode=true;const n=Al(t);this.schemaObject=n;this.itemsLabel=e.description||e.name;this.spreadStyle="spreadFull"}}this.handleValChange=((e,t)=>{if(!this.opts.onchange){return}this.opts.onchange(e,t)});this.handleValValidate=((e,t)=>{if(!this.opts.onvalidate){return}this.opts.onvalidate(e,t)})};i.tag2("viron-parameters-parameter",'<virtual if="{isFormMode}"> <viron-parameters-form formobject="{formObject}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" isdisabled="{isFormDisabled}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-form> </virtual> <virtual if="{isPropertiesMode}"> <viron-parameters-properties label="{propertiesLabel}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" required="{parameterObject.required}" propertiesobject="{propertiesObject}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-properties> </virtual> <virtual if="{isItemsMode}"> <viron-parameters-items label="{itemsLabel}" identifier="{parameterObject.name}" val="{opts.val}" theme="{opts.theme}" ispreview="{opts.ispreview}" required="{parameterObject.required}" schemaobject="{schemaObject}" onchange="{handleValChange}" onvalidate="{handleValValidate}"></viron-parameters-items> </virtual>',"","class=\"Parameters_Parameter {'Parameters_Parameter--' + spreadStyle}\"",function(e){this.external(Kb)});function Yb(e,t){return Au(e,function(e){return e===t})}var $b=Yb;var Gb=function(){this.isNarrow=false;const e=()=>{const e=this.root;const t=e.getBoundingClientRect();const n=t.width;if(n>450){this.isNarrow=false}else{this.isNarrow=true}this.update()};const t=fd(()=>{e()},1e3);this.on("mount",()=>{window.addEventListener("resize",t);e()}).on("unmount",()=>{window.removeEventListener("resize",t)});this.handleValChange=((e,t)=>{if(!this.opts.onchange){return}const n=this.opts.val;n[e]=t;fo(n,(e,t)=>{if(xf(e)){delete n[t]}});this.opts.onchange(n)});const n={};this.handleValValidate=((e,t)=>{n[e]=t;if(!this.opts.onvalidate){return}if($b(n,false)){this.opts.onvalidate(false)}else{this.opts.onvalidate(true)}})};i.tag2("viron-parameters",'<viron-parameters-parameter each="{parameterObject in opts.parameterobjects}" val="{parent.opts.val[parameterObject.name]}" theme="{parent.opts.theme}" ispreview="{parent.opts.ispreview}" parameterobject="{parameterObject}" primary="{parent.opts.primary}" onchange="{parent.handleValChange}" onvalidate="{parent.handleValValidate}"></viron-parameters-parameter>',"","class=\"Parameters {'Parameters--narrow': isNarrow}\"",function(e){this.external(Gb)});i.tag2("viron-icon-down",'<svg viewbox="-9481.5 13487.999 7.4 4.2"> <path d="M.8,5.6a.553.553,0,0,0-.4.9L3.6,9.7a.6.6,0,0,0,.4.1.6.6,0,0,0,.4-.1L7.6,6.5c.2-.3,0-.9-.4-.9Z" transform="translate(-9481.778 13482.399)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconDown {opts.class}"',function(e){});i.tag2("viron-icon-exclamation-circle",'<svg viewbox="-2882 10816 16 16"> <g transform="translate(-3247 10632.5)"> <g transform="translate(365 183.5)"> <circle cx="8" cy="8" r="8"></circle> <circle cx="8" cy="8" r="7.25"></circle> </g> <g transform="translate(9.621 -0.445)"> <rect width="5" height="2" rx="0.4" transform="translate(362.379 192.945) rotate(-90)"></rect> <rect width="2" height="2" rx="0.4" transform="translate(362.379 195.945) rotate(-90)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconExclamationCircle {opts.class}"',function(e){});i.tag2("viron-icon-logo",'<svg viewbox="0 0 200 184.62"> <path class="IconLogo__right" d="M200,43a43,43,0,0,0-80.28-21.5L63.87,118.26a43,43,0,1,0,73.38,44.85l.06,0,56.93-98.61h0A42.77,42.77,0,0,0,200,43Z"></path> <path class="IconLogo__left" d="M100,55.63l0,.06L80.28,21.53a43,43,0,1,0-74.5,43h0L62.7,163.16l.06,0a43,43,0,0,0,74.49,0l.06,0,12.4-21.48Z"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconLogo {opts.class}"',function(e){});i.tag2("viron-icon-menu",'<svg viewbox="-3635 13999.001 24 9.4"> <g transform="translate(-3357.6 14031.401) rotate(180)"> <rect width="16" height="3" rx="0.4" transform="translate(261.4 29.4)"></rect> <rect width="16" height="3" rx="0.4" transform="translate(253.4 23)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMenu {opts.class}"',function(e){});i.tag2("viron-icon-menu-invert",'<svg viewbox="-3595 13999.001 24 9.4"> <g transform="translate(-3317.6 14031.401) rotate(180)"> <rect width="16" height="3" rx="0.4" transform="translate(253.4 29.4)"></rect> <rect class="cls-1" width="16" height="3" rx="0.4" transform="translate(261.4 23)"></rect> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMenuInvert {opts.class}"',function(e){});i.tag2("viron-icon-move",'<svg viewbox="-1076 13435 16 16"> <path d="M15.83,7.6,13.545,5.317a.571.571,0,0,0-.973.4V6.862H9.143V3.434h1.143a.568.568,0,0,0,.4-.973L8.4.175a.561.561,0,0,0-.8,0L5.312,2.46a.571.571,0,0,0,.4.973H6.857V6.862H3.429V5.719a.568.568,0,0,0-.973-.4L.17,7.6a.561.561,0,0,0,0,.8l2.286,2.286a.572.572,0,0,0,.973-.4V9.148H6.857v3.429H5.714a.568.568,0,0,0-.4.973L7.6,15.835a.561.561,0,0,0,.8,0l2.286-2.286a.572.572,0,0,0-.4-.973H9.143V9.148h3.429v1.143a.568.568,0,0,0,.973.4L15.83,8.407a.561.561,0,0,0,0-.8Z" transform="translate(-1076 13434.995)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconMove {opts.class}"',function(e){});i.tag2("viron-icon-plus-circle",'<svg viewbox="-2912 10816 16 16"> <g transform="translate(-3277 10632.5)"> <g transform="translate(365 183.5)"> <circle cx="8" cy="8" r="8"></circle> <circle cx="8" cy="8" r="7.25"></circle> </g> <g transform="translate(9.621 -0.445)"> <rect width="8" height="2" rx="0.4" transform="translate(367.379 192.945) rotate(180)"></rect> <rect width="8" height="2" rx="0.4" transform="translate(362.379 195.945) rotate(-90)"></rect> </g> </g> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconPlusCircle {opts.class}"',function(e){});i.tag2("viron-icon-square",'<svg viewbox="-3674 14061 15.998 13.998"> <path d="M1869-16726h-14a1,1,0,0,1-1-1v-12a1,1,0,0,1,1-1h14a1,1,0,0,1,1,1v12A1,1,0,0,1,1869-16726Zm-12-11v8h10v-8Z" transform="translate(-5528 30801)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconSquare {opts.class}"',function(e){});i.tag2("viron-icon-star",'<svg viewbox="-1994 12644 16 15.329"> <path d="M15.652,7.994a1.148,1.148,0,0,0-.636-1.957l-3.874-.563A.506.506,0,0,1,10.76,5.2L9.028,1.686a1.147,1.147,0,0,0-2.058,0L5.238,5.2a.507.507,0,0,1-.382.277L.983,6.037A1.148,1.148,0,0,0,.346,7.994l2.8,2.732a.507.507,0,0,1,.146.449l-.661,3.858a1.123,1.123,0,0,0,.25.93,1.159,1.159,0,0,0,1.414.279l3.465-1.822a.519.519,0,0,1,.472,0L11.7,16.242a1.136,1.136,0,0,0,.534.134,1.151,1.151,0,0,0,.88-.413,1.123,1.123,0,0,0,.25-.93L12.7,11.175a.507.507,0,0,1,.146-.449Z" transform="translate(-1993.999 12642.953)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconStar {opts.class}"',function(e){});i.tag2("viron-icon-up",'<svg viewbox="-9451.9 13487.801 7.4 4.2"> <path d="M.8,5.6a.553.553,0,0,0-.4.9L3.6,9.7a.6.6,0,0,0,.4.1.6.6,0,0,0,.4-.1L7.6,6.5c.2-.3,0-.9-.4-.9Z" transform="translate(-9444.222 13497.601) rotate(180)"></path> </svg> <div class="Icon__catcher" if="{!opts.nocatcher}"></div>',"",'class="icon Icon IconUp {opts.class}"',function(e){});var Xb=function(){this.handlePositiveSelect=(()=>{this.close();if(!this.opts.onPositiveSelect){return}this.opts.onPositiveSelect()});this.handleNegativeSelect=(()=>{this.close();if(!this.opts.onNegativeSelect){return}this.opts.onNegativSselect()})};i.tag2("viron-dialog",'<div class="Dialog__icon" if="{!!opts.icon}"> <div data-is="viron-icon-{opts.icon}"></div> </div> <div class="Dialog__title" if="{!!opts.title}">{opts.title}</div> <div class="Dialog__message" if="{!!opts.message}">{opts.message}</div> <div class="Dialog__control"> <viron-button label="{opts.labelPositive || \'OK\'}" onselect="{handlePositiveSelect}"></viron-button> <viron-button label="{opts.labelNegative || \'„Ç≠„É£„É≥„Çª„É´\'}" theme="ghost" onselect="{handleNegativeSelect}"></viron-button> </div>',"",'class="Dialog"',function(e){this.external(Xb)});var Zb=function(){const e=this.riotx.get();const t=this.opts.operationObject;this.isValid=true;this.layoutType=e.getter("layout.type");this.val=Bd.generateInitialVal(t.parameters,this.opts.initialVal);this.title=t.summary||t.operationId;this.submitLabel=null;this.submitModifier=null;let n=null;const r=e.getter("oas.pathItemObjectMethodNameByOperationId",t.operationId);switch(r){case"get":this.submitLabel="ÂèñÂæó„Åô„Çã";this.successMessage="ÂèñÂæó„Åó„Åæ„Åó„Åü„ÄÇ";break;case"post":this.submitLabel="Êñ∞Ë¶è‰ΩúÊàê„Åô„Çã";n="Êñ∞Ë¶è‰ΩúÊàê„Åó„Åæ„Åó„Åü„ÄÇ";break;case"put":this.submitLabel="‰øùÂ≠ò„Åô„Çã";n="‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ";break;case"delete":this.submitLabel="ÂâäÈô§„Åô„Çã";this.submitModifier="emphasised";n="ÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ";break;default:this.submitLabel="ÂÆüË°å„Åô„Çã";n="ÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇ";break}const i=()=>{Promise.resolve().then(()=>e.action("components.operate",t,this.val)).then(()=>{this.close();this.opts.onSuccess();return e.action("toasts.add",{message:n})}).catch(t=>{if(t.status===401){return e.action("modals.add","viron-error",{title:"Ë™çË®ºÂàá„Çå"}).then(()=>{this.getRouter().navigateTo("/")})}return e.action("modals.add","viron-error",{error:t})})};const a=()=>{const e=this.refs.submit;if(!e){return}const t="ComponentsPage_Operation__submit--disabled";if(this.isValid){e.classList.remove(t)}else{e.classList.add(t)}};this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.on("mount",()=>{a()});this.handleCancelTap=(()=>{this.close()});this.handleParametersChange=(e=>{this.val=e;this.update()});this.handleParametersValidate=(e=>{this.isValid=e;a()});this.handleSubmitTap=(()=>{if(!this.isValid){return}Promise.resolve().then(()=>e.action("modals.add","viron-dialog",{title:this.title,message:"Êú¨ÂΩì„Å´ÂÆüË°å„Åó„Åæ„Åô„ÅãÔºü",labelPositive:this.submitLabel,onPositiveSelect:()=>{i()}}))})};i.tag2("viron-components-page-operation",'<div class="ComponentsPage_Operation__head"> <div class="ComponentsPage_Operation__title">{title}</div> <div class="ComponentsPage_Operation__cancel" onclick="{getClickHandler(\'handleCancelTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCancelTap\')}">„Ç≠„É£„É≥„Çª„É´</div> </div> <div class="ComponentsPage_Operation__body"> <viron-parameters val="{val}" parameterobjects="{opts.operationObject.parameters}" primary="{opts.primary}" onchange="{handleParametersChange}" onvalidate="{handleParametersValidate}"></viron-parameters> </div> <div class="ComponentsPage_Operation__tail"> <div class="ComponentsPage_Operation__submit ComponentsPage_Operation__submit--{submitModifier}" ref="submit" onclick="{getClickHandler(\'handleSubmitTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSubmitTap\')}">{submitLabel}</div> </div>',"",'class="ComponentsPage_Operation ComponentsPage_Operation--{layoutType}"',function(e){this.external(Zb)});var Jb=function(){this.list=this.opts.list||[];this.size=this.opts.size||this.list.length;if(this.size>this.list.length){this.size=this.list.length}const e=50;this.bodyHeight=e*this.size;this.bodyTop=0;this.hasControlButtons=this.list.length>this.size;this.currentIdx=0;this.maxIdx=this.list.length-this.size;this.handlePrevItemTap=(()=>{this.currentIdx=this.currentIdx-1;if(this.currentIdx<0){this.currentIdx=0}this.bodyTop=this.currentIdx*e;this.update()});this.handleNextItemTap=(()=>{this.currentIdx=this.currentIdx+1;if(this.currentIdx>this.maxIdx){this.currentIdx=this.maxIdx}this.bodyTop=this.currentIdx*e;this.update()});this.handleItemTap=(e=>{if(!this.opts.onselect){return}const t=e.item.item.id;this.opts.onselect(t)})};i.tag2("viron-list",'<div class="List__item" if="{hasControlButtons}" onclick="{getClickHandler(\'handlePrevItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevItemTap\')}"> <viron-icon-up class="List__icon"></viron-icon-up> <div class="List__label">Êàª„Çã</div> </div> <div class="List__body" riot-style="height:{bodyHeight}px;"> <div class="List__itemsWrapper" riot-style="top:-{bodyTop}px;"> <div class="List__item" each="{item in list}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}"> <div class="List__label">{item.label}</div> </div> </div> </div> <div class="List__item" if="{hasControlButtons}" onclick="{getClickHandler(\'handleNextItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextItemTap\')}"> <viron-icon-down class="List__icon"></viron-icon-down> <div class="List__label">„Åï„Çâ„Å´Ë°®Á§∫</div> </div>',"",'class="List"',function(e){this.external(Jb)});var Qb=function(){this.list=Gu(this.opts.operations,e=>{return{id:e.operationId,label:e.summary||e.operationId}});this.handleItemSelect=(e=>{this.close();const t=qu(this.opts.operations,t=>{return t.operationId===e});this.opts.onSelect(t)})};i.tag2("viron-components-page-table-operations",'<viron-list list="{list}" size="{5}" onselect="{handleItemSelect}"></viron-list>',"",'class="ComponentsPage_Card_Table_Operations"',function(e){this.external(Qb)});var ex=function(){const e=this.riotx.get();const t=this.opts.dataList;const n=this.opts.selectedIdx;this.layoutType=e.getter("layout.type");this.parameterObjects=this.opts.parameterObjects;this.operations=this.opts.operations||[];this.val=null;this.selectedIdx=null;this.isPrevButtonDisabled=false;this.isNextButtonDisabled=false;const r=e=>{this.val=Bd.generateInitialVal(this.parameterObjects,t[e]);this.selectedIdx=e;this.isPrevButtonDisabled=e===0;this.isNextButtonDisabled=e===t.length-1};r(n);this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.isOperationsHidden=(()=>{const t=e.getter("layout.isMobile");if(t){return true}if(this.operations.length>=5){return true}return false});this.handleOperationTap=(e=>{this.opts.onOperationSelect(e.item.operation,this.selectedIdx);this.close()});this.handleOperationsButtonTap=(t=>{t.stopPropagation();const n=t.currentTarget.getBoundingClientRect();e.action("popovers.add","viron-components-page-table-operations",{operations:this.operations,onSelect:e=>{this.opts.onOperationSelect(e,this.selectedIdx);this.close()}},{x:n.left+n.width/2,y:n.bottom,width:240,direction:"TR"})});this.handleBackButtonTap=(()=>{this.close()});this.handlePrevButtonTap=(()=>{if(this.isPrevButtonDisabled){return}r(this.selectedIdx-1);this.update()});this.handleNextButtonTap=(()=>{if(this.isNextButtonDisabled){return}r(this.selectedIdx+1);this.update()})};i.tag2("viron-components-page-preview",'<div class="ComponentsPage_Preview__head"> <div class="ComponentsPage_Preview__title">„Éó„É¨„Éì„É•„Éº</div> <div class="ComponentsPage_Preview__operations" if="{!!this.operations.length &amp;&amp; !isOperationsHidden()}"> <div class="ComponentsPage_Preview__operation ComponentsPage_Preview__operation--{operation.method}" each="{operation in this.operations}" onclick="{getClickHandler(\'handleOperationTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOperationTap\')}">{operation.summary || operation.operationId}</div> </div> <div class="ComponentsPage_Preview__operationsButton" if="{!!this.operations.length &amp;&amp; isOperationsHidden()}" onclick="{getClickHandler(\'handleOperationsButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleOperationsButtonTap\')}"> <viron-icon-setting></viron-icon-setting> </div> <div class="ComponentsPage_Preview__backButton" onclick="{getClickHandler(\'handleBackButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleBackButtonTap\')}"> <viron-icon-arrow-left></viron-icon-arrow-left> </div> </div> <div class="ComponentsPage_Preview__body"> <viron-parameters val="{val}" ispreview="{true}" parameterobjects="{parameterObjects}"></viron-parameters> </div> <div class="ComponentsPage_Preview__tail"> <div class="ComponentsPage_Preview__prevButton {\'ComponentsPage_Preview__prevButton--disabled\': isPrevButtonDisabled}" onclick="{getClickHandler(\'handlePrevButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePrevButtonTap\')}"> <viron-icon-arrow-up></viron-icon-arrow-up> </div> <div class="ComponentsPage_Preview__nextButton {\'ComponentsPage_Preview__prevButton--disabled\': isNextButtonDisabled}" onclick="{getClickHandler(\'handleNextButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleNextButtonTap\')}"> <viron-icon-arrow-down></viron-icon-arrow-down> </div> </div>',"",'class="ComponentsPage_Preview ComponentsPage_Preview--{layoutType}"',function(e){this.external(ex)});var tx=function(){const e=this.riotx.get();this.layoutType=e.getter("layout.type");this.val=Bd.generateInitialVal(this.opts.parameterObjects,this.opts.initialVal);this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.handleCloseButtonTap=(()=>{this.close()});this.handleParametersChange=(e=>{this.val=e;this.update()});this.handleSearchButtonTap=(()=>{if(!this.opts.onSearch){this.close();return}this.opts.onSearch(this.val);this.close()})};i.tag2("viron-components-page-search",'<div class="ComponentsPage_Search__head"> <div class="ComponentsPage_Search__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="ComponentsPage_Search__title">Ê§úÁ¥¢</div> <div class="ComponentsPage_Search__description">„ÇØ„Ç®„É™„Éë„É©„É°„Éº„Çø„ÇíÊåáÂÆö„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ</div> </div> <div class="ComponentsPage_Search__body"> <viron-parameters val="{val}" theme="ghost" parameterobjects="{opts.parameterObjects}" onchange="{handleParametersChange}"></viron-parameters> </div> <div class="ComponentsPage_Search__tail"> <viron-button label="Ê§úÁ¥¢„Åô„Çã" onselect="{handleSearchButtonTap}"></viron-button> </div>',"",'class="ComponentsPage_Search ComponentsPage_Search--{layoutType}"',function(e){this.external(tx)});var nx=function(){const e=this.riotx.get();const t=t=>{if(!t&&this.hasPagination){t={};const e=this.pagination.size;const n=this.pagination.current;t.limit=e;t.offset=(n-1)*e}const n=to({},this.searchQueries,t);return Promise.resolve().then(()=>{this.isLoading=true;this.update()}).then(()=>Promise.all([new Promise(e=>setTimeout(e,300)),e.action("components.get",this.opts.id,this.opts.def,n)])).then(()=>{this.isLoading=false;this.update()}).catch(e=>{this.isLoading=false;if(e.status===401){this.error="Ë™çË®º„Ç®„É©„Éº„ÄÇ"}else{const e=this.opts.def.api;this.error=`[${e.method.toUpperCase()} ${e.path}]ÈÄö‰ø°„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ`}this.update()})};const n=e=>{if(!lu(e)){return"„É¨„Çπ„Éù„É≥„Çπ„Éá„Éº„Çø„ÅåÈÖçÂàó„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}if(!e.length){return"0‰ª∂„Åß„Åô„ÄÇ"}if(!xo(e[0])){return"Ë°å„Éá„Éº„Çø„Åå„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}return null};const r=(e,t)=>{const n={};fu(e.parameters||[],e=>{const r=e.name;const i=e.in;if(i==="body"){n[r]={};fo(e.schema.properties||{},(e,i)=>{if(!xf(t[i])&&!vf(t[i])){n[r][i]=t[i]}})}else{if(!xf(t[r])&&!vf(t[r])){n[r]=t[r]}}});i(e,Al(n))};const i=(n,r)=>{e.action("drawers.add","viron-components-page-operation",{operationObject:n,initialVal:r,primary:this.primary,onSuccess:()=>{t()}})};const a=()=>{const e=this.rowOperations;if(!e||e.length!==1){return"setting"}switch(e[0].method){case"get":return"file";case"put":return"edit";case"post":return"plus";case"delete":return"remove";default:return"setting"}};this.data=null;this.columns=[];this.visibleColumnKeys=null;this.tableOperations=[];this.rowOperations=[];this.rowOperationsIcon=a();this.postOperation=null;this.searchParameters=[];this.primary=null;this.isLoading=true;this.error=null;this.hasPagination=false;this.pagination=null;this.paginationSize=e.getter("layout.isDesktop")?5:3;this.searchQueries={};fo(this.opts.crosssearchqueries,(e,t)=>{if(!xf(e)){this.searchQueries[t]=e}});this.hasSearchQueries=!!Ol(this.searchQueries);this.autoRefreshSec=null;let o=null;const s=()=>{if(!this.autoRefreshSec){return}if(o){return}o=window.setInterval(()=>{t()},this.autoRefreshSec*1e3)};const u=()=>{window.clearInterval(o);o=null};this.listen("layout",()=>{this.paginationSize=e.getter("layout.isDesktop")?5:3;this.update()});this.listen(this.opts.id,()=>{this.data=e.getter("components.response",this.opts.id);this.columns=e.getter("components.columns",this.opts.id);this.tableOperations=e.getter("components.operations",this.opts.id,"table");this.rowOperations=e.getter("components.operations",this.opts.id,"row");this.rowOperationsIcon=a();this.postOperation=e.getter("components.postOperation",this.opts.id,"table");this.searchParameters=e.getter("components.searchParameters",this.opts.id);this.primary=e.getter("components.primary",this.opts.id);this.error=n(this.data);this.hasPagination=e.getter("components.hasPagination",this.opts.id);this.pagination=e.getter("components.pagination",this.opts.id);this.autoRefreshSec=e.getter("components.autoRefreshSec",this.opts.id);s();this.update()});this.refreshId=e.getter("util.components_refresh");this.listen("util",()=>{const n=e.getter("util.components_refresh");if(this.refreshId!==n){this.refreshId=n;t()}});this.getFilteredColumns=(()=>{if(!this.visibleColumnKeys){return this.columns}return rl(this.columns,e=>{return ql(this.visibleColumnKeys,e.key)})});let l=to(this.opts.crosssearchqueries);this.on("mount",()=>{t()}).on("updated",()=>{const e=this.opts.crosssearchqueries;let n=false;fo(e,(e,t)=>{if(e!==l[t]){n=true}});if(Ol(e)!==Ol(l)){n=true}if(n){fo(e,(e,t)=>{if(!xf(e)){this.searchQueries[t]=e}else{delete this.searchQueries[t]}});this.hasSearchQueries=!!Ol(this.searchQueries);t()}l=to({},this.opts.crosssearchqueries)}).on("unmount",()=>{u();e.action("components.remove",this.opts.id)});this.handlePostButtonTap=(()=>{i(this.postOperation)});this.handleSearchButtonTap=(()=>{e.action("drawers.add","viron-components-page-search",{parameterObjects:this.searchParameters,initialVal:this.searchQueries,onSearch:e=>{this.searchQueries=e;this.hasSearchQueries=!!Ol(e);t()}},{isNarrow:true})});this.handleFilterButtonTap=(()=>{e.action("drawers.add","viron-components-page-filter",{columns:this.columns,selectedColumnKeys:this.visibleColumnKeys,onChange:e=>{this.visibleColumnKeys=e;t()}},{isNarrow:true})});this.handleSettingButtonTap=(()=>{const t=this.refs.settingIcon.root.getBoundingClientRect();e.action("popovers.add","viron-components-page-table-operations",{operations:this.tableOperations,onSelect:e=>{i(e)}},{x:t.left+t.width/2,y:t.bottom,width:240,direction:"TR"})});this.handleRowTap=(t=>{const n="preview";const i={};fu(this.columns,e=>{const t=Al(e);const n=t.key;delete t.key;i[n]=t});const a=[{in:"body",name:n,schema:{type:"object",properties:i}}];const o=[];fu(this.data,e=>{const t={};t[n]=Al(e);o.push(t)});e.action("drawers.add","viron-components-page-preview",{parameterObjects:a,dataList:o,selectedIdx:t.item.idx,operations:this.rowOperations,onOperationSelect:(e,t)=>{r(e,this.data[t])}})});this.handleRowSettingButtonTap=(t=>{t.stopPropagation();const n=t.item.row;if(this.rowOperations.length===1){r(this.rowOperations[0],n);return}const i=t.currentTarget;const a=i.getBoundingClientRect();Promise.resolve().then(()=>{this.closeAllFloats()}).then(()=>{e.action("popovers.add","viron-components-page-table-operations",{operations:this.rowOperations,onSelect:e=>{r(e,n)}},{x:a.left+a.width/2,y:a.bottom,width:240,direction:"TR",watchElm:i})})});this.handlePaginationChange=(e=>{const n=this.pagination.size;t({limit:n,offset:(e-1)*n})})};i.tag2("viron-components-page-table",'<div class="ComponentsPage_Card_Table__head"> <div class="ComponentsPage_Card_Table__headAside"> <div class="ComponentsPage_Card_Table__postOperation" if="{postOperation}" onclick="{getClickHandler(\'handlePostButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePostButtonTap\')}"> <viron-icon-plus-thin></viron-icon-plus-thin> </div> <div class="ComponentsPage_Card_Table__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Table__headAside"> <div class="ComponentsPage_Card_Table__control"> <viron-icon-search class="ComponentsPage_Card_Table__searchIcon {\'ComponentsPage_Card_Table__searchIcon--active\': hasSearchQueries}" if="{searchParameters.length}" onclick="{getClickHandler(\'handleSearchButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSearchButtonTap\')}"></viron-icon-search> <viron-icon-filter class="ComponentsPage_Card_Table__filterIcon {\'ComponentsPage_Card_Table__filterIcon--active\': !!visibleColumnKeys}" onclick="{getClickHandler(\'handleFilterButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFilterButtonTap\')}"></viron-icon-filter> <viron-icon-setting if="{tableOperations.length}" ref="settingIcon" onclick="{getClickHandler(\'handleSettingButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSettingButtonTap\')}"></viron-icon-setting> </div> </div> </div> <div class="ComponentsPage_Card_Table__body"> <virtual if="{isLoading}"> <div class="ComponentsPage_Card_Table__progressWrapper"> <div class="ComponentsPage_Card_Table__progress"> <viron-icon-reload></viron-icon-reload> </div> </div> </virtual> <virtual if="{!isLoading}"> <virtual if="{!!error}"> <div class="ComponentsPage_Card_Table__errorWrapper"> <div class="ComponentsPage_Card_Table__error">{error}</div> </div> </virtual> <virtual if="{!error}"> <table class="ComponentsPage_Card_Table__table"> <thead class="ComponentsPage_Card_Table__thead"> <tr class="ComponentsPage_Card_Table__theadRow"> <th class="ComponentsPage_Card_Table__th" each="{column in getFilteredColumns()}">{column.description || column.key}</th> <th class="ComponentsPage_Card_Table__th ComponentsPage_Card_Table__th--sticky" if="{rowOperations.length}">Êìç‰Ωú</th> </tr> </thead> <tbody class="ComponentsPage_Card_Table__tbody"> <tr class="ComponentsPage_Card_Table__tbodyRow" each="{row, idx in data}" onclick="{getClickHandler(\'handleRowTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRowTap\')}"> <td each="{column in parent.getFilteredColumns()}" data-is="viron-components-page-table-cell" data="{row[column.key]}" column="{column}"></td> <td class="ComponentsPage_Card_Table__td ComponentsPage_Card_Table__td--sticky" if="{rowOperations.length}"><span data-is="viron-icon-{rowOperationsIcon}" ref="rowSettingIcon" onclick="{getClickHandler(\'handleRowSettingButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRowSettingButtonTap\')}"></span></td> </tr> </tbody> </table> </virtual> </virtual> </div> <div class="ComponentsPage_Card_Table__tail" if="{hasPagination}"> <viron-pagination max="{pagination.max}" size="{paginationSize}" current="{pagination.current}" onchange="{handlePaginationChange}"></viron-pagination> </div> <div class="ComponentsPage_Card_Table__blocker" if="{isLoading}"></div>',"",'class="ComponentsPage_Card_Table"',function(e){this.external(nx)});var rx=function(){};i.tag2("viron-components-page-unsupported",'<div class="ComponentsPage_Card_Unsupported__head"> <div class="ComponentsPage_Card_Unsupported__title">{opts.def.name}</div> </div> <div class="ComponentsPage_Card_Unsupported__body"> <div class="ComponentsPage_Card_Unsupported__error">„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Çø„Ç§„Éó„Äå{opts.def.style}„Äç„ÅØÁèæÂú®„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</div> </div>',"",'class="ComponentsPage_Card_Unsupported"',function(e){this.external(rx)});var ix=function(){this.componentId=Xc(this._riot_id);this.cardType=null;this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadSmall";switch(this.opts.def.style){case"chart":this.cardType="unsupported";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadMedium";break;case"graph-scatterplot":case"graph-line":case"graph-bar":case"graph-horizontal-bar":case"graph-stacked-bar":case"graph-horizontal-stacked-bar":case"graph-stacked-area":this.cardType="chart";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadMedium";break;case"table":this.cardType="table";this.columnSize="columnSpreadFull";this.rowSize="rowSpreadLarge";break;case"number":this.cardType="number";this.columnSize="columnSpreadSmall";this.rowSize="rowSpreadSmall";break;default:break}};i.tag2("viron-components-page-card",'<div data-is="viron-components-page-{cardType}" id="{componentId}" def="{opts.def}" crosssearchqueries="{opts.crosssearchqueries}"></div>',"",'class="ComponentsPage_Card ComponentsPage_Card--{columnSize} ComponentsPage_Card--{rowSize}"',function(e){this.external(ix)});var ax=function(){const e=this.riotx.get();this.name=e.getter("page.name");this.components=e.getter("page.components");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.parameterObjectsForCrossSearch=e.getter("components.parameterObjectsForCrossSearch");this.isCrossSearchEnabled=!!this.parameterObjectsForCrossSearch.length&&this.components.length>=2;this.crossSearchQueries={};this.hasCrossSearchQueries=false;this.listen("page",()=>{this.name=e.getter("page.name");this.components=e.getter("page.components");this.crossSearchQueries={};this.hasCrossSearchQueries=false;this.update()});this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.update()});this.listen("components",()=>{this.parameterObjectsForCrossSearch=e.getter("components.parameterObjectsForCrossSearch");this.isCrossSearchEnabled=!!this.parameterObjectsForCrossSearch.length&&this.components.length>=2;this.update()});this.getCrossSearchQueriesByDef=(e=>{const t={};fu(e.query,e=>{t[e.key]=this.crossSearchQueries[e.key]});return t});this.handleRefreshTap=(()=>{e.action("util.refreshAllComponents")});this.handleCrossSearchTap=(()=>{e.action("drawers.add","viron-components-page-search",{parameterObjects:this.parameterObjectsForCrossSearch,initialVal:this.crossSearchQueries,onSearch:e=>{this.crossSearchQueries=e;this.hasCrossSearchQueries=!!Ol(e);this.update()}},{isNarrow:true})})};i.tag2("viron-components-page",'<div class="ComponentsPage__head"> <div class="ComponentsPage__name">{name}</div> <div class="ComponentsPage__control" if="{isDesktop}"> <div class="ComponentsPage__refresh" onclick="{getClickHandler(\'handleRefreshTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleRefreshTap\')}"> <viron-icon-reload></viron-icon-reload> </div> <div class="ComponentsPage__crossSearch {\'ComponentsPage__crossSearch--active\': hasCrossSearchQueries}" if="{isCrossSearchEnabled}" onclick="{getClickHandler(\'handleCrossSearchTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCrossSearchTap\')}"> <viron-icon-search></viron-icon-search> </div> </div> </div> <div class="ComponentsPage__container"> <viron-components-page-card each="{component in components}" def="{component}" crosssearchqueries="{parent.getCrossSearchQueriesByDef(component)}"></viron-components-page-card> </div>',"",'class="ComponentsPage ComponentsPage--{layoutType}"',function(e){this.external(ax)});var ox=n(function(e){(function(e){"use strict";e.exports.is_uri=n;e.exports.is_http_uri=r;e.exports.is_https_uri=i;e.exports.is_web_uri=a;e.exports.isUri=n;e.exports.isHttpUri=r;e.exports.isHttpsUri=i;e.exports.isWebUri=a;var t=function(e){var t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return t};function n(e){if(!e){return}if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)){return}if(/%[^0-9a-f]/i.test(e)){return}if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){return}var n=[];var r="";var i="";var a="";var o="";var s="";var u="";n=t(e);r=n[1];i=n[2];a=n[3];o=n[4];s=n[5];if(!(r&&r.length&&a.length>=0)){return}if(i&&i.length){if(!(a.length===0||/^\//.test(a))){return}}else{if(/^\/\//.test(a)){return}}if(!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase())){return}u+=r+":";if(i&&i.length){u+="//"+i}u+=a;if(o&&o.length){u+="?"+o}if(s&&s.length){u+="#"+s}return u}function r(e,r){if(!n(e)){return}var i=[];var a="";var o="";var s="";var u="";var l="";var c="";var f="";i=t(e);a=i[1];o=i[2];s=i[3];l=i[4];c=i[5];if(!a){return}if(r){if(a.toLowerCase()!="https"){return}}else{if(a.toLowerCase()!="http"){return}}if(!o){return}if(/:(\d+)$/.test(o)){u=o.match(/:(\d+)$/)[0];o=o.replace(/:\d+$/,"")}f+=a+":";f+="//"+o;if(u){f+=u}f+=s;if(l&&l.length){f+="?"+l}if(c&&c.length){f+="#"+c}return f}function i(e){return r(e,true)}function a(e){return r(e)||i(e)}})(e)});var sx=function(){const e=this.riotx.get();this.endpointURL="";this.errorMessage="";this.isLikelyToBeSelfSignedCertificate=false;const t=t=>{if(!ox.isUri(t)){return"URL„Å´Ë™§„Çä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ"}if(!!e.getter("endpoints.oneByURL",t)){return"Êó¢„Å´Â≠òÂú®„Åô„Çã„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Åß„Åô„ÄÇ"}return null};this.handleEndpointURLChange=(e=>{this.endpointURL=e;this.update()});this.handleSelfSignedCertificateButtonTap=(()=>{window.open(this.endpointURL,"_blank")});this.handleAddButtonSelect=(()=>{const n=t(this.endpointURL);if(!!n){this.errorMessage=n;this.isLikelyToBeSelfSignedCertificate=false;this.update();return}Promise.resolve().then(()=>e.action("endpoints.add",this.endpointURL)).then(()=>e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(e=>{switch(e.status){case 404:this.errorMessage="„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ";break;default:this.errorMessage="„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ";break}if(this.endpointURL.startsWith("https://")){this.isLikelyToBeSelfSignedCertificate=true}else{this.isLikelyToBeSelfSignedCertificate=false}this.update()})})};i.tag2("viron-application-header-menu-entry",'<div class="Application_Header_Menu_Entry__title">ÁÆ°ÁêÜÁîªÈù¢„ÇíËøΩÂä†</div> <div class="Application_Header_Menu_Entry__message" if="{!!errorMessage}">{errorMessage}</div> <div class="Application_Header_Menu_Entry__selfSignedCertificate" if="{!!isLikelyToBeSelfSignedCertificate}" onclick="{getClickHandler(\'handleSelfSignedCertificateButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSelfSignedCertificateButtonTap\')}">Self-Signed Certificate?</div> <div class="Application_Header_Menu_Entry__inputs"> <viron-textinput placeholder="URL„ÅÆÂÖ•Âäõ" val="{endpointURL}" onchange="{handleEndpointURLChange}"></viron-textinput> </div> <div class="Application_Header_Menu_Entry__control"> <viron-button label="ËøΩÂä†" onselect="{handleAddButtonSelect}"></viron-button> </div>',"",'class="Application_Header_Menu_Entry"',function(e){this.external(sx)});var ux=function(){const e=this.riotx.get();this.handleTap=(()=>{e.action("modals.add","viron-application-header-menu-entry")})};i.tag2("viron-endpoints-page-add",'<div class="EndpointsPage_Add__content"> <div class="EndpointsPage_Add__icon"> <viron-icon-plus></viron-icon-plus> </div> <div class="EndpointsPage_Add__label">ËøΩÂä†</div> </div>',"",'class="EndpointsPage_Add" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(ux)});var lx=function(){};i.tag2("viron-tag",'<div class="Tag__label">{opts.label}</div>',"",'class="Tag"',function(e){this.external(lx)});"use strict";var cx=typeof self==="object"&&self.self===self&&self||typeof e==="object"&&e.global===e&&e||e;"use strict";var fx=function(){return typeof cx.Promise==="function"&&typeof cx.Promise.prototype.then==="function"};var dx={}.toString;var hx=Array.isArray||function(e){return dx.call(e)=="[object Array]"};"use strict";function px(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}mx.TYPED_ARRAY_SUPPORT=px();var vx=mx.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function mx(e,t,n){if(!mx.TYPED_ARRAY_SUPPORT&&!(this instanceof mx)){return new mx(e,t,n)}if(typeof e==="number"){return xx(this,e)}return Px(this,e,t,n)}if(mx.TYPED_ARRAY_SUPPORT){mx.prototype.__proto__=Uint8Array.prototype;mx.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&mx[Symbol.species]===mx){Object.defineProperty(mx,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}}function gx(e){if(e>=vx){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+vx.toString(16)+" bytes")}return e|0}function yx(e){return e!==e}function bx(e,t){var n;if(mx.TYPED_ARRAY_SUPPORT){n=new Uint8Array(t);n.__proto__=mx.prototype}else{n=e;if(n===null){n=new mx(t)}n.length=t}return n}function xx(e,t){var n=bx(e,t<0?0:gx(t)|0);if(!mx.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){n[r]=0}}return n}function wx(e,t){var n=Sx(t)|0;var r=bx(e,n);var i=r.write(t);if(i!==n){r=r.slice(0,i)}return r}function _x(e,t){var n=t.length<0?0:gx(t.length)|0;var r=bx(e,n);for(var i=0;i<n;i+=1){r[i]=t[i]&255}return r}function kx(e,t,n,r){if(n<0||t.byteLength<n){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<n+(r||0)){throw new RangeError("'length' is out of bounds")}var i;if(n===undefined&&r===undefined){i=new Uint8Array(t)}else if(r===undefined){i=new Uint8Array(t,n)}else{i=new Uint8Array(t,n,r)}if(mx.TYPED_ARRAY_SUPPORT){i.__proto__=mx.prototype}else{i=_x(e,i)}return i}function Cx(e,t){if(mx.isBuffer(t)){var n=gx(t.length)|0;var r=bx(e,n);if(r.length===0){return r}t.copy(r,0,0,n);return r}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||yx(t.length)){return bx(e,0)}return _x(e,t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return _x(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Tx(e,t){t=t||Infinity;var n;var r=e.length;var i=null;var a=[];for(var o=0;o<r;++o){n=e.charCodeAt(o);if(n>55295&&n<57344){if(!i){if(n>56319){if((t-=3)>-1){a.push(239,191,189)}continue}else if(o+1===r){if((t-=3)>-1){a.push(239,191,189)}continue}i=n;continue}if(n<56320){if((t-=3)>-1){a.push(239,191,189)}i=n;continue}n=(i-55296<<10|n-56320)+65536}else if(i){if((t-=3)>-1){a.push(239,191,189)}}i=null;if(n<128){if((t-=1)<0){break}a.push(n)}else if(n<2048){if((t-=2)<0){break}a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0){break}a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0){break}a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else{throw new Error("Invalid code point")}}return a}function Sx(e){if(mx.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var t=e.length;if(t===0){return 0}return Tx(e).length}function Ex(e,t,n,r){for(var i=0;i<r;++i){if(i+n>=t.length||i>=e.length){break}t[i+n]=e[i]}return i}function Ax(e,t,n,r){return Ex(Tx(t,e.length-n),e,n,r)}function Px(e,t,n,r){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return kx(e,t,n,r)}if(typeof t==="string"){return wx(e,t,n)}return Cx(e,t)}mx.prototype.write=function e(t,n,r){if(n===undefined){r=this.length;n=0}else if(r===undefined&&typeof n==="string"){r=this.length;n=0}else if(isFinite(n)){n=n|0;if(isFinite(r)){r=r|0}else{r=undefined}}var i=this.length-n;if(r===undefined||r>i){r=i}if(t.length>0&&(r<0||n<0)||n>this.length){throw new RangeError("Attempt to write outside buffer bounds")}return Ax(this,t,n,r)};mx.prototype.slice=function e(t,n){var r=this.length;t=~~t;n=n===undefined?r:~~n;if(t<0){t+=r;if(t<0){t=0}}else if(t>r){t=r}if(n<0){n+=r;if(n<0){n=0}}else if(n>r){n=r}if(n<t){n=t}var i;if(mx.TYPED_ARRAY_SUPPORT){i=this.subarray(t,n);i.__proto__=mx.prototype}else{var a=n-t;i=new mx(a,undefined);for(var o=0;o<a;++o){i[o]=this[o+t]}}return i};mx.prototype.copy=function e(t,n,r,i){if(!r){r=0}if(!i&&i!==0){i=this.length}if(n>=t.length){n=t.length}if(!n){n=0}if(i>0&&i<r){i=r}if(i===r){return 0}if(t.length===0||this.length===0){return 0}if(n<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length){throw new RangeError("sourceStart out of bounds")}if(i<0){throw new RangeError("sourceEnd out of bounds")}if(i>this.length){i=this.length}if(t.length-n<i-r){i=t.length-n+r}var a=i-r;var o;if(this===t&&r<n&&n<i){for(o=a-1;o>=0;--o){t[o+n]=this[o+r]}}else if(a<1e3||!mx.TYPED_ARRAY_SUPPORT){for(o=0;o<a;++o){t[o+n]=this[o+r]}}else{Uint8Array.prototype.set.call(t,this.subarray(r,r+a),n)}return a};mx.prototype.fill=function e(t,n,r){if(typeof t==="string"){if(typeof n==="string"){n=0;r=this.length}else if(typeof r==="string"){r=this.length}if(t.length===1){var i=t.charCodeAt(0);if(i<256){t=i}}}else if(typeof t==="number"){t=t&255}if(n<0||this.length<n||this.length<r){throw new RangeError("Out of range index")}if(r<=n){return this}n=n>>>0;r=r===undefined?this.length:r>>>0;if(!t){t=0}var a;if(typeof t==="number"){for(a=n;a<r;++a){this[a]=t}}else{var o=mx.isBuffer(t)?t:new mx(t);var s=o.length;for(a=0;a<r-n;++a){this[a+n]=o[a%s]}}return this};mx.concat=function e(t,n){if(!hx(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return bx(null,0)}var r;if(n===undefined){n=0;for(r=0;r<t.length;++r){n+=t[r].length}}var i=xx(null,n);var a=0;for(r=0;r<t.length;++r){var o=t[r];if(!mx.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(i,a);a+=o.length}return i};mx.byteLength=Sx;mx.prototype._isBuffer=true;mx.isBuffer=function e(t){return!!(t!=null&&t._isBuffer)};var Ox=mx;var Mx;var Nx=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];var Rx=function e(t){if(!t){throw new Error('"version" cannot be null or undefined')}if(t<1||t>40){throw new Error('"version" should be in range from 1 to 40')}return t*4+17};var Dx=function e(t){return Nx[t]};var Bx=function(e){var t=0;while(e!==0){t++;e>>>=1}return t};var Lx=function e(t){if(typeof t!=="function"){throw new Error('"toSJISFunc" is not a valid function.')}Mx=t};var Ix=function(){return typeof Mx!=="undefined"};var Fx=function e(t){return Mx(t)};var jx={getSymbolSize:Rx,getSymbolTotalCodewords:Dx,getBCHDigit:Bx,setToSJISFunction:Lx,isKanjiModeEnabled:Ix,toSJIS:Fx};var zx=n(function(e,t){t.L={bit:1};t.M={bit:0};t.Q={bit:3};t.H={bit:2};function n(e){if(typeof e!=="string"){throw new Error("Param is not a string")}var n=e.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}t.isValid=function e(t){return t&&typeof t.bit!=="undefined"&&t.bit>=0&&t.bit<4};t.from=function e(r,i){if(t.isValid(r)){return r}try{return n(r)}catch(e){return i}}});function Hx(){this.buffer=[];this.length=0}Hx.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(var n=0;n<t;n++){this.putBit((e>>>t-n-1&1)===1)}},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);if(this.buffer.length<=t){this.buffer.push(0)}if(e){this.buffer[t]|=128>>>this.length%8}this.length++}};var Ux=Hx;function Wx(e){if(!e||e<1){throw new Error("BitMatrix size must be defined and greater than 0")}this.size=e;this.data=new Ox(e*e);this.data.fill(0);this.reservedBit=new Ox(e*e);this.reservedBit.fill(0)}Wx.prototype.set=function(e,t,n,r){var i=e*this.size+t;this.data[i]=n;if(r){this.reservedBit[i]=true}};Wx.prototype.get=function(e,t){return this.data[e*this.size+t]};Wx.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Wx.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Vx=Wx;var qx=n(function(e,t){var n=jx.getSymbolSize;t.getRowColCoords=function e(t){if(t===1){return[]}var r=Math.floor(t/7)+2;var i=n(t);var a=i===145?26:Math.ceil((i-13)/(2*r-2))*2;var o=[i-7];for(var s=1;s<r-1;s++){o[s]=o[s-1]-a}o.push(6);return o.reverse()};t.getPositions=function e(n){var r=[];var i=t.getRowColCoords(n);var a=i.length;for(var o=0;o<a;o++){for(var s=0;s<a;s++){if(o===0&&s===0||o===0&&s===a-1||o===a-1&&s===0){continue}r.push([i[o],i[s]])}}return r}});var Kx=jx.getSymbolSize;var Yx=7;var $x=function e(t){var n=Kx(t);return[[0,0],[n-Yx,0],[0,n-Yx]]};var Gx={getPositions:$x};var Xx=n(function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n={N1:3,N2:3,N3:40,N4:10};t.isValid=function e(t){return t&&t!==""&&!isNaN(t)&&t>=0&&t<=7};t.from=function e(n){return t.isValid(n)?parseInt(n,10):undefined};t.getPenaltyN1=function e(t){var r=t.size;var i=0;var a=0;var o=0;var s=null;var u=null;for(var l=0;l<r;l++){a=o=0;s=u=null;for(var c=0;c<r;c++){var f=t.get(l,c);if(f===s){a++}else{if(a>=5){i+=n.N1+(a-5)}s=f;a=1}f=t.get(c,l);if(f===u){o++}else{if(o>=5){i+=n.N1+(o-5)}u=f;o=1}}if(a>=5){i+=n.N1+(a-5)}if(o>=5){i+=n.N1+(o-5)}}return i};t.getPenaltyN2=function e(t){var r=t.size;var i=0;for(var a=0;a<r-1;a++){for(var o=0;o<r-1;o++){var s=t.get(a,o)+t.get(a,o+1)+t.get(a+1,o)+t.get(a+1,o+1);if(s===4||s===0){i++}}}return i*n.N2};t.getPenaltyN3=function e(t){var r=t.size;var i=0;var a=0;var o=0;for(var s=0;s<r;s++){a=o=0;for(var u=0;u<r;u++){a=a<<1&2047|t.get(s,u);if(u>=10&&(a===1488||a===93)){i++}o=o<<1&2047|t.get(u,s);if(u>=10&&(o===1488||o===93)){i++}}}return i*n.N3};t.getPenaltyN4=function e(t){var r=0;var i=t.data.length;for(var a=0;a<i;a++){r+=t.data[a]}var o=Math.abs(Math.ceil(r*100/i/5)-10);return o*n.N4};function r(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.applyMask=function e(t,n){var i=n.size;for(var a=0;a<i;a++){for(var o=0;o<i;o++){if(n.isReserved(o,a)){continue}n.xor(o,a,r(t,o,a))}}};t.getBestMask=function e(n,r){var i=Object.keys(t.Patterns).length;var a=0;var o=Infinity;for(var s=0;s<i;s++){r(s);t.applyMask(s,n);var u=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(s,n);if(u<o){o=u;a=s}}return a}});var Zx=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81];var Jx=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];var Qx=function e(t,n){switch(n){case zx.L:return Zx[(t-1)*4+0];case zx.M:return Zx[(t-1)*4+1];case zx.Q:return Zx[(t-1)*4+2];case zx.H:return Zx[(t-1)*4+3];default:return undefined}};var ew=function e(t,n){switch(n){case zx.L:return Jx[(t-1)*4+0];case zx.M:return Jx[(t-1)*4+1];case zx.Q:return Jx[(t-1)*4+2];case zx.H:return Jx[(t-1)*4+3];default:return undefined}};var tw={getBlocksCount:Qx,getTotalCodewordsCount:ew};var nw=new Ox(512);var rw=new Ox(256);(function e(){var t=1;for(var n=0;n<255;n++){nw[n]=t;rw[t]=n;t<<=1;if(t&256){t^=285}}for(n=255;n<512;n++){nw[n]=nw[n-255]}})();var iw=function e(t){if(t<1){throw new Error("log("+t+")")}return rw[t]};var aw=function e(t){return nw[t]};var ow=function e(t,n){if(t===0||n===0){return 0}return nw[rw[t]+rw[n]]};var sw={log:iw,exp:aw,mul:ow};var uw=n(function(e,t){t.mul=function e(t,n){var r=new Ox(t.length+n.length-1);r.fill(0);for(var i=0;i<t.length;i++){for(var a=0;a<n.length;a++){r[i+a]^=sw.mul(t[i],n[a])}}return r};t.mod=function e(t,n){var r=new Ox(t);while(r.length-n.length>=0){var i=r[0];for(var a=0;a<n.length;a++){r[a]^=sw.mul(n[a],i)}var o=0;while(o<r.length&&r[o]===0){o++}r=r.slice(o)}return r};t.generateECPolynomial=function e(n){var r=new Ox([1]);for(var i=0;i<n;i++){r=t.mul(r,[1,sw.exp(i)])}return r}});function lw(e){this.genPoly=undefined;this.degree=e;if(this.degree){this.initialize(this.degree)}}lw.prototype.initialize=function e(t){this.degree=t;this.genPoly=uw.generateECPolynomial(this.degree)};lw.prototype.encode=function e(t){if(!this.genPoly){throw new Error("Encoder not initialized")}var n=new Ox(this.degree);n.fill(0);var r=Ox.concat([t,n],t.length+this.degree);var i=uw.mod(r,this.genPoly);var a=this.degree-i.length;if(a>0){var o=new Ox(this.degree);o.fill(0);i.copy(o,a);return o}return i};var cw=lw;var fw="[0-9]+";var dw="[A-Z $%*+\\-./:]+";var hw="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|"+"[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|"+"[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|"+"[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";hw=hw.replace(/u/g,"\\u");var pw="(?:(?![A-Z0-9 $%*+\\-./:]|"+hw+").)+";var vw=new RegExp(hw,"g");var mw=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");var gw=new RegExp(pw,"g");var yw=new RegExp(fw,"g");var bw=new RegExp(dw,"g");var xw=new RegExp("^"+hw+"$");var ww=new RegExp("^"+fw+"$");var _w=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");var kw=function e(t){return xw.test(t)};var Cw=function e(t){return ww.test(t)};var Tw=function e(t){return _w.test(t)};var Sw={KANJI:vw,BYTE_KANJI:mw,BYTE:gw,NUMERIC:yw,ALPHANUMERIC:bw,testKanji:kw,testNumeric:Cw,testAlphanumeric:Tw};var Ew=n(function(e,t){t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]};t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]};t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]};t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]};t.MIXED={bit:-1};t.getCharCountIndicator=function e(t,n){if(!t.ccBits){throw new Error("Invalid mode: "+t)}if(!Aw.isValid(n)){throw new Error("Invalid version: "+n)}if(n>=1&&n<10){return t.ccBits[0]}else if(n<27){return t.ccBits[1]}return t.ccBits[2]};t.getBestModeForData=function e(n){if(Sw.testNumeric(n)){return t.NUMERIC}else if(Sw.testAlphanumeric(n)){return t.ALPHANUMERIC}else if(Sw.testKanji(n)){return t.KANJI}else{return t.BYTE}};t.toString=function e(t){if(t&&t.id){return t.id}throw new Error("Invalid mode")};t.isValid=function e(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!=="string"){throw new Error("Param is not a string")}var n=e.toLowerCase();switch(n){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}t.from=function e(r,i){if(t.isValid(r)){return r}try{return n(r)}catch(e){return i}}});var Aw=n(function(e,t){var n=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;var r=jx.getBCHDigit(n);function i(e,n,r){for(var i=1;i<=40;i++){if(n<=t.getCapacity(i,r,e)){return i}}return undefined}function a(e,t){return Ew.getCharCountIndicator(e,t)+4}function o(e,t){var n=0;e.forEach(function(e){var r=a(e.mode,t);n+=r+e.getBitsLength()});return n}function s(e,n){for(var r=1;r<=40;r++){var i=o(e,r);if(i<=t.getCapacity(r,n,Ew.MIXED)){return r}}return undefined}t.isValid=function e(t){return!isNaN(t)&&t>=1&&t<=40};t.from=function e(n,r){if(t.isValid(n)){return parseInt(n,10)}return r};t.getCapacity=function e(n,r,i){if(!t.isValid(n)){throw new Error("Invalid QR Code version")}if(typeof i==="undefined"){i=Ew.BYTE}var o=jx.getSymbolTotalCodewords(n);var s=tw.getTotalCodewordsCount(n,r);var u=(o-s)*8;if(i===Ew.MIXED){return u}var l=u-a(i,n);switch(i){case Ew.NUMERIC:return Math.floor(l/10*3);case Ew.ALPHANUMERIC:return Math.floor(l/11*2);case Ew.KANJI:return Math.floor(l/13);case Ew.BYTE:default:return Math.floor(l/8)}};t.getBestVersionForData=function e(t,n){var r;var a=zx.from(n,zx.M);if(hx(t)){if(t.length>1){return s(t,a)}if(t.length===0){return 1}r=t[0]}else{r=t}return i(r.mode,r.getLength(),a)};t.getEncodedBits=function e(i){if(!t.isValid(i)||i<7){throw new Error("Invalid QR Code version")}var a=i<<12;while(jx.getBCHDigit(a)-r>=0){a^=n<<jx.getBCHDigit(a)-r}return i<<12|a}});var Pw=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;var Ow=1<<14|1<<12|1<<10|1<<4|1<<1;var Mw=jx.getBCHDigit(Pw);var Nw=function e(t,n){var r=t.bit<<3|n;var i=r<<10;while(jx.getBCHDigit(i)-Mw>=0){i^=Pw<<jx.getBCHDigit(i)-Mw}return(r<<10|i)^Ow};var Rw={getEncodedBits:Nw};function Dw(e){this.mode=Ew.NUMERIC;this.data=e.toString()}Dw.getBitsLength=function e(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Dw.prototype.getLength=function e(){return this.data.length};Dw.prototype.getBitsLength=function e(){return Dw.getBitsLength(this.data.length)};Dw.prototype.write=function e(t){var n,r,i;for(n=0;n+3<=this.data.length;n+=3){r=this.data.substr(n,3);i=parseInt(r,10);t.put(i,10)}var a=this.data.length-n;if(a>0){r=this.data.substr(n);i=parseInt(r,10);t.put(i,a*3+1)}};var Bw=Dw;var Lw=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Iw(e){this.mode=Ew.ALPHANUMERIC;this.data=e}Iw.getBitsLength=function e(t){return 11*Math.floor(t/2)+6*(t%2)};Iw.prototype.getLength=function e(){return this.data.length};Iw.prototype.getBitsLength=function e(){return Iw.getBitsLength(this.data.length)};Iw.prototype.write=function e(t){var n;for(n=0;n+2<=this.data.length;n+=2){var r=Lw.indexOf(this.data[n])*45;r+=Lw.indexOf(this.data[n+1]);t.put(r,11)}if(this.data.length%2){t.put(Lw.indexOf(this.data[n]),6)}};var Fw=Iw;function jw(e){this.mode=Ew.BYTE;this.data=new Ox(e)}jw.getBitsLength=function e(t){return t*8};jw.prototype.getLength=function e(){return this.data.length};jw.prototype.getBitsLength=function e(){return jw.getBitsLength(this.data.length)};jw.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++){e.put(this.data[t],8)}};var zw=jw;function Hw(e){this.mode=Ew.KANJI;this.data=e}Hw.getBitsLength=function e(t){return t*13};Hw.prototype.getLength=function e(){return this.data.length};Hw.prototype.getBitsLength=function e(){return Hw.getBitsLength(this.data.length)};Hw.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=jx.toSJIS(this.data[t]);if(n>=33088&&n<=40956){n-=33088}else if(n>=57408&&n<=60351){n-=49472}else{throw new Error("Invalid SJIS character: "+this.data[t]+"\n"+"Make sure your charset is UTF-8")}n=(n>>>8&255)*192+(n&255);e.put(n,13)}};var Uw=Hw;var Ww=n(function(e){"use strict";var t={single_source_shortest_paths:function(e,n,r){var i={};var a={};a[n]=0;var o=t.PriorityQueue.make();o.push(n,0);var s,u,l,c,f,d,h,p,v;while(!o.empty()){s=o.pop();u=s.value;c=s.cost;f=e[u]||{};for(l in f){if(f.hasOwnProperty(l)){d=f[l];h=c+d;p=a[l];v=typeof a[l]==="undefined";if(v||p>h){a[l]=h;o.push(l,h);i[l]=u}}}}if(typeof r!=="undefined"&&typeof a[r]==="undefined"){var m=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(m)}return i},extract_shortest_path_from_predecessor_list:function(e,t){var n=[];var r=t;while(r){n.push(r);r=e[r]}n.reverse();return n},find_path:function(e,n,r){var i=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,r={},i;e=e||{};for(i in n){if(n.hasOwnProperty(i)){r[i]=n[i]}}r.queue=[];r.sorter=e.sorter||n.default_sorter;return r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n);this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};{e.exports=t}});var Vw=n(function(e,t){function n(e){return unescape(encodeURIComponent(e)).length}function r(e,t,n){var r=[];var i;while((i=e.exec(n))!==null){r.push({data:i[0],index:i.index,mode:t,length:i[0].length})}return r}function i(e){var t=r(Sw.NUMERIC,Ew.NUMERIC,e);var n=r(Sw.ALPHANUMERIC,Ew.ALPHANUMERIC,e);var i;var a;if(jx.isKanjiModeEnabled()){i=r(Sw.BYTE,Ew.BYTE,e);a=r(Sw.KANJI,Ew.KANJI,e)}else{i=r(Sw.BYTE_KANJI,Ew.BYTE,e);a=[]}var o=t.concat(n,i,a);return o.sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function a(e,t){switch(t){case Ew.NUMERIC:return Bw.getBitsLength(e);case Ew.ALPHANUMERIC:return Fw.getBitsLength(e);case Ew.KANJI:return Uw.getBitsLength(e);case Ew.BYTE:return zw.getBitsLength(e)}}function o(e){return e.reduce(function(e,t){var n=e.length-1>=0?e[e.length-1]:null;if(n&&n.mode===t.mode){e[e.length-1].data+=t.data;return e}e.push(t);return e},[])}function s(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r];switch(i.mode){case Ew.NUMERIC:t.push([i,{data:i.data,mode:Ew.ALPHANUMERIC,length:i.length},{data:i.data,mode:Ew.BYTE,length:i.length}]);break;case Ew.ALPHANUMERIC:t.push([i,{data:i.data,mode:Ew.BYTE,length:i.length}]);break;case Ew.KANJI:t.push([i,{data:i.data,mode:Ew.BYTE,length:n(i.data)}]);break;case Ew.BYTE:t.push([{data:i.data,mode:Ew.BYTE,length:n(i.data)}])}}return t}function u(e,t){var n={};var r={start:{}};var i=["start"];for(var o=0;o<e.length;o++){var s=e[o];var u=[];for(var l=0;l<s.length;l++){var c=s[l];var f=""+o+l;u.push(f);n[f]={node:c,lastCount:0};r[f]={};for(var d=0;d<i.length;d++){var h=i[d];if(n[h]&&n[h].node.mode===c.mode){r[h][f]=a(n[h].lastCount+c.length,c.mode)-a(n[h].lastCount,c.mode);n[h].lastCount+=c.length}else{if(n[h]){n[h].lastCount=c.length}r[h][f]=a(c.length,c.mode)+4+Ew.getCharCountIndicator(c.mode,t)}}}i=u}for(d=0;d<i.length;d++){r[i[d]]["end"]=0}return{map:r,table:n}}function l(e,t){var n;var r=Ew.getBestModeForData(e);n=Ew.from(t,r);if(n!==Ew.BYTE&&n.bit<r.bit){throw new Error('"'+e+'"'+" cannot be encoded with mode "+Ew.toString(n)+".\n Suggested mode is: "+Ew.toString(r))}if(n===Ew.KANJI&&!jx.isKanjiModeEnabled()){n=Ew.BYTE}switch(n){case Ew.NUMERIC:return new Bw(e);case Ew.ALPHANUMERIC:return new Fw(e);case Ew.KANJI:return new Uw(e);case Ew.BYTE:return new zw(e)}}t.fromArray=function e(t){return t.reduce(function(e,t){if(typeof t==="string"){e.push(l(t,null))}else if(t.data){e.push(l(t.data,t.mode))}return e},[])};t.fromString=function e(n,r){var a=i(n,jx.isKanjiModeEnabled());var l=s(a);var c=u(l,r);var f=Ww.find_path(c.map,"start","end");var d=[];for(var h=1;h<f.length-1;h++){d.push(c.table[f[h]].node)}return t.fromArray(o(d))};t.rawSplit=function e(n){return t.fromArray(i(n,jx.isKanjiModeEnabled()))}});function qw(e,t){var n=e.size;var r=Gx.getPositions(t);for(var i=0;i<r.length;i++){var a=r[i][0];var o=r[i][1];for(var s=-1;s<=7;s++){if(a+s<=-1||n<=a+s){continue}for(var u=-1;u<=7;u++){if(o+u<=-1||n<=o+u){continue}if(s>=0&&s<=6&&(u===0||u===6)||u>=0&&u<=6&&(s===0||s===6)||s>=2&&s<=4&&u>=2&&u<=4){e.set(a+s,o+u,true,true)}else{e.set(a+s,o+u,false,true)}}}}}function Kw(e){var t=e.size;for(var n=8;n<t-8;n++){var r=n%2===0;e.set(n,6,r,true);e.set(6,n,r,true)}}function Yw(e,t){var n=qx.getPositions(t);for(var r=0;r<n.length;r++){var i=n[r][0];var a=n[r][1];for(var o=-2;o<=2;o++){for(var s=-2;s<=2;s++){if(o===-2||o===2||s===-2||s===2||o===0&&s===0){e.set(i+o,a+s,true,true)}else{e.set(i+o,a+s,false,true)}}}}}function $w(e,t){var n=e.size;var r=Aw.getEncodedBits(t);var i,a,o;for(var s=0;s<18;s++){i=Math.floor(s/3);a=s%3+n-8-3;o=(r>>s&1)===1;e.set(i,a,o,true);e.set(a,i,o,true)}}function Gw(e,t,n){var r=e.size;var i=Rw.getEncodedBits(t,n);var a,o;for(a=0;a<15;a++){o=(i>>a&1)===1;if(a<6){e.set(a,8,o,true)}else if(a<8){e.set(a+1,8,o,true)}else{e.set(r-15+a,8,o,true)}if(a<8){e.set(8,r-a-1,o,true)}else if(a<9){e.set(8,15-a-1+1,o,true)}else{e.set(8,15-a-1,o,true)}}e.set(r-8,8,1,true)}function Xw(e,t){var n=e.size;var r=-1;var i=n-1;var a=7;var o=0;for(var s=n-1;s>0;s-=2){if(s===6){s--}while(true){for(var u=0;u<2;u++){if(!e.isReserved(i,s-u)){var l=false;if(o<t.length){l=(t[o]>>>a&1)===1}e.set(i,s-u,l);a--;if(a===-1){o++;a=7}}}i+=r;if(i<0||n<=i){i-=r;r=-r;break}}}}function Zw(e,t,n){var r=new Ux;n.forEach(function(t){r.put(t.mode.bit,4);r.put(t.getLength(),Ew.getCharCountIndicator(t.mode,e));t.write(r)});var i=jx.getSymbolTotalCodewords(e);var a=tw.getTotalCodewordsCount(e,t);var o=(i-a)*8;if(r.getLengthInBits()+4<=o){r.put(0,4)}while(r.getLengthInBits()%8!==0){r.putBit(0)}var s=(o-r.getLengthInBits())/8;for(var u=0;u<s;u++){r.put(u%2?17:236,8)}return Jw(r,e,t)}function Jw(e,t,n){var r=jx.getSymbolTotalCodewords(t);var i=tw.getTotalCodewordsCount(t,n);var a=r-i;var o=tw.getBlocksCount(t,n);var s=r%o;var u=o-s;var l=Math.floor(r/o);var c=Math.floor(a/o);var f=c+1;var d=l-c;var h=new cw(d);var p=0;var v=new Array(o);var m=new Array(o);var g=0;var y=new Ox(e.buffer);for(var b=0;b<o;b++){var x=b<u?c:f;v[b]=y.slice(p,p+x);m[b]=h.encode(v[b]);p+=x;g=Math.max(g,x)}var w=new Ox(r);var _=0;var k,C;for(k=0;k<g;k++){for(C=0;C<o;C++){if(k<v[C].length){w[_++]=v[C][k]}}}for(k=0;k<d;k++){for(C=0;C<o;C++){w[_++]=m[C][k]}}return w}function Qw(e,t,n,r){var i;if(hx(e)){i=Vw.fromArray(e)}else if(typeof e==="string"){var a=t;if(!a){var o=Vw.rawSplit(e);a=Aw.getBestVersionForData(o,n)}i=Vw.fromString(e,a||40)}else{throw new Error("Invalid data")}var s=Aw.getBestVersionForData(i,n);if(!s){throw new Error("The amount of data is too big to be stored in a QR Code")}if(!t){t=s}else if(t<s){throw new Error("\n"+"The chosen QR Code version cannot contain this amount of data.\n"+"Minimum version required to store current data is: "+s+".\n")}var u=Zw(t,n,i);var l=jx.getSymbolSize(t);var c=new Vx(l);qw(c,t);Kw(c);Yw(c,t);Gw(c,n,0);if(t>=7){$w(c,t)}Xw(c,u);if(!r){r=Xx.getBestMask(c,Gw.bind(null,c,n))}Xx.applyMask(r,c);Gw(c,n,r);return{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:i}}var e_=function e(t,n){if(typeof t==="undefined"||t===""){throw new Error("No input text")}var r=zx.M;var i;var a;if(typeof n!=="undefined"){r=zx.from(n.errorCorrectionLevel,zx.M);i=Aw.from(n.version);a=Xx.from(n.maskPattern);if(n.toSJISFunc){jx.setToSJISFunction(n.toSJISFunc)}}return Qw(t,i,r,a)};var t_={create:e_};var n_=n(function(e,t){function n(e){if(typeof e!=="string"){throw new Error("Color should be defined as hex string")}var t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8){throw new Error("Invalid hex color: "+e)}if(t.length===3||t.length===4){t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))}if(t.length===6){t.push("F","F")}var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function e(t){if(!t){t={}}if(!t.color){t.color={}}var r=typeof t.margin==="undefined"||t.margin===null||t.margin<0?4:t.margin;var i=t.width&&t.width>=21?t.width:undefined;var a=t.scale||4;return{width:i,scale:i?4:a,margin:r,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};t.getScale=function e(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};t.getImageWidth=function e(n,r){var i=t.getScale(n,r);return Math.floor((n+r.margin*2)*i)};t.qrToImageData=function e(n,r,i){var a=r.modules.size;var o=r.modules.data;var s=t.getScale(a,i);var u=Math.floor((a+i.margin*2)*s);var l=i.margin*s;var c=[i.color.light,i.color.dark];for(var f=0;f<u;f++){for(var d=0;d<u;d++){var h=(f*u+d)*4;var p=i.color.light;if(f>=l&&d>=l&&f<u-l&&d<u-l){var v=Math.floor((f-l)/s);var m=Math.floor((d-l)/s);p=c[o[v*a+m]?1:0]}n[h++]=p.r;n[h++]=p.g;n[h++]=p.b;n[h]=p.a}}}});var r_=n(function(e,t){function n(e,t,n){e.clearRect(0,0,t.width,t.height);if(!t.style){t.style={}}t.height=n;t.width=n;t.style.height=n+"px";t.style.width=n+"px"}function r(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}t.render=function e(t,i,a){var o=a;var s=i;if(typeof o==="undefined"&&(!i||!i.getContext)){o=i;i=undefined}if(!i){s=r()}o=n_.getOptions(o);var u=n_.getImageWidth(t.modules.size,o);var l=s.getContext("2d");var c=l.createImageData(u,u);n_.qrToImageData(c.data,t,o);n(l,s,u);l.putImageData(c,0,0);return s};t.renderToDataURL=function e(n,r,i){var a=i;if(typeof a==="undefined"&&(!r||!r.getContext)){a=r;r=undefined}if(!a){a={}}var o=t.render(n,r,a);var s=a.type||"image/png";var u=a.rendererOpts||{};return o.toDataURL(s,u.quality)}});function i_(e,t){var n=e.a/255;var r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a_(e,t,n){var r=e+t;if(typeof n!=="undefined"){r+=" "+n}return r}function o_(e,t,n){var r="";var i=0;var a=false;var o=0;for(var s=0;s<e.length;s++){var u=Math.floor(s%t);var l=Math.floor(s/t);if(!u&&!a){a=true}if(e[s]){o++;if(!(s>0&&u>0&&e[s-1])){r+=a?a_("M",u+n,.5+l+n):a_("m",i,0);i=0;a=false}if(!(u+1<t&&e[s+1])){r+=a_("h",o);o=0}}else{i++}}return r}var s_=function e(t,n,r){var i=n_.getOptions(n);var a=t.modules.size;var o=t.modules.data;var s=a+i.margin*2;var u=!i.color.light.a?"":"<path "+i_(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>';var l="<path "+i_(i.color.dark,"stroke")+' d="'+o_(o,a,i.margin)+'"/>';var c='viewBox="'+"0 0 "+s+" "+s+'"';var f=!i.width?"":'width="'+i.width+'" height="'+i.width+'" ';var d='<svg xmlns="http://www.w3.org/2000/svg" '+f+c+">"+u+l+"</svg>";if(typeof r==="function"){r(null,d)}return d};var u_={render:s_};function l_(e,t,n,r,i){var a=[].slice.call(arguments,1);var o=a.length;var s=typeof a[o-1]==="function";if(!s&&!fx()){throw new Error("Callback required as last argument")}if(s){if(o<2){throw new Error("Too few arguments provided")}if(o===2){i=n;n=t;t=r=undefined}else if(o===3){if(t.getContext&&typeof i==="undefined"){i=r;r=undefined}else{i=r;r=n;n=t;t=undefined}}}else{if(o<1){throw new Error("Too few arguments provided")}if(o===1){n=t;t=r=undefined}else if(o===2&&!t.getContext){r=n;n=t;t=undefined}return new Promise(function(i,a){try{var o=t_.create(n,r);i(e(o,t,r))}catch(e){a(e)}})}try{var u=t_.create(n,r);i(null,e(u,t,r))}catch(e){i(e)}}var c_=t_.create;var f_=l_.bind(null,r_.render);var d_=l_.bind(null,r_.renderToDataURL);var h_=l_.bind(null,function(e,t,n){return u_.render(e,n)});var p_={create:c_,toCanvas:f_,toDataURL:d_,toString:h_};var v_=function(){this.on("mount",()=>{p_.toCanvas(this.refs.canvas,this.opts.data.value,{width:this.opts.data.size},e=>{if(e){console.error(e)}})})};i.tag2("viron-qrcode",'<canvas class="Qrcode_canvas" ref="canvas"></canvas>',"",'class="Qrcode"',function(e){this.external(v_)});var m_=function(){const e=this.riotx.get();const t=to({},{url:this.opts.endpoint.url,memo:this.opts.endpoint.memo});const n=e.getter("application.latestVersion");const r=encodeURIComponent(JSON.stringify(t));const i=`https://cam-inc.github.io/viron/${n}/#/endpointimport?endpoint=${r}`;this.data={size:200,value:i}};i.tag2("viron-endpoints-page-endpoint-menu-qrcode",'<div class="EndpointsPage_Endpoint_Menu_QRCode__title">QR„Ç≥„Éº„Éâ</div> <div class="EndpointsPage_Endpoint_Menu_QRCode__message">„É¢„Éê„Ç§„É´Á´ØÊú´„Å´„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíËøΩÂä†„Åß„Åç„Åæ„Åô„ÄÇ<br>„ÅäÂ•Ω„Åç„Å™QR„Ç≥„Éº„Éâ„É™„Éº„ÉÄ„Éº„ÅßË™≠„ÅøËæº„Çì„Åß‰∏ã„Åï„ÅÑ„ÄÇ</div> <div class="EndpointsPage_Endpoint_Menu_QRCode__canvas"> <viron-qrcode data="{data}"></viron-qrcode> </div>',"",'class="EndpointsPage_Endpoint_Menu_QRCode"',function(e){this.external(m_)});var g_=function(){const e=this.riotx.get();const t=!!this.opts.endpoint.token;const n=e.getter("layout.isDesktop");this.list=[];if(n){this.list.push({id:"qrcode",label:"QR„Ç≥„Éº„Éâ"})}this.list.push({id:"remove",label:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂâäÈô§"});if(t){this.list.push({id:"signout",label:"„É≠„Ç∞„Ç¢„Ç¶„Éà"})}const r=()=>{Promise.resolve().then(()=>e.action("modals.add","viron-endpoints-page-endpoint-menu-qrcode",{endpoint:this.opts.endpoint})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};const i=()=>{Promise.resolve().then(()=>e.action("endpoints.remove",this.opts.endpoint.key)).then(()=>e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};const a=()=>{Promise.resolve().then(()=>e.action("auth.remove",this.opts.endpoint.key)).then(()=>e.action("toasts.add",{message:"„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü„ÄÇ"})).then(()=>{this.close()}).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.handleItemSelect=(e=>{switch(e){case"qrcode":r();break;case"remove":i();break;case"signout":a();break;default:break}})};i.tag2("viron-endpoints-page-endpoint-menu",'<viron-list list="{list}" onselect="{handleItemSelect}"></viron-list>',"",'class="EndpointsPage_Endpoint_Menu"',function(e){this.external(g_)});var y_=function(){};i.tag2("viron-horizontal-rule",'<div class="HorizontalRule__line"></div> <virtual if="{!!opts.label}"> <div class="HorizontalRule__label">{opts.label}</div> <div class="HorizontalRule__line"></div> </virtual>',"",'class="HorizontalRule"',function(e){this.external(y_)});var b_=function(){const e=this.riotx.get();this.errorMessage=null;this.mailAddress="";this.password="";this.handleMailAddressChange=(e=>{this.mailAddress=e;this.update()});this.handlePasswordChange=(e=>{this.password=e;this.update()});this.handleSigninButtonSelect=(()=>{Promise.resolve().then(()=>e.action("auth.signinEmail",this.opts.endpointkey,this.opts.authtype,this.mailAddress,this.password)).then(()=>{this.opts.closer();this.getRouter().navigateTo(`/${this.opts.endpointkey}`)}).catch(()=>{this.errorMessage="„É≠„Ç∞„Ç§„É≥Âá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇÊ≠£„Åó„ÅÑ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Å®„Éë„Çπ„ÉØ„Éº„Éâ„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ‰ΩøÁî®„Åó„Åü„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„Åå‰∫à„ÇÅÁÆ°ÁêÜËÄÖ„Å®„Åó„Å¶ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";this.update()})})};i.tag2("viron-endpoints-page-endpoint-signin-email",'<div class="EndpointsPage_Endpoint_Signin_Email__error" if="{errorMessage}">{errorMessage}</div> <viron-textinput placeholder="ID„Åæ„Åü„ÅØ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ" val="{mailAddress}" onchange="{handleMailAddressChange}"></viron-textinput> <viron-textinput placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" type="password" val="{password}" onchange="{handlePasswordChange}"></viron-textinput> <viron-button class="EndpointsPage_Endpoint_Signin_Email__button" label="„É≠„Ç∞„Ç§„É≥" theme="secondary" onselect="{handleSigninButtonSelect}"></viron-button>',"",'class="EndpointsPage_Endpoint_Signin_Email"',function(e){this.external(b_)});function x_(e){e=Nl(e);if(e.search(/[\xC0-\xFF]/g)>-1){e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")}return e}var w_=x_;var __=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;function k_(e){e=Nl(e);return e.replace(__,"")}var C_=k_;function T_(e){e=Nl(e);return e.toUpperCase()}var S_=T_;function E_(e){e=Nl(e);return e.toLowerCase()}var A_=E_;function P_(e){e=Nl(e);e=w_(e);e=C_(e).replace(/[\-_]/g," ");if(/[a-z]/.test(e)&&/^|\s[A-Z]+\s|$/.test(e)){e=e.replace(/\s(\w+)/g,function(e,t){return/^[A-Z]+$/.test(t)?e:A_(e)})}else if(/\s/.test(e)){e=A_(e)}return e.replace(/\s[a-z]/g,S_).replace(/^\s*[A-Z]+/g,A_).replace(/\s+/g,"")}var O_=P_;function M_(e){e=Nl(e);return O_(e).replace(/^[a-z]/,S_)}var N_=M_;var R_=function(){const e=this.riotx.get();this.isGoogle=this.opts.authtype.provider==="google";this.label=N_(this.opts.authtype.provider);this.isMobile=e.getter("layout.isMobile");this.listen("layout",()=>{this.isMobile=e.getter("layout.isMobile");this.update()});this.handleButtonTap=(()=>{this.opts.closer();Promise.resolve().then(()=>e.action("auth.signinOAuth",this.opts.endpointkey,this.opts.authtype)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-endpoints-page-endpoint-signin-oauth",'<virtual if="{isGoogle}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__googleButton {\'EndpointsPage_Endpoint_Signin_Oauth__googleButton--large\': isMobile}" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"></div> </virtual> <virtual if="{isFacebook}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__facebookButton {\'EndpointsPage_Endpoint_Signin_Oauth__facebookButton--large\': isMobile}" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"></div> </virtual> <virtual if="{!isGoogle &amp;&amp; !isFacebook}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__button" onclick="{getClickHandler(\'handleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleButtonTap\')}"> <div class="EndpointsPage_Endpoint_Signin_Oauth__label">{label}</div> </div> </virtual>',"",'class="EndpointsPage_Endpoint_Signin_Oauth"',function(e){this.external(R_)});var D_=function(){const e=this.riotx.get();this.isDesktop=e.getter("layout.isDesktop");this.emails=rl(this.opts.authtypes,e=>{return e.type===Fl.authtypeEmail});this.oauths=rl(this.opts.authtypes,e=>{return e.type===Fl.authtypeOauth});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.update()});this.closer=(()=>{this.close()})};i.tag2("viron-endpoints-page-endpoint-signin",'<div class="EndpointsPage_Endpoint_Signin__main"> <virtual if="{!!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint_Signin__thumbnail" riot-style="background-image:url({opts.endpoint.thumbnail});"></div> </virtual> <virtual if="{!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint_Signin__thumbnailDefault"> <viron-icon-star></viron-icon-star> </div> </virtual> <div class="EndpointsPage_Endpoint_Signin__name">{opts.endpoint.name || \'- - -\'}</div> <div class="EndpointsPage_Endpoint_Signin__emails" if="{!!emails.length}"> <viron-endpoints-page-endpoint-signin-email each="{authtype in emails}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-email> </div> <virtual if="{!isDesktop &amp;&amp; !!oauths.length}"> <viron-horizontal-rule label="„Åæ„Åü„ÅØ"></viron-horizontal-rule> <div class="EndpointsPage_Endpoint_Signin__oauths EndpointsPage_Endpoint_Signin__oauths--centered"> <viron-endpoints-page-endpoint-signin-oauth each="{authtype in oauths}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-oauth> </div> </virtual> </div> <div class="EndpointsPage_Endpoint_Signin__aside" if="{isDesktop &amp;&amp; !!oauths.length}"> <div class="EndpointsPage_Endpoint_Signin__oauthMessage">„Åæ„Åü„ÅØ„ÄÅ„Åì„Å°„Çâ„Çí<br>Âà©Áî®„Åó„Å¶„É≠„Ç∞„Ç§„É≥</div> <div class="EndpointsPage_Endpoint_Signin__oauths"> <viron-endpoints-page-endpoint-signin-oauth each="{authtype in oauths}" authtype="{authtype}" endpointkey="{parent.opts.endpoint.key}" closer="{closer}"></viron-endpoints-page-endpoint-signin-oauth> </div> </div>',"",'class="EndpointsPage_Endpoint_Signin"',function(e){this.external(D_)});var B_=function(){const e=this.riotx.get();this.isSelfDragged=false;this.isDragging=e.getter("application.isDragging");this.isPrevDroppable=false;this.isNextDroppable=false;this.listen("application",()=>{if(!this.isMounted){return}this.isDragging=e.getter("application.isDragging");this.update()});this.handleDragStart=(t=>{t.dataTransfer.effectAllowed="move";t.dataTransfer.setData("text/plain",this.opts.endpoint.key);e.action("application.startDrag");this.isSelfDragged=true;this.update()});this.handleDrag=(()=>{});this.handleDragEnd=(()=>{e.action("application.endDrag");this.isSelfDragged=false;this.update()});this.handlePrevDragEnter=(e=>{e.preventDefault();this.isPrevDroppable=true;this.update()});this.handleNextDragEnter=(e=>{e.preventDefault();this.isNextDroppable=true;this.update()});this.handlePrevDragOver=(e=>{e.preventDefault()});this.handleNextDragOver=(e=>{e.preventDefault()});this.handlePrevDragLeave=(()=>{this.isPrevDroppable=false;this.update()});this.handleNextDragLeave=(()=>{this.isNextDroppable=false;this.update()});const t=(t,n)=>{const r=t.dataTransfer.getData("text/plain");Promise.resolve().then(()=>e.action("endpoints.changeOrder",r,n)).catch(t=>e.action("modals.add","viron-error",{error:t}))};this.handlePrevDrop=(e=>{this.isPrevDroppable=false;this.update();t(e,this.opts.endpoint.order)});this.handleNextDrop=(e=>{this.isNextDroppable=false;this.update();t(e,this.opts.endpoint.order+1)});this.handleTap=(()=>{const t=this.opts.endpoint.key;Promise.resolve().then(()=>e.action("auth.validate",t)).then(n=>{if(n){this.getRouter().navigateTo(`/${t}`);return Promise.resolve()}return Promise.resolve().then(()=>e.action("auth.getTypes",t)).then(t=>e.action("modals.add","viron-endpoints-page-endpoint-signin",{endpoint:this.opts.endpoint,authtypes:t},{isSpread:true,width:648}))}).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleMenuTap=(t=>{t.stopPropagation();Promise.resolve().then(()=>{this.closeAllFloats()}).then(()=>{const t=this.refs.menu.root;const n=t.getBoundingClientRect();e.action("popovers.add","viron-endpoints-page-endpoint-menu",{endpoint:this.opts.endpoint},{x:n.left+n.width/2,y:n.bottom,width:228,direction:"TR",watchElm:t})})})};i.tag2("viron-endpoints-page-endpoint",'<div class="EndpointsPage_Endpoint__dropareaMarker EndpointsPage_Endpoint__dropareaMarker--prev {\'EndpointsPage_Endpoint__dropareaMarker--active\': isPrevDroppable}"></div> <div class="EndpointsPage_Endpoint__content"> <div class="EndpointsPage_Endpoint__head"> <virtual if="{!!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint__thumbnail" riot-style="background-image:url({opts.endpoint.thumbnail});"></div> </virtual> <virtual if="{!opts.endpoint.thumbnail}"> <div class="EndpointsPage_Endpoint__thumbnailDefault"> <viron-icon-star></viron-icon-star> </div> </virtual> <div class="EndpointsPage_Endpoint__headContent"> <div class="EndpointsPage_Endpoint__name">{opts.endpoint.name || \'- - -\'}</div> <div class="EndpointsPage_Endpoint__urlWrapper"> <div class="EndpointsPage_Endpoint__color EndpointsPage_Endpoint__color--{opts.endpoint.color || \'blue\'}"></div> <div class="EndpointsPage_Endpoint__url">{opts.endpoint.url}</div> </div> </div> <viron-icon-setting class="EndpointsPage_Endpoint__menu" ref="menu" onclick="{getClickHandler(\'handleMenuTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuTap\')}"></viron-icon-setting> </div> <div class="EndpointsPage_Endpoint__body"> <div class="EndpointsPage_Endpoint__description">{!!opts.endpoint.thumbnail ? (opts.endpoint.description || \'-\') : \'„É≠„Ç∞„Ç§„É≥„ÅßÁÆ°ÁêÜÁîªÈù¢ÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åô\'}</div> <div class="EndpointsPage_Endpoint__tags"> <viron-tag each="{tag in opts.endpoint.tags}" label="{tag}"></viron-tag> </div> </div> <div class="EndpointsPage_Endpoint__droparea EndpointsPage_Endpoint__droparea--prev" if="{isDragging &amp;&amp; !isSelfDragged}" ondragenter="{handlePrevDragEnter}" ondragover="{handlePrevDragOver}" ondragleave="{handlePrevDragLeave}" ondrop="{handlePrevDrop}"></div> <div class="EndpointsPage_Endpoint__droparea EndpointsPage_Endpoint__droparea--next" if="{isDragging &amp;&amp; !isSelfDragged}" ondragenter="{handleNextDragEnter}" ondragover="{handleNextDragOver}" ondragleave="{handleNextDragLeave}" ondrop="{handleNextDrop}"></div> </div> <div class="EndpointsPage_Endpoint__dropareaMarker EndpointsPage_Endpoint__dropareaMarker--next {\'EndpointsPage_Endpoint__dropareaMarker--active\': isNextDroppable}"></div>',"",'class="EndpointsPage_Endpoint" draggable="{opts.isdraggable}" ondragstart="{handleDragStart}" ondrag="{handleDrag}" ondragend="{handleDragEnd}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(B_)});var L_=function(){const e=this.riotx.get();this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.layoutType=e.getter("layout.type");this.endpoints=e.getter("endpoints.allByOrderFiltered");this.listen("application",()=>{this.endpoints=e.getter("endpoints.allByOrderFiltered");this.update()});this.listen("endpoints",()=>{this.endpoints=e.getter("endpoints.allByOrderFiltered");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.layoutType=e.getter("layout.type");this.update()})};i.tag2("viron-endpoints-page",'<div class="EndpointsPage__head"> <div class="EndpointsPage__title">„Éõ„Éº„É†</div> </div> <div class="EndpointsPage__container"> <viron-endpoints-page-endpoint each="{endpoint in endpoints}" endpoint="{endpoint}" isdraggable="{true}"></viron-endpoints-page-endpoint> <viron-endpoints-page-add></viron-endpoints-page-add> </div>',"",'class="EndpointsPage EndpointsPage--{layoutType}"',function(e){this.external(L_)});var I_=function(){};i.tag2("viron-notfound-page","<div>Not Found...</div>","",'class="NotfoundPage"',function(e){this.external(I_)});var F_=function(){};i.tag2("viron-application-blocker","","",'class="Application_Blocker"',function(e){this.external(F_)});var j_=function(){this.isActive=false;this.on("mount",()=>{setTimeout(()=>{this.isActive=true;this.update()},100)})};i.tag2("viron-application-dimmer","","","class=\"Application_Dimmer {'Application_Dimmer--active': isActive}\"",function(e){this.external(j_)});const z_=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var H_=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>z_()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("drawers.remove",this.opts.id)},1e3)};this.layoutType=e.getter("layout.type");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.update()});this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isDrawer:true,drawerCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}})};i.tag2("viron-drawer",'<div class="Drawer__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Drawer__contentWrapper"> <div class="Drawer__content" ref="content"></div> </div> </div>',"","class=\"Drawer Drawer--{opts.theme} {'Drawer--visible' : isVisible, 'Drawer--hidden': isHidden} Drawer--{layoutType} {opts.isnarrow ? 'Drawer--narrow' : ''}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(H_)});var U_=function(){const e=this.riotx.get();this.drawers=e.getter("drawers.all");this.listen("drawers",()=>{this.drawers=e.getter("drawers.all");this.update()})};i.tag2("viron-application-drawers",'<virtual each="{drawers}"> <viron-drawer id="{id}" tagname="{tagName}" tagopts="{tagOpts}" theme="{drawerOpts.theme}" isnarrow="{drawerOpts.isNarrow}"></viron-drawer> </virtual>',"",'class="Application_Drawers"',function(e){this.external(U_)});var W_=function(){const e=this.riotx.get();const t=5;this.names=e.getter("endpoints.namesFiltered",t);this._tags=e.getter("endpoints.tagsFiltered",t);this.isEmpty=!this.names.length&&!this._tags.length;this.listen("application",()=>{this.names=e.getter("endpoints.namesFiltered",t);this._tags=e.getter("endpoints.tagsFiltered",t);this.isEmpty=!this.names.length&&!this._tags.length;this.update()});this.handleMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleItemTap=(t=>{const n=t.item.value||"";Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",n)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-application-header-filter-autocomplete",'<virtual if="{isEmpty}"> <div class="Application_Header_Filter_Autocomplete__empty">ÂÄôË£úÁÑ°„Åó</div> </virtual> <virtual if="{!isEmpty}"> <virtual if="{!!names.length}"> <div class="Application_Header_Filter_Autocomplete__list"> <div class="Application_Header_Filter_Autocomplete__label">„Ç´„Éº„Éâ</div> <div class="Application_Header_Filter_Autocomplete__item" each="{value in names}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}">{value}</div> </div> </virtual> <virtual if="{!!_tags.length}"> <div class="Application_Header_Filter_Autocomplete__list"> <div class="Application_Header_Filter_Autocomplete__label">„Çø„Ç∞</div> <div class="Application_Header_Filter_Autocomplete__item" each="{value in _tags}" onclick="{getClickHandler(\'handleItemTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleItemTap\')}">{value}</div> </div> </virtual> </virtual>',"",'class="Application_Header_Filter_Autocomplete" onmousedown="{handleMouseDown}"',function(e){this.external(W_)});var V_=function(){const e=this.riotx.get();this.isOpened=false;this.filterText=e.getter("application.endpointFilterText");this.listen("application",()=>{if(!this.refs.input){return}const t=e.getter("application.endpointFilterText");if(t!==this.filterText){this.refs.input.value=this.filterText=e.getter("application.endpointFilterText")}});this.handleCloseIconMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleCloseIconTap=(()=>{Promise.resolve().then(()=>e.action("application.resetEndpointFilterText")).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleSearchIconMouseDown=(e=>{e.stopPropagation();e.preventDefault()});this.handleSearchIconTap=(()=>{if(this.isOpened){Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",this.refs.input.value||"")).catch(t=>e.action("modals.add","viron-error",{error:t}));return}this.isOpened=true;this.update();if(this.isOpened){setTimeout(()=>{if(!this.refs.input){return}this.refs.input.value=e.getter("application.endpointFilterText");this.refs.input.focus()},100)}});this.handleFormSubmit=(()=>{Promise.resolve().then(()=>e.action("application.updateEndpointFilterText",this.refs.input.value||"")).catch(t=>e.action("modals.add","viron-error",{error:t}))});this.handleInputFocus=(()=>{new Promise(e=>{setTimeout(e,500)}).then(()=>{const t=this.root;if(!t){return}const n=t.getBoundingClientRect();e.action("popovers.add","viron-application-header-filter-autocomplete",null,{x:n.left+n.width/2,y:n.bottom-10,width:n.width,direction:"T"})})});this.handleInputBlur=(()=>{this.isOpened=false;this.update()});this.handleInputChange=(e=>{e.stopPropagation()});this.handleInputInput=(t=>{const n=t.target.value||"";Promise.resolve().then(()=>e.action("application.updateEndpointTempFilterText",n)).catch(t=>e.action("modals.add","viron-error",{error:t}))})};i.tag2("viron-application-header-filter",'<viron-icon-close class="Application_Header_Filter__closeIcon" if="{isOpened}" onmousedown="{handleCloseIconMouseDown}" onclick="{getClickHandler(\'handleCloseIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseIconTap\')}"></viron-icon-close> <form class="Application_Header_Filter__form" if="{isOpened}" onsubmit="{handleFormSubmit}"> <input class="Application_Header_Filter__input" ref="input" placeholder="„Ç´„Éº„Éâ„ÇíÊ§úÁ¥¢" onfocus="{handleInputFocus}" onblur="{handleInputBlur}" oninput="{handleInputInput}" onchange="{handleInputChange}"> </form> <viron-icon-search class="Application_Header_Filter__searchIcon" onmousedown="{handleSearchIconMouseDown}" onclick="{getClickHandler(\'handleSearchIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleSearchIconTap\')}"></viron-icon-search> <div class="Application_Header_Filter__text" if="{!isOpened &amp;&amp; !!filterText}">filtered by: {filterText}</div>',"","class=\"Application_Header_Filter {'Application_Header_Filter--opened': isOpened}\"",function(e){this.external(V_)});var q_=function(){const e=this.riotx.get();this.isOpened=false;this.getPagesHeight=(()=>{if(!this.isOpened){return 0}const e=this.refs.pagesInner;if(!e){return 0}const t=e.getBoundingClientRect();return t.height});this.handleHeadTap=(()=>{this.isOpened=!this.isOpened;this.update()});this.handleIndependentHeadTap=(()=>{this.opts.closer();const t=this.opts.group.pages[0].id;this.getRouter().navigateTo(`/${e.getter("current.all")}/${t}`)});this.handlePageTap=(t=>{this.opts.closer();const n=t.item.page.id;this.getRouter().navigateTo(`/${e.getter("current.all")}/${n}`)})};i.tag2("viron-application-menu-group",'<virtual if="{!opts.group.isIndependent}"> <div class="Application_Menu_Group__head" onclick="{getClickHandler(\'handleHeadTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleHeadTap\')}"> <div class="Application_Menu_Group__name">{opts.group.name}</div> <viron-icon-arrow-up class="Application_Menu_Group__arrow"></viron-icon-arrow-up> </div> <div class="Application_Menu_Group__pages" riot-style="height:{getPagesHeight()}px;"> <div class="Application_Menu_Group__pagesInner" ref="pagesInner"> <div class="Application_Menu_Group__page" each="{page in opts.group.pages}" onclick="{getClickHandler(\'handlePageTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handlePageTap\')}">{page.name}</div> </div> </div> </virtual> <virtual if="{opts.group.isIndependent}"> <div class="Application_Menu_Group__head" onclick="{getClickHandler(\'handleIndependentHeadTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleIndependentHeadTap\')}"> <div class="Application_Menu_Group__name">{opts.group.pages[0].name}</div> </div> </virtual>',"","class=\"Application_Menu_Group {'Application_Menu_Group--open': isOpened}\"",function(e){this.external(q_)});var K_=function(){const e=this.riotx.get();this.closer=(()=>{this.close()});this.menu=e.getter("viron.menu");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.listen("viron",()=>{this.menu=e.getter("viron.menu");this.update()});this.listen("layout",()=>{if(!this.isMounted){return}this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});this.handleHomeButtonTap=(()=>{this.close();this.getRouter().navigateTo("/")})};i.tag2("viron-application-menu",'<div class="Application_Menu__bg"></div> <div class="Application_Menu__overlay"></div> <div class="Application_Menu__content"> <div class="Application_Menu__head"> <div class="Application_Menu__homeButton" onclick="{getClickHandler(\'handleHomeButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleHomeButtonTap\')}"> <viron-icon-arrow-left class="Application_Menu__arrow"></viron-icon-arrow-left> <viron-icon-logo class="Application_Menu__logo"></viron-icon-logo> </div> </div> <div class="Application_Menu__body"> <div class="Application_Menu__section" each="{section in menu}"> <div class="Application_Menu__sectionName">{section.name}</div> <div class="Application_Menu__groups"> <viron-application-menu-group each="{group in section.groups}" group="{group}" closer="{parent.closer}"></viron-application-menu-group> </div> </div> </div> </div>',"",'class="Application_Menu Application_Menu--{layoutType}"',function(e){this.external(K_)});var Y_=function(){const e=this.riotx.get();this.name=e.getter("viron.name");this.color=e.getter("viron.color");const t=e.getter("viron.endpointKey");const n=e.getter("endpoints.one",t);this.url=!!n?n.url:null;this.description=!!n?n.description:null;this._tags=!!n?n.tags:null;this.listen("viron",()=>{this.name=e.getter("viron.name");this.color=e.getter("viron.color");const t=e.getter("viron.endpointKey");const n=e.getter("endpoints.one",t);this.url=!!n?n.url:null;this.description=!!n?n.description:null;this._tags=!!n?n.tags:null;this.update()})};i.tag2("viron-application-header-info",'<div class="Application_Header_Info__name">{name}</div> <div class="Application_Header_Info__urlWrapper"> <div class="Application_Header_Info__color Application_Header_Info__color--{color || \'blue\'}"></div> <div class="Application_Header_Info__url">{url}</div> </div> <div class="Application_Header_Info__description" if="{description}">{description}</div> <div class="Application_Header_Info__tags" if="{_tags &amp;&amp; !!_tags.length}"> <viron-tag each="{tag in _tags}" label="{tag}"></viron-tag> </div>',"",'class="Application_Header_Info"',function(e){this.external(Y_)});var $_=function(){const e=this.riotx.get();this.handleClearButtonTap=(()=>{Promise.resolve().then(()=>e.action("endpoints.removeAll")).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-clear",'<div class="Application_Header_Menu_Clear__title">ÂÖ®„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÂâäÈô§</div> <div class="Application_Header_Menu_Clear__description">„Éõ„Éº„É†„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÁ©∫„Å´„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ</div> <div class="Application_Header_Menu_Clear__control"> <viron-button label="ÂâäÈô§„Åô„Çã" theme="secondary" onselect="{handleClearButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Clear"',function(e){this.external($_)});var G_=function(){const e=this.riotx.get();const t=e.getter("endpoints.allWithoutToken");this.handleExportButtonTap=(()=>{Promise.resolve().then(()=>{vs(JSON.stringify(t),"endpoints.json","application/json")}).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíÊõ∏„ÅçÂá∫„Åó„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-export",'<div class="Application_Header_Menu_Export__title">„Éõ„Éº„É†„Çí‰øùÂ≠ò</div> <div class="Application_Header_Menu_Export__description">„Éõ„Éº„É†„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„Çíjson„Éï„Ç°„Ç§„É´„Å®„Åó„Å¶Êõ∏„ÅçÂá∫„Åó„Åæ„Åô„ÄÇ</div> <div class="Application_Header_Menu_Export__control"> <viron-button label="‰øùÂ≠ò„Åô„Çã" onselect="{handleExportButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Export"',function(e){this.external(G_)});var X_=function(){const e=this.riotx.get();this.errorMessage=null;this.endpoints=null;this.handleFileChange=(t=>{if(!t){this.errorMessage=null;this.endpoints=null;this.update();return}if(!e.getter("ua.isEdge")&&t.type!=="application/json"){this.errorMessage="JSONÂΩ¢Âºè„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ";this.endpoints=null;this.update();return}const n=new FileReader;n.readAsText(t);n.onerror=(e=>{this.endpoints=null;this.errorMessage=e.message||"„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ";this.update()});n.onload=(e=>{const t=e.target.result;try{this.endpoints=JSON.parse(t);this.errorMessage=""}catch(e){this.endpoints=null;this.errorMessage=e.message||"JSONÂΩ¢Âºè„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶‰∏ã„Åï„ÅÑ„ÄÇ"}finally{this.update()}})});this.handleImportButtonTap=(()=>{if(!this.endpoints){return}Promise.resolve().then(()=>e.action("endpoints.mergeAll",this.endpoints)).then(()=>{this.close();return e.action("toasts.add",{message:"„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü„ÄÇ"})}).catch(t=>{this.close();return e.action("modals.add","viron-error",{error:t})})})};i.tag2("viron-application-header-menu-import",'<div class="Application_Header_Menu_Import__title">„Éõ„Éº„É†„ÇíË™≠„ÅøËæº„Åø</div> <div class="Application_Header_Menu_Import__description">„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà‰∏ÄË¶ß„Çí„Éõ„Éº„É†„Å´ÂèçÊò†„Åó„Åæ„Åô„ÄÇ</div> <div class="Application_Header_Menu_Import__error" if="{errorMessage}">{errorMessage}</div> <div class="Application_Header_Menu_Import__control"> <viron-uploader accept="application/json" onchange="{handleFileChange}"></viron-uploader> <viron-button label="Ë™≠„ÅøËæº„ÇÄ" isdisabled="{!endpoints}" onselect="{handleImportButtonTap}"></viron-button> </div>',"",'class="Application_Header_Menu_Import"',function(e){this.external(X_)});var Z_=function(){const e=this.riotx.get();const t=e.getter("location.isTop");const n=e.getter("layout.isDesktop");const r=[{label:"„Éò„É´„Éó",id:"navigate_to_doc"}];const i=[];i.push({label:"ËøΩÂä†",id:"add_endpoint"});if(n){i.push({label:"„Éõ„Éº„É†„Çí‰øùÂ≠ò",id:"export_endpoints"});i.push({label:"„Éõ„Éº„É†„ÇíË™≠„ÅøËæº„Åø",id:"import_endpoints"})}i.push({label:"ÂÖ®„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÂâäÈô§",id:"remove_all_endpoints"});if(t){this.actions=[].concat(i).concat(r)}else{this.actions=[].concat(r)}this.showEntryModal=(()=>{e.action("modals.add","viron-application-header-menu-entry")});this.showExportModal=(()=>{e.action("modals.add","viron-application-header-menu-export")});this.showImportModal=(()=>{e.action("modals.add","viron-application-header-menu-import")});this.showClearModal=(()=>{e.action("modals.add","viron-application-header-menu-clear")});this.handleActionSelect=(e=>{switch(e){case"navigate_to_doc":window.open("https://cam-inc.github.io/viron-doc/","_blank");this.close();break;case"add_endpoint":this.showEntryModal();this.close();break;case"export_endpoints":this.showExportModal();this.close();break;case"import_endpoints":this.showImportModal();this.close();break;case"remove_all_endpoints":this.showClearModal();this.close();break;default:this.close();break}})};i.tag2("viron-application-header-menu",'<viron-list list="{actions}" size="{6}" onselect="{handleActionSelect}"></viron-list>',"",'class="Application_Header_Menu"',function(e){this.external(Z_)});var J_=function(){const e=this.riotx.get();this.isTopPage=e.getter("location.isTop");this.isMenuOpened=e.getter("application.isMenuOpened");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.name=e.getter("viron.name");this.thumbnail=e.getter("viron.thumbnail");this.color=e.getter("viron.color");this.listen("location",()=>{this.isTopPage=e.getter("location.isTop");this.update()});this.listen("application",()=>{this.isMenuOpened=e.getter("application.isMenuOpened");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});this.listen("viron",()=>{this.name=e.getter("viron.name");this.thumbnail=e.getter("viron.thumbnail");this.color=e.getter("viron.color");this.update()});this.handleMenuToggleButtonTap=(()=>{if(!this.isMobile){e.action("application.toggleMenu");return}e.action("modals.add","viron-application-menu",null,{isSpread:true,class:"Application_Menu_Modal"})});this.handleInfoTap=(()=>{const t=this.refs.thumbnail.getBoundingClientRect();e.action("popovers.add","viron-application-header-info",null,{x:t.left+t.width/2,y:t.bottom,width:312,direction:"TR"})});this.handleDotsIconTap=(()=>{const t=this.refs.dotsIcon.root.getBoundingClientRect();e.action("popovers.add","viron-application-header-menu",null,{x:t.left+t.width/2,y:t.bottom,width:228,direction:"TR"})})};i.tag2("viron-application-header",'<div class="Application_Header__item"> <virtual if="{isTopPage &amp;&amp; isDesktop}"> <viron-application-header-filter></viron-application-header-filter> </virtual> <virtual if="{isTopPage &amp;&amp; isMobile}"> <viron-icon-logo></viron-icon-logo> </virtual> <virtual if="{!isTopPage}"> <virtual if="{isMenuOpened}"> <viron-icon-menu class="Application_Header__menuIcon" onclick="{getClickHandler(\'handleMenuToggleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuToggleButtonTap\')}"></viron-icon-menu> </virtual> <virtual if="{!isMenuOpened}"> <viron-icon-menu-invert class="Application_Header__menuIcon" onclick="{getClickHandler(\'handleMenuToggleButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleMenuToggleButtonTap\')}"></viron-icon-menu-invert> </virtual> </virtual> </div> <div class="Application_Header__item" if="{!isTopPage &amp;&amp; isMobile}"> <div class="Application_Header__thumbnail" riot-style="background-image:url({thumbnail});"></div> </div> <div class="Application_Header__item Application_Header__item--tail"> <virtual if="{!isTopPage}"> <virtual if="{!isMobile}"> <div class="Application_Header__info" onclick="{getClickHandler(\'handleInfoTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleInfoTap\')}"> <div class="Application_Header__color Application_Header__color--{color}"></div> <div class="Application_Header__name">{name}</div> <viron-icon-arrow-right class="Application_Header__arrow"></viron-icon-arrow-right> <div class="Application_Header__thumbnail" ref="thumbnail" riot-style="background-image:url({thumbnail});"></div> </div> </virtual> </virtual> <viron-icon-dots class="Application_Header__dotsIcon" ref="dotsIcon" onclick="{getClickHandler(\'handleDotsIconTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleDotsIconTap\')}"></viron-icon-dots> </div>',"",'class="Application_Header"',function(e){this.external(J_)});const Q_=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var ek=function(){const e=this.riotx.get();this.path=this.opts.tagopts.path;const t=()=>{Promise.resolve().then(()=>Q_()).then(()=>{this.isVisible=true;this.update()})};const n=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("mediapreviews.remove",this.opts.id)},1e3)};this.on("mount",()=>{t();window.addEventListener("keydown",this.handleKeyDown)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{n()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleCloseButtonTap=(()=>{n()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:n();break;default:break}})};i.tag2("viron-mediapreview",'<div class="Mediapreview__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Mediapreview__image" riot-style="background-image: url({path});"></div> <div class="Mediapreview__path">{path}</div> <div class="Mediapreview__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> </div>',"",'class="Mediapreview {\'Mediapreview--visible\': isVisible, \'Mediapreview--hidden\': isHidden} Mediapreview--{opts.mediapreviewopts.theme}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(ek)});var tk=function(){const e=this.riotx.get();this.mediapreviews=e.getter("mediapreviews.all");this.listen("mediapreviews",()=>{this.mediapreviews=e.getter("mediapreviews.all");this.update()})};i.tag2("viron-application-mediapreviews",'<virtual each="{mediapreviews}"> <viron-mediapreview id="{id}" tagopts="{tagOpts}" mediapreviewopts="{mediapreviewOpts}"></viron-mediapreview> </virtual>',"",'class="Application_Mediapreviews"',function(e){this.external(tk)});const nk=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var rk=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>nk()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("modals.remove",this.opts.id)},1e3)};this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.update()});this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isModal:true,modalCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation();this.closeAllFloats()});this.handleCloseButtonTap=(()=>{r()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}})};i.tag2("viron-modal",'<div class="Modal__frame" riot-style="{(isDesktop &amp;&amp; !!opts.modalopts.width) ? \'width:\' +opts.modalopts.width + \'px\' : \'\'};" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="Modal__closeButton" onclick="{getClickHandler(\'handleCloseButtonTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleCloseButtonTap\')}"> <viron-icon-close></viron-icon-close> </div> <div class="Modal__content" ref="content"></div> </div>',"","class=\"Modal {'Modal--visible': isVisible, 'Modal--hidden': isHidden} Modal--{opts.modalopts.theme} Modal--{layoutType} {opts.modalopts.isSpread ? 'Modal--spread': ''} {opts.modalopts.class}\" onclick=\"{getClickHandler('handleTap')}\" ontouchstart=\"{getTouchStartHandler()}\" ontouchmove=\"{getTouchMoveHandler()}\" ontouchend=\"{getTouchEndHandler('handleTap')}\"",function(e){this.external(rk)});var ik=function(){const e=this.riotx.get();this.modals=e.getter("modals.all");this.listen("modals",()=>{this.modals=e.getter("modals.all");this.update()})};i.tag2("viron-application-modals",'<virtual each="{modals}"> <viron-modal id="{id}" tagname="{tagName}" tagopts="{tagOpts}" modalopts="{modalOpts}"></viron-modal> </virtual>',"",'class="Application_Modals"',function(e){this.external(ik)});const ak="ontouchstart"in document;const ok=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var sk=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>ok()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("popovers.remove",this.opts.id)},1e3)};const a=this.opts.popoveropts.watchElm;let o=null;if(!!a){const e=a.getBoundingClientRect();const t=e.left;const n=e.top;o=window.setInterval(()=>{if(!a){r();window.clearInterval(o)}const e=a.getBoundingClientRect();const i=e.left;const s=e.top;if(i!==t||s!==n){r();window.clearInterval(o)}},100)}this.isVisible=false;this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isPopover:true,popoverCloser:r},this.opts.tagopts))[0];n();window.addEventListener("resize",this.handleWindowResize);window.addEventListener("scroll",this.handleWindowScroll);window.addEventListener("click",this.handleWindowClick);window.addEventListener("touchend",this.handleWindowTouchEnd)}).on("before-unmount",()=>{t.unmount(true);window.clearInterval(o)}).on("unmount",()=>{window.removeEventListener("resize",this.handleWindowResize);window.removeEventListener("scroll",this.handleWindowScroll);window.removeEventListener("click",this.handleWindowClick);window.removeEventListener("touchend",this.handleWindowTouchend)});this.getPosition=(()=>{const e=this.opts.popoveropts;const t=[];t.push(`left:${e.x}px;`);t.push(`top:${e.y}px;`);return t.join("")});this.getSize=(()=>{const e=this.opts.popoveropts;const t=[];t.push(`width:${e.width}px;`);if(!!e.height){t.push(`height:${e.height}px;`)}return t.join("")});this.handleFrameInnerTap=(e=>{e.stopPropagation()});this.handleFrameInnerScroll=(e=>{e.stopPropagation()});this.handleWindowResize=(()=>{r()});this.handleWindowScroll=(()=>{r()});this.handleWindowClick=(()=>{if(ak){return}r()});this.handleWindowTouchEnd=(()=>{r()})};i.tag2("viron-popover",'<div class="Popover__blocker"></div> <div class="Popover__frameOuter"> <div class="Popover__frameInner" riot-style="{getSize()};" onclick="{getClickHandler(\'handleFrameInnerTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameInnerTap\')}" onscroll="{handleFrameInnerScroll}"> <div class="Popover__content" ref="content"></div> </div> </div> <div class="Popover__arrow"></div>',"","class=\"Popover {'Popover--visible': isVisible, 'Popover--hidden': isHidden} Popover--{opts.popoveropts.direction} {'Popover--error': opts.popoveropts.isError}\" riot-style=\"{getPosition()};\"",function(e){this.external(sk)});const uk=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var lk=function(){const e=this.riotx.get();let t;const n=()=>{Promise.resolve().then(()=>uk()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isHidden=true;this.update();setTimeout(()=>{e.action("popovers.remove",this.opts.id)},1e3)};this.on("mount",()=>{t=i.mount(this.refs.content,this.opts.tagname,to({isPopover:true,popoverCloser:r},this.opts.tagopts))[0];n();window.addEventListener("keydown",this.handleKeyDown);window.addEventListener("resize",this.handleWindowResize)}).on("before-unmount",()=>{t.unmount(true)}).on("unmount",()=>{window.removeEventListener("keydown",this.handleKeyDown);window.removeEventListener("resize",this.handleWindowResize)});this.handleTap=(()=>{r()});this.handleFrameTap=(e=>{e.stopPropagation()});this.handleKeyDown=(e=>{switch(e.keyCode){case 27:r();break;default:break}});this.handleWindowResize=(()=>{r()})};i.tag2("viron-popover-spread",'<div class="PopoverSpread__frame" onclick="{getClickHandler(\'handleFrameTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleFrameTap\')}"> <div class="PopoverSpread__content" ref="content"></div> </div>',"",'class="PopoverSpread {\'PopoverSpread--visible\': isVisible, \'PopoverSpread--hidden\': isHidden}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(lk)});var ck=function(){const e=this.riotx.get();this.popovers=e.getter("popovers.all");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.listen("popovers",()=>{this.popovers=e.getter("popovers.all");this.update()});this.listen("layout",()=>{this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()})};i.tag2("viron-application-popovers",'<virtual each="{popovers}"> <virtual if="{isDesktop}"> <viron-popover id="{id}" tagname="{tagName}" tagopts="{tagOpts}" popoveropts="{popoverOpts}"></viron-popover> </virtual> <virtual if="{isMobile}"> <viron-popover-spread id="{id}" tagname="{tagName}" tagopts="{tagOpts}" popoveropts="{popoverOpts}"></viron-popover-spread> </virtual> </virtual>',"",'class="Application_Popovers"',function(e){this.external(ck)});var fk=function(){};i.tag2("viron-application-poster",'<div class="Application_Poster__bg"></div> <div class="Application_Poster__overlay"></div> <div class="Application_Poster__content"> <viron-icon-logo class="Application_Poster__logo"></viron-icon-logo> <div class="Application_Poster__label">„Éõ„Éº„É†</div> </div>',"",'class="Application_Poster"',function(e){this.external(fk)});var dk=function(){this.isAnimating=this.opts.isactive;this.on("update",()=>{if(this.opts.isactive){this.isAnimating=true}else if(this.isAnimating){setTimeout(()=>{this.isAnimating=false;this.update()},300)}})};i.tag2("viron-application-progress-linear",'<div class="Application_ProgressLinear__bar"> <div class="Application_ProgressLinear__particle"></div> <div class="Application_ProgressLinear__particle"></div> </div>',"","class=\"Application_ProgressLinear {'Application_ProgressLinear--visible' : opts.isactive, 'Application_ProgressLinear--animating' : isAnimating}\"",function(e){this.external(dk)});var hk=function(){};i.tag2("viron-application-splash",'<div class="Application_Splash__container"> <viron-icon-logo class="Application_Splash__logo"></viron-icon-logo> </div>',"",'class="Application_Splash"',function(e){this.external(hk)});const pk=e=>{if(e===void 0)e=100;return new Promise(t=>setTimeout(t,e))};var vk=function(){const e=this.riotx.get();let t;this.isVisible=false;const n=()=>{Promise.resolve().then(()=>pk()).then(()=>{this.isVisible=true;this.update()})};const r=()=>{this.isVisible=false;this.update();setTimeout(()=>{e.action("toasts.remove",this.opts.id)},1e3)};this.on("mount",()=>{n();if(this.opts.autohide){t=setTimeout(()=>{r()},this.opts.timeout)}}).on("unmount",()=>{clearTimeout(t)});this.handleTap=(()=>{clearTimeout(t);r()})};i.tag2("viron-toast",'<div class="Toast__message">{opts.message}</div>',"",'class="Toast {\'Toast--visible\' : isVisible, \'Toast--error\' : opts.iserror}" onclick="{getClickHandler(\'handleTap\')}" ontouchstart="{getTouchStartHandler()}" ontouchmove="{getTouchMoveHandler()}" ontouchend="{getTouchEndHandler(\'handleTap\')}"',function(e){this.external(vk)});var mk=function(){const e=this.riotx.get();this.toasts=e.getter("toasts.all");this.listen("toasts",()=>{this.toasts=e.getter("toasts.all");this.update()})};i.tag2("viron-application-toasts",'<virtual each="{toasts}"> <viron-toast id="{id}" message="{message}" autohide="{autoHide}" timeout="{timeout}" iserror="{isError}"></viron-toast> </virtual>',"",'class="Application_Toasts"',function(e){this.external(mk)});var gk=function(){const e=this.riotx.get();this.isLaunched=e.getter("application.isLaunched");this.isNavigating=e.getter("application.isNavigating");this.isNetworking=e.getter("application.isNetworking");this.theme=e.getter("viron.theme");this.pageName=e.getter("location.name");this.isTopPage=e.getter("location.isTop");this.pageRoute=e.getter("location.route");this.endpointsCount=e.getter("endpoints.one");this.endpointFilterText=e.getter("application.endpointFilterText");this.usingBrowser=e.getter("ua.usingBrowser");this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.listen("application",()=>{this.isLaunched=e.getter("application.isLaunched");if(this.isNavigating&&!e.getter("application.isNavigating")){this.refs.main.scrollTop=0}this.isNavigating=e.getter("application.isNavigating");this.isNetworking=e.getter("application.isNetworking");this.endpointFilterText=e.getter("application.endpointFilterText");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.update()});this.listen("viron",()=>{this.theme=e.getter("viron.theme");this.update()});this.listen("location",()=>{this.pageName=e.getter("location.name");this.isTopPage=e.getter("location.isTop");this.pageRoute=e.getter("location.route");this.isAsideClosed=!e.getter("location.isTop")&&!e.getter("application.isMenuOpened");this.update()});this.listen("endpoints",()=>{this.endpointsCount=e.getter("endpoints.count");this.update()});this.listen("ua",()=>{this.usingBrowser=e.getter("ua.usingBrowser");this.update()});this.listen("layout",()=>{this.layoutType=e.getter("layout.type");this.isDesktop=e.getter("layout.isDesktop");this.isMobile=e.getter("layout.isMobile");this.update()});const t=fd(()=>{const t=window.innerWidth;const n=window.innerHeight;e.action("layout.updateSize",t,n)},1e3);this.on("mount",()=>{window.addEventListener("resize",t)}).on("unmount",()=>{window.removeEventListener("resize",t)})};i.tag2("viron",'<div class="Application__container"> <div class="Application__aside" if="{isDesktop}"> <div class="Application__asideAdjuster"> <div class="Application__asideContent"> <viron-application-poster if="{isTopPage}"></viron-application-poster> <viron-application-menu if="{!isTopPage}"></viron-application-menu> </div> </div> </div> <div class="Application__header"> <viron-application-header></viron-application-header> </div> <div class="Application__main" ref="main"> <div class="Application__page"> <div data-is="viron-{pageName}-page" route="{pageRoute}"></div> </div> </div> </div> <viron-application-drawers></viron-application-drawers> <viron-application-mediapreviews></viron-application-mediapreviews> <viron-application-modals></viron-application-modals> <viron-application-popovers></viron-application-popovers> <viron-application-toasts></viron-application-toasts> <viron-application-progress-linear isactive="{isNavigating || isNetworking}"></viron-application-progress-linear> <viron-application-dimmer if="{isNavigating}"></viron-application-dimmer> <viron-application-blocker if="{isNavigating}"></viron-application-blocker> <viron-application-splash if="{!isLaunched}"></viron-application-splash>',"","class=\"Application Application--{usingBrowser} Application--{layoutType} Application--{theme} {isAsideClosed ? 'Application--asideClosed' : ''}\"",function(e){this.external(gk)});window.addEventListener("load",()=>{let e;Promise.resolve().then(()=>Je.init()).then(()=>ba.init()).then(()=>Zc.init()).then(t=>{e=t;window.store=t}).then(()=>{i.mount("viron")}).then(()=>e.action("endpoints.cleanup")).then(()=>Promise.all([e.action("endpoints.tidyUpOrder"),e.action("ua.setup")])).then(()=>va.init(e)).catch(t=>e.action("modals.add","viron-error",{error:t}))})})();
//# sourceMappingURL=app.min.js.map